"use strict";
(self["webpackChunkcdata_arc"] = self["webpackChunkcdata_arc"] || []).push([["settings"],{

/***/ 44595:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ esm_Breadcrumb)
});

// EXTERNAL MODULE: ./node_modules/classnames/index.js
var classnames = __webpack_require__(46942);
var classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);
// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(96540);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/ThemeProvider.js
var ThemeProvider = __webpack_require__(36519);
// EXTERNAL MODULE: ./node_modules/@restart/ui/esm/Anchor.js + 8 modules
var Anchor = __webpack_require__(2571);
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(74848);
;// CONCATENATED MODULE: ./node_modules/react-bootstrap/esm/BreadcrumbItem.js





const BreadcrumbItem = /*#__PURE__*/react.forwardRef(({
  bsPrefix,
  active = false,
  children,
  className,
  // Need to define the default "as" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595
  as: Component = 'li',
  linkAs: LinkComponent = Anchor/* default */.A,
  linkProps = {},
  href,
  title,
  target,
  ...props
}, ref) => {
  const prefix = (0,ThemeProvider/* useBootstrapPrefix */.oU)(bsPrefix, 'breadcrumb-item');
  return /*#__PURE__*/(0,jsx_runtime.jsx)(Component, {
    ref: ref,
    ...props,
    className: classnames_default()(prefix, className, {
      active
    }),
    "aria-current": active ? 'page' : undefined,
    children: active ? children : /*#__PURE__*/(0,jsx_runtime.jsx)(LinkComponent, {
      ...linkProps,
      href: href,
      title: title,
      target: target,
      children: children
    })
  });
});
BreadcrumbItem.displayName = 'BreadcrumbItem';
/* harmony default export */ const esm_BreadcrumbItem = (BreadcrumbItem);
;// CONCATENATED MODULE: ./node_modules/react-bootstrap/esm/Breadcrumb.js





const Breadcrumb = /*#__PURE__*/react.forwardRef(({
  bsPrefix,
  className,
  listProps = {},
  children,
  label = 'breadcrumb',
  // Need to define the default "as" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595
  as: Component = 'nav',
  ...props
}, ref) => {
  const prefix = (0,ThemeProvider/* useBootstrapPrefix */.oU)(bsPrefix, 'breadcrumb');
  return /*#__PURE__*/(0,jsx_runtime.jsx)(Component, {
    "aria-label": label,
    className: className,
    ref: ref,
    ...props,
    children: /*#__PURE__*/(0,jsx_runtime.jsx)("ol", {
      ...listProps,
      className: classnames_default()(prefix, listProps == null ? void 0 : listProps.className),
      children: children
    })
  });
});
Breadcrumb.displayName = 'Breadcrumb';
/* harmony default export */ const esm_Breadcrumb = (Object.assign(Breadcrumb, {
  Item: esm_BreadcrumbItem
}));

/***/ }),

/***/ 29029:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(71083);

axios__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.interceptors.response.clear();
axios__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.interceptors.response.use(function (response) {
  var headers = response.headers.toJSON() || {};
  if (headers["x-cdata-login"] === "true" || headers["x-cdata-unauth"] === "true") {
    window.top.location.reload();
  }
  return response;
}, function (error) {
  var _error$response, _error$config, _error$config2, _error$response2, _error$response3;
  if ((error === null || error === void 0 ? void 0 : error.status) === 412 && error !== null && error !== void 0 && (_error$response = error.response) !== null && _error$response !== void 0 && (_error$response = _error$response.headers) !== null && _error$response !== void 0 && _error$response["last-modified"]) return error.response; // The resource is modified by another user.
  if ((error === null || error === void 0 || (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url) === "src/setAppLogs.rsb") return; // Avoid endless loop
  !axios__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.isCancel(error) && axios__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post("src/setAppLogs.rsb", {
    type: "Error",
    script: (error === null || error === void 0 || (_error$config2 = error.config) === null || _error$config2 === void 0 ? void 0 : _error$config2.url) || "AxiosError: " + ((error === null || error === void 0 || (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) || (error === null || error === void 0 ? void 0 : error.code) || "Unknown"),
    message: (error === null || error === void 0 ? void 0 : error.message) || (error === null || error === void 0 ? void 0 : error.stack) || (error === null || error === void 0 || (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.statusText) || "Unknown",
    timestamp: new Date().toUTCString()
  }, {
    headers: {
      "Content-Type": "application/x-www-form-urlencoded"
    },
    validateStatus: function validateStatus() {
      return true;
    }
  })["catch"](function (error) {
    return Promise.reject(error);
  });
  return Promise.reject(error);
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (axios__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A);

/***/ }),

/***/ 20289:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ ArcSuspense)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96540);

function ArcSuspense(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Suspense, {
    fallback: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
      className: "spinner-grow spinner-grow-sm text-secondary me-2",
      role: "status"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
      className: "visually-hidden"
    }, "Loading...")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
      className: "spinner-grow spinner-grow-sm text-secondary me-2",
      role: "status"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
      className: "visually-hidden"
    }, "Loading...")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
      className: "spinner-grow spinner-grow-sm text-secondary me-2",
      role: "status"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
      className: "visually-hidden"
    }, "Loading...")))
  }, props.children);
}

/***/ }),

/***/ 57491:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ ArcTable)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96540);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5556);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _tanstack_react_table__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1530);
/* harmony import */ var _tanstack_react_table__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(33888);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(25337);
/* harmony import */ var _react_shared_axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(29029);
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }







var tablePropsTypes = {
  className: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().string),
  /**
   * If true, the table will striped.
   */
  striped: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool),
  /**
   * If true, the table will enable a hover state on table rows within body.
   */
  hover: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool)
};
var tableRowPropsTypes = {
  className: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().string),
  /**
   * parameters: 
   *   e: the event.
   *   row: the current row props.
   */
  onClick: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().func)
};
var propsTypes = {
  /**
   * Table column definations. 
   * 
   * Options can be found in https://tanstack.com/table/v8/docs/api/core/column-def.
   */
  columns: prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_3___default().object)),
  /**
   * The sorting parameters that are used in the first loading.
   * 
   * Example: [{id: "timestamp", desc: true}, {id: "name", desc: false}]
   */
  initialSorting: prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_3___default().object)),
  /**
   * The resource URL.
   */
  url: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().string),
  /**
   * The resource URL parameters.
   */
  urlParams: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().object),
  /**
   * The table data. If present, the "url" will be ignored. Paging is not supported in this mode.
   */
  data: prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_3___default().object)),
  /**
   * Additional table props, such as classes.
   */
  tableProps: prop_types__WEBPACK_IMPORTED_MODULE_3___default().shape(tablePropsTypes),
  /**
   * Additional body row props, such as classes.
   */
  tableBodyRowProps: prop_types__WEBPACK_IMPORTED_MODULE_3___default().shape(tableRowPropsTypes),
  /**
   * The table API reference. Available apis:
   *   - reload() : Force reloading the data.
   *   - setUrlParams(urlParams) : Set the urlParams. After changing, the table will reload the data even if the parameters is the same.
   *   - collapseRows() : Collapse all expanded rows.
   */
  tableApiRef: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().object),
  /**
   * Whether support row selection. Defualt is false.
   */
  rowSelection: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool),
  /**
   * Whether support paging. Defualt is true.
   */
  paging: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool),
  /**
   * The table name for local storage.
   */
  storageName: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().string),
  /**
   * If the value is true, all rows become expandable.
   * If the value is a function, the function will be called with each row and return whether to enable detail for that row.
   * The renderRowDetail function will called when expanding a row and the returned value will be displayed.
   */
  enableRowDetail: prop_types__WEBPACK_IMPORTED_MODULE_3___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool), (prop_types__WEBPACK_IMPORTED_MODULE_3___default().func)]),
  /**
   *  This function will called when expanding a row and the returned value will be displayed.
   */
  renderRowDetail: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().func),
  /**
   * The callback when an error happens. The parameter is an object:
   * {
   *   message: "Error Message."
   * }
   */
  onError: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().func),
  /**
   * The callback after the loading complete. The parameter is fetched data.
   */
  onFetchData: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().func),
  /**
   * The callback after the first loading complete. No parameter.
   */
  onInitialComplete: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().func),
  /**
   * The callback after row selection is changed.
   * The parameter #1 is an updater, if you call it with the parameter #2, it will give you the selected rows. The parameter #2 is the previous selected row.
   */
  onRowSelectionChange: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().func),
  /**
   * The default selected rows
   */
  selectedRows: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().object),
  /**
   * The callback after page index changed.
   * The parameter is an object {pageSize, pageIndex}
   */
  onPaginationChange: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().func)
};
var propsDefaults = {
  columns: [],
  initialSorting: [],
  url: null,
  urlParams: null,
  data: null,
  tableProps: null,
  tableBodyRowProps: null,
  tableApiRef: null,
  rowSelection: false,
  paging: true,
  storageName: null,
  enableRowDetail: false,
  renderRowDetail: null,
  onError: null,
  onFetchData: null,
  onInitialComplete: null,
  selectedRows: null,
  onPaginationChange: null
};
var actionCellProps = {
  className: "text-center",
  style: {
    width: "32px"
  }
};
function ArcTable(_ref) {
  var columns = _ref.columns,
    initialSorting = _ref.initialSorting,
    url = _ref.url,
    urlParams = _ref.urlParams,
    data = _ref.data,
    tableProps = _ref.tableProps,
    tableBodyRowProps = _ref.tableBodyRowProps,
    paging = _ref.paging,
    rowSelection = _ref.rowSelection,
    enableRowDetail = _ref.enableRowDetail,
    renderRowDetail = _ref.renderRowDetail,
    onError = _ref.onError,
    onFetchData = _ref.onFetchData,
    onInitialComplete = _ref.onInitialComplete,
    _onRowSelectionChange = _ref.onRowSelectionChange,
    tableApiRef = _ref.tableApiRef,
    storageName = _ref.storageName,
    selectedRows = _ref.selectedRows,
    onPaginationChange = _ref.onPaginationChange;
  /* consts */
  var serverSideData = data == null;
  var tableStriped = (tableProps === null || tableProps === void 0 ? void 0 : tableProps.striped) == null || tableProps.striped;
  var tableHover = (tableProps === null || tableProps === void 0 ? void 0 : tableProps.hover) == null || tableProps.hover;

  /* states */
  var containerRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef();
  var _React$useState = react__WEBPACK_IMPORTED_MODULE_0__.useState(urlParams),
    _React$useState2 = _slicedToArray(_React$useState, 2),
    currentUrlParams = _React$useState2[0],
    setCurrentUrlParams = _React$useState2[1];
  var _React$useState3 = react__WEBPACK_IMPORTED_MODULE_0__.useState(initialSorting),
    _React$useState4 = _slicedToArray(_React$useState3, 2),
    sorting = _React$useState4[0],
    setSorting = _React$useState4[1];
  var _ref2 = paging ? react__WEBPACK_IMPORTED_MODULE_0__.useState({
      pageIndex: 0,
      pageSize: loadGlobalSettings(storageName).pageSize || 10
    }) : react__WEBPACK_IMPORTED_MODULE_0__.useState({
      pageIndex: 0,
      pageSize: 9999
    }),
    _ref3 = _slicedToArray(_ref2, 2),
    _ref3$ = _ref3[0],
    pageIndex = _ref3$.pageIndex,
    pageSize = _ref3$.pageSize,
    setPagination = _ref3[1];
  var _ref4 = serverSideData ? react__WEBPACK_IMPORTED_MODULE_0__.useState({
      count: 0,
      rows: []
    }) : [{
      count: data.length,
      rows: data
    }, function () {}],
    _ref5 = _slicedToArray(_ref4, 2),
    tableData = _ref5[0],
    setTableData = _ref5[1];
  var _React$useState5 = react__WEBPACK_IMPORTED_MODULE_0__.useState(serverSideData),
    _React$useState6 = _slicedToArray(_React$useState5, 2),
    firstLoading = _React$useState6[0],
    setFirstLoading = _React$useState6[1];
  var _React$useState7 = react__WEBPACK_IMPORTED_MODULE_0__.useState(serverSideData),
    _React$useState8 = _slicedToArray(_React$useState7, 2),
    loading = _React$useState8[0],
    setLoading = _React$useState8[1];
  var _React$useState9 = react__WEBPACK_IMPORTED_MODULE_0__.useState(80),
    _React$useState10 = _slicedToArray(_React$useState9, 2),
    loadingPanalHeight = _React$useState10[0],
    setLoadingPanalHeight = _React$useState10[1];
  var _React$useState11 = react__WEBPACK_IMPORTED_MODULE_0__.useState({}),
    _React$useState12 = _slicedToArray(_React$useState11, 2),
    currentRowSelection = _React$useState12[0],
    setCurrentRowSelection = _React$useState12[1];
  var _React$useState13 = react__WEBPACK_IMPORTED_MODULE_0__.useState(0),
    _React$useState14 = _slicedToArray(_React$useState13, 2),
    visibleColumns = _React$useState14[0],
    setVisibleColumns = _React$useState14[1];

  /* members */
  var tableSelectedRows = selectedRows != null ? selectedRows : currentRowSelection;
  var table = (0,_tanstack_react_table__WEBPACK_IMPORTED_MODULE_4__/* .useReactTable */ .N4)({
    data: tableData.rows,
    columns: columns,
    state: {
      sorting: sorting,
      rowSelection: tableSelectedRows,
      pagination: {
        pageIndex: pageIndex,
        pageSize: pageSize
      }
    },
    enableRowSelection: rowSelection,
    manualSorting: serverSideData,
    manualPagination: serverSideData,
    getPaginationRowModel: (0,_tanstack_react_table__WEBPACK_IMPORTED_MODULE_5__/* .getPaginationRowModel */ .kW)(),
    onSortingChange: setSorting,
    onRowSelectionChange: function onRowSelectionChange(updater) {
      if (_onRowSelectionChange != null) {
        _onRowSelectionChange(updater, tableSelectedRows);
      }
      if (selectedRows == null) {
        setCurrentRowSelection(updater);
      }
    },
    getCoreRowModel: (0,_tanstack_react_table__WEBPACK_IMPORTED_MODULE_5__/* .getCoreRowModel */ .HT)(),
    getSortedRowModel: (0,_tanstack_react_table__WEBPACK_IMPORTED_MODULE_5__/* .getSortedRowModel */ .h5)(),
    defaultColumn: {
      size: -1,
      minSize: -1
    }
  });
  var loadData = /*#__PURE__*/function () {
    var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
      var newData;
      return _regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            setLoading(true);
            newData = null;
            _context.prev = 2;
            _context.next = 5;
            return FetchData({
              url: url,
              urlParams: currentUrlParams,
              top: paging ? pageSize : undefined,
              skip: paging ? pageIndex * pageSize : undefined,
              orderBy: sorting.map(function (col) {
                return col.id + " " + (col.desc ? "desc" : "asc");
              }).join(",")
            });
          case 5:
            newData = _context.sent;
            return _context.abrupt("return", newData);
          case 9:
            _context.prev = 9;
            _context.t0 = _context["catch"](2);
            if (onError != null) {
              onError(_context.t0);
            }
            return _context.abrupt("return", {
              count: 0,
              rows: []
            });
          case 13:
            _context.prev = 13;
            setLoading(false);
            if (onFetchData != null) {
              onFetchData(newData);
            }
            if (firstLoading) {
              setFirstLoading(false);
              if (onInitialComplete != null) {
                onInitialComplete();
              }
            }
            return _context.finish(13);
          case 18:
          case "end":
            return _context.stop();
        }
      }, _callee, null, [[2, 9, 13, 18]]);
    }));
    return function loadData() {
      return _ref6.apply(this, arguments);
    };
  }();
  var updateTableData = function updateTableData(data) {
    setTableData(data);
    setCurrentRowSelection({});
    colloapseRows();
  };
  var expandingHandlersRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef({});
  var colloapseRows = function colloapseRows() {
    if (expandingHandlersRef.current != null) {
      Object.values(expandingHandlersRef.current).forEach(function (handler) {
        return handler(false);
      });
    }
  };
  var updatePagination = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(function (pagination) {
    setPagination(pagination);
    pagination.pageSize && pageSize != pagination.pageSize && saveGlobalSettings(storageName, {
      pageSize: pagination.pageSize
    });
    setCurrentRowSelection({});
    if (onPaginationChange != null) onPaginationChange(pagination);
  }, [setPagination, setCurrentRowSelection, onPaginationChange]);

  /* callback */
  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(function () {
    if (serverSideData) {
      var active = true;
      _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var newData;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return loadData();
            case 2:
              newData = _context2.sent;
              if (active && newData != null) {
                updateTableData(newData);
              }
            case 4:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      }))();
      return function () {
        active = false;
      };
    } else {
      if (onInitialComplete != null) {
        onInitialComplete();
      }
    }
  }, [currentUrlParams, sorting, pageIndex, pageSize]);
  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(function () {
    if (containerRef.current != null) {
      setLoadingPanalHeight(containerRef.current.clientHeight);
    }
  });

  // keep updating visible columns for colspan calculation
  var calcVisibleColumns = function calcVisibleColumns() {
    if (containerRef.current != null) {
      var colCount = 0;
      containerRef.current.querySelectorAll(".arc-table:first-child>thead>tr>th").forEach(function (header) {
        if (header.offsetWidth > 0 || header.offsetHeight > 0) {
          colCount++;
        }
      });
      setVisibleColumns(colCount);
    }
  };
  var updateVisibleColumnsTimer = null;
  var updateVisibleColumns = function updateVisibleColumns() {
    clearInterval(updateVisibleColumnsTimer);
    updateVisibleColumnsTimer = setTimeout(calcVisibleColumns, 100);
  };
  window.addEventListener("resize", updateVisibleColumns);
  window.addEventListener("mouseup", updateVisibleColumns);

  /* ref */
  if (tableApiRef != null) {
    tableApiRef.reload = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
      return _regeneratorRuntime().wrap(function _callee3$(_context3) {
        while (1) switch (_context3.prev = _context3.next) {
          case 0:
            if (!(pageIndex != 0)) {
              _context3.next = 4;
              break;
            }
            // pageIndex change will do updateTableData in the useEffect.
            setPagination({
              pageIndex: 0,
              pageSize: pageSize
            });
            _context3.next = 14;
            break;
          case 4:
            if (!serverSideData) {
              _context3.next = 12;
              break;
            }
            _context3.t0 = updateTableData;
            _context3.next = 8;
            return loadData();
          case 8:
            _context3.t1 = _context3.sent;
            (0, _context3.t0)(_context3.t1);
            _context3.next = 14;
            break;
          case 12:
            setCurrentRowSelection({});
            colloapseRows();
          case 14:
          case "end":
            return _context3.stop();
        }
      }, _callee3);
    }));
    tableApiRef.collapseRows = colloapseRows;
    tableApiRef.setUrlParams = /*#__PURE__*/function () {
      var _ref9 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(params) {
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              if (!(JSON.stringify(params) === JSON.stringify(currentUrlParams))) {
                _context4.next = 8;
                break;
              }
              _context4.t0 = updateTableData;
              _context4.next = 4;
              return loadData();
            case 4:
              _context4.t1 = _context4.sent;
              (0, _context4.t0)(_context4.t1);
              _context4.next = 9;
              break;
            case 8:
              setCurrentUrlParams(params);
            case 9:
              setPagination({
                pageIndex: 0,
                pageSize: pageSize
              });
            case 10:
            case "end":
              return _context4.stop();
          }
        }, _callee4);
      }));
      return function (_x) {
        return _ref9.apply(this, arguments);
      };
    }();
    tableApiRef.getUrlParams = function () {
      return currentUrlParams;
    };
    tableApiRef.getSelectedRows = function () {
      return table.getSelectedRowModel().flatRows;
    };
    tableApiRef.setSelectedRows = function (selectedRows) {
      return setCurrentRowSelection(selectedRows);
    };
    tableApiRef.getRows = function () {
      return table.getRowModel().flatRows;
    };
  }
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
    className: "arc-table-container",
    ref: containerRef
  }, loading ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
    className: "arc-table-loading card",
    style: {
      height: loadingPanalHeight + "px"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, "Processing", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, "\xA0"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, "\xA0"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, "\xA0"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, "\xA0")))) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("table", {
    className: "arc-table table " + (tableStriped ? "arc-table-striped " : "") + (tableHover ? "arc-table-hover " : "") + ((tableProps === null || tableProps === void 0 ? void 0 : tableProps.className) || "")
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("thead", null, table.getHeaderGroups().map(function (headerGroup) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(HeaderRow, {
      key: headerGroup.id,
      table: table,
      headerGroup: headerGroup,
      rowSelection: rowSelection,
      enableRowDetail: enableRowDetail
    });
  })), firstLoading ? null : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("tbody", null, table.getRowModel().rows.length > 0 ? table.getRowModel().rows.map(function (row, rowIndex) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(BodyRow, {
      key: pageIndex * pageSize + rowIndex,
      row: row,
      rowIndex: rowIndex,
      striped: tableStriped,
      rowSelection: rowSelection,
      enableRowDetail: enableRowDetail,
      renderRowDetail: renderRowDetail,
      expandingHandlers: expandingHandlersRef.current,
      tableBodyRowProps: tableBodyRowProps,
      visibleColumns: visibleColumns
    });
  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr", {
    className: tableBodyRowProps === null || tableBodyRowProps === void 0 ? void 0 : tableBodyRowProps.className
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", {
    className: "arc-table-empty",
    colSpan: visibleColumns > 0 ? visibleColumns : table.getVisibleLeafColumns().length + (enableRowDetail ? 1 : 0) + (rowSelection ? 1 : 0)
  }, "No data available in table")))), paging ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(Pagination, {
    totalCount: tableData.count,
    pageIndex: pageIndex,
    pageSize: pageSize,
    onPaginationChange: updatePagination
  }) : null);
}
ArcTable.createColumnHelper = _tanstack_react_table__WEBPACK_IMPORTED_MODULE_5__/* .createColumnHelper */ .FB;
ArcTable.propTypes = propsTypes;
ArcTable.defaultProps = propsDefaults;
function HeaderRow(_ref10) {
  var table = _ref10.table,
    headerGroup = _ref10.headerGroup,
    rowSelection = _ref10.rowSelection,
    enableRowDetail = _ref10.enableRowDetail;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr", {
    key: headerGroup.id
  }, rowSelection ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(RowSelectionHeader, {
    table: table
  }) : null, enableRowDetail ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(RowExpandHeader, null) : null, headerGroup.headers.map(function (header) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("th", {
      key: header.id,
      className: (header.column.columnDef.headerClassName != null ? header.column.columnDef.headerClassName + " " : "") + (header.column.getCanSort() ? "sorting " + (header.column.getIsSorted() ? "sorting_" + header.column.getIsSorted() : "") : ""),
      style: {
        width: header.getSize() > 0 ? header.getSize() : null
      },
      onClick: header.column.getToggleSortingHandler()
    }, header.isPlaceholder /* This is for column groups, we may not need it.*/ ? null : (0,_tanstack_react_table__WEBPACK_IMPORTED_MODULE_4__/* .flexRender */ .Kv)(header.column.columnDef.header, header.getContext()));
  }));
}
function BodyRow(_ref11) {
  var row = _ref11.row,
    rowIndex = _ref11.rowIndex,
    rowSelection = _ref11.rowSelection,
    expandingHandlers = _ref11.expandingHandlers,
    striped = _ref11.striped,
    tableBodyRowProps = _ref11.tableBodyRowProps,
    enableRowDetail = _ref11.enableRowDetail,
    renderRowDetail = _ref11.renderRowDetail,
    visibleColumns = _ref11.visibleColumns;
  /* states */
  var _React$useState15 = react__WEBPACK_IMPORTED_MODULE_0__.useState(false),
    _React$useState16 = _slicedToArray(_React$useState15, 2),
    expanding = _React$useState16[0],
    setExpanding = _React$useState16[1];

  /* variable */
  var stripedClass = (striped ? "arc-table-row-" + (rowIndex % 2 == 0 ? "odd" : "even") : "") + " ";
  var rowProps = _objectSpread(_objectSpread({}, tableBodyRowProps), {}, {
    className: stripedClass + ((tableBodyRowProps === null || tableBodyRowProps === void 0 ? void 0 : tableBodyRowProps.className) != null ? tableBodyRowProps.className : ""),
    onClick: (tableBodyRowProps === null || tableBodyRowProps === void 0 ? void 0 : tableBodyRowProps.onClick) != null ? function (e) {
      return tableBodyRowProps.onClick(e, row);
    } : null
  });
  var currentRowEnableDetail = enableRowDetail instanceof Function ? enableRowDetail(row) : enableRowDetail;
  var detail = expanding && currentRowEnableDetail ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr", {
    className: "arc-table-row-detail"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", {
    colSpan: visibleColumns > 0 ? visibleColumns : row.getVisibleCells().length + 1 + (rowSelection ? 1 : 0)
  }, renderRowDetail != null ? renderRowDetail(row) : null)) : null;

  /* callback */
  var onClickCell = function onClickCell(e) {
    if (!(window.getSelection && window.getSelection().rangeCount > 0 && window.getSelection().getRangeAt(0).toString().length > 0)) {
      if (e.currentTarget.classList.contains("text-notruncate")) {
        e.currentTarget.classList.remove("text-notruncate");
      } else {
        e.currentTarget.classList.add("text-notruncate");
      }
    }
  };
  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(function () {
    if (expandingHandlers != null) {
      expandingHandlers[row.id] = function (action) {
        return setExpanding(action);
      };
      return function () {
        return delete expandingHandlers[row.id];
      };
    }
  }, []);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr", {
    className: rowProps.className + (rowProps.onClick ? "arc-table-row-clickable" : ""),
    onClick: rowProps.onClick
  }, rowSelection ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(RowSelectionCell, {
    row: row
  }) : null, currentRowEnableDetail ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(RowExpandCell, {
    expanding: expanding,
    onClick: function onClick() {
      return setExpanding(!expanding);
    }
  }) : null, row.getVisibleCells().map(function (cell) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", {
      key: cell.id,
      className: cell.column.columnDef.className,
      style: {
        width: cell.column.getSize() > 0 ? cell.column.getSize() : null
      },
      onClick: onClickCell
    }, (0,_tanstack_react_table__WEBPACK_IMPORTED_MODULE_4__/* .flexRender */ .Kv)(cell.column.columnDef.cell, cell.getContext()));
  })), detail);
}
function RowSelectionHeader(_ref12) {
  var table = _ref12.table;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("th", actionCellProps, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {
    type: "checkbox",
    className: "form-check-input",
    checked: table.getIsAllPageRowsSelected(),
    onChange: table.getToggleAllPageRowsSelectedHandler(),
    onClick: function onClick(e) {
      return e.stopPropagation();
    }
  }));
}
function RowSelectionCell(_ref13) {
  var row = _ref13.row;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", actionCellProps, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {
    type: "checkbox",
    className: "form-check-input",
    checked: row.getIsSelected(),
    onChange: row.getToggleSelectedHandler(),
    onClick: function onClick(e) {
      return e.stopPropagation();
    }
  }));
}
function RowExpandHeader() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("th", actionCellProps);
}
function RowExpandCell(_ref14) {
  var expanding = _ref14.expanding,
    _onClick = _ref14.onClick;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", actionCellProps, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("i", {
    className: "fa " + (expanding ? "fa-minus-circle" : "fa-plus-circle"),
    role: "button",
    onClick: function onClick(e) {
      e.stopPropagation();
      _onClick(e);
    }
  }));
}
function Pagination(_ref15) {
  var pageIndex = _ref15.pageIndex,
    pageSize = _ref15.pageSize,
    totalCount = _ref15.totalCount,
    onPaginationChange = _ref15.onPaginationChange;
  /* variable */
  pageIndex = pageIndex !== null && pageIndex !== void 0 ? pageIndex : 0;
  pageSize = pageSize !== null && pageSize !== void 0 ? pageSize : 10;

  /* members */
  var tableInfo = _utils__WEBPACK_IMPORTED_MODULE_1__/* .FormatString */ .FJ("Showing {0} to {1} of {2} entries", totalCount > 0 ? Math.min(pageIndex * pageSize + 1, totalCount) : 0, totalCount > 0 ? Math.min((pageIndex + 1) * pageSize, totalCount) : 0, totalCount);

  /* callback */
  var onPageIndexChange = function onPageIndexChange(pageIndex) {
    if (onPaginationChange != null) {
      onPaginationChange({
        pageIndex: pageIndex,
        pageSize: pageSize
      });
    }
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
    className: "row arc-table-pagination"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
    className: "col-md-auto pagination-table-info"
  }, tableInfo), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
    className: "col-md-auto ms-auto pagination-size-selector"
  }, "Records per page:", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("select", {
    value: pageSize,
    onChange: function onChange(e) {
      if (onPaginationChange != null) {
        onPaginationChange({
          pageIndex: 0,
          pageSize: Number(e.target.value)
        });
      }
    }
  }, [10, 20, 50, 100, 200, 500].map(function (pageSize) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {
      key: pageSize,
      value: pageSize
    }, pageSize);
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
    className: "col-md-auto pagination-nav-container"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(PageNav, {
    pageCount: Math.ceil(totalCount / pageSize),
    pageIndex: pageIndex,
    onPageIndexChange: onPageIndexChange
  })));
}
function PageNav(_ref16) {
  var pageIndex = _ref16.pageIndex,
    pageCount = _ref16.pageCount,
    onPageIndexChange = _ref16.onPageIndexChange;
  /* variable */
  pageIndex = pageIndex !== null && pageIndex !== void 0 ? pageIndex : 0;

  /* members */
  var pageNumbers = function () {
    if (pageCount <= 7) {
      return Array.from(new Array(pageCount), function (x, i) {
        return i + 1;
      });
    } else {
      var cursor = Math.min(Math.max(pageIndex + 1, 4), pageCount - 3);
      return [1, cursor > 4 ? -1 : 2, cursor - 1, cursor, cursor + 1, cursor < pageCount - 3 ? -1 : pageCount - 1, pageCount];
    }
  }();

  /* callback */
  var onPageItemClick = function onPageItemClick(text) {
    var newIndex = function () {
      switch (text) {
        case "prev":
          return Math.max(pageIndex - 1, 0);
        case "next":
          return Math.min(pageIndex + 1, pageCount - 1);
        default:
          return Number(text) - 1;
      }
    }();
    if (onPageIndexChange != null) {
      onPageIndexChange(newIndex);
    }
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul", {
    className: "pagination pagination-nav"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", {
    className: "page-item" + (pageIndex <= 0 ? " disabled" : ""),
    onClick: function onClick(e) {
      if (pageIndex > 0) {
        onPageItemClick(e.currentTarget.textContent);
      }
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("a", {
    className: "page-link javascript-link"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("i", {
    className: "fa fa-angle-left"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
    className: "visually-hidden"
  }, "prev"))), pageNumbers.map(function (p, i) {
    return p > 0 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", {
      key: i,
      className: "page-item" + (pageIndex == p - 1 ? " active" : ""),
      onClick: function onClick(e) {
        return onPageItemClick(e.currentTarget.textContent);
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("a", {
      className: "page-link javascript-link"
    }, p)) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ExpandablePageLink, {
      key: i,
      start: pageNumbers[i - 1] + 1,
      end: pageNumbers[i + 1],
      onClick: onPageItemClick
    });
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", {
    className: "page-item" + (pageCount <= 0 || pageIndex >= pageCount - 1 ? " disabled" : ""),
    onClick: function onClick(e) {
      if (pageCount > 0 && pageIndex < pageCount - 1) {
        onPageItemClick(e.currentTarget.textContent);
      }
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("a", {
    className: "page-link javascript-link"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("i", {
    className: "fa fa-angle-right"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
    className: "visually-hidden"
  }, "next"))));
}
function ExpandablePageLink(_ref17) {
  var start = _ref17.start,
    end = _ref17.end,
    _onClick2 = _ref17.onClick;
  var elementRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef();
  var bootstrapObjRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef();
  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(function () {
    if (elementRef.current != null) {
      var _window$bootstrap;
      if ((_window$bootstrap = window.bootstrap) !== null && _window$bootstrap !== void 0 && _window$bootstrap.Dropdown) {
        bootstrapObjRef.current = new window.bootstrap.Dropdown(elementRef.current);
      } else {
        __webpack_require__.e(/* import() */ "vendors-node_modules_bootstrap_dist_js_bootstrap_esm_js").then(__webpack_require__.bind(__webpack_require__, 46134)).then(function (bootstrap) {
          if (elementRef.current != null) {
            bootstrapObjRef.current = new bootstrap.Dropdown(elementRef.current);
          }
        });
      }
    }
    return function () {
      if (bootstrapObjRef.current != null) {
        bootstrapObjRef.current.dispose();
      }
    };
  }, []);
  return (
    /*#__PURE__*/
    // Let the <li> element trigger the dropdown
    react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", {
      className: "page-item disabled"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
      className: "dropup"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("a", {
      className: "page-link javascript-link dropdown-toggle",
      "data-bs-toggle": "dropdown",
      ref: elementRef
    }, "..."), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul", {
      className: "dropdown-menu dropdown-menu-end arc-table-expand-page-link"
    }, function () {
      var items = [];
      var _loop = function _loop() {
        var pageIndex = i;
        items.push(/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", {
          key: pageIndex
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("a", {
          className: "dropdown-item javascript-link",
          onClick: function onClick() {
            return _onClick2(pageIndex);
          }
        }, _utils__WEBPACK_IMPORTED_MODULE_1__/* .FormatString */ .FJ("Page {0}", i))));
      };
      for (var i = start; i < end; i++) {
        _loop();
      }
      return items;
    }())))
  );
}
function FetchData(_x2) {
  return _FetchData.apply(this, arguments);
}
/* Global settings. */
function _FetchData() {
  _FetchData = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(options) {
    var response, items, count, rows, errorMsg, _parseInt;
    return _regeneratorRuntime().wrap(function _callee5$(_context5) {
      while (1) switch (_context5.prev = _context5.next) {
        case 0:
          _context5.next = 2;
          return _react_shared_axios__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.get(options.url, {
            params: _objectSpread(_objectSpread({}, options.urlParams), {}, {
              "@json": true,
              "$count": true,
              "$top": options.top,
              "$skip": options.skip,
              "$orderBy": options.orderBy,
              "nonce": parseInt(Math.random() * 10e10)
            })
          })["catch"](function (error) {
            var status = error.response.status;
            // 404: IIS 7 will return an HTTP 404 error when an HTTP request exceeds the request limits.
            // 431: Request Header Fields Too Large
            // 413: Payload Too Large
            // 414: URI Too Long
            if (status === 414 || status === 413 || status === 404 || status === 431) {
              error.message += "\nThe URI length exceeds the maximum length of the web server. Please contact arcsupport@cdata.com for more details.";
            }
            throw error;
          });
        case 2:
          response = _context5.sent;
          items = response.data.items;
          count = 0;
          rows = [];
          if (!Array.isArray(items)) {
            _context5.next = 15;
            break;
          }
          if (!(items.length > 0)) {
            _context5.next = 15;
            break;
          }
          errorMsg = items[0]["rsb:emessage"] || items[0]["errormessage"];
          if (!(errorMsg != null)) {
            _context5.next = 13;
            break;
          }
          throw {
            message: errorMsg
          };
        case 13:
          count = (_parseInt = parseInt(items[0].count)) !== null && _parseInt !== void 0 ? _parseInt : 0;
          if (count > 0) {
            rows = items;
          } else {
            rows = [];
          }
        case 15:
          return _context5.abrupt("return", {
            count: count,
            rows: rows
          });
        case 16:
        case "end":
          return _context5.stop();
      }
    }, _callee5);
  }));
  return _FetchData.apply(this, arguments);
}
var ARC_TABLE_GLOBAL_SETTINGS_KEY = "cdata.arc.arctable.globalsettings";
var loadGlobalSettings = function loadGlobalSettings(storageName) {
  var _window;
  var state = (_window = window) === null || _window === void 0 || (_window = _window.localStorage) === null || _window === void 0 ? void 0 : _window.getItem(ARC_TABLE_GLOBAL_SETTINGS_KEY);
  if (state) {
    try {
      var stateObj = JSON.parse(state);
      if (storageName && stateObj !== null && stateObj !== void 0 && stateObj[storageName]) {
        return stateObj[storageName];
      } else if (stateObj !== null && stateObj !== void 0 && stateObj._default) {
        return stateObj._default;
      } else {
        return {};
      }
    } catch (_unused) {
      return {};
    }
  } else {
    return {};
  }
};
var saveGlobalSettings = function saveGlobalSettings(storageName, settings) {
  var _window2, _window3;
  var state = (_window2 = window) === null || _window2 === void 0 || (_window2 = _window2.localStorage) === null || _window2 === void 0 ? void 0 : _window2.getItem(ARC_TABLE_GLOBAL_SETTINGS_KEY);
  var newSettings = state ? JSON.parse(state) : {};
  if (storageName) {
    newSettings[storageName] = settings;
  } else {
    newSettings._default = settings;
  }
  (_window3 = window) === null || _window3 === void 0 || (_window3 = _window3.localStorage) === null || _window3 === void 0 || _window3.setItem(ARC_TABLE_GLOBAL_SETTINGS_KEY, JSON.stringify(newSettings));
};

/***/ }),

/***/ 4938:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   G: () => (/* binding */ DropdownHacker)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96540);


// In a page that uses both Bootstrap and ReactBootstrap, if the Dropdown contains an Input and the focus triggers "Esc" within the input, or if the arrow keys up or down are triggered directly in the drop-down menu, Bootstrap's javascript will report an error: "Cannot read properties of undefined (reading 'parentNode')". The toggler element in Bootstrap contains this attribute, but ReactBootstrap's Dropdown component does not. Bootstrap will search for parentNode through the selector [data-bs-toggle="dropdown"], resulting in an error being reported.

// Now, the footer.rst will contain <script src="[page.linkbase]ui/bootstrap/js/bootstrap.bundle.min.js"></script>, causing all React interfaces to encounter this problem.  So, add this hacker for all <Dropdown /> component.
function DropdownHacker() {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
    "data-bs-toggle": "dropdown"
  });
}

/***/ }),

/***/ 60208:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96540);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(44595);


function MessageViewNav(_ref) {
  var items = _ref.items,
    className = _ref.className;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A, {
    className: className
  }, items.map(function (item, index) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.Item, {
      key: index,
      href: item.href,
      active: index == items.length - 1
    }, item.name);
  }));
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MessageViewNav);

/***/ }),

/***/ 69404:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EX: () => (/* binding */ CustomizeSettingsTab),
/* harmony export */   GY: () => (/* binding */ ImportCustomConflictResolutionWorkspacesTab),
/* harmony export */   as: () => (/* binding */ ImportCustomConflictResolutionEDITab),
/* harmony export */   dF: () => (/* binding */ CustomizeEDITab),
/* harmony export */   dK: () => (/* binding */ ImportCustomConflictResolutionSettingsTab),
/* harmony export */   le: () => (/* binding */ CustomizeWorkspacesTab),
/* harmony export */   zM: () => (/* binding */ CustomizeFlowTab)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96540);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(19967);
/* harmony import */ var _searchbox__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(58447);
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }






var ImportCustomConflictResolutionWorkspacesTab = /*#__PURE__*/function (_React$Component) {
  function ImportCustomConflictResolutionWorkspacesTab(props) {
    var _this;
    _classCallCheck(this, ImportCustomConflictResolutionWorkspacesTab);
    _this = _callSuper(this, ImportCustomConflictResolutionWorkspacesTab, [props]);
    _defineProperty(_this, "handleSearchTextChange", function (text) {
      _this.setState({
        searchText: text
      });
    });
    _defineProperty(_this, "handleWorkspaceItemCollapse", function (workspaceId, collapsed) {
      var workspacesCollapsed = _utils__WEBPACK_IMPORTED_MODULE_1__/* .ImportUtils */ .P.Clone(_this.state.workspacesCollapsed);
      workspacesCollapsed[workspaceId] = collapsed;
      if (collapsed) {
        Object.keys(workspacesCollapsed).forEach(function (key) {
          if (key != workspaceId) {
            workspacesCollapsed[key] = false;
          }
        });
      }
      _this.setState({
        workspacesCollapsed: workspacesCollapsed
      });
    });
    _this.state = {
      searchText: null,
      workspacesCollapsed: {}
    };
    return _this;
  }
  _inherits(ImportCustomConflictResolutionWorkspacesTab, _React$Component);
  return _createClass(ImportCustomConflictResolutionWorkspacesTab, [{
    key: "render",
    value: function render() {
      var _this2 = this;
      var searchText = this.state.searchText && this.state.searchText.toLowerCase();
      var displayingWorkspaces = [];
      Object.values(this.props.workspacesInfo).forEach(function (workspaceInfo) {
        var hasDisplayingConnector = false;
        var hasDisplayingAPI = false;
        if (workspaceInfo.connectors) {
          hasDisplayingConnector = Object.values(workspaceInfo.connectors).some(function (connectorInfo) {
            return connectorInfo.existing && connectorInfo.action != "ignore" && (!searchText || connectorInfo.id.toLowerCase().includes(searchText));
          });
        }
        if (workspaceInfo.apis) {
          hasDisplayingAPI = Object.values(workspaceInfo.apis).some(function (apiInfo) {
            return apiInfo.existing && apiInfo.action != "ignore" && (!searchText || apiInfo.name.toLowerCase().includes(searchText));
          });
        }
        if (hasDisplayingConnector || hasDisplayingAPI) {
          displayingWorkspaces.push(workspaceInfo);
        }
      });
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "mb-3"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_searchbox__WEBPACK_IMPORTED_MODULE_2__/* .SearchBox */ .G, {
        searchText: this.state.searchText,
        onChanged: this.handleSearchTextChange
      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("p", null, "Review the workspace import conflicts. Workspaces that share a name with imported workspaces will have the imported workspace's connectors added to it."), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "alert alert-warning",
        role: "alert"
      }, "If existing flow APIs or connectors are set to be replaced, the current ones will be removed from their respective workspaces and added to the imported workspace instead. Please note, this may cause existing flows to no longer function. When replacing flow APIs associated connectors that are not replaced will be orphaned within their workspace."), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, displayingWorkspaces.map(function (info) {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ImportCustomConflictResolutionWorkspacesItem, {
          key: info.id,
          workspaceInfo: info,
          searchText: searchText,
          onWorkspaceActionChange: _this2.props.onWorkspaceActionChange,
          onConnectorActionChange: _this2.props.onConnectorActionChange,
          onAPIActionChange: _this2.props.onAPIActionChange,
          collapsed: _this2.state.workspacesCollapsed[info.id],
          onWorkspaceCollapseChanged: _this2.handleWorkspaceItemCollapse,
          isFlow: _this2.props.isFlow
        });
      })));
    }
  }]);
}(react__WEBPACK_IMPORTED_MODULE_0__.Component);
var ImportCustomConflictResolutionSettingsTab = /*#__PURE__*/function (_React$Component2) {
  function ImportCustomConflictResolutionSettingsTab(props) {
    var _this3;
    _classCallCheck(this, ImportCustomConflictResolutionSettingsTab);
    _this3 = _callSuper(this, ImportCustomConflictResolutionSettingsTab, [props]);
    _defineProperty(_this3, "handleSectionItemCollapse", function (section, collapsed) {
      var sectionsCollapsed = _utils__WEBPACK_IMPORTED_MODULE_1__/* .ImportUtils */ .P.Clone(_this3.state.sectionsCollapsed);
      sectionsCollapsed[section] = collapsed;
      if (collapsed) {
        Object.keys(sectionsCollapsed).forEach(function (key) {
          if (key != section) {
            sectionsCollapsed[key] = false;
          }
        });
      }
      _this3.setState({
        sectionsCollapsed: sectionsCollapsed
      });
    });
    _this3.state = {
      sectionsCollapsed: {}
    };
    return _this3;
  }
  _inherits(ImportCustomConflictResolutionSettingsTab, _React$Component2);
  return _createClass(ImportCustomConflictResolutionSettingsTab, [{
    key: "render",
    value: function render() {
      var _this4 = this;
      var displaySections = [];
      if (this.props.settingsInfo.profiles) {
        var profileInfo = {};
        profileInfo.name = "profiles";
        profileInfo.insideNames = {};
        for (var _i = 0, _Object$values = Object.values(this.props.settingsInfo.profiles); _i < _Object$values.length; _i++) {
          var nameInfo = _Object$values[_i];
          if (nameInfo.action != "ignore") {
            profileInfo.insideNames[nameInfo.name] = nameInfo;
          }
        }
        if (Object.keys(profileInfo.insideNames).length > 0) {
          displaySections.push(profileInfo);
        }
      }
      if (this.props.settingsInfo.settings) {
        for (var _i2 = 0, _Object$values2 = Object.values(this.props.settingsInfo.settings); _i2 < _Object$values2.length; _i2++) {
          var info = _Object$values2[_i2];
          if (info.action != "ignore") {
            displaySections.push(info);
          }
        }
      }
      if (this.props.settingsInfo.users) {
        var userInfo = {};
        userInfo.name = "users";
        userInfo.insideNames = {};
        for (var _i3 = 0, _Object$values3 = Object.values(this.props.settingsInfo.users); _i3 < _Object$values3.length; _i3++) {
          var _nameInfo = _Object$values3[_i3];
          if (_nameInfo.existing && _nameInfo.action != "ignore") {
            userInfo.insideNames[_nameInfo.name] = _nameInfo;
          }
        }
        if (Object.keys(userInfo.insideNames).length > 0) {
          displaySections.push(userInfo);
        }
      }
      if (this.props.settingsInfo.roles) {
        var roleInfo = {};
        roleInfo.name = "roles";
        roleInfo.insideNames = {};
        for (var _i4 = 0, _Object$values4 = Object.values(this.props.settingsInfo.roles); _i4 < _Object$values4.length; _i4++) {
          var _nameInfo2 = _Object$values4[_i4];
          if (_nameInfo2.existing && _nameInfo2.action != "ignore") {
            roleInfo.insideNames[_nameInfo2.id] = _nameInfo2;
          }
        }
        if (Object.keys(roleInfo.insideNames).length > 0) {
          displaySections.push(roleInfo);
        }
      }
      if (this.props.settingsInfo.certificates) {
        var certificateInfo = {};
        certificateInfo.name = "certificates";
        certificateInfo.insideNames = {};
        for (var _i5 = 0, _Object$values5 = Object.values(this.props.settingsInfo.certificates); _i5 < _Object$values5.length; _i5++) {
          var _nameInfo3 = _Object$values5[_i5];
          if (_nameInfo3.existing && _nameInfo3.action != "ignore") {
            certificateInfo.insideNames[_nameInfo3.name] = _nameInfo3;
          }
        }
        if (Object.keys(certificateInfo.insideNames).length > 0) {
          displaySections.push(certificateInfo);
        }
      }
      if (this.props.settingsInfo.connections) {
        var connInfo = {};
        connInfo.name = "connections";
        connInfo.insideNames = {};
        for (var _i6 = 0, _Object$values6 = Object.values(this.props.settingsInfo.connections); _i6 < _Object$values6.length; _i6++) {
          var _nameInfo4 = _Object$values6[_i6];
          if (_nameInfo4.existing && _nameInfo4.action != "ignore") {
            connInfo.insideNames[_nameInfo4.category + ":" + _nameInfo4.name] = _nameInfo4;
          }
        }
        if (Object.keys(connInfo.insideNames).length > 0) {
          displaySections.push(connInfo);
        }
      }
      if (this.props.settingsInfo.vaults) {
        var vaultInfo = {};
        vaultInfo.name = "vaults";
        vaultInfo.insideNames = {};
        for (var _i7 = 0, _Object$values7 = Object.values(this.props.settingsInfo.vaults); _i7 < _Object$values7.length; _i7++) {
          var _nameInfo5 = _Object$values7[_i7];
          if (_nameInfo5.existing && _nameInfo5.action != "ignore") {
            vaultInfo.insideNames[_nameInfo5.id] = _nameInfo5;
          }
        }
        if (Object.keys(vaultInfo.insideNames).length > 0) {
          displaySections.push(vaultInfo);
        }
      }
      if (this.props.settingsInfo.reports) {
        var reportInfo = {};
        reportInfo.name = "reports";
        reportInfo.insideNames = {};
        for (var _i8 = 0, _Object$values8 = Object.values(this.props.settingsInfo.reports); _i8 < _Object$values8.length; _i8++) {
          var _nameInfo6 = _Object$values8[_i8];
          if (_nameInfo6.existing && _nameInfo6.action != "ignore") {
            reportInfo.insideNames[_nameInfo6.name] = _nameInfo6;
          }
        }
        if (Object.keys(reportInfo.insideNames).length > 0) {
          displaySections.push(reportInfo);
        }
      }
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("p", null, "Review the settings import conflict."), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "alert alert-warning",
        role: "alert"
      }, "Replacing existing settings may cause existing flows to no longer function. Also, not importing settings may cause imported flows to not function."), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, Object.values(displaySections).map(function (info) {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ImportCustomConflictResolutionSectionItem, {
          key: info.name.toLowerCase(),
          name: info.name,
          sectionInfo: info,
          onSectionActionChange: _this4.props.onSectionActionChange,
          onNameActionChange: _this4.props.onNameActionChange,
          collapsed: _this4.state.sectionsCollapsed[info.name],
          onSectionCollapseChanged: _this4.handleSectionItemCollapse
        });
      })));
    }
  }]);
}(react__WEBPACK_IMPORTED_MODULE_0__.Component);
var ImportCustomConflictResolutionEDITab = /*#__PURE__*/function (_React$Component3) {
  function ImportCustomConflictResolutionEDITab(props) {
    var _this5;
    _classCallCheck(this, ImportCustomConflictResolutionEDITab);
    _this5 = _callSuper(this, ImportCustomConflictResolutionEDITab, [props]);
    _this5.state = {};
    return _this5;
  }
  _inherits(ImportCustomConflictResolutionEDITab, _React$Component3);
  return _createClass(ImportCustomConflictResolutionEDITab, [{
    key: "render",
    value: function render() {
      var _this6 = this;
      var partnerInfos = [];
      var documentInfos = [];
      if (this.props.settingsInfo.partners) {
        for (var _i9 = 0, _Object$values9 = Object.values(this.props.settingsInfo.partners); _i9 < _Object$values9.length; _i9++) {
          var partnerInfo = _Object$values9[_i9];
          if (partnerInfo.existing && partnerInfo.action != "ignore") {
            partnerInfos.push(partnerInfo);
          }
        }
      }
      if (this.props.settingsInfo.documents) {
        for (var _i10 = 0, _Object$values10 = Object.values(this.props.settingsInfo.documents); _i10 < _Object$values10.length; _i10++) {
          var documentInfo = _Object$values10[_i10];
          if (documentInfo.existing && documentInfo.action != "ignore") {
            documentInfos.push(documentInfo);
          }
        }
      }
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("p", null, "Review the Partner and Document workspace import conflicts below."), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "alert alert-warning",
        role: "alert"
      }, "Replacing existing Partner/Document may cause existing workflows to no longer function. Also, not importing Partner/Document may cause imported workflows to not function."), partnerInfos && partnerInfos.length > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "row mb-2"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("b", null, "Partners:"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, partnerInfos.map(function (info) {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ImportCustomConflictResolutionEDIItem, {
          key: info.id.toLowerCase(),
          info: info,
          type: "partner",
          onPartnerActionChange: _this6.props.onPartnerActionChange,
          onDocumentActionChange: _this6.props.onDocumentActionChange
        });
      }))), documentInfos && documentInfos.length > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "row mb-2"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("b", null, "Documents:"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, documentInfos.map(function (info) {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ImportCustomConflictResolutionEDIItem, {
          key: info.id.toLowerCase(),
          info: info,
          type: "document",
          onPartnerActionChange: _this6.props.onPartnerActionChange,
          onDocumentActionChange: _this6.props.onDocumentActionChange
        });
      }))));
    }
  }]);
}(react__WEBPACK_IMPORTED_MODULE_0__.Component);
var CustomizeSettingsTab = /*#__PURE__*/function (_React$Component4) {
  function CustomizeSettingsTab(props) {
    var _this7;
    _classCallCheck(this, CustomizeSettingsTab);
    _this7 = _callSuper(this, CustomizeSettingsTab, [props]);
    _defineProperty(_this7, "handleSelectAllClick", function () {
      var nameActions = _this7.state.nameActions;
      var nameActionChangeHandler = _this7.props.onNameActionChange;
      Object.keys(nameActions).forEach(function (key) {
        if (nameActions[key] != "skip" && nameActionChangeHandler) {
          nameActionChangeHandler(key, "skip");
        }
        nameActions[key].action = "skip";
      });
      _this7.setState({
        nameActions: nameActions
      });
    });
    _defineProperty(_this7, "handleDeselectAllClick", function () {
      var nameActions = _this7.state.nameActions;
      var nameActionChangeHandler = _this7.props.onNameActionChange;
      Object.keys(nameActions).forEach(function (key) {
        if (nameActions[key] != "ignore" && nameActionChangeHandler) {
          nameActionChangeHandler(key, "ignore");
        }
        nameActions[key].action = "ignore";
      });
      _this7.setState({
        nameActions: nameActions
      });
    });
    _defineProperty(_this7, "handleSettingsItemCheck", function (event) {
      var nameActions = _this7.state.nameActions;
      var nameActionChangeHandler = _this7.props.onNameActionChange;
      var action = event.target.checked ? "skip" : "ignore";
      var section = event.target.dataset.section;
      if (nameActionChangeHandler && nameActions[section] != action) {
        nameActionChangeHandler(section, action);
      }
      nameActions[section].action = action;
      _this7.setState({
        nameActions: nameActions
      });
    });
    var _nameActions = {};
    if (props.settingsInfo.profiles) {
      var action = "ignore";
      Object.values(props.settingsInfo.profiles).forEach(function (info) {
        if (info.action != "ignore") {
          action = "skip";
        }
      });
      _nameActions.profiles = {
        action: action
      };
    }
    if (props.settingsInfo.settings) {
      var _action = "ignore";
      Object.values(props.settingsInfo.settings).forEach(function (info) {
        _action = "ignore";
        if (info.action != "ignore") {
          _action = "skip";
        }
        _nameActions[info.name] = {
          action: _action
        };
      });
    }
    if (props.settingsInfo.users) {
      var _action2 = "ignore";
      Object.values(props.settingsInfo.users).forEach(function (info) {
        _action2 = "ignore";
        if (info.action != "ignore") {
          _action2 = "skip";
        }
      });
      _nameActions.users = {
        action: _action2
      };
    }
    if (props.settingsInfo.roles) {
      var _action3 = "ignore";
      Object.values(props.settingsInfo.roles).forEach(function (info) {
        _action3 = "ignore";
        if (info.action != "ignore") {
          _action3 = "skip";
        }
      });
      _nameActions.roles = {
        action: _action3
      };
    }
    if (props.settingsInfo.certificates) {
      var _action4 = "ignore";
      Object.values(props.settingsInfo.certificates).forEach(function (info) {
        _action4 = "ignore";
        if (info.action != "ignore") {
          _action4 = "skip";
        }
      });
      _nameActions.certificates = {
        action: _action4
      };
    }
    if (props.settingsInfo.connections) {
      var _action5 = "ignore";
      Object.values(props.settingsInfo.connections).forEach(function (info) {
        _action5 = "ignore";
        if (info.action != "ignore") {
          _action5 = "skip";
        }
      });
      _nameActions.connections = {
        action: _action5
      };
    }
    if (props.settingsInfo.vaults) {
      var _action6 = "ignore";
      Object.values(props.settingsInfo.vaults).forEach(function (info) {
        _action6 = "ignore";
        if (info.action != "ignore") {
          _action6 = "skip";
        }
      });
      _nameActions.vaults = {
        action: _action6
      };
    }
    if (props.settingsInfo.reports) {
      var _action7 = "ignore";
      Object.values(props.settingsInfo.reports).forEach(function (info) {
        _action7 = "ignore";
        if (info.action != "ignore") {
          _action7 = "skip";
        }
      });
      _nameActions.reports = {
        action: _action7
      };
    }
    _this7.state = {
      nameActions: _nameActions
    }; // from props
    return _this7;
  }
  _inherits(CustomizeSettingsTab, _React$Component4);
  return _createClass(CustomizeSettingsTab, [{
    key: "render",
    value: function render() {
      var nameActions = this.state.nameActions;
      var itemClickHandler = this.handleSettingsItemCheck;
      var sectionItems = Object.keys(nameActions).map(function (name) {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
          className: "customize-item checkbox",
          key: name
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", {
          className: "w-100"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {
          type: "checkbox",
          className: "form-check-input",
          checked: nameActions[name].action != "ignore",
          onChange: itemClickHandler,
          "data-section": name
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, _DisplayMap._[name.toLowerCase()] || name)));
      });
      var notSelectAll = Object.keys(nameActions).find(function (name) {
        return nameActions[name].action === "ignore";
      });
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("form", {
        className: "form-horizontal form-settings",
        role: "form",
        autoComplete: "off",
        noValidate: "novalidate"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("p", null, this.props.isImport ? "Select the settings you want to import." : "Select the settings you want to export."), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "alert alert-warning ".concat(notSelectAll ? "" : "hidden"),
        role: "alert"
      }, this.props.isImport ? "Not importing all settings may cause some flows to no longer function." : "Not exporting all settings may cause some flows to no longer function."), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "form-group row mb-3"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("a", {
        className: "migration-select-text",
        onClick: this.handleSelectAllClick
      }, "Select all"), "|", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("a", {
        className: "migration-select-text",
        onClick: this.handleDeselectAllClick
      }, "Deselect all")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "settings-content"
      }, sectionItems));
    }
  }]);
}(react__WEBPACK_IMPORTED_MODULE_0__.Component);
var _DisplayMap = {
  _: {
    "profiles": "Profiles",
    "reports": "Reports",
    "users": "Users",
    "roles": "Roles",
    "certificates": "Certificates",
    "alerts": "Alerts",
    "adminapi": "Admin API",
    "connections": "Connections",
    "vaults": "Vaults",
    "sso": "SSO",
    "advanced": "Advanced"
  }
};
var CustomizeFlowTab = /*#__PURE__*/function (_React$Component5) {
  function CustomizeFlowTab(props) {
    var _this8;
    _classCallCheck(this, CustomizeFlowTab);
    _this8 = _callSuper(this, CustomizeFlowTab, [props]);
    _defineProperty(_this8, "handleSearchTextChange", function (text) {
      _this8.setState({
        searchText: text
      });
    });
    _defineProperty(_this8, "handleSelectAllClick", function () {
      var connectorActions = _this8.state.connectorActions;
      var apiActions = _this8.state.apiActions;
      var connectorActionChangeHandler = _this8.props.onConnectorActionChange;
      var apiActionChangeHandler = _this8.props.onAPIActionChange;
      Object.keys(connectorActions).forEach(function (key) {
        if (connectorActions[key] != "skip" && connectorActionChangeHandler) {
          connectorActionChangeHandler(_this8.props.workspaceInfo.id, key, "skip");
        }
        connectorActions[key] = "skip";
      });
      Object.keys(apiActions).forEach(function (key) {
        if (apiActions[key] != "skip" && apiActionChangeHandler) {
          apiActionChangeHandler(_this8.props.workspaceInfo.id, key, "skip");
        }
        apiActions[key] = "skip";
      });
      _this8.setState({
        connectorActions: connectorActions,
        apiActions: apiActions
      });
    });
    _defineProperty(_this8, "handleDeselectAllClick", function () {
      var connectorActions = _this8.state.connectorActions;
      var apiActions = _this8.state.apiActions;
      var connectorActionChangeHandler = _this8.props.onConnectorActionChange;
      var apiActionChangeHandler = _this8.props.onAPIActionChange;
      Object.keys(connectorActions).forEach(function (key) {
        if (connectorActions[key] != "ignore" && connectorActionChangeHandler) {
          connectorActionChangeHandler(_this8.props.workspaceInfo.id, key, "ignore");
        }
        connectorActions[key] = "ignore";
      });
      Object.keys(apiActions).forEach(function (key) {
        if (apiActions[key] != "ignore" && apiActionChangeHandler) {
          apiActionChangeHandler(_this8.props.workspaceInfo.id, key, "ignore");
        }
        apiActions[key] = "ignore";
      });
      _this8.setState({
        connectorActions: connectorActions,
        apiActions: apiActions
      });
    });
    _defineProperty(_this8, "handleConnectorItemCheck", function (event) {
      var connectorId = event.target.dataset.connectorid;
      var action = event.target.checked ? "skip" : "ignore";
      var connectorActionChangeHandler = _this8.props.onConnectorActionChange;
      var connectorActions = _this8.state.connectorActions;
      if (connectorActions[connectorId] != action && connectorActionChangeHandler) {
        connectorActionChangeHandler(_this8.props.workspaceInfo.id, connectorId, action);
      }
      connectorActions[connectorId] = action;
      _this8.setState({
        connectorActions: connectorActions
      });
    });
    _defineProperty(_this8, "handleAPIConnectorItemCheck", function (event) {
      var connectorId = event.target.dataset.connectorid;
      var apiId = event.target.dataset.apiid;
      var action = event.target.checked ? "skip" : "ignore";
      var connectorActionChangeHandler = _this8.props.onConnectorActionChange;
      var connectorActions = _this8.state.connectorActions;
      var apiActionChangeHandler = _this8.props.onAPIActionChange;
      var apiActions = _this8.state.apiActions;
      if (connectorActions[connectorId] != action && connectorActionChangeHandler) {
        connectorActionChangeHandler(_this8.props.workspaceInfo.id, connectorId, action);
      }
      connectorActions[connectorId] = action;
      if (action == "ignore" && apiActions[apiId].action != "ignore" && apiActionChangeHandler) {
        apiActionChangeHandler(_this8.props.workspaceInfo.id, apiId, "ignore");
        apiActions[apiId] = "ignore";
      }
      _this8.setState({
        connectorActions: connectorActions,
        apiActions: apiActions
      });
    });
    _defineProperty(_this8, "handleAPIItemCheck", function (event) {
      var _this8$props$workspac;
      var apiId = event.target.dataset.apiid.toLowerCase();
      var action = event.target.checked ? "skip" : "ignore";
      var apiActionChangeHandler = _this8.props.onAPIActionChange;
      var apiActions = _this8.state.apiActions;
      var connectorActionChangeHandler = _this8.props.onConnectorActionChange;
      var connectorActions = _this8.state.connectorActions;
      if (apiActions[apiId] != action && apiActionChangeHandler) {
        apiActionChangeHandler(_this8.props.workspaceInfo.id, apiId, action);
      }
      apiActions[apiId] = action;
      if ((_this8$props$workspac = _this8.props.workspaceInfo) !== null && _this8$props$workspac !== void 0 && (_this8$props$workspac = _this8$props$workspac.flow) !== null && _this8$props$workspac !== void 0 && _this8$props$workspac.apis) {
        var apiInfo = _this8.props.workspaceInfo.flow.apis[apiId];
        if (apiInfo) {
          var connectorIds = apiInfo.connectorIds;
          connectorIds === null || connectorIds === void 0 || connectorIds.map(function (connectorId) {
            if (connectorActions[connectorId] != action && connectorActionChangeHandler) {
              connectorActionChangeHandler(_this8.props.workspaceInfo.id, connectorId, action);
            }
            connectorActions[connectorId] = action;
          });
        }
      }
      _this8.setState({
        connectorActions: connectorActions,
        apiActions: apiActions
      });
    });
    _defineProperty(_this8, "handleCollapseHideClick", function (event) {
      var collapsedList = _utils__WEBPACK_IMPORTED_MODULE_1__/* .ImportUtils */ .P.Clone(_this8.state.collapsedList);
      var apiId = event.target.dataset.apiid;
      collapsedList[apiId] = false;
      _this8.setState({
        collapsedList: collapsedList
      });
    });
    _defineProperty(_this8, "handleCollapseShowClick", function (event) {
      var collapsedList = _utils__WEBPACK_IMPORTED_MODULE_1__/* .ImportUtils */ .P.Clone(_this8.state.collapsedList);
      var apiId = event.target.dataset.apiid;
      collapsedList[apiId] = true;
      _this8.setState({
        collapsedList: collapsedList
      });
    });
    _defineProperty(_this8, "handleIncludeWorkspaceSettingsChange", function (event) {
      _this8.props.onIncludeWorkspaceSettingsChange(event.target.checked);
      _this8.setState({
        includeWorkspaceSettings: event.target.checked
      });
    });
    _defineProperty(_this8, "handleIncludeNotesChange", function (event) {
      _this8.props.onIncludeNotesChange(event.target.checked);
      _this8.setState({
        includeNotes: event.target.checked
      });
    });
    var _connectorActions = {};
    var _apiActions = {};
    var _collapsedList = {};
    if (props.workspaceInfo) {
      if (props.workspaceInfo.connectors) {
        Object.values(props.workspaceInfo.connectors).forEach(function (connectorInfo) {
          var _connectorInfo$action;
          _connectorActions[connectorInfo.id] = (_connectorInfo$action = connectorInfo.action) !== null && _connectorInfo$action !== void 0 ? _connectorInfo$action : "skip";
        });
      }
      if (props.workspaceInfo.flow && props.workspaceInfo.flow.apis) {
        Object.values(props.workspaceInfo.flow.apis).forEach(function (apiInfo) {
          var _apiInfo$action;
          var apiId = (apiInfo.name + apiInfo.method).toLowerCase();
          _apiActions[apiId] = (_apiInfo$action = apiInfo.action) !== null && _apiInfo$action !== void 0 ? _apiInfo$action : "skip";
        });
      }
    }
    _this8.state = {
      searchText: null,
      selectState: 0,
      connectorActions: _connectorActions,
      apiActions: _apiActions,
      collapsedList: _collapsedList,
      includeWorkspaceSettings: !!_this8.props.includeWorkspaceSettings,
      includeNotes: !!_this8.props.includeNotes
    }; // from props
    return _this8;
  }
  _inherits(CustomizeFlowTab, _React$Component5);
  return _createClass(CustomizeFlowTab, [{
    key: "render",
    value: function render() {
      var _this9 = this;
      var searchText = this.state.searchText;
      var connectorActions = this.state.connectorActions;
      var apiActions = this.state.apiActions;
      var apiItemClickHanlder = this.handleAPIItemCheck;
      var apiConnectorItemClickHanlder = this.handleAPIConnectorItemCheck;
      var connectorItemClickHanlder = this.handleConnectorItemCheck;
      var hasFlowAPI = false;
      var hasConnector = false;
      var apiConnectorIds = {};
      var flowAPIItems = Object.keys(apiActions).map(function (name) {
        var method = "";
        var apiInfo = null;
        apiConnectorIds[name] = [];
        if (!searchText || name.toLowerCase().indexOf(searchText.toLowerCase()) >= 0) {
          var _this9$props$workspac;
          if ((_this9$props$workspac = _this9.props.workspaceInfo) !== null && _this9$props$workspac !== void 0 && (_this9$props$workspac = _this9$props$workspac.flow) !== null && _this9$props$workspac !== void 0 && _this9$props$workspac.apis) {
            apiInfo = _this9.props.workspaceInfo.flow.apis[name];
            method = apiInfo.method.toUpperCase();
            if (apiInfo) {
              var _apiInfo$connectorIds;
              (_apiInfo$connectorIds = apiInfo.connectorIds) === null || _apiInfo$connectorIds === void 0 || _apiInfo$connectorIds.map(function (connectorId) {
                if (!searchText || connectorId.toLowerCase().indexOf(searchText.toLowerCase()) >= 0) {
                  apiConnectorIds[name].push(connectorId);
                }
              });
            }
          }
          hasFlowAPI = true;
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
            key: name,
            className: "migration-api-group"
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
            className: "customize-item checkbox"
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", {
            className: "w-100"
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {
            type: "checkbox",
            className: "form-check-input",
            checked: apiActions[name] != "ignore",
            onChange: apiItemClickHanlder,
            "data-apiid": name
          }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
            className: "api-method " + method
          }, method), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, apiInfo.name)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
            className: "migration-collapse-icon"
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("i", {
            className: "fa fa-minus-circle " + (_this9.state.collapsedList[name] ? "" : "hidden"),
            "data-apiid": name,
            onClick: _this9.handleCollapseHideClick
          }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("i", {
            className: "fa fa-plus-circle " + (_this9.state.collapsedList[name] ? "hidden" : ""),
            "data-apiid": name,
            onClick: _this9.handleCollapseShowClick
          }))), _this9.state.collapsedList[name] && apiConnectorIds[name].map(function (connectorName) {
            return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
              key: connectorName,
              className: "customize-item migration-api-connector checkbox"
            }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", {
              className: "w-100"
            }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {
              type: "checkbox",
              className: "form-check-input",
              checked: connectorActions[connectorName] != "ignore",
              "data-apiid": name,
              "data-connectorid": connectorName,
              onChange: apiConnectorItemClickHanlder
            }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
              className: "app-icon app-icon-" + _this9.props.workspaceInfo.connectors[connectorName].type.toLowerCase().replace(/^cdata(.+)$/, "$1")
            }, "\xA0"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, connectorName)));
          }));
        } else {
          return null;
        }
      });
      var connectorItems = Object.keys(connectorActions).map(function (name) {
        var included = false;
        if (!searchText || name.toLowerCase().indexOf(searchText.toLowerCase()) >= 0) {
          included = !Object.values(apiConnectorIds).some(function (apiConnectorList) {
            return apiConnectorList.includes(name);
          });
        }
        if (included) {
          hasConnector = true;
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
            className: "customize-item checkbox",
            key: name
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", {
            className: "w-100"
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {
            type: "checkbox",
            className: "form-check-input",
            checked: connectorActions[name] != "ignore",
            onChange: connectorItemClickHanlder,
            "data-connectorid": name
          }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
            className: "app-icon app-icon-" + _this9.props.workspaceInfo.connectors[name].type.toLowerCase().replace(/^cdata(.+)$/, "$1")
          }, "\xA0"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, name)));
        } else {
          return null;
        }
      });
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("form", {
        className: "form-horizontal form-settings",
        role: "form",
        autoComplete: "off",
        noValidate: "novalidate"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "mb-3"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_searchbox__WEBPACK_IMPORTED_MODULE_2__/* .SearchBox */ .G, {
        searchText: this.state.searchText,
        onChanged: this.handleSearchTextChange
      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("p", null, this.props.isImport ? "Select the items you want to import." : "Select the items you want to export."), (this.props.onIncludeWorkspaceSettingsChange || this.props.onIncludeNotesChange) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "row mb-2 ms-0 checkbox"
      }, this.props.onIncludeWorkspaceSettingsChange && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", {
        className: "ps-0 col-6"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {
        type: "checkbox",
        checked: this.state.includeWorkspaceSettings,
        onChange: this.handleIncludeWorkspaceSettingsChange,
        className: "form-check-input"
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, "Include workspace settings")), this.props.onIncludeNotesChange && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", {
        className: "ps-0 col-6"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {
        type: "checkbox",
        checked: this.state.includeNotes,
        onChange: this.handleIncludeNotesChange,
        className: "form-check-input"
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, "Include notes"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "row mb-3"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("a", {
        className: "migration-select-text",
        onClick: this.handleSelectAllClick
      }, "Select all"), "|", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("a", {
        className: "migration-select-text",
        onClick: this.handleDeselectAllClick
      }, "Deselect all")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "workspace-content"
      }, hasFlowAPI && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("h4", {
        className: "migration-madal-title"
      }, "Flow APIs"), hasFlowAPI && Object.values(flowAPIItems).map(function (apiItem) {
        return apiItem;
      }), hasConnector && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("h4", {
        className: "migration-madal-title"
      }, "Connectors"), hasConnector && Object.values(connectorItems).map(function (connectorItem) {
        return connectorItem;
      })));
    }
  }]);
}(react__WEBPACK_IMPORTED_MODULE_0__.Component);
var CustomizeWorkspacesTab = /*#__PURE__*/function (_React$Component6) {
  function CustomizeWorkspacesTab(props) {
    var _this10;
    _classCallCheck(this, CustomizeWorkspacesTab);
    _this10 = _callSuper(this, CustomizeWorkspacesTab, [props]);
    _defineProperty(_this10, "handleSearchTextChange", function (text) {
      _this10.setState({
        searchText: text
      });
    });
    _defineProperty(_this10, "handleSelectAllClick", function () {
      var workspaceActions = _this10.state.workspaceActions;
      var workspaceActionChangeHandler = _this10.props.onActionChange;
      Object.keys(workspaceActions).forEach(function (key) {
        if (workspaceActions[key] != "skip" && workspaceActionChangeHandler) {
          workspaceActionChangeHandler(key, "skip");
        }
        workspaceActions[key] = "skip";
      });
      _this10.setState({
        workspaceActions: workspaceActions
      });
    });
    _defineProperty(_this10, "handleDeselectAllClick", function () {
      var workspaceActions = _this10.state.workspaceActions;
      var workspaceActionChangeHandler = _this10.props.onActionChange;
      Object.keys(workspaceActions).forEach(function (key) {
        if (workspaceActions[key] != "ignore" && workspaceActionChangeHandler) {
          workspaceActionChangeHandler(key, "ignore");
        }
        workspaceActions[key] = "ignore";
      });
      _this10.setState({
        workspaceActions: workspaceActions
      });
    });
    _defineProperty(_this10, "handleWorkspaceItemCheck", function (event) {
      var workspaceId = event.target.dataset.arcWorkspaceId;
      var action = event.target.checked ? "skip" : "ignore";
      var workspaceActionChangeHandler = _this10.props.onActionChange;
      var workspaceActions = _this10.state.workspaceActions;
      if (workspaceActions[workspaceId] != action && workspaceActionChangeHandler) {
        workspaceActionChangeHandler(workspaceId, action);
      }
      workspaceActions[workspaceId] = action;
      _this10.setState({
        workspaceActions: workspaceActions
      });
    });
    _defineProperty(_this10, "handleIncludeWorkspaceSettingsChange", function (event) {
      _this10.props.onIncludeWorkspaceSettingsChange(event.target.checked);
      _this10.setState({
        includeWorkspaceSettings: event.target.checked
      });
    });
    _defineProperty(_this10, "handleIncludeNotesChange", function (event) {
      _this10.props.onIncludeNotesChange(event.target.checked);
      _this10.setState({
        includeNotes: event.target.checked
      });
    });
    var _workspaceActions = {};
    if (props.workspacesInfo) {
      Object.values(props.workspacesInfo).forEach(function (info) {
        var action = "ignore";
        if (info.connectors && Object.values(info.connectors).some(function (connectorInfo) {
          return connectorInfo.action != "ignore";
        })) {
          action = "skip";
        }
        _workspaceActions[info.id] = action;
      });
    }
    _this10.state = {
      searchText: null,
      selectState: 0,
      workspaceActions: _workspaceActions,
      includeWorkspaceSettings: !!_this10.props.includeWorkspaceSettings,
      includeNotes: !!_this10.props.includeNotes
    }; // from props
    return _this10;
  }
  _inherits(CustomizeWorkspacesTab, _React$Component6);
  return _createClass(CustomizeWorkspacesTab, [{
    key: "render",
    value: function render() {
      var searchText = this.state.searchText;
      var workspaceActions = this.state.workspaceActions;
      var itemClickHandler = this.handleWorkspaceItemCheck;
      var workspaceItems = Object.keys(workspaceActions).map(function (name) {
        if (!searchText || name.toLowerCase().indexOf(searchText.toLowerCase()) >= 0) {
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
            className: "customize-item checkbox",
            key: name
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", {
            className: "w-100"
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {
            type: "checkbox",
            className: "form-check-input",
            checked: workspaceActions[name] != "ignore",
            onChange: itemClickHandler,
            "data-arc-workspace-id": name
          }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, name)));
        } else {
          return null;
        }
      });
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("form", {
        className: "form-horizontal form-settings",
        role: "form",
        autoComplete: "off",
        noValidate: "novalidate"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "mb-3"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_searchbox__WEBPACK_IMPORTED_MODULE_2__/* .SearchBox */ .G, {
        searchText: this.state.searchText,
        onChanged: this.handleSearchTextChange
      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("p", null, this.props.isImport ? "Select the workspaces you want to import." : "Select the workspaces you want to export."), (this.props.onIncludeWorkspaceSettingsChange || this.props.onIncludeNotesChange) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "row mb-2 ms-0 checkbox"
      }, this.props.onIncludeWorkspaceSettingsChange && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", {
        className: "ps-0 col-6"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {
        type: "checkbox",
        checked: this.state.includeWorkspaceSettings,
        onChange: this.handleIncludeWorkspaceSettingsChange,
        className: "form-check-input"
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, "Include workspace settings")), this.props.onIncludeNotesChange && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", {
        className: "ps-0 col-6"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {
        type: "checkbox",
        checked: this.state.includeNotes,
        onChange: this.handleIncludeNotesChange,
        className: "form-check-input"
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, "Include notes"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "row mb-3"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("a", {
        className: "migration-select-text",
        onClick: this.handleSelectAllClick
      }, "Select all"), "|", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("a", {
        className: "migration-select-text",
        onClick: this.handleDeselectAllClick
      }, "Deselect all")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "workspace-content"
      }, workspaceItems));
    }
  }]);
}(react__WEBPACK_IMPORTED_MODULE_0__.Component);
var CustomizeEDITab = /*#__PURE__*/function (_React$Component7) {
  function CustomizeEDITab(props) {
    var _props$settingsInfo, _props$settingsInfo2;
    var _this11;
    _classCallCheck(this, CustomizeEDITab);
    _this11 = _callSuper(this, CustomizeEDITab, [props]);
    _defineProperty(_this11, "handleSelectAllClick", function () {
      var partnerActions = _this11.state.partnerActions;
      var documentActions = _this11.state.documentActions;
      var partnerActionChangeHandler = _this11.props.onPartnerActionChange;
      var documentActionChangeHandler = _this11.props.onDocumentActionChange;
      Object.keys(partnerActions).forEach(function (key) {
        if (partnerActions[key] != "skip" && partnerActionChangeHandler) {
          partnerActionChangeHandler(key, "skip");
        }
        partnerActions[key] = "skip";
      });
      Object.keys(documentActions).forEach(function (key) {
        if (documentActions[key] != "skip" && documentActionChangeHandler) {
          documentActionChangeHandler(key, "skip");
        }
        documentActions[key] = "skip";
      });
      _this11.setState({
        partnerActions: partnerActions,
        documentActions: documentActions
      });
    });
    _defineProperty(_this11, "handleDeselectAllClick", function () {
      var partnerActions = _this11.state.partnerActions;
      var documentActions = _this11.state.documentActions;
      var partnerActionChangeHandler = _this11.props.onPartnerActionChange;
      var documentActionChangeHandler = _this11.props.onDocumentActionChange;
      Object.keys(partnerActions).forEach(function (key) {
        if (partnerActions[key] != "ignore" && partnerActionChangeHandler) {
          partnerActionChangeHandler(key, "ignore");
        }
        partnerActions[key] = "ignore";
      });
      Object.keys(documentActions).forEach(function (key) {
        if (documentActions[key] != "ignore" && documentActionChangeHandler) {
          documentActionChangeHandler(key, "ignore");
        }
        documentActions[key] = "ignore";
      });
      _this11.setState({
        partnerActions: partnerActions,
        documentActions: documentActions
      });
    });
    _defineProperty(_this11, "handlePartnerItemCheck", function (event) {
      var partnerId = event.target.dataset.arcPartnerId;
      var action = event.target.checked ? "skip" : "ignore";
      var partnerActionChangeHandler = _this11.props.onPartnerActionChange;
      var partnerActions = _this11.state.partnerActions;
      if (partnerActions[partnerId] != action && partnerActionChangeHandler) {
        partnerActionChangeHandler(partnerId, action);
      }
      partnerActions[partnerId] = action;
      _this11.setState({
        partnerActions: partnerActions
      });
    });
    _defineProperty(_this11, "handleDocumentItemCheck", function (event) {
      var documentId = event.target.dataset.arcDocumentId;
      var action = event.target.checked ? "skip" : "ignore";
      var documentActionChangeHandler = _this11.props.onDocumentActionChange;
      var documentActions = _this11.state.documentActions;
      if (documentActions[documentId] != action && documentActionChangeHandler) {
        documentActionChangeHandler(documentId, action);
      }
      documentActions[documentId] = action;
      _this11.setState({
        documentActions: documentActions
      });
    });
    var _partnerActions = {};
    var _documentActions = {};
    if ((_props$settingsInfo = props.settingsInfo) !== null && _props$settingsInfo !== void 0 && _props$settingsInfo.partners) {
      Object.values(props.settingsInfo.partners).forEach(function (info) {
        var action = "ignore";
        if (info.action != "ignore") {
          action = "skip";
        }
        _partnerActions[info.id] = action;
      });
    }
    if ((_props$settingsInfo2 = props.settingsInfo) !== null && _props$settingsInfo2 !== void 0 && _props$settingsInfo2.documents) {
      Object.values(props.settingsInfo.documents).forEach(function (info) {
        var action = "ignore";
        if (info.action != "ignore") {
          action = "skip";
        }
        _documentActions[info.id] = action;
      });
    }
    _this11.state = {
      partnerActions: _partnerActions,
      documentActions: _documentActions
    };
    return _this11;
  }
  _inherits(CustomizeEDITab, _React$Component7);
  return _createClass(CustomizeEDITab, [{
    key: "render",
    value: function render() {
      var partnerActions = this.state.partnerActions;
      var documentActions = this.state.documentActions;
      var partnerClickHandler = this.handlePartnerItemCheck;
      var documentClickHandler = this.handleDocumentItemCheck;
      var partnerItems = Object.keys(partnerActions).map(function (name) {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
          className: "customize-item checkbox",
          key: name
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", {
          className: "w-100"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {
          type: "checkbox",
          className: "form-check-input",
          checked: partnerActions[name] != "ignore",
          onChange: partnerClickHandler,
          "data-arc-partner-id": name
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, name)));
      });
      var documentItems = Object.keys(documentActions).map(function (name) {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
          className: "customize-item checkbox",
          key: name
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", {
          className: "w-100"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {
          type: "checkbox",
          className: "form-check-input",
          checked: documentActions[name] != "ignore",
          onChange: documentClickHandler,
          "data-arc-document-id": name
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, name)));
      });
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("form", {
        className: "form-horizontal form-settings",
        role: "form",
        autoComplete: "off",
        noValidate: "novalidate"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("p", null, this.props.isImport ? "Select the partners and documents you want to import." : "Select the partners and documents you want to export."), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "row mb-3"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("a", {
        className: "migration-select-text",
        onClick: this.handleSelectAllClick
      }, "Select all"), "|", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("a", {
        className: "migration-select-text",
        onClick: this.handleDeselectAllClick
      }, "Deselect all")), partnerItems && partnerItems.length > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "row mb-2"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("b", null, "Partners:"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "workspace-content mb-3"
      }, partnerItems)), documentItems && documentItems.length > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "row mb-2"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("b", null, "Documents:"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "workspace-content"
      }, documentItems)));
    }
  }]);
}(react__WEBPACK_IMPORTED_MODULE_0__.Component);
var ImportCustomConflictResolutionWorkspacesItem = /*#__PURE__*/function (_React$Component8) {
  function ImportCustomConflictResolutionWorkspacesItem(_props) {
    var _this12;
    _classCallCheck(this, ImportCustomConflictResolutionWorkspacesItem);
    _this12 = _callSuper(this, ImportCustomConflictResolutionWorkspacesItem, [_props]);
    _defineProperty(_this12, "handleWorkspaceActionChange", function (action) {
      _this12.props.onWorkspaceActionChange(_this12.props.workspaceInfo.id, action);
    });
    _defineProperty(_this12, "handleCollapseShowClick", function () {
      _this12.props.onWorkspaceCollapseChanged(_this12.props.workspaceInfo.id, true);
    });
    _defineProperty(_this12, "handleCollapseHideClick", function () {
      _this12.props.onWorkspaceCollapseChanged(_this12.props.workspaceInfo.id, false);
    });
    _defineProperty(_this12, "handleAPIActionChange", function (action, props) {
      _this12.props.onAPIActionChange(_this12.props.workspaceInfo.id, props.apiKey, action);
    });
    return _this12;
  }
  _inherits(ImportCustomConflictResolutionWorkspacesItem, _React$Component8);
  return _createClass(ImportCustomConflictResolutionWorkspacesItem, [{
    key: "render",
    value: function render() {
      var _this$props$workspace,
        _this13 = this;
      var searchText = this.props.searchText && this.props.searchText.toLowerCase();
      var connectors = this.props.workspaceInfo.connectors;
      var apis = (_this$props$workspace = this.props.workspaceInfo) === null || _this$props$workspace === void 0 || (_this$props$workspace = _this$props$workspace.flow) === null || _this$props$workspace === void 0 ? void 0 : _this$props$workspace.apis;
      var action;
      var connectorIds = [];
      var hasAPIs = false;
      var apiObjMap = [];
      if (connectors) {
        for (var _i11 = 0, _Object$values11 = Object.values(connectors); _i11 < _Object$values11.length; _i11++) {
          var connectorInfo = _Object$values11[_i11];
          if (connectorInfo.existing && connectorInfo.action != "ignore") {
            var _connectorInfo$action2;
            connectorIds.push(connectorInfo.id);
            if (action === undefined) {
              action = connectorInfo.action;
            } else if (action != ((_connectorInfo$action2 = connectorInfo.action) !== null && _connectorInfo$action2 !== void 0 ? _connectorInfo$action2 : "skip")) {
              action = _CustomActionText._;
            }
          }
        }
      }
      if (apis) {
        for (var _i12 = 0, _Object$values12 = Object.values(apis); _i12 < _Object$values12.length; _i12++) {
          var apiInfo = _Object$values12[_i12];
          if (apiInfo.existing && apiInfo.action != "ignore") {
            var _apiInfo$action2;
            if (action === undefined) {
              action = apiInfo.action;
            } else if (action != ((_apiInfo$action2 = apiInfo.action) !== null && _apiInfo$action2 !== void 0 ? _apiInfo$action2 : "skip")) {
              action = _CustomActionText._;
            }
            if (!searchText || apiInfo.name.toLowerCase().includes(searchText)) {
              var _apiInfoItem$action, _apiInfo$connectorIds2;
              var apiInfoItem = _utils__WEBPACK_IMPORTED_MODULE_1__/* .ImportUtils */ .P.Clone(apiInfo);
              apiInfoItem.isAPI = true;
              apiInfoItem.action = (_apiInfoItem$action = apiInfoItem.action) !== null && _apiInfoItem$action !== void 0 ? _apiInfoItem$action : "skip";
              apiObjMap.push(apiInfoItem);
              (_apiInfo$connectorIds2 = apiInfo.connectorIds) === null || _apiInfo$connectorIds2 === void 0 || _apiInfo$connectorIds2.map(function (connectorId) {
                if (connectors !== null && connectors !== void 0 && connectors[connectorId] && connectors[connectorId].existing && connectors[connectorId].action != "ignore") {
                  var _connectorItem$action;
                  var index = connectorIds.indexOf(connectorId);
                  if (index > -1) {
                    connectorIds.splice(index, 1);
                  }
                  var connectorItem = _utils__WEBPACK_IMPORTED_MODULE_1__/* .ImportUtils */ .P.Clone(connectors[connectorId]);
                  connectorItem.isAPI = false;
                  connectorItem.action = (_connectorItem$action = connectorItem.action) !== null && _connectorItem$action !== void 0 ? _connectorItem$action : "skip";
                  if (!searchText || connectorItem.id.toLowerCase().includes(searchText)) {
                    apiObjMap.push(connectorItem);
                  }
                }
              });
              hasAPIs = true;
            }
          }
        }
      }
      action !== null && action !== void 0 ? action : action = "skip";
      var hasConnector = connectorIds.length > 0;
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "migration-table-group"
      }, !this.props.isFlow && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "customize-item"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, this.props.workspaceInfo.id), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_utils__WEBPACK_IMPORTED_MODULE_1__/* .ImportDropdown */ .H, {
        options: _DropdownOptions._,
        style: _DropdownStyle._,
        value: action,
        onChange: this.handleWorkspaceActionChange
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "migration-collapse-icon"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("i", {
        className: "fa fa-minus-circle " + (this.props.collapsed ? "" : "hidden"),
        onClick: this.handleCollapseHideClick
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("i", {
        className: "fa fa-plus-circle " + (this.props.collapsed ? "hidden" : ""),
        onClick: this.handleCollapseShowClick
      }))), (this.props.isFlow || this.props.collapsed) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("table", {
        className: "table migration-import-table " + (this.props.isFlow ? "" : "migration-import-multiple-table")
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("thead", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("th", null, "Import"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("th", {
        className: "table-header-confilct"
      }, "Conflict Setting"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("th", {
        className: "table-header-existing"
      }, "Existing"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("tbody", null, hasAPIs && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr", {
        className: "migration-table-inside-row  migration-table-flowapi"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", {
        colSpan: "3"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, "Flow APIs"))), hasAPIs && apiObjMap.map(function (info) {
        if (info.isAPI) {
          var _info$action;
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr", {
            key: info.name + info.method
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
            className: "migration-import-item"
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
            className: "api-method " + info.method.toUpperCase()
          }, info.method.toUpperCase()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
            className: "migration-import-text"
          }, info.name))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", {
            className: "migration-conflict-item"
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
            className: "d-flex"
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_utils__WEBPACK_IMPORTED_MODULE_1__/* .ImportDropdown */ .H, {
            className: "p-2 w-100",
            options: _DropdownOptions._,
            value: (_info$action = info.action) !== null && _info$action !== void 0 ? _info$action : "skip",
            apiKey: (info.name + info.method).toLowerCase(),
            onChange: _this13.handleAPIActionChange
          }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
            className: "migration-conflict-icon p-2 flex-shrink-1"
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("i", {
            className: "far fa-arrow-right migration-conflict-replace-icon " + (info.action == "replace" ? "" : "hidden")
          }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("i", {
            className: "fa fa-times-circle migration-conflict-skip-icon " + (info.action == "skip" ? "" : "hidden")
          })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
            className: "migration-existing-item"
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
            className: "api-method " + info.method.toUpperCase()
          }, info.method.toUpperCase()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
            className: "migration-existing-text"
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, info.name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
            className: "migration-existing-workspace"
          }, _this13.props.workspaceInfo.id)))));
        } else {
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ImportCustomConflictResolutionConnectorItem, {
            key: info.id,
            workspaceId: _this13.props.workspaceInfo.id,
            isAPIConnector: true,
            connectorInfo: info,
            onConnectorActionChange: _this13.props.onConnectorActionChange
          });
        }
      }), hasConnector && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr", {
        className: "migration-table-inside-row  migration-table-connectors"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", {
        colSpan: "3"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, "Connectors"))), hasConnector && this.props.workspaceInfo.connectors && Object.values(this.props.workspaceInfo.connectors).map(function (info) {
        if (connectorIds.includes(info.id) && info.existing && info.action != "ignore" && (!searchText || info.id.toLowerCase().includes(searchText))) {
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ImportCustomConflictResolutionConnectorItem, {
            key: info.id,
            workspaceId: _this13.props.workspaceInfo.id,
            isAPIConnector: false,
            connectorInfo: info,
            onConnectorActionChange: _this13.props.onConnectorActionChange
          });
        } else {
          return null;
        }
      }))));
    }
  }]);
}(react__WEBPACK_IMPORTED_MODULE_0__.Component);
var _DropdownOptions = {
  _: [{
    "value": "skip",
    "name": "Don't Import"
  }, {
    "value": "replace",
    "name": "Replace"
  }]
};
var _DropdownStyle = {
  _: {
    "position": "absolute",
    "top": "9px",
    "right": "23px"
  }
};
var _CustomActionText = {
  _: "Custom"
};
var ImportCustomConflictResolutionConnectorItem = /*#__PURE__*/function (_React$Component9) {
  function ImportCustomConflictResolutionConnectorItem(props) {
    var _this14;
    _classCallCheck(this, ImportCustomConflictResolutionConnectorItem);
    _this14 = _callSuper(this, ImportCustomConflictResolutionConnectorItem, [props]);
    _defineProperty(_this14, "handleConnectorActionChange", function (action) {
      _this14.props.onConnectorActionChange(_this14.props.workspaceId, _this14.props.connectorInfo.id, action);
    });
    return _this14;
  }
  _inherits(ImportCustomConflictResolutionConnectorItem, _React$Component9);
  return _createClass(ImportCustomConflictResolutionConnectorItem, [{
    key: "render",
    value: function render() {
      var _this$props$connector;
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "migration-import-item migration-import-api-connector"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
        className: "app-icon app-icon-" + this.props.connectorInfo.type.toLowerCase().replace(/^cdata(.+)$/, "$1")
      }, "\xA0"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
        className: "migration-import-text"
      }, this.props.connectorInfo.id))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", {
        className: "migration-conflict-item"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "d-flex"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_utils__WEBPACK_IMPORTED_MODULE_1__/* .ImportDropdown */ .H, {
        className: "p-2 w-100",
        options: _DropdownOptions2._,
        value: (_this$props$connector = this.props.connectorInfo.action) !== null && _this$props$connector !== void 0 ? _this$props$connector : "skip",
        onChange: this.handleConnectorActionChange
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "migration-conflict-icon p-2 flex-shrink-1"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("i", {
        className: "far fa-arrow-right migration-conflict-replace-icon " + (this.props.connectorInfo.action == "replace" ? "" : "hidden")
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("i", {
        className: "fa fa-times-circle migration-conflict-skip-icon " + (this.props.connectorInfo.action == "skip" ? "" : "hidden")
      })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "migration-existing-item"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
        className: "app-icon app-icon-" + this.props.connectorInfo.existingType.toLowerCase().replace(/^cdata(.+)$/, "$1")
      }, "\xA0"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "migration-existing-text"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, this.props.connectorInfo.id), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
        className: "migration-existing-workspace"
      }, this.props.workspaceId)))));
    }
  }]);
}(react__WEBPACK_IMPORTED_MODULE_0__.Component);
var _DropdownOptions2 = {
  _: [{
    "value": "skip",
    "name": "Don't Import"
  }, {
    "value": "replace",
    "name": "Replace"
  }]
};
var ImportCustomConflictResolutionSectionItem = /*#__PURE__*/function (_React$Component10) {
  function ImportCustomConflictResolutionSectionItem(props) {
    var _this15;
    _classCallCheck(this, ImportCustomConflictResolutionSectionItem);
    _this15 = _callSuper(this, ImportCustomConflictResolutionSectionItem, [props]);
    _defineProperty(_this15, "handleSectionActionChange", function (action) {
      _this15.props.sectionInfo.insideNames ? _this15.props.onSectionActionChange(_this15.props.name.toLowerCase(), action) : _this15.props.onNameActionChange("settings", _this15.props.name, action);
    });
    _defineProperty(_this15, "handleCollapseShowClick", function () {
      _this15.props.onSectionCollapseChanged(_this15.props.sectionInfo.name, true);
    });
    _defineProperty(_this15, "handleCollapseHideClick", function () {
      _this15.props.onSectionCollapseChanged(_this15.props.sectionInfo.name, false);
    });
    return _this15;
  }
  _inherits(ImportCustomConflictResolutionSectionItem, _React$Component10);
  return _createClass(ImportCustomConflictResolutionSectionItem, [{
    key: "render",
    value: function render() {
      var _this16 = this;
      var action;
      if (this.props.sectionInfo.insideNames) {
        for (var _i13 = 0, _Object$values13 = Object.values(this.props.sectionInfo.insideNames); _i13 < _Object$values13.length; _i13++) {
          var _nameInfo$action2;
          var nameInfo = _Object$values13[_i13];
          if (action === undefined) {
            var _nameInfo$action;
            action = (_nameInfo$action = nameInfo.action) !== null && _nameInfo$action !== void 0 ? _nameInfo$action : "skip";
          } else if (action != ((_nameInfo$action2 = nameInfo.action) !== null && _nameInfo$action2 !== void 0 ? _nameInfo$action2 : "skip")) {
            action = _CustomActionText2._;
            break;
          }
        }
      } else {
        action = this.props.sectionInfo.action;
      }
      action !== null && action !== void 0 ? action : action = "skip";
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "migration-table-group"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "customize-item"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, _DisplayMap2._[this.props.sectionInfo.name.toLowerCase()]), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_utils__WEBPACK_IMPORTED_MODULE_1__/* .ImportDropdown */ .H, {
        options: _DropdownOptions3._,
        style: _DropdownStyle2._,
        value: action,
        onChange: this.handleSectionActionChange
      }), this.props.sectionInfo.insideNames && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "migration-collapse-icon"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("i", {
        className: "fa fa-minus-circle " + (this.props.collapsed ? "" : "hidden"),
        onClick: this.handleCollapseHideClick
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("i", {
        className: "fa fa-plus-circle " + (this.props.collapsed ? "hidden" : ""),
        onClick: this.handleCollapseShowClick
      }))), this.props.sectionInfo.insideNames && this.props.collapsed && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("table", {
        className: "table migration-import-table migration-import-multiple-table"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("thead", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("th", null, "Import"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("th", {
        className: "table-header-confilct"
      }, "Conflict Setting"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("tbody", null, Object.keys(this.props.sectionInfo.insideNames).map(function (key) {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ImportCustomConflictResolutionNameItem, {
          key: key,
          actionKey: key,
          sectionName: _this16.props.sectionInfo.name,
          nameInfo: _this16.props.sectionInfo.insideNames[key],
          onNameActionChange: _this16.props.onNameActionChange
        });
      }))));
    }
  }]);
}(react__WEBPACK_IMPORTED_MODULE_0__.Component);
var _DropdownOptions3 = {
  _: [{
    "value": "skip",
    "name": "Don't Import"
  }, {
    "value": "replace",
    "name": "Replace"
  }]
};
var _DropdownStyle2 = {
  _: {
    "position": "absolute",
    "top": "9px",
    "right": "23px"
  }
};
var _DisplayMap2 = {
  _: {
    "profiles": "Profiles",
    "reports": "Reports",
    "users": "Users",
    "roles": "Roles",
    "certificates": "Certificates",
    "alerts": "Alerts",
    "adminapi": "Admin API",
    "connections": "Connections",
    "vaults": "Vaults",
    "sso": "SSO",
    "advanced": "Advanced"
  }
};
var _CustomActionText2 = {
  _: "Custom"
};
var ImportCustomConflictResolutionNameItem = /*#__PURE__*/function (_React$Component11) {
  function ImportCustomConflictResolutionNameItem(props) {
    var _this17;
    _classCallCheck(this, ImportCustomConflictResolutionNameItem);
    _this17 = _callSuper(this, ImportCustomConflictResolutionNameItem, [props]);
    _defineProperty(_this17, "handleNameActionChange", function (action) {
      _this17.props.onNameActionChange(_this17.props.sectionName.toLowerCase(), _this17.props.actionKey, action);
    });
    return _this17;
  }
  _inherits(ImportCustomConflictResolutionNameItem, _React$Component11);
  return _createClass(ImportCustomConflictResolutionNameItem, [{
    key: "render",
    value: function render() {
      var _this$props$nameInfo$;
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", {
        className: "migration-conflict-item-name"
      }, this.props.nameInfo.name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "migration-conflict-item dropdown"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "d-flex"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_utils__WEBPACK_IMPORTED_MODULE_1__/* .ImportDropdown */ .H, {
        className: "p-2 w-100",
        options: _DropdownOptions4._,
        value: (_this$props$nameInfo$ = this.props.nameInfo.action) !== null && _this$props$nameInfo$ !== void 0 ? _this$props$nameInfo$ : "skip",
        onChange: this.handleNameActionChange
      })))));
    }
  }]);
}(react__WEBPACK_IMPORTED_MODULE_0__.Component);
var _DropdownOptions4 = {
  _: [{
    "value": "skip",
    "name": "Don't Import"
  }, {
    "value": "replace",
    "name": "Replace"
  }]
};
var ImportCustomConflictResolutionEDIItem = /*#__PURE__*/function (_React$Component12) {
  function ImportCustomConflictResolutionEDIItem(props) {
    var _this18;
    _classCallCheck(this, ImportCustomConflictResolutionEDIItem);
    _this18 = _callSuper(this, ImportCustomConflictResolutionEDIItem, [props]);
    _defineProperty(_this18, "handleActionChange", function (action) {
      _this18.props.type == "partner" ? _this18.props.onPartnerActionChange(_this18.props.info.id, action) : _this18.props.onDocumentActionChange(_this18.props.info.id, action);
    });
    return _this18;
  }
  _inherits(ImportCustomConflictResolutionEDIItem, _React$Component12);
  return _createClass(ImportCustomConflictResolutionEDIItem, [{
    key: "render",
    value: function render() {
      var _this$props$info$acti;
      var action = (_this$props$info$acti = this.props.info.action) !== null && _this$props$info$acti !== void 0 ? _this$props$info$acti : "skip";
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "migration-table-group"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "customize-item"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, this.props.info.name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_utils__WEBPACK_IMPORTED_MODULE_1__/* .ImportDropdown */ .H, {
        options: _DropdownOptions5._,
        style: _DropdownStyle3._,
        value: action,
        onChange: this.handleActionChange
      })));
    }
  }]);
}(react__WEBPACK_IMPORTED_MODULE_0__.Component);
var _DropdownOptions5 = {
  _: [{
    "value": "skip",
    "name": "Don't Import"
  }, {
    "value": "replace",
    "name": "Replace"
  }]
};
var _DropdownStyle3 = {
  _: {
    "position": "absolute",
    "top": "9px",
    "right": "23px"
  }
};

/***/ }),

/***/ 29886:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  OM: () => (/* binding */ ExportModal),
  zb: () => (/* binding */ ImportModal),
  Bv: () => (/* binding */ ImportSampleFlowModal),
  k8: () => (/* binding */ UpgradeBuildModal)
});

// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(96540);
// EXTERNAL MODULE: ../../.react-shared/axios/index.jsx
var axios = __webpack_require__(29029);
// EXTERNAL MODULE: ./src/components/alert/DismissibleAlert.tsx
var DismissibleAlert = __webpack_require__(95631);
;// CONCATENATED MODULE: ./src/components/poor-modal/index.jsx
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _classPrivateFieldInitSpec(e, t, a) { _checkPrivateRedeclaration(e, t), t.set(e, a); }
function _checkPrivateRedeclaration(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object"); }
function _classPrivateFieldGet(s, a) { return s.get(_assertClassBrand(s, a)); }
function _classPrivateFieldSet(s, a, r) { return s.set(_assertClassBrand(s, a), r), r; }
function _assertClassBrand(e, t, n) { if ("function" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n; throw new TypeError("Private element is not present on this object"); }




var _modalRef = /*#__PURE__*/new WeakMap();
var _modal = /*#__PURE__*/new WeakMap();
var Modal = /*#__PURE__*/function (_React$Component) {
  function Modal(props) {
    var _this;
    _classCallCheck(this, Modal);
    _this = _callSuper(this, Modal, [props]);
    _classPrivateFieldInitSpec(_this, _modalRef, null);
    _classPrivateFieldInitSpec(_this, _modal, null);
    _classPrivateFieldSet(_modalRef, _this, /*#__PURE__*/react.createRef());
    return _this;
  }
  _inherits(Modal, _React$Component);
  return _createClass(Modal, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this2 = this;
      var elem = _classPrivateFieldGet(_modalRef, this).current;
      var closedHandler = this.props.onClosed;
      var openingHandler = this.props.onOpening;
      var createdHandler = this.props.onModalCreated;
      if (elem != null) {
        // The bootstrap may not be loaded when mounting to DOM tree.
        var id = setInterval(function () {
          var _window;
          if (((_window = window) === null || _window === void 0 || (_window = _window.bootstrap) === null || _window === void 0 ? void 0 : _window.Modal) !== undefined) {
            clearInterval(id);
            _classPrivateFieldSet(_modal, _this2, new window.bootstrap.Modal(elem, {
              backdrop: "static"
            }));
            elem.addEventListener("hide.bs.modal", function () {
              if (closedHandler) {
                closedHandler();
              }
            });
            elem.addEventListener("show.bs.modal", function () {
              if (openingHandler) {
                openingHandler();
              }
            });
            if (createdHandler) {
              createdHandler(_classPrivateFieldGet(_modal, _this2));
            }
          }
        }, 100);
      }
    }
  }, {
    key: "render",
    value: function render() {
      var modalWidth = null;
      switch (this.props.width) {
        case "exlarge":
          modalWidth = "xl";
          break;
        case "large":
          modalWidth = "lg";
          break;
        case "small":
          modalWidth = "sm";
          break;
        default:
          break;
      }
      return /*#__PURE__*/react.createElement("div", {
        className: "modal fade arc-poor-modal",
        id: this.props.id,
        tabIndex: "-1",
        role: "dialog",
        ref: _classPrivateFieldGet(_modalRef, this)
      }, /*#__PURE__*/react.createElement("div", {
        className: "modal-dialog" + (modalWidth ? " modal-" + modalWidth : "")
      }, /*#__PURE__*/react.createElement("div", {
        className: "modal-content"
      }, this.props.children)));
    }
  }]);
}(react.Component);
var ModalHeader = /*#__PURE__*/function (_React$Component2) {
  function ModalHeader(props) {
    _classCallCheck(this, ModalHeader);
    return _callSuper(this, ModalHeader, [props]);
  }
  _inherits(ModalHeader, _React$Component2);
  return _createClass(ModalHeader, [{
    key: "render",
    value: function render() {
      return /*#__PURE__*/react.createElement("div", {
        className: "modal-header"
      }, /*#__PURE__*/react.createElement("h4", {
        className: "modal-title",
        id: "{this.props.id}Label"
      }, this.props.title), this.props.children, /*#__PURE__*/react.createElement("button", {
        type: "button",
        className: "btn-close",
        "data-bs-dismiss": "modal"
      }));
    }
  }]);
}(react.Component);
var ModalBody = /*#__PURE__*/function (_React$Component3) {
  function ModalBody(props) {
    _classCallCheck(this, ModalBody);
    return _callSuper(this, ModalBody, [props]);
  }
  _inherits(ModalBody, _React$Component3);
  return _createClass(ModalBody, [{
    key: "render",
    value: function render() {
      return /*#__PURE__*/react.createElement("div", {
        className: "modal-body"
      }, this.props.children);
    }
  }]);
}(react.Component);
var ModalFooter = /*#__PURE__*/function (_React$Component4) {
  function ModalFooter(props) {
    _classCallCheck(this, ModalFooter);
    return _callSuper(this, ModalFooter, [props]);
  }
  _inherits(ModalFooter, _React$Component4);
  return _createClass(ModalFooter, [{
    key: "render",
    value: function render() {
      return /*#__PURE__*/react.createElement("div", {
        className: "modal-footer"
      }, this.props.children);
    }
  }]);
}(react.Component);
var _nextPage = /*#__PURE__*/new WeakMap();
var _prevPages = /*#__PURE__*/new WeakMap();
var _onNextPage = /*#__PURE__*/new WeakMap();
var _modal2 = /*#__PURE__*/new WeakMap();
var _resetLoadingState = /*#__PURE__*/new WeakMap();
var _getPageProps = /*#__PURE__*/new WeakMap();
var _setNextPage = /*#__PURE__*/new WeakMap();
var _setLoadingText = /*#__PURE__*/new WeakMap();
var _setHelpLink = /*#__PURE__*/new WeakMap();
var ProgressModal = /*#__PURE__*/function (_React$Component5) {
  function ProgressModal(_props) {
    var _this3;
    _classCallCheck(this, ProgressModal);
    _this3 = _callSuper(this, ProgressModal, [_props]);
    _classPrivateFieldInitSpec(_this3, _nextPage, null);
    _classPrivateFieldInitSpec(_this3, _prevPages, []);
    _classPrivateFieldInitSpec(_this3, _onNextPage, null);
    _classPrivateFieldInitSpec(_this3, _modal2, null);
    _classPrivateFieldInitSpec(_this3, _resetLoadingState, {});
    _classPrivateFieldInitSpec(_this3, _getPageProps, function () {
      var pageProps = _objectSpread(_objectSpread({}, _this3.state.pageProps), {}, {
        setTitle: function setTitle(t) {
          return _this3.setState({
            title: t
          });
        },
        setNextPage: _classPrivateFieldGet(_setNextPage, _this3),
        setPageWidth: function setPageWidth(w) {
          return _this3.setState({
            pageWidth: w
          });
        },
        enablePrev: function enablePrev(ep) {
          return _this3.setState({
            enablePrev: ep
          });
        },
        enableNext: function enableNext(en) {
          return _this3.setState({
            enableNext: en
          });
        },
        setLoadingText: _classPrivateFieldGet(_setLoadingText, _this3),
        setHelpLink: _classPrivateFieldGet(_setHelpLink, _this3),
        setIsFinalPage: function setIsFinalPage(f) {
          return _this3.setState({
            isFinalPage: f
          });
        },
        setError: function setError(e) {
          return _this3.setState({
            errorMessage: e
          });
        },
        onNextPage: function onNextPage(f) {
          return _classPrivateFieldSet(_onNextPage, _this3, f);
        },
        close: _this3.handleClose
      });
      return pageProps;
    });
    _classPrivateFieldInitSpec(_this3, _setNextPage, function (type, props) {
      _classPrivateFieldSet(_nextPage, _this3, {
        type: type,
        props: props
      });
      _classPrivateFieldGet(_prevPages, _this3).push({
        type: _this3.state.pageType,
        props: _this3.state.pageProps
      });
      _classPrivateFieldSet(_onNextPage, _this3, null);
      _this3.setState(_objectSpread(_objectSpread({}, _DefaultStates._), {}, {
        pageType: _classPrivateFieldGet(_nextPage, _this3).type,
        pageProps: _classPrivateFieldGet(_nextPage, _this3).props,
        enablePrev: _classPrivateFieldGet(_prevPages, _this3).length > 0
      }));
    });
    _classPrivateFieldInitSpec(_this3, _setLoadingText, function (text) {
      if (text) {
        _classPrivateFieldSet(_resetLoadingState, _this3, {
          enableNext: _this3.state.enableNext,
          enablePrev: _this3.state.enablePrev
        });
        _this3.setState({
          loadingText: text,
          enableNext: false,
          enablePrev: false
        });
      } else {
        _this3.setState(_objectSpread({
          loadingText: text
        }, _classPrivateFieldGet(_resetLoadingState, _this3)));
      }
    });
    _classPrivateFieldInitSpec(_this3, _setHelpLink, function (url, text) {
      _this3.setState({
        helpText: text,
        helpUrl: url
      });
    });
    _defineProperty(_this3, "tryNext", function () {
      _classPrivateFieldSet(_nextPage, _this3, null);
      if (_classPrivateFieldGet(_onNextPage, _this3)) {
        _classPrivateFieldGet(_onNextPage, _this3).call(_this3);
      }
    });
    _defineProperty(_this3, "tryPrev", function () {
      if (_classPrivateFieldGet(_prevPages, _this3).length > 0) {
        var prevPage = _classPrivateFieldGet(_prevPages, _this3).pop();
        _this3.setState(_objectSpread(_objectSpread({}, _DefaultStates._), {}, {
          pageType: prevPage.type,
          pageProps: prevPage.props,
          enablePrev: _classPrivateFieldGet(_prevPages, _this3).length > 0
        }));
      }
    });
    _defineProperty(_this3, "handleModalCreated", function (modal) {
      _classPrivateFieldSet(_modal2, _this3, modal);
    });
    _defineProperty(_this3, "handleModalClosed", function () {
      _this3.setState(_objectSpread(_objectSpread({}, _DefaultStates._), {}, {
        pageType: null,
        pageProps: null,
        errorMessage: null
      }));
      _classPrivateFieldSet(_prevPages, _this3, []);
    });
    _defineProperty(_this3, "handleModalOpening", function () {
      _this3.setState(_objectSpread(_objectSpread({}, _DefaultStates._), {}, {
        pageType: _this3.props.initialPageType,
        pageProps: _this3.props.initialPageProps
      }));
    });
    _defineProperty(_this3, "handleClose", function () {
      if (_classPrivateFieldGet(_modal2, _this3)) {
        _classPrivateFieldGet(_modal2, _this3).hide();
      }
    });
    _defineProperty(_this3, "handleOpen", function () {
      if (_classPrivateFieldGet(_modal2, _this3)) {
        _classPrivateFieldGet(_modal2, _this3).show();
      }
    });
    _this3.state = _objectSpread(_objectSpread({}, _DefaultStates._), {}, {
      pageType: null,
      pageProps: null,
      errorMessage: null
    });
    return _this3;
  }
  _inherits(ProgressModal, _React$Component5);
  return _createClass(ProgressModal, [{
    key: "render",
    value: function render() {
      var _this$props$finishBut,
        _this$props$finishBut2,
        _this4 = this,
        _this$state$helpText;
      if (this.props.externalRef) {
        this.props.externalRef.current.show = this.handleOpen;
        this.props.externalRef.current.hide = this.handleClose;
      }
      var page = this.state.pageType ? /*#__PURE__*/react.createElement(this.state.pageType, _classPrivateFieldGet(_getPageProps, this).call(this)) : null;
      var leftButton = /*#__PURE__*/react.createElement("button", {
        type: "button",
        className: "btn btn-outline-secondary",
        disabled: !this.state.enablePrev
      }, /*#__PURE__*/react.createElement("i", {
        className: "fa fa-arrow-left"
      }), " ", "Back");
      var rightButton = this.state.isFinalPage ? /*#__PURE__*/react.createElement("button", {
        type: "button",
        className: "btn btn-primary",
        disabled: !this.state.enableNext
      }, /*#__PURE__*/react.createElement("i", {
        className: (_this$props$finishBut = this.props.finishButtonIcon) !== null && _this$props$finishBut !== void 0 ? _this$props$finishBut : "far fa-check"
      }), " ", (_this$props$finishBut2 = this.props.finishButtonText) !== null && _this$props$finishBut2 !== void 0 ? _this$props$finishBut2 : "Finish") : /*#__PURE__*/react.createElement("button", {
        type: "button",
        className: "btn btn-primary",
        disabled: !this.state.enableNext
      }, "Next", " ", /*#__PURE__*/react.createElement("i", {
        className: "far fa-arrow-right"
      }));
      return /*#__PURE__*/react.createElement(Modal, {
        id: this.props.id,
        width: this.state.pageWidth,
        onModalCreated: this.handleModalCreated,
        onClosed: this.handleModalClosed,
        onOpening: this.handleModalOpening
      }, /*#__PURE__*/react.createElement(ModalHeader, {
        id: this.props.id,
        title: this.state.title
      }), /*#__PURE__*/react.createElement(ModalBody, null, /*#__PURE__*/react.createElement(DismissibleAlert/* default */.A, {
        type: "error",
        message: this.state.errorMessage,
        onClose: function onClose() {
          return _this4.setState({
            errorMessage: null
          });
        }
      }), page), /*#__PURE__*/react.createElement(ModalFooter, null, /*#__PURE__*/react.createElement("span", {
        className: "me-auto"
      }, /*#__PURE__*/react.createElement("a", {
        href: this.state.helpUrl,
        target: "_blank",
        rel: "noreferrer"
      }, (_this$state$helpText = this.state.helpText) !== null && _this$state$helpText !== void 0 ? _this$state$helpText : "View Documentation", "\xA0", /*#__PURE__*/react.createElement("i", {
        className: "fa fa-regular fa-arrow-up-right-from-square"
      }))), this.state.loadingText && /*#__PURE__*/react.createElement("span", {
        className: "me-auto"
      }, /*#__PURE__*/react.createElement("i", {
        className: "fad fa-spinner fa-spin"
      }), "\xA0", this.state.loadingText), /*#__PURE__*/react.cloneElement(leftButton, {
        onClick: this.tryPrev
      }), /*#__PURE__*/react.cloneElement(rightButton, {
        onClick: this.tryNext
      })));
    }
  }]);
}(react.Component);
var _DefaultStates = {
  _: {
    title: "",
    pageWidth: null,
    enablePrev: false,
    enableNext: true,
    loadingText: "",
    isFinalPage: false
  }
};
// EXTERNAL MODULE: ./src/components/migration/utils.jsx
var utils = __webpack_require__(19967);
// EXTERNAL MODULE: ./src/components/utils/index.js + 1 modules
var components_utils = __webpack_require__(25337);
// EXTERNAL MODULE: ./src/components/migration/MigrationTabs.jsx
var MigrationTabs = __webpack_require__(69404);
;// CONCATENATED MODULE: ./src/components/migration/index.jsx
function migration_typeof(o) { "@babel/helpers - typeof"; return migration_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, migration_typeof(o); }
function migration_classPrivateFieldInitSpec(e, t, a) { migration_checkPrivateRedeclaration(e, t), t.set(e, a); }
function migration_checkPrivateRedeclaration(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object"); }
function migration_classPrivateFieldGet(s, a) { return s.get(migration_assertClassBrand(s, a)); }
function migration_classPrivateFieldSet(s, a, r) { return s.set(migration_assertClassBrand(s, a), r), r; }
function migration_assertClassBrand(e, t, n) { if ("function" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n; throw new TypeError("Private element is not present on this object"); }
function migration_classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function migration_defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, migration_toPropertyKey(o.key), o); } }
function migration_createClass(e, r, t) { return r && migration_defineProperties(e.prototype, r), t && migration_defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function migration_callSuper(t, o, e) { return o = migration_getPrototypeOf(o), migration_possibleConstructorReturn(t, migration_isNativeReflectConstruct() ? Reflect.construct(o, e || [], migration_getPrototypeOf(t).constructor) : o.apply(t, e)); }
function migration_possibleConstructorReturn(t, e) { if (e && ("object" == migration_typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return migration_assertThisInitialized(t); }
function migration_assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function migration_isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (migration_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function migration_getPrototypeOf(t) { return migration_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, migration_getPrototypeOf(t); }
function migration_inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && migration_setPrototypeOf(t, e); }
function migration_setPrototypeOf(t, e) { return migration_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, migration_setPrototypeOf(t, e); }
function migration_defineProperty(e, r, t) { return (r = migration_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function migration_toPropertyKey(t) { var i = migration_toPrimitive(t, "string"); return "symbol" == migration_typeof(i) ? i : i + ""; }
function migration_toPrimitive(t, r) { if ("object" != migration_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != migration_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }









var ImportUploadPage = /*#__PURE__*/function (_React$Component) {
  function ImportUploadPage(props) {
    var _this;
    migration_classCallCheck(this, ImportUploadPage);
    _this = migration_callSuper(this, ImportUploadPage, [props]);
    migration_defineProperty(_this, "handleNextPage", function () {
      var _window;
      _this.props.setLoadingText("Uploading File...");
      _this.props.setError(null);
      var filename = _this.props.isFlowConnectors ? (_window = window) === null || _window === void 0 || (_window = _window.rsb) === null || _window === void 0 || (_window = _window.workflow) === null || _window === void 0 || (_window = _window.currentFile) === null || _window === void 0 ? void 0 : _window.name : _this.fileInput.current.files[0].name;
      if (_this.props.isFlow && filename.endsWith(".arc")) {
        _this.props.setError("This file appears to be a global export (.arc). Please navigate to the Migration tab within the Settings page to import it.");
        _this.props.setLoadingText(null);
      } else if (!_this.props.isFlow && filename.endsWith(".arcflow")) {
        _this.props.setError("This file appears to be a flow or workspace export (.arcflow). Please navigate to the workspace where you would like these resources to reside and import from there.");
        _this.props.setLoadingText(null);
      } else {
        var _window3;
        var formData = new FormData();
        var fileObj = null;
        if (_this.props.isFlowConnectors) {
          var _window2;
          fileObj = (_window2 = window) === null || _window2 === void 0 || (_window2 = _window2.rsb) === null || _window2 === void 0 || (_window2 = _window2.workflow) === null || _window2 === void 0 ? void 0 : _window2.currentFile;
        } else {
          fileObj = _this.fileInput.current.files[0];
        }
        formData.append("arcflow", fileObj);
        var workspaceId = (_window3 = window) === null || _window3 === void 0 || (_window3 = _window3.rsb) === null || _window3 === void 0 || (_window3 = _window3.workflow) === null || _window3 === void 0 ? void 0 : _window3.currentWorkspaceId;
        if (_this.props.externalRef) {
          workspaceId = _this.props.externalRef.current.workspaceId;
        }
        axios/* default */.A.post("src/standard/migrationRead.rsb?@json&InputName=arcflow" + (_this.props.isFlow ? "&WorkspaceId=" + encodeURIComponent(workspaceId) : ""), formData, {
          headers: {
            "Content-Type": "multipart/form-data"
          }
        }).then(function (response) {
          _this.props.setLoadingText(null);
          var data = response.data;
          var errMsg = (0,components_utils/* getResultErrorMessage */.hz)(data.items);
          if (errMsg) {
            _this.props.setError(errMsg);
          } else {
            var settingsInfo = data.items && data.items[0] && data.items[0].settingsinfo;
            var fileHandle = data.items && data.items[0] && data.items[0].handle;
            if (settingsInfo && fileHandle) {
              var settingsInfoObj = JSON.parse(settingsInfo);
              if (settingsInfoObj.workspaces) {
                Object.keys(settingsInfoObj.workspaces).forEach(function (key) {
                  if (key && _this.props.isFlow) {
                    _this.props.setError("This file appears to be a global export (.arc). Please navigate to the Migration tab within the Settings page to import it.");
                    _this.props.setLoadingText(null);
                    return;
                  } else if (key == "" && !_this.props.isFlow) {
                    _this.props.setError("This file appears to be a flow or workspace export (.arcflow). Please navigate to the workspace where you would like these resources to reside and import from there.");
                    _this.props.setLoadingText(null);
                    return;
                  }
                });
              }
              var nextPageType = ImportProcessedPage;
              _this.props.setNextPage(nextPageType, {
                fileName: filename,
                settingsInfo: settingsInfoObj,
                fileHandle: fileHandle,
                "import": _this.props["import"],
                isFlow: _this.props.isFlow,
                isFlowConnectors: _this.props.isFlowConnectors,
                workspaceId: workspaceId
              });
            } else {
              _this.props.setError("No SettingsInfo or Handle.");
            }
          }
        });
      }
    });
    migration_defineProperty(_this, "handleSelectedFile", function () {
      var selectedFile = _this.fileInput.current.files.length > 0;
      _this.props.enableNext(selectedFile);
      _this.setState({
        selectedFile: selectedFile
      });
    });
    _this.props.setTitle(_this.props.isFlow ? _this.props.isFlowConnectors ? "Flow Import" : "Workspace Import" : "Application Settings Import");
    _this.props.enablePrev(false);
    _this.props.enableNext(_this.props.isFlowConnectors ? true : false);
    _this.props.onNextPage(_this.handleNextPage);
    _this.props.setHelpLink("help.rst#Importing-Exporting-Flows");
    _this.fileInput = /*#__PURE__*/react.createRef();
    _this.state = {
      selectedFile: _this.props.isFlowConnectors ? true : false
    };
    return _this;
  }
  migration_inherits(ImportUploadPage, _React$Component);
  return migration_createClass(ImportUploadPage, [{
    key: "render",
    value: function render() {
      var _window4;
      var currentFilename = (_window4 = window) === null || _window4 === void 0 || (_window4 = _window4.rsb) === null || _window4 === void 0 || (_window4 = _window4.workflow) === null || _window4 === void 0 || (_window4 = _window4.currentFile) === null || _window4 === void 0 ? void 0 : _window4.name;
      return /*#__PURE__*/react.createElement("form", {
        className: "form-horizontal form-settings",
        role: "form",
        method: "POST",
        autoComplete: "off",
        noValidate: "novalidate"
      }, /*#__PURE__*/react.createElement("p", null, this.props.isFlow ? "Choose an .arcflow file to be imported." : "Choose an .arc file to be imported."), /*#__PURE__*/react.createElement("div", {
        className: "form-group row mb-3"
      }, /*#__PURE__*/react.createElement("label", {
        htmlFor: "migrationImportModal_file",
        className: "col-md-5 control-label col-form-label"
      }, "File"), /*#__PURE__*/react.createElement("div", {
        className: "col-md-6"
      }, this.props.isFlowConnectors && /*#__PURE__*/react.createElement("div", {
        className: "settings-text"
      }, currentFilename), !this.props.isFlowConnectors && /*#__PURE__*/react.createElement("input", {
        className: "form-control",
        type: "file",
        size: "15",
        name: "file",
        accept: this.props.isFlow ? ".arcflow" : ".arc",
        onChange: this.handleSelectedFile,
        ref: this.fileInput
      }))));
    }
  }]);
}(react.Component);
var _hasConflict = /*#__PURE__*/new WeakMap();
var ImportProcessedPage = /*#__PURE__*/function (_React$Component2) {
  function ImportProcessedPage(props) {
    var _this2;
    migration_classCallCheck(this, ImportProcessedPage);
    _this2 = migration_callSuper(this, ImportProcessedPage, [props]);
    migration_classPrivateFieldInitSpec(_this2, _hasConflict, false);
    migration_defineProperty(_this2, "handleNextPage", function () {
      var password = _this2.state.importSensitive ? _this2.state.password : null;
      var doNext = function doNext(handle, settingInfo) {
        if (_this2.state.importType != "all") {
          _this2.props.setNextPage(ImportCustomizePage, {
            settingsInfo: settingInfo,
            hasConflict: migration_classPrivateFieldGet(_hasConflict, _this2),
            "import": _this2.props["import"],
            fileHandle: handle,
            password: password,
            isFlow: _this2.props.isFlow,
            isFlowConnectors: _this2.props.isFlowConnectors
          });
        } else if (migration_classPrivateFieldGet(_hasConflict, _this2)) {
          _this2.props.setNextPage(ImportConflictResolutionPage, {
            settingsInfo: settingInfo,
            "import": _this2.props["import"],
            fileHandle: handle,
            password: password,
            isFlow: _this2.props.isFlow,
            isFlowConnectors: _this2.props.isFlowConnectors
          });
        } else {
          _this2.props["import"](handle, password, settingInfo, _this2);
        }
      };
      if (password) {
        _this2.props.setLoadingText("Decrypting File...");
        _this2.props.setError(null);
        var params = new URLSearchParams();
        if (_this2.props.isFlow) {
          params.append("WorkspaceId", _this2.props.workspaceId);
        }
        params.append("Password", password);
        params.append("Handle", _this2.props.fileHandle);
        axios/* default */.A.post("src/standard/migrationRead.rsb?@json", params).then(function (response) {
          _this2.props.setLoadingText(null);
          var data = response.data;
          var errMsg = (0,components_utils/* getResultErrorMessage */.hz)(data.items);
          if (errMsg) {
            _this2.props.setError(errMsg);
          } else {
            var settingsInfoStr = data.items && data.items[0] && data.items[0].settingsinfo;
            var fileHandle = data.items && data.items[0] && data.items[0].handle;
            if (settingsInfoStr && fileHandle) {
              var settingsInfo = JSON.parse(settingsInfoStr);
              migration_classPrivateFieldSet(_hasConflict, _this2, _HasConflict.call(ImportProcessedPage, settingsInfo));
              doNext(fileHandle, settingsInfo);
            } else {
              _this2.props.setError("No SettingsInfo or Handle.");
            }
          }
        });
      } else {
        doNext(_this2.props.fileHandle, _this2.props.settingsInfo);
      }
    });
    migration_defineProperty(_this2, "handleSensitiveChanged", function () {
      var importSensitive = !_this2.state.importSensitive;
      _this2.setState({
        importSensitive: importSensitive
      });
      if (importSensitive) {
        _this2.props.enableNext(_this2.state.password != null && _this2.state.password != "");
      } else {
        _this2.props.enableNext(true);
      }
    });
    migration_defineProperty(_this2, "handleTypeChanged", function (event) {
      _this2.setState({
        importType: event.target.value
      });
      _this2.props.setIsFinalPage(event.target.value == "all" && !migration_classPrivateFieldGet(_hasConflict, _this2));
    });
    migration_defineProperty(_this2, "handlePasswordChanged", function (event) {
      _this2.setState({
        password: event.target.value
      });
      _this2.props.enableNext(event.target.value != "");
    });
    _this2.props.setTitle(_this2.props.isFlow ? _this2.props.isFlowConnectors ? "Flow Import" : "Workspace Import" : "Application Settings Import");
    _this2.props.enablePrev(true);
    _this2.props.enableNext(!_this2.props.settingsInfo.encrypted);
    _this2.props.onNextPage(_this2.handleNextPage);
    _this2.props.setHelpLink("help.rst#Importing-Exporting-Flows");
    _this2.state = {
      importSensitive: true,
      importType: "all",
      password: null
    };
    _this2.customImportLabel = /*#__PURE__*/react.createRef();
    migration_classPrivateFieldSet(_hasConflict, _this2, _HasConflict.call(ImportProcessedPage, _this2.props.settingsInfo));
    if (!migration_classPrivateFieldGet(_hasConflict, _this2)) {
      _this2.props.setIsFinalPage(true);
    }
    return _this2;
  }
  migration_inherits(ImportProcessedPage, _React$Component2);
  return migration_createClass(ImportProcessedPage, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this3 = this;
      var elem = this.customImportLabel.current;
      if (elem != null) {
        // The bootstrap may not be loaded when mounting to DOM tree.
        setTimeout(function () {
          new window.bootstrap.Popover(elem, {
            container: "body",
            content: _this3.props.isFlow ? "Custom import allows you to select specific flows and settings within the file to import." : "Custom import allows you to select specific workspaces and settings within the file to import.",
            html: true,
            placement: "top",
            trigger: "hover"
          });
        }, 500);
      }
    }
  }, {
    key: "render",
    value: function render() {
      var hasSensitiveValues = this.props.settingsInfo.encrypted;
      return /*#__PURE__*/react.createElement("form", {
        className: "form-horizontal form-settings",
        role: "form",
        method: "POST",
        autoComplete: "off",
        noValidate: "novalidate"
      }, /*#__PURE__*/react.createElement("input", {
        type: "password",
        name: "no-password",
        className: "rsb-form-nosubmit",
        defaultValue: "",
        autoComplete: "new-password",
        style: {
          display: "none"
        }
      }), /*#__PURE__*/react.createElement("p", null, this.props.isFlow ? "Choose an .arcflow file to be imported." : "Choose an .arc file to be imported."), /*#__PURE__*/react.createElement("div", {
        className: "form-group row mb-3"
      }, /*#__PURE__*/react.createElement("label", {
        className: "col-md-5 control-label col-form-label"
      }, "File"), /*#__PURE__*/react.createElement("div", {
        className: "col-md-6"
      }, /*#__PURE__*/react.createElement("div", {
        className: "settings-text ps-0"
      }, this.props.fileName))), /*#__PURE__*/react.createElement("div", {
        className: "form-group row mb-3"
      }, /*#__PURE__*/react.createElement("label", {
        className: "col-md-5 control-label col-form-label"
      }, "Type"), /*#__PURE__*/react.createElement("div", {
        className: "col-md-6"
      }, /*#__PURE__*/react.createElement("div", {
        className: "radio pt-2"
      }, /*#__PURE__*/react.createElement("label", null, /*#__PURE__*/react.createElement("input", {
        type: "radio",
        className: "form-check-input",
        name: "type",
        value: "all",
        checked: this.state.importType == "all",
        onChange: this.handleTypeChanged
      }), " ", "Import all workspaces and settings")), /*#__PURE__*/react.createElement("div", {
        className: "radio pt-2"
      }, /*#__PURE__*/react.createElement("label", {
        ref: this.customImportLabel
      }, /*#__PURE__*/react.createElement("input", {
        type: "radio",
        className: "form-check-input",
        name: "type",
        value: "custom",
        checked: this.state.importType == "custom",
        onChange: this.handleTypeChanged
      }), " ", "Custom import", "\xA0", /*#__PURE__*/react.createElement("sup", null, /*#__PURE__*/react.createElement("i", {
        className: "fa fa-question-circle"
      })))))), hasSensitiveValues && /*#__PURE__*/react.createElement("div", {
        className: "form-group row mb-3"
      }, /*#__PURE__*/react.createElement("label", {
        htmlFor: "migrationImportProcessedPageSensitive",
        className: "col-md-5 control-label col-form-label"
      }, "Import Sensitive Values"), /*#__PURE__*/react.createElement("div", {
        className: "col-md-6"
      }, /*#__PURE__*/react.createElement("div", {
        className: "checkbox"
      }, /*#__PURE__*/react.createElement("label", null, /*#__PURE__*/react.createElement("input", {
        className: "form-check-input",
        type: "checkbox",
        name: "sensitive",
        id: "migrationImportProcessedPageSensitive",
        onChange: this.handleSensitiveChanged,
        defaultChecked: true
      }), /*#__PURE__*/react.createElement("span", null, "Enable"))))), hasSensitiveValues && /*#__PURE__*/react.createElement("div", {
        className: "form-group row"
      }, /*#__PURE__*/react.createElement("label", {
        htmlFor: "migrationImportProcessedPagePassword",
        className: "col-md-5 control-label col-form-label"
      }, "Password"), /*#__PURE__*/react.createElement("div", {
        className: "col-md-6"
      }, /*#__PURE__*/react.createElement("div", null, /*#__PURE__*/react.createElement("input", {
        type: "password",
        className: "form-control",
        id: "migrationImportProcessedPagePassword",
        disabled: !this.state.importSensitive,
        onChange: this.handlePasswordChanged
      })), /*#__PURE__*/react.createElement("div", {
        className: "migration-modal-value-text"
      }, /*#__PURE__*/react.createElement("p", null, "A password is required to import sensitive values.")))));
    }
  }]);
}(react.Component);
function _HasConflict(settingsInfo) {
  var hasConflict = false;
  if (settingsInfo.workspaces) {
    hasConflict = Object.values(settingsInfo.workspaces).some(function (workspaceInfo) {
      if (workspaceInfo.settings.existing) return true;
      if (workspaceInfo.connectors) {
        return Object.values(workspaceInfo.connectors).some(function (connectorInfo) {
          return connectorInfo.existing;
        });
      }
      return false;
    });
  }
  if (!hasConflict && settingsInfo.profiles) {
    hasConflict = Object.values(settingsInfo.profiles).length > 0;
  }
  if (!hasConflict && settingsInfo.settings) {
    hasConflict = Object.values(settingsInfo.settings).length > 0;
  }
  if (!hasConflict && settingsInfo.users) {
    hasConflict = Object.values(settingsInfo.users).some(function (userInfo) {
      return userInfo.existing;
    });
  }
  if (!hasConflict && settingsInfo.roles) {
    hasConflict = Object.values(settingsInfo.roles).some(function (roleInfo) {
      return roleInfo.existing;
    });
  }
  if (!hasConflict && settingsInfo.certificates) {
    hasConflict = Object.values(settingsInfo.certificates).some(function (certificateInfo) {
      return certificateInfo.existing;
    });
  }
  if (!hasConflict && settingsInfo.connections) {
    hasConflict = Object.values(settingsInfo.connections).some(function (connInfo) {
      return connInfo.existing;
    });
  }
  if (!hasConflict && settingsInfo.vaults) {
    hasConflict = Object.values(settingsInfo.vaults).some(function (vaultInfo) {
      return vaultInfo.existing;
    });
  }
  if (!hasConflict && settingsInfo.reports) {
    hasConflict = Object.values(settingsInfo.reports).some(function (reportInfo) {
      return reportInfo.existing;
    });
  }
  if (!hasConflict && settingsInfo.partners) {
    hasConflict = Object.values(settingsInfo.partners).some(function (partnerInfo) {
      return partnerInfo.existing;
    });
  }
  if (!hasConflict && settingsInfo.documents) {
    hasConflict = Object.values(settingsInfo.documents).some(function (documentInfo) {
      return documentInfo.existing;
    });
  }
  return hasConflict;
}
var _settingsInfo = /*#__PURE__*/new WeakMap();
var _hasWorkspaceTab = /*#__PURE__*/new WeakMap();
var _hasSettingsTab = /*#__PURE__*/new WeakMap();
var _hasEDITab = /*#__PURE__*/new WeakMap();
var _showIncludeWorkspaceSettings = /*#__PURE__*/new WeakMap();
var _includeWorkspaceSettings = /*#__PURE__*/new WeakMap();
var _workspaceActions = /*#__PURE__*/new WeakMap();
var _getIsFinalPage = /*#__PURE__*/new WeakMap();
var _updateWorkspaceAction = /*#__PURE__*/new WeakMap();
var _updateNameAction = /*#__PURE__*/new WeakMap();
var _updatePartnerAction = /*#__PURE__*/new WeakMap();
var _updateDocumentAction = /*#__PURE__*/new WeakMap();
var _updateAPIAction = /*#__PURE__*/new WeakMap();
var _updateConnectorAction = /*#__PURE__*/new WeakMap();
var ImportCustomizePage = /*#__PURE__*/function (_React$Component3) {
  function ImportCustomizePage(props) {
    var _classPrivateFieldGet4, _classPrivateFieldGet5, _classPrivateFieldGet6, _classPrivateFieldGet7, _classPrivateFieldGet8, _classPrivateFieldGet9, _classPrivateFieldGet10, _classPrivateFieldGet11, _classPrivateFieldGet12;
    var _this4;
    migration_classCallCheck(this, ImportCustomizePage);
    _this4 = migration_callSuper(this, ImportCustomizePage, [props]);
    migration_classPrivateFieldInitSpec(_this4, _settingsInfo, null);
    migration_classPrivateFieldInitSpec(_this4, _hasWorkspaceTab, false);
    migration_classPrivateFieldInitSpec(_this4, _hasSettingsTab, false);
    migration_classPrivateFieldInitSpec(_this4, _hasEDITab, false);
    migration_classPrivateFieldInitSpec(_this4, _showIncludeWorkspaceSettings, false);
    migration_classPrivateFieldInitSpec(_this4, _includeWorkspaceSettings, true);
    migration_classPrivateFieldInitSpec(_this4, _workspaceActions, {});
    migration_defineProperty(_this4, "handleNextPage", function () {
      if (!migration_classPrivateFieldGet(_getIsFinalPage, _this4).call(_this4)) {
        _this4.props.setNextPage(ImportConflictResolutionPage, {
          settingsInfo: migration_classPrivateFieldGet(_settingsInfo, _this4),
          "import": _this4.props["import"],
          fileHandle: _this4.props.fileHandle,
          password: _this4.props.password,
          isFlow: _this4.props.isFlow
        });
      } else {
        _this4.props["import"](_this4.props.fileHandle, _this4.props.password, migration_classPrivateFieldGet(_settingsInfo, _this4), _this4);
      }
    });
    migration_defineProperty(_this4, "handleWorkspacesClicked", function () {
      _this4.setState({
        showingTab: "workspaces"
      });
    });
    migration_defineProperty(_this4, "handleSettingsClicked", function () {
      _this4.setState({
        showingTab: "settings"
      });
    });
    migration_defineProperty(_this4, "handleEDIClicked", function () {
      _this4.setState({
        showingTab: "edi"
      });
    });
    migration_defineProperty(_this4, "handleWorkspaceActionChange", function (workspaceId, action) {
      migration_classPrivateFieldGet(_updateWorkspaceAction, _this4).call(_this4, workspaceId, action);
      _this4.props.setIsFinalPage(migration_classPrivateFieldGet(_getIsFinalPage, _this4).call(_this4));
    });
    migration_defineProperty(_this4, "handleNameActionChange", function (section, action) {
      migration_classPrivateFieldGet(_updateNameAction, _this4).call(_this4, section, action);
      _this4.props.setIsFinalPage(migration_classPrivateFieldGet(_getIsFinalPage, _this4).call(_this4));
    });
    migration_defineProperty(_this4, "handlePartnerActionChange", function (partnerId, action) {
      migration_classPrivateFieldGet(_updatePartnerAction, _this4).call(_this4, partnerId, action);
      _this4.props.setIsFinalPage(migration_classPrivateFieldGet(_getIsFinalPage, _this4).call(_this4));
    });
    migration_defineProperty(_this4, "handleDocumentActionChange", function (documentId, action) {
      migration_classPrivateFieldGet(_updateDocumentAction, _this4).call(_this4, documentId, action);
      _this4.props.setIsFinalPage(migration_classPrivateFieldGet(_getIsFinalPage, _this4).call(_this4));
    });
    migration_defineProperty(_this4, "handleAPIActionChange", function (workspaceId, apiId, action) {
      migration_classPrivateFieldGet(_updateAPIAction, _this4).call(_this4, workspaceId, apiId, action);
      _this4.props.setIsFinalPage(migration_classPrivateFieldGet(_getIsFinalPage, _this4).call(_this4));
    });
    migration_defineProperty(_this4, "handleConnectorActionChange", function (workspaceId, connectorId, action) {
      migration_classPrivateFieldGet(_updateConnectorAction, _this4).call(_this4, workspaceId, connectorId, action);
      _this4.props.setIsFinalPage(migration_classPrivateFieldGet(_getIsFinalPage, _this4).call(_this4));
    });
    migration_defineProperty(_this4, "handleIncludeWorkspaceSettingsChange", function (enable) {
      migration_classPrivateFieldSet(_includeWorkspaceSettings, _this4, enable);
      migration_classPrivateFieldGet(_showIncludeWorkspaceSettings, _this4) && Object.values(migration_classPrivateFieldGet(_settingsInfo, _this4).workspaces).forEach(function (workspaceInfo) {
        workspaceInfo.settings.action = enable && migration_classPrivateFieldGet(_workspaceActions, _this4)[workspaceInfo.id] !== "ignore" ? "skip" : "ignore";
      });
    });
    migration_classPrivateFieldInitSpec(_this4, _getIsFinalPage, function () {
      var importingConflicts = false;
      if (migration_classPrivateFieldGet(_settingsInfo, _this4).workspaces) {
        for (var _i = 0, _Object$values = Object.values(migration_classPrivateFieldGet(_settingsInfo, _this4).workspaces); _i < _Object$values.length; _i++) {
          var workspaceInfo = _Object$values[_i];
          if (workspaceInfo.connectors) {
            for (var _i2 = 0, _Object$values2 = Object.values(workspaceInfo.connectors); _i2 < _Object$values2.length; _i2++) {
              var connectorInfo = _Object$values2[_i2];
              if (connectorInfo.existing && connectorInfo.action != "ignore") {
                importingConflicts = true;
                break;
              }
            }
          }
          if (!importingConflicts && workspaceInfo.apis) {
            for (var _i3 = 0, _Object$values3 = Object.values(workspaceInfo.apis); _i3 < _Object$values3.length; _i3++) {
              var apiInfo = _Object$values3[_i3];
              if (apiInfo.existing && apiInfo.action != "ignore") {
                importingConflicts = true;
                break;
              }
            }
          }
          if (importingConflicts) {
            break;
          }
        }
      }
      if (!importingConflicts && migration_classPrivateFieldGet(_settingsInfo, _this4).profiles) {
        for (var _i4 = 0, _Object$values4 = Object.values(migration_classPrivateFieldGet(_settingsInfo, _this4).profiles); _i4 < _Object$values4.length; _i4++) {
          var profileInfo = _Object$values4[_i4];
          if (profileInfo.action != "ignore") {
            importingConflicts = true;
            break;
          }
        }
      }
      if (!importingConflicts && migration_classPrivateFieldGet(_settingsInfo, _this4).settings) {
        for (var _i5 = 0, _Object$values5 = Object.values(migration_classPrivateFieldGet(_settingsInfo, _this4).settings); _i5 < _Object$values5.length; _i5++) {
          var settingInfo = _Object$values5[_i5];
          if (settingInfo.action != "ignore") {
            importingConflicts = true;
            break;
          }
        }
      }
      if (!importingConflicts && migration_classPrivateFieldGet(_settingsInfo, _this4).users) {
        for (var _i6 = 0, _Object$values6 = Object.values(migration_classPrivateFieldGet(_settingsInfo, _this4).users); _i6 < _Object$values6.length; _i6++) {
          var userInfo = _Object$values6[_i6];
          if (userInfo.existing && userInfo.action != "ignore") {
            importingConflicts = true;
            break;
          }
        }
      }
      if (!importingConflicts && migration_classPrivateFieldGet(_settingsInfo, _this4).roles) {
        for (var _i7 = 0, _Object$values7 = Object.values(migration_classPrivateFieldGet(_settingsInfo, _this4).roles); _i7 < _Object$values7.length; _i7++) {
          var roleInfo = _Object$values7[_i7];
          if (roleInfo.existing && roleInfo.action != "ignore") {
            importingConflicts = true;
            break;
          }
        }
      }
      if (!importingConflicts && migration_classPrivateFieldGet(_settingsInfo, _this4).certificates) {
        for (var _i8 = 0, _Object$values8 = Object.values(migration_classPrivateFieldGet(_settingsInfo, _this4).certificates); _i8 < _Object$values8.length; _i8++) {
          var certificateInfo = _Object$values8[_i8];
          if (certificateInfo.existing && certificateInfo.action != "ignore") {
            importingConflicts = true;
            break;
          }
        }
      }
      if (!importingConflicts && migration_classPrivateFieldGet(_settingsInfo, _this4).connections) {
        for (var _i9 = 0, _Object$values9 = Object.values(migration_classPrivateFieldGet(_settingsInfo, _this4).connections); _i9 < _Object$values9.length; _i9++) {
          var connInfo = _Object$values9[_i9];
          if (connInfo.existing && connInfo.action != "ignore") {
            importingConflicts = true;
            break;
          }
        }
      }
      if (!importingConflicts && migration_classPrivateFieldGet(_settingsInfo, _this4).vaults) {
        for (var _i10 = 0, _Object$values10 = Object.values(migration_classPrivateFieldGet(_settingsInfo, _this4).vaults); _i10 < _Object$values10.length; _i10++) {
          var vaultInfo = _Object$values10[_i10];
          if (vaultInfo.existing && vaultInfo.action != "ignore") {
            importingConflicts = true;
            break;
          }
        }
      }
      if (!importingConflicts && migration_classPrivateFieldGet(_settingsInfo, _this4).reports) {
        for (var _i11 = 0, _Object$values11 = Object.values(migration_classPrivateFieldGet(_settingsInfo, _this4).reports); _i11 < _Object$values11.length; _i11++) {
          var reportInfo = _Object$values11[_i11];
          if (reportInfo.existing && reportInfo.action != "ignore") {
            importingConflicts = true;
            break;
          }
        }
      }
      if (!importingConflicts && migration_classPrivateFieldGet(_settingsInfo, _this4).partners) {
        for (var _i12 = 0, _Object$values12 = Object.values(migration_classPrivateFieldGet(_settingsInfo, _this4).partners); _i12 < _Object$values12.length; _i12++) {
          var partnerInfo = _Object$values12[_i12];
          if (partnerInfo.existing && partnerInfo.action != "ignore") {
            importingConflicts = true;
            break;
          }
        }
      }
      if (!importingConflicts && migration_classPrivateFieldGet(_settingsInfo, _this4).documents) {
        for (var _i13 = 0, _Object$values13 = Object.values(migration_classPrivateFieldGet(_settingsInfo, _this4).documents); _i13 < _Object$values13.length; _i13++) {
          var documentInfo = _Object$values13[_i13];
          if (documentInfo.existing && documentInfo.action != "ignore") {
            importingConflicts = true;
            break;
          }
        }
      }
      return !importingConflicts;
    });
    migration_classPrivateFieldInitSpec(_this4, _updateWorkspaceAction, function (workspaceId, action) {
      if (migration_classPrivateFieldGet(_settingsInfo, _this4).workspaces) {
        var workspaceInfo = migration_classPrivateFieldGet(_settingsInfo, _this4).workspaces[workspaceId];
        if (workspaceInfo) {
          migration_classPrivateFieldGet(_workspaceActions, _this4)[workspaceInfo.id] = action;
          if (workspaceInfo.connectors) {
            Object.values(workspaceInfo.connectors).forEach(function (connectorInfo) {
              connectorInfo.action = action;
            });
          }
          if (workspaceInfo.flow) {
            if (workspaceInfo.flow.elements) {
              Object.values(workspaceInfo.flow.elements).forEach(function (elementInfo) {
                elementInfo.action = action;
              });
            }
            if (workspaceInfo.flow.views) {
              Object.values(workspaceInfo.flow.views).forEach(function (viewInfo) {
                viewInfo.action = action;
              });
            }
            if (workspaceInfo.flow.apis) {
              Object.values(workspaceInfo.flow.apis).forEach(function (apiInfo) {
                apiInfo.action = action;
              });
            }
          }
          if (workspaceInfo.apis) {
            Object.values(workspaceInfo.apis).forEach(function (apiInfo) {
              apiInfo.action = action;
            });
          }
          if (workspaceInfo.settings && action) workspaceInfo.settings.action = !migration_classPrivateFieldGet(_includeWorkspaceSettings, _this4) ? "ignore" : action;
        }
      }
    });
    migration_classPrivateFieldInitSpec(_this4, _updateNameAction, function (section, action) {
      if (migration_classPrivateFieldGet(_settingsInfo, _this4)[section]) {
        Object.values(migration_classPrivateFieldGet(_settingsInfo, _this4)[section]).forEach(function (nameInfo) {
          nameInfo.action = action;
        });
      } else if (migration_classPrivateFieldGet(_settingsInfo, _this4).settings && migration_classPrivateFieldGet(_settingsInfo, _this4).settings[section]) {
        var settingInfo = migration_classPrivateFieldGet(_settingsInfo, _this4).settings[section];
        if (settingInfo) {
          settingInfo.action = action;
        }
      }
    });
    migration_classPrivateFieldInitSpec(_this4, _updatePartnerAction, function (partnerId, action) {
      var _classPrivateFieldGet2;
      if ((_classPrivateFieldGet2 = migration_classPrivateFieldGet(_settingsInfo, _this4)) !== null && _classPrivateFieldGet2 !== void 0 && (_classPrivateFieldGet2 = _classPrivateFieldGet2.partners) !== null && _classPrivateFieldGet2 !== void 0 && _classPrivateFieldGet2[partnerId]) {
        migration_classPrivateFieldGet(_settingsInfo, _this4).partners[partnerId].action = action;
      }
    });
    migration_classPrivateFieldInitSpec(_this4, _updateDocumentAction, function (documentId, action) {
      var _classPrivateFieldGet3;
      if ((_classPrivateFieldGet3 = migration_classPrivateFieldGet(_settingsInfo, _this4)) !== null && _classPrivateFieldGet3 !== void 0 && (_classPrivateFieldGet3 = _classPrivateFieldGet3.documents) !== null && _classPrivateFieldGet3 !== void 0 && _classPrivateFieldGet3[documentId]) {
        migration_classPrivateFieldGet(_settingsInfo, _this4).documents[documentId].action = action;
      }
    });
    migration_classPrivateFieldInitSpec(_this4, _updateAPIAction, function (workspaceId, apiId, action) {
      var _workspaceInfo, _workspaceInfo2;
      var workspaceInfo = null;
      Object.values(migration_classPrivateFieldGet(_settingsInfo, _this4).workspaces).forEach(function (info) {
        workspaceInfo = info;
      });
      if ((_workspaceInfo = workspaceInfo) !== null && _workspaceInfo !== void 0 && _workspaceInfo.apis) {
        var apiInfo = workspaceInfo.apis[apiId.toLowerCase()];
        if (apiInfo) {
          apiInfo.action = action;
        }
      }
      if ((_workspaceInfo2 = workspaceInfo) !== null && _workspaceInfo2 !== void 0 && (_workspaceInfo2 = _workspaceInfo2.flow) !== null && _workspaceInfo2 !== void 0 && _workspaceInfo2.apis) {
        var flowAPIInfo = workspaceInfo.flow.apis[apiId.toLowerCase()];
        if (flowAPIInfo) {
          flowAPIInfo.action = action;
        }
      }
    });
    migration_classPrivateFieldInitSpec(_this4, _updateConnectorAction, function (workspaceId, connectorId, action) {
      var _workspaceInfo3, _workspaceInfo4;
      var workspaceInfo = null;
      Object.values(migration_classPrivateFieldGet(_settingsInfo, _this4).workspaces).forEach(function (info) {
        workspaceInfo = info;
      });
      if ((_workspaceInfo3 = workspaceInfo) !== null && _workspaceInfo3 !== void 0 && _workspaceInfo3.connectors) {
        var connectorInfo = workspaceInfo.connectors[connectorId];
        if (connectorInfo) {
          connectorInfo.action = action;
        }
      }
      if ((_workspaceInfo4 = workspaceInfo) !== null && _workspaceInfo4 !== void 0 && (_workspaceInfo4 = _workspaceInfo4.flow) !== null && _workspaceInfo4 !== void 0 && _workspaceInfo4.elements) {
        var elementInfo = workspaceInfo.flow.elements[connectorId];
        if (elementInfo) {
          elementInfo.action = action;
        }
      }
    });
    _this4.props.setTitle(_this4.props.isFlow ? _this4.props.isFlowConnectors ? "Customize Flow Import" : "Customize Workspace Import" : "Customize Application Settings Import");
    _this4.props.onNextPage(_this4.handleNextPage);
    _this4.props.setHelpLink("help.rst#Importing-Exporting-Flows");
    migration_classPrivateFieldSet(_settingsInfo, _this4, _this4.props.settingsInfo);
    migration_classPrivateFieldSet(_showIncludeWorkspaceSettings, _this4, Object.values(migration_classPrivateFieldGet(_settingsInfo, _this4).workspaces || {}).find(function (workspaceInfo) {
      var _workspaceInfo$settin;
      return (_workspaceInfo$settin = workspaceInfo.settings) === null || _workspaceInfo$settin === void 0 ? void 0 : _workspaceInfo$settin.existing;
    }) != null);
    if (migration_classPrivateFieldGet(_settingsInfo, _this4).workspaces) {
      Object.values(migration_classPrivateFieldGet(_settingsInfo, _this4).workspaces).forEach(function (workspaceInfo) {
        if (workspaceInfo.connectors) {
          Object.values(workspaceInfo.connectors).forEach(function (connectorInfo) {
            connectorInfo.action = "skip";
            migration_classPrivateFieldSet(_hasWorkspaceTab, _this4, true);
          });
        }
      });
    }
    if ((_classPrivateFieldGet4 = migration_classPrivateFieldGet(_settingsInfo, _this4)) !== null && _classPrivateFieldGet4 !== void 0 && _classPrivateFieldGet4.profiles || (_classPrivateFieldGet5 = migration_classPrivateFieldGet(_settingsInfo, _this4)) !== null && _classPrivateFieldGet5 !== void 0 && (_classPrivateFieldGet5 = _classPrivateFieldGet5.settings) !== null && _classPrivateFieldGet5 !== void 0 && _classPrivateFieldGet5.Alerts || (_classPrivateFieldGet6 = migration_classPrivateFieldGet(_settingsInfo, _this4)) !== null && _classPrivateFieldGet6 !== void 0 && (_classPrivateFieldGet6 = _classPrivateFieldGet6.settings) !== null && _classPrivateFieldGet6 !== void 0 && _classPrivateFieldGet6.AdminAPI || (_classPrivateFieldGet7 = migration_classPrivateFieldGet(_settingsInfo, _this4)) !== null && _classPrivateFieldGet7 !== void 0 && _classPrivateFieldGet7.users || (_classPrivateFieldGet8 = migration_classPrivateFieldGet(_settingsInfo, _this4)) !== null && _classPrivateFieldGet8 !== void 0 && _classPrivateFieldGet8.roles || (_classPrivateFieldGet9 = migration_classPrivateFieldGet(_settingsInfo, _this4)) !== null && _classPrivateFieldGet9 !== void 0 && _classPrivateFieldGet9.connections || (_classPrivateFieldGet10 = migration_classPrivateFieldGet(_settingsInfo, _this4)) !== null && _classPrivateFieldGet10 !== void 0 && _classPrivateFieldGet10.certificates || (_classPrivateFieldGet11 = migration_classPrivateFieldGet(_settingsInfo, _this4)) !== null && _classPrivateFieldGet11 !== void 0 && _classPrivateFieldGet11.vaults || (_classPrivateFieldGet12 = migration_classPrivateFieldGet(_settingsInfo, _this4)) !== null && _classPrivateFieldGet12 !== void 0 && _classPrivateFieldGet12.reports) {
      migration_classPrivateFieldSet(_hasSettingsTab, _this4, true);
    }
    if (migration_classPrivateFieldGet(_settingsInfo, _this4).partners || migration_classPrivateFieldGet(_settingsInfo, _this4).documents) {
      migration_classPrivateFieldSet(_hasEDITab, _this4, true);
    }
    _this4.state = {
      showingTab: migration_classPrivateFieldGet(_hasWorkspaceTab, _this4) ? "workspaces" : migration_classPrivateFieldGet(_hasEDITab, _this4) ? "edi" : migration_classPrivateFieldGet(_hasSettingsTab, _this4) ? "settings" : ""
    };
    _this4.props.setIsFinalPage(migration_classPrivateFieldGet(_getIsFinalPage, _this4).call(_this4));
    return _this4;
  }
  migration_inherits(ImportCustomizePage, _React$Component3);
  return migration_createClass(ImportCustomizePage, [{
    key: "render",
    value: function render() {
      var showingTab = null;
      switch (this.state.showingTab) {
        case "workspaces":
          if (migration_classPrivateFieldGet(_hasWorkspaceTab, this)) {
            if (this.props.isFlow) {
              showingTab = /*#__PURE__*/react.createElement(MigrationTabs/* CustomizeFlowTab */.zM, {
                isImport: true,
                workspaceInfo: migration_classPrivateFieldGet(_settingsInfo, this).workspaces[""],
                onAPIActionChange: this.handleAPIActionChange,
                onConnectorActionChange: this.handleConnectorActionChange,
                includeWorkspaceSettings: migration_classPrivateFieldGet(_includeWorkspaceSettings, this),
                onIncludeWorkspaceSettingsChange: migration_classPrivateFieldGet(_showIncludeWorkspaceSettings, this) ? this.handleIncludeWorkspaceSettingsChange : undefined
              });
            } else {
              showingTab = /*#__PURE__*/react.createElement(MigrationTabs/* CustomizeWorkspacesTab */.le, {
                isImport: true,
                workspacesInfo: migration_classPrivateFieldGet(_settingsInfo, this).workspaces,
                onActionChange: this.handleWorkspaceActionChange,
                includeWorkspaceSettings: migration_classPrivateFieldGet(_includeWorkspaceSettings, this),
                onIncludeWorkspaceSettingsChange: migration_classPrivateFieldGet(_showIncludeWorkspaceSettings, this) ? this.handleIncludeWorkspaceSettingsChange : undefined
              });
            }
          }
          break;
        case "edi":
          if (migration_classPrivateFieldGet(_hasEDITab, this)) {
            showingTab = /*#__PURE__*/react.createElement(MigrationTabs/* CustomizeEDITab */.dF, {
              isImport: true,
              settingsInfo: migration_classPrivateFieldGet(_settingsInfo, this),
              onPartnerActionChange: this.handlePartnerActionChange,
              onDocumentActionChange: this.handleDocumentActionChange
            });
          }
          break;
        case "settings":
          if (migration_classPrivateFieldGet(_hasSettingsTab, this)) {
            showingTab = /*#__PURE__*/react.createElement(MigrationTabs/* CustomizeSettingsTab */.EX, {
              isImport: true,
              settingsInfo: migration_classPrivateFieldGet(_settingsInfo, this),
              onNameActionChange: this.handleNameActionChange
            });
          }
          break;
        default:
          showingTab = /*#__PURE__*/react.createElement("div", {
            className: "alert alert-warning",
            role: "alert"
          }, "The importing file is empty.");
          break;
      }
      return /*#__PURE__*/react.createElement("div", null, (migration_classPrivateFieldGet(_hasSettingsTab, this) || migration_classPrivateFieldGet(_hasWorkspaceTab, this) || migration_classPrivateFieldGet(_hasEDITab, this)) && /*#__PURE__*/react.createElement("div", null, /*#__PURE__*/react.createElement("ul", {
        className: "nav nav-tabs tab-underline",
        role: "tablist"
      }, migration_classPrivateFieldGet(_hasWorkspaceTab, this) && /*#__PURE__*/react.createElement("li", {
        className: "nav-item",
        role: "presentation"
      }, /*#__PURE__*/react.createElement("a", {
        className: "nav-link " + (this.state.showingTab == "workspaces" ? "active" : ""),
        onClick: this.handleWorkspacesClicked
      }, "Workspaces")), migration_classPrivateFieldGet(_hasEDITab, this) && /*#__PURE__*/react.createElement("li", {
        className: "nav-item",
        role: "presentation"
      }, /*#__PURE__*/react.createElement("a", {
        className: "nav-link " + (this.state.showingTab == "edi" ? "active" : ""),
        onClick: this.handleEDIClicked
      }, "EDI")), migration_classPrivateFieldGet(_hasSettingsTab, this) && /*#__PURE__*/react.createElement("li", {
        className: "nav-item",
        role: "presentation"
      }, /*#__PURE__*/react.createElement("a", {
        className: "nav-link " + (this.state.showingTab == "settings" ? "active" : ""),
        onClick: this.handleSettingsClicked
      }, "Settings")))), /*#__PURE__*/react.createElement("div", {
        className: "tab-content"
      }, /*#__PURE__*/react.createElement("div", {
        className: "tab-pane active show",
        role: "tabpanel"
      }, showingTab)));
    }
  }]);
}(react.Component);
var ImportConflictResolutionPage = /*#__PURE__*/function (_React$Component4) {
  function ImportConflictResolutionPage(props) {
    var _this5;
    migration_classCallCheck(this, ImportConflictResolutionPage);
    _this5 = migration_callSuper(this, ImportConflictResolutionPage, [props]);
    migration_defineProperty(_this5, "handleNextPage", function () {
      var resolution = _this5.state.resolution;
      var action = resolution == "manual" ? "skip" : resolution;
      var settingsInfo = _this5.props.settingsInfo;
      var hasWorkspaceTab = false;
      var hasSettingsTab = false;
      var hasEDITab = false;
      if (settingsInfo.workspaces) {
        Object.values(settingsInfo.workspaces).forEach(function (workspaceInfo) {
          if (workspaceInfo.connectors) {
            Object.values(workspaceInfo.connectors).forEach(function (connectorInfo) {
              if (connectorInfo.action != "ignore") {
                connectorInfo.action = action;
                hasWorkspaceTab = true;
              }
            });
          }
          if (workspaceInfo.flow) {
            if (workspaceInfo.flow.elements) {
              Object.values(workspaceInfo.flow.elements).forEach(function (elementInfo) {
                if (elementInfo.action != "ignore") {
                  elementInfo.action = action;
                  hasWorkspaceTab = true;
                }
              });
            }
            if (workspaceInfo.flow.views) {
              Object.values(workspaceInfo.flow.views).forEach(function (viewInfo) {
                if (viewInfo.action != "ignore") {
                  viewInfo.action = action;
                  hasWorkspaceTab = true;
                }
              });
            }
            if (workspaceInfo.flow.apis) {
              Object.values(workspaceInfo.flow.apis).forEach(function (apiInfo) {
                if (apiInfo.action != "ignore") {
                  apiInfo.action = action;
                  hasWorkspaceTab = true;
                }
              });
            }
          }
          if (workspaceInfo.apis) {
            Object.values(workspaceInfo.apis).forEach(function (apiInfo) {
              if (apiInfo.action != "ignore") {
                apiInfo.action = action;
                hasWorkspaceTab = true;
              }
            });
          }
        });
      }
      if (settingsInfo.profiles) {
        Object.values(settingsInfo.profiles).forEach(function (profileInfo) {
          if (profileInfo.action != "ignore") {
            profileInfo.action = action;
            hasSettingsTab = true;
          }
        });
      }
      if (settingsInfo.settings) {
        Object.values(settingsInfo.settings).forEach(function (settingInfo) {
          if (settingInfo.action != "ignore") {
            settingInfo.action = action;
            hasSettingsTab = true;
          }
        });
      }
      if (settingsInfo.users) {
        Object.values(settingsInfo.users).forEach(function (userInfo) {
          if (userInfo.action != "ignore") {
            userInfo.action = action;
            hasSettingsTab = true;
          }
        });
      }
      if (settingsInfo.roles) {
        Object.values(settingsInfo.roles).forEach(function (roleInfo) {
          if (roleInfo.action != "ignore") {
            roleInfo.action = action;
            hasSettingsTab = true;
          }
        });
      }
      if (settingsInfo.certificates) {
        Object.values(settingsInfo.certificates).forEach(function (certificateInfo) {
          if (certificateInfo.action != "ignore") {
            certificateInfo.action = action;
            hasSettingsTab = true;
          }
        });
      }
      if (settingsInfo.connections) {
        Object.values(settingsInfo.connections).forEach(function (connInfo) {
          if (connInfo.action != "ignore") {
            connInfo.action = action;
            hasSettingsTab = true;
          }
        });
      }
      if (settingsInfo.vaults) {
        Object.values(settingsInfo.vaults).forEach(function (vaultInfo) {
          if (vaultInfo.action != "ignore") {
            vaultInfo.action = action;
            hasSettingsTab = true;
          }
        });
      }
      if (settingsInfo.reports) {
        Object.values(settingsInfo.reports).forEach(function (reportInfo) {
          if (reportInfo.action != "ignore") {
            reportInfo.action = action;
            hasSettingsTab = true;
          }
        });
      }
      if (settingsInfo.partners) {
        Object.values(settingsInfo.partners).forEach(function (partnerInfo) {
          if (partnerInfo.action != "ignore") {
            partnerInfo.action = action;
            hasEDITab = true;
          }
        });
      }
      if (settingsInfo.documents) {
        Object.values(settingsInfo.documents).forEach(function (documentInfo) {
          if (documentInfo.action != "ignore") {
            documentInfo.action = action;
            hasEDITab = true;
          }
        });
      }
      if (resolution == "manual") {
        var nextPagetype = ImportCustomConflictResolutionPage;
        _this5.props.setNextPage(nextPagetype, {
          settingsInfo: _this5.props.settingsInfo,
          "import": _this5.props["import"],
          fileHandle: _this5.props.fileHandle,
          password: _this5.props.password,
          isFlow: _this5.props.isFlow,
          hasWorkspaceTab: hasWorkspaceTab,
          hasSettingsTab: hasSettingsTab,
          hasEDITab: hasEDITab
        });
      } else {
        _this5.props["import"](_this5.props.fileHandle, _this5.props.password, settingsInfo, _this5);
      }
    });
    migration_defineProperty(_this5, "handleResolutionSelect", function (event) {
      var value = event.target.value;
      _this5.setState({
        resolution: value
      });
      _this5.props.setIsFinalPage(value != "manual");
    });
    _this5.props.setTitle("Resolve Import Conflicts");
    _this5.props.onNextPage(_this5.handleNextPage);
    _this5.state = {
      resolution: "skip"
    };
    _this5.props.setIsFinalPage(true);
    _this5.props.setHelpLink("help.rst#Importing-Exporting-Flows");
    var conflictsNum = 0;
    if (_this5.props.settingsInfo.workspaces) {
      Object.values(_this5.props.settingsInfo.workspaces).forEach(function (workspaceInfo) {
        if (workspaceInfo.connectors) {
          Object.values(workspaceInfo.connectors).forEach(function (connectorInfo) {
            if (connectorInfo.action != "ignore" && connectorInfo.existing) {
              conflictsNum++;
            }
          });
        }
        if (workspaceInfo.apis) {
          Object.values(workspaceInfo.apis).forEach(function (apiInfo) {
            if (apiInfo.action != "ignore" && apiInfo.existing) {
              conflictsNum++;
            }
          });
        }
      });
    }
    if (_this5.props.settingsInfo.profiles) {
      Object.values(_this5.props.settingsInfo.profiles).forEach(function (profileInfo) {
        if (profileInfo.action != "ignore") {
          conflictsNum++;
        }
      });
    }
    if (_this5.props.settingsInfo.settings) {
      Object.values(_this5.props.settingsInfo.settings).forEach(function (settingInfo) {
        if (settingInfo.action != "ignore") {
          conflictsNum++;
        }
      });
    }
    if (_this5.props.settingsInfo.users) {
      Object.values(_this5.props.settingsInfo.users).forEach(function (userInfo) {
        if (userInfo.action != "ignore" && userInfo.existing) {
          conflictsNum++;
        }
      });
    }
    if (_this5.props.settingsInfo.roles) {
      Object.values(_this5.props.settingsInfo.roles).forEach(function (roleInfo) {
        if (roleInfo.action != "ignore" && roleInfo.existing) {
          conflictsNum++;
        }
      });
    }
    if (_this5.props.settingsInfo.certificates) {
      Object.values(_this5.props.settingsInfo.certificates).forEach(function (certificateInfo) {
        if (certificateInfo.action != "ignore" && certificateInfo.existing) {
          conflictsNum++;
        }
      });
    }
    if (_this5.props.settingsInfo.connections) {
      Object.values(_this5.props.settingsInfo.connections).forEach(function (connInfo) {
        if (connInfo.action != "ignore" && connInfo.existing) {
          conflictsNum++;
        }
      });
    }
    if (_this5.props.settingsInfo.vaults) {
      Object.values(_this5.props.settingsInfo.vaults).forEach(function (vaultInfo) {
        if (vaultInfo.action != "ignore" && vaultInfo.existing) {
          conflictsNum++;
        }
      });
    }
    if (_this5.props.settingsInfo.reports) {
      Object.values(_this5.props.settingsInfo.reports).forEach(function (reportInfo) {
        if (reportInfo.action != "ignore" && reportInfo.existing) {
          conflictsNum++;
        }
      });
    }
    if (_this5.props.settingsInfo.partners) {
      Object.values(_this5.props.settingsInfo.partners).forEach(function (partnerInfo) {
        if (partnerInfo.action != "ignore" && partnerInfo.existing) {
          conflictsNum++;
        }
      });
    }
    if (_this5.props.settingsInfo.documents) {
      Object.values(_this5.props.settingsInfo.documents).forEach(function (documentInfo) {
        if (documentInfo.action != "ignore" && documentInfo.existing) {
          conflictsNum++;
        }
      });
    }
    _this5.conflictsNum = conflictsNum;
    return _this5;
  }
  migration_inherits(ImportConflictResolutionPage, _React$Component4);
  return migration_createClass(ImportConflictResolutionPage, [{
    key: "render",
    value: function render() {
      var warning = null;
      if (this.state.resolution == "skip") {
        warning = "Not importing conflicts skips any workspaces and settings that conflict with existing items. This might cause any imported flows to no longer function.";
      } else if (this.state.resolution == "replace") {
        warning = "Replacing all conflicts overrides existing workspaces and settings with imported items. This might change some of your settings and cause existing flows to no longer function.";
      }
      return /*#__PURE__*/react.createElement("form", {
        className: "form-horizontal form-settings",
        role: "form",
        autoComplete: "off",
        noValidate: "novalidate"
      }, /*#__PURE__*/react.createElement("p", null, "There are [#] conflicts with this import.".replace("#", this.conflictsNum)), /*#__PURE__*/react.createElement("div", {
        className: "form-group row mb-3"
      }, /*#__PURE__*/react.createElement("label", {
        className: "col-md-5 control-label col-form-label"
      }, "Conflict Resolution"), /*#__PURE__*/react.createElement("div", {
        className: "col-md-6"
      }, /*#__PURE__*/react.createElement("div", {
        className: "radio pt-2"
      }, /*#__PURE__*/react.createElement("label", null, /*#__PURE__*/react.createElement("input", {
        type: "radio",
        className: "form-check-input",
        name: "conflict",
        onChange: this.handleResolutionSelect,
        checked: this.state.resolution == "skip",
        defaultValue: "skip"
      }), " ", "Don't import any conflicts")), /*#__PURE__*/react.createElement("div", {
        className: "radio pt-2"
      }, /*#__PURE__*/react.createElement("label", null, /*#__PURE__*/react.createElement("input", {
        type: "radio",
        className: "form-check-input",
        name: "conflict",
        onChange: this.handleResolutionSelect,
        checked: this.state.resolution == "replace",
        defaultValue: "replace"
      }), " ", "Replace all conflicts")), /*#__PURE__*/react.createElement("div", {
        className: "radio pt-2"
      }, /*#__PURE__*/react.createElement("label", null, /*#__PURE__*/react.createElement("input", {
        type: "radio",
        className: "form-check-input",
        name: "conflict",
        onChange: this.handleResolutionSelect,
        checked: this.state.resolution == "manual",
        defaultValue: "manual"
      }), " ", "Manually resolve conflicts")))), warning && /*#__PURE__*/react.createElement("div", {
        className: "alert alert-warning",
        role: "alert"
      }, warning));
    }
  }]);
}(react.Component);
var ImportCustomConflictResolutionPage = /*#__PURE__*/function (_React$Component5) {
  function ImportCustomConflictResolutionPage(props) {
    var _this6;
    migration_classCallCheck(this, ImportCustomConflictResolutionPage);
    _this6 = migration_callSuper(this, ImportCustomConflictResolutionPage, [props]);
    migration_defineProperty(_this6, "handleNextPage", function () {
      _this6.props["import"](_this6.props.fileHandle, _this6.props.password, _this6.state.settingsInfo, _this6);
    });
    migration_defineProperty(_this6, "handleWorkspacesClicked", function () {
      _this6.setState({
        showingTab: "workspaces"
      });
    });
    migration_defineProperty(_this6, "handleSettingsClicked", function () {
      _this6.setState({
        showingTab: "settings"
      });
    });
    migration_defineProperty(_this6, "handleEDIClicked", function () {
      _this6.setState({
        showingTab: "edi"
      });
    });
    migration_defineProperty(_this6, "handleWorkspacesTabActionChange", function (action) {
      var settingsInfo = utils/* ImportUtils */.P.Clone(_this6.state.settingsInfo);
      if (action == "skip" || action == "replace") {
        _UpdateWorkspacesTabAction._.call(ImportCustomConflictResolutionPage, settingsInfo, action);
      }
      _this6.setState({
        workspacesTabAction: action,
        settingsInfo: settingsInfo
      });
    });
    migration_defineProperty(_this6, "handleSettingsTabActionChange", function (action) {
      var settingsInfo = utils/* ImportUtils */.P.Clone(_this6.state.settingsInfo);
      if (action == "skip" || action == "replace") {
        _UpdateSettingsTabAction._.call(ImportCustomConflictResolutionPage, settingsInfo, action);
      }
      _this6.setState({
        settingsTabAction: action,
        settingsInfo: settingsInfo
      });
    });
    migration_defineProperty(_this6, "handleEDITabActionChange", function (action) {
      var settingsInfo = utils/* ImportUtils */.P.Clone(_this6.state.settingsInfo);
      if (action == "skip" || action == "replace") {
        _UpdateEDITabAction._.call(ImportCustomConflictResolutionPage, settingsInfo, action);
      }
      _this6.setState({
        ediTabAction: action,
        settingsInfo: settingsInfo
      });
    });
    migration_defineProperty(_this6, "handleWorkspaceActionChange", function (workspaceId, action) {
      var settingsInfo = utils/* ImportUtils */.P.Clone(_this6.state.settingsInfo);
      if (action == "skip" || action == "replace") {
        _UpdateWorkspaceAction._.call(ImportCustomConflictResolutionPage, settingsInfo, workspaceId, action);
      }
      _this6.setState({
        workspacesTabAction: _GetWorkspacesTabAction._.call(ImportCustomConflictResolutionPage, settingsInfo),
        settingsInfo: settingsInfo
      });
    });
    migration_defineProperty(_this6, "handleAPIActionChange", function (workspaceId, apiKey, action) {
      var settingsInfo = utils/* ImportUtils */.P.Clone(_this6.state.settingsInfo);
      if (action == "skip" || action == "replace") {
        _UpdateAPIAction._.call(ImportCustomConflictResolutionPage, settingsInfo, workspaceId, apiKey, action);
      }
      _this6.setState({
        workspacesTabAction: _GetWorkspacesTabAction._.call(ImportCustomConflictResolutionPage, settingsInfo),
        settingsInfo: settingsInfo
      });
    });
    migration_defineProperty(_this6, "handleConnectorActionChange", function (workspaceId, connectorId, action) {
      var settingsInfo = utils/* ImportUtils */.P.Clone(_this6.state.settingsInfo);
      if (action == "skip" || action == "replace") {
        _UpdateConnectorAction._.call(ImportCustomConflictResolutionPage, settingsInfo, workspaceId, connectorId, action);
      }
      _this6.setState({
        workspacesTabAction: _GetWorkspacesTabAction._.call(ImportCustomConflictResolutionPage, settingsInfo),
        settingsInfo: settingsInfo
      });
    });
    migration_defineProperty(_this6, "handleSectionActionChange", function (section, action) {
      var settingsInfo = utils/* ImportUtils */.P.Clone(_this6.state.settingsInfo);
      if (action == "skip" || action == "replace") {
        _UpdateSectionAction._.call(ImportCustomConflictResolutionPage, settingsInfo, section, action);
      }
      _this6.setState({
        settingsTabAction: _GetSettingsTabAction._.call(ImportCustomConflictResolutionPage, settingsInfo),
        settingsInfo: settingsInfo
      });
    });
    migration_defineProperty(_this6, "handleNameActionChange", function (section, name, action) {
      var settingsInfo = utils/* ImportUtils */.P.Clone(_this6.state.settingsInfo);
      if (action == "skip" || action == "replace") {
        _UpdateNameAction._.call(ImportCustomConflictResolutionPage, settingsInfo, section, name, action);
      }
      _this6.setState({
        settingsTabAction: _GetSettingsTabAction._.call(ImportCustomConflictResolutionPage, settingsInfo),
        settingsInfo: settingsInfo
      });
    });
    migration_defineProperty(_this6, "handlePartnerActionChange", function (partnerId, action) {
      var settingsInfo = utils/* ImportUtils */.P.Clone(_this6.state.settingsInfo);
      if (action == "skip" || action == "replace") {
        _UpdatePartnerAction._.call(ImportCustomConflictResolutionPage, settingsInfo, partnerId, action);
      }
      _this6.setState({
        ediTabAction: _GetEDITabAction._.call(ImportCustomConflictResolutionPage, settingsInfo),
        settingsInfo: settingsInfo
      });
    });
    migration_defineProperty(_this6, "handleDocumentActionChange", function (documentId, action) {
      var settingsInfo = utils/* ImportUtils */.P.Clone(_this6.state.settingsInfo);
      if (action == "skip" || action == "replace") {
        _UpdateDocumentAction._.call(ImportCustomConflictResolutionPage, settingsInfo, documentId, action);
      }
      _this6.setState({
        ediTabAction: _GetEDITabAction._.call(ImportCustomConflictResolutionPage, settingsInfo),
        settingsInfo: settingsInfo
      });
    });
    _this6.state = {
      showingTab: _this6.props.hasWorkspaceTab ? "workspaces" : _this6.props.hasEDITab ? "edi" : _this6.props.hasSettingsTab ? "settings" : "",
      workspacesTabAction: _GetWorkspacesTabAction._.call(ImportCustomConflictResolutionPage, props.settingsInfo),
      settingsTabAction: _GetSettingsTabAction._.call(ImportCustomConflictResolutionPage, props.settingsInfo),
      ediTabAction: _GetEDITabAction._.call(ImportCustomConflictResolutionPage, props.settingsInfo),
      settingsInfo: _this6.props.settingsInfo
    };
    _this6.props.setPageWidth("large");
    _this6.props.setTitle(_this6.props.isFlow ? _this6.props.isFlowConnectors ? "Review Workspace Import Conflicts" : "Review Flow Import Conflicts" : "Review Application Settings Import Conflicts");
    _this6.props.setIsFinalPage(true);
    _this6.props.onNextPage(_this6.handleNextPage);
    _this6.props.setHelpLink("help.rst#Importing-Exporting-Flows");
    return _this6;
  }
  migration_inherits(ImportCustomConflictResolutionPage, _React$Component5);
  return migration_createClass(ImportCustomConflictResolutionPage, [{
    key: "render",
    value: function render() {
      var showingTab = null;
      var dropdownValue = null;
      var dropdownChangeHandler = null;
      switch (this.state.showingTab) {
        case "workspaces":
          if (this.props.hasWorkspaceTab) {
            showingTab = /*#__PURE__*/react.createElement(MigrationTabs/* ImportCustomConflictResolutionWorkspacesTab */.GY, {
              workspacesInfo: this.state.settingsInfo.workspaces,
              onWorkspaceActionChange: this.handleWorkspaceActionChange,
              onConnectorActionChange: this.handleConnectorActionChange,
              onAPIActionChange: this.handleAPIActionChange,
              isFlow: this.props.isFlow
            });
            dropdownValue = this.state.workspacesTabAction;
            dropdownChangeHandler = this.handleWorkspacesTabActionChange;
          }
          break;
        case "edi":
          if (this.props.hasEDITab) {
            showingTab = /*#__PURE__*/react.createElement(MigrationTabs/* ImportCustomConflictResolutionEDITab */.as, {
              settingsInfo: this.state.settingsInfo,
              onPartnerActionChange: this.handlePartnerActionChange,
              onDocumentActionChange: this.handleDocumentActionChange
            });
            dropdownValue = this.state.ediTabAction;
            dropdownChangeHandler = this.handleEDITabActionChange;
          }
          break;
        case "settings":
          if (this.props.hasSettingsTab) {
            showingTab = /*#__PURE__*/react.createElement(MigrationTabs/* ImportCustomConflictResolutionSettingsTab */.dK, {
              settingsInfo: this.state.settingsInfo,
              onSectionActionChange: this.handleSectionActionChange,
              onNameActionChange: this.handleNameActionChange
            });
            dropdownValue = this.state.settingsTabAction;
            dropdownChangeHandler = this.handleSettingsTabActionChange;
          }
          break;
        default:
          break;
      }
      return /*#__PURE__*/react.createElement("div", null, /*#__PURE__*/react.createElement("div", {
        className: "migration-nav-bar"
      }, /*#__PURE__*/react.createElement("ul", {
        className: "nav nav-tabs tab-underline",
        role: "tablist"
      }, this.props.hasWorkspaceTab && /*#__PURE__*/react.createElement("li", {
        className: "nav-item",
        role: "presentation"
      }, /*#__PURE__*/react.createElement("button", {
        className: "nav-link " + (this.state.showingTab == "workspaces" ? "active" : ""),
        onClick: this.handleWorkspacesClicked
      }, "Workspaces")), this.props.hasEDITab && /*#__PURE__*/react.createElement("li", {
        className: "nav-item",
        role: "presentation"
      }, /*#__PURE__*/react.createElement("button", {
        className: "nav-link " + (this.state.showingTab == "edi" ? "active" : ""),
        onClick: this.handleEDIClicked
      }, "EDI")), this.props.hasSettingsTab && /*#__PURE__*/react.createElement("li", {
        className: "nav-item",
        role: "presentation"
      }, /*#__PURE__*/react.createElement("button", {
        className: "nav-link " + (this.state.showingTab == "settings" ? "active" : ""),
        onClick: this.handleSettingsClicked
      }, "Settings"))), /*#__PURE__*/react.createElement(utils/* ImportDropdown */.H, {
        options: _DropdownOptions._,
        style: _DropdownStyle._,
        value: dropdownValue,
        onChange: dropdownChangeHandler
      })), /*#__PURE__*/react.createElement("div", {
        className: "tab-content"
      }, /*#__PURE__*/react.createElement("div", {
        className: "tab-pane active show",
        role: "tabpanel"
      }, showingTab)));
    }
  }]);
}(react.Component);
var _DropdownOptions = {
  _: [{
    "value": "skip",
    "name": "Don't Import"
  }, {
    "value": "replace",
    "name": "Replace"
  }]
};
var _DropdownStyle = {
  _: {
    "marginTop": "-30px",
    "float": "right"
  }
};
var _CustomActionText = {
  _: "Custom"
};
var _GetWorkspacesTabAction = {
  _: function _(settingsInfo) {
    var action;
    if (settingsInfo.workspaces) {
      for (var _i14 = 0, _Object$values14 = Object.values(settingsInfo.workspaces); _i14 < _Object$values14.length; _i14++) {
        var workspaceInfo = _Object$values14[_i14];
        if (workspaceInfo.connectors && action != "custom") {
          for (var _i15 = 0, _Object$values15 = Object.values(workspaceInfo.connectors); _i15 < _Object$values15.length; _i15++) {
            var connectorInfo = _Object$values15[_i15];
            if (connectorInfo.action != "ignore") {
              var _connectorInfo$action;
              if (action === undefined) {
                action = connectorInfo.action;
              } else if (action != ((_connectorInfo$action = connectorInfo.action) !== null && _connectorInfo$action !== void 0 ? _connectorInfo$action : "skip")) {
                action = _CustomActionText._;
                break;
              }
            }
          }
        }
        if (workspaceInfo.apis && action != "custom") {
          for (var _i16 = 0, _Object$values16 = Object.values(workspaceInfo.apis); _i16 < _Object$values16.length; _i16++) {
            var apiInfo = _Object$values16[_i16];
            if (apiInfo.action != "ignore") {
              var _apiInfo$action;
              if (action === undefined) {
                action = apiInfo.action;
              } else if (action != ((_apiInfo$action = apiInfo.action) !== null && _apiInfo$action !== void 0 ? _apiInfo$action : "skip")) {
                action = _CustomActionText._;
                break;
              }
            }
          }
        }
      }
    }
    return action !== null && action !== void 0 ? action : "skip";
  }
};
var _GetSettingsTabAction = {
  _: function _(settingsInfo) {
    var action;
    if (settingsInfo.profiles && action != "custom") {
      for (var _i17 = 0, _Object$values17 = Object.values(settingsInfo.profiles); _i17 < _Object$values17.length; _i17++) {
        var profileInfo = _Object$values17[_i17];
        if (profileInfo.action != "ignore") {
          var _profileInfo$action;
          if (action === undefined) {
            action = profileInfo.action;
          } else if (action != ((_profileInfo$action = profileInfo.action) !== null && _profileInfo$action !== void 0 ? _profileInfo$action : "skip")) {
            action = _CustomActionText._;
            break;
          }
        }
      }
    }
    if (settingsInfo.settings && action != "custom") {
      for (var _i18 = 0, _Object$values18 = Object.values(settingsInfo.settings); _i18 < _Object$values18.length; _i18++) {
        var settingInfo = _Object$values18[_i18];
        if (settingInfo.action != "ignore") {
          var _settingInfo$action;
          if (action === undefined) {
            action = settingInfo.action;
          } else if (action != ((_settingInfo$action = settingInfo.action) !== null && _settingInfo$action !== void 0 ? _settingInfo$action : "skip")) {
            action = _CustomActionText._;
            break;
          }
        }
      }
    }
    if (settingsInfo.users && action != "custom") {
      for (var _i19 = 0, _Object$values19 = Object.values(settingsInfo.users); _i19 < _Object$values19.length; _i19++) {
        var userInfo = _Object$values19[_i19];
        if (userInfo.action != "ignore") {
          var _userInfo$action;
          if (action === undefined) {
            action = userInfo.action;
          } else if (action != ((_userInfo$action = userInfo.action) !== null && _userInfo$action !== void 0 ? _userInfo$action : "skip")) {
            action = _CustomActionText._;
            break;
          }
        }
      }
    }
    if (settingsInfo.roles && action != "custom") {
      for (var _i20 = 0, _Object$values20 = Object.values(settingsInfo.roles); _i20 < _Object$values20.length; _i20++) {
        var roleInfo = _Object$values20[_i20];
        if (roleInfo.action != "ignore") {
          var _roleInfo$action;
          if (action === undefined) {
            action = roleInfo.action;
          } else if (action != ((_roleInfo$action = roleInfo.action) !== null && _roleInfo$action !== void 0 ? _roleInfo$action : "skip")) {
            action = _CustomActionText._;
            break;
          }
        }
      }
    }
    if (settingsInfo.certificates && action != "custom") {
      for (var _i21 = 0, _Object$values21 = Object.values(settingsInfo.certificates); _i21 < _Object$values21.length; _i21++) {
        var certificateInfo = _Object$values21[_i21];
        if (certificateInfo.action != "ignore") {
          var _certificateInfo$acti;
          if (action === undefined) {
            action = certificateInfo.action;
          } else if (action != ((_certificateInfo$acti = certificateInfo.action) !== null && _certificateInfo$acti !== void 0 ? _certificateInfo$acti : "skip")) {
            action = _CustomActionText._;
            break;
          }
        }
      }
    }
    if (settingsInfo.connections && action != "custom") {
      for (var _i22 = 0, _Object$values22 = Object.values(settingsInfo.connections); _i22 < _Object$values22.length; _i22++) {
        var connInfo = _Object$values22[_i22];
        if (connInfo.action != "ignore") {
          var _connInfo$action;
          if (action === undefined) {
            action = connInfo.action;
          } else if (action != ((_connInfo$action = connInfo.action) !== null && _connInfo$action !== void 0 ? _connInfo$action : "skip")) {
            action = _CustomActionText._;
            break;
          }
        }
      }
    }
    if (settingsInfo.vaults && action != "custom") {
      for (var _i23 = 0, _Object$values23 = Object.values(settingsInfo.vaults); _i23 < _Object$values23.length; _i23++) {
        var vaultInfo = _Object$values23[_i23];
        if (vaultInfo.action != "ignore") {
          var _vaultInfo$action;
          if (action === undefined) {
            action = vaultInfo.action;
          } else if (action != ((_vaultInfo$action = vaultInfo.action) !== null && _vaultInfo$action !== void 0 ? _vaultInfo$action : "skip")) {
            action = _CustomActionText._;
            break;
          }
        }
      }
    }
    if (settingsInfo.reports && action != "custom") {
      for (var _i24 = 0, _Object$values24 = Object.values(settingsInfo.reports); _i24 < _Object$values24.length; _i24++) {
        var reportInfo = _Object$values24[_i24];
        if (reportInfo.action != "ignore") {
          var _reportInfo$action;
          if (action === undefined) {
            action = reportInfo.action;
          } else if (action != ((_reportInfo$action = reportInfo.action) !== null && _reportInfo$action !== void 0 ? _reportInfo$action : "skip")) {
            action = _CustomActionText._;
            break;
          }
        }
      }
    }
    return action !== null && action !== void 0 ? action : "skip";
  }
};
var _GetEDITabAction = {
  _: function _(settingsInfo) {
    var action;
    if (settingsInfo.partners && action != "custom") {
      for (var _i25 = 0, _Object$values25 = Object.values(settingsInfo.partners); _i25 < _Object$values25.length; _i25++) {
        var partnerInfo = _Object$values25[_i25];
        if (partnerInfo.action != "ignore") {
          var _partnerInfo$action;
          if (action === undefined) {
            action = partnerInfo.action;
          } else if (action != ((_partnerInfo$action = partnerInfo.action) !== null && _partnerInfo$action !== void 0 ? _partnerInfo$action : "skip")) {
            action = _CustomActionText._;
            break;
          }
        }
      }
    }
    if (settingsInfo.documents && action != "custom") {
      for (var _i26 = 0, _Object$values26 = Object.values(settingsInfo.documents); _i26 < _Object$values26.length; _i26++) {
        var documentInfo = _Object$values26[_i26];
        if (documentInfo.action != "ignore") {
          var _documentInfo$action;
          if (action === undefined) {
            action = documentInfo.action;
          } else if (action != ((_documentInfo$action = documentInfo.action) !== null && _documentInfo$action !== void 0 ? _documentInfo$action : "skip")) {
            action = _CustomActionText._;
            break;
          }
        }
      }
    }
    return action !== null && action !== void 0 ? action : "skip";
  }
};
var _UpdateWorkspacesTabAction = {
  _: function _(settingsInfo, action) {
    if (settingsInfo.workspaces) {
      var updateWorkspaceAction = _UpdateWorkspaceAction._;
      Object.keys(settingsInfo.workspaces).forEach(function (key) {
        updateWorkspaceAction(settingsInfo, key, action);
      });
    }
  }
};
var _UpdateSettingsTabAction = {
  _: function _(settingsInfo, action) {
    if (settingsInfo.profiles) {
      var updateSectionAction = _UpdateSectionAction._;
      updateSectionAction(settingsInfo, "profiles", action);
    }
    if (settingsInfo.settings) {
      var updateSettingAction = _UpdateNameAction._;
      Object.keys(settingsInfo.settings).forEach(function (key) {
        updateSettingAction(settingsInfo, "settings", key, action);
      });
    }
    if (settingsInfo.users) {
      var _updateSectionAction = _UpdateSectionAction._;
      _updateSectionAction(settingsInfo, "users", action);
    }
    if (settingsInfo.roles) {
      var _updateSectionAction2 = _UpdateSectionAction._;
      _updateSectionAction2(settingsInfo, "roles", action);
    }
    if (settingsInfo.certificates) {
      var _updateSectionAction3 = _UpdateSectionAction._;
      _updateSectionAction3(settingsInfo, "certificates", action);
    }
    if (settingsInfo.connections) {
      var _updateSectionAction4 = _UpdateSectionAction._;
      _updateSectionAction4(settingsInfo, "connections", action);
    }
    if (settingsInfo.vaults) {
      var _updateSectionAction5 = _UpdateSectionAction._;
      _updateSectionAction5(settingsInfo, "vaults", action);
    }
    if (settingsInfo.reports) {
      var _updateSectionAction6 = _UpdateSectionAction._;
      _updateSectionAction6(settingsInfo, "reports", action);
    }
  }
};
var _UpdateWorkspaceAction = {
  _: function _(settingsInfo, workspaceId, action) {
    if (settingsInfo.workspaces) {
      var workspaceInfo = settingsInfo.workspaces[workspaceId];
      var updateConnectorAction = _UpdateConnectorAction._;
      var updateAPIAction = _UpdateAPIAction._;
      if (workspaceInfo) {
        if (workspaceInfo.connectors) {
          Object.keys(workspaceInfo.connectors).forEach(function (connetorId) {
            updateConnectorAction(settingsInfo, workspaceId, connetorId, action);
          });
        }
        if (workspaceInfo.flow) {
          if (workspaceInfo.flow.views) {
            Object.values(workspaceInfo.flow.views).forEach(function (viewInfo) {
              viewInfo.action = action;
            });
          }
          if (workspaceInfo.flow.apis) {
            Object.keys(workspaceInfo.flow.apis).forEach(function (apiKey) {
              updateAPIAction(settingsInfo, workspaceId, apiKey, action);
            });
          }
        }
      }
    }
  }
};
var _UpdateAPIAction = {
  _: function _(settingsInfo, workspaceId, apiKey, action) {
    if (settingsInfo.workspaces) {
      var _workspaceInfo$flow5;
      var workspaceInfo = settingsInfo.workspaces[workspaceId];
      if (workspaceInfo !== null && workspaceInfo !== void 0 && (_workspaceInfo$flow5 = workspaceInfo.flow) !== null && _workspaceInfo$flow5 !== void 0 && _workspaceInfo$flow5.apis) {
        var apiInfo = workspaceInfo.flow.apis[apiKey.toLowerCase()];
        if (apiInfo) {
          apiInfo.action = action;
        }
      }
      if (workspaceInfo.apis) {
        var apiElement = workspaceInfo.apis[apiKey.toLowerCase()];
        if (apiElement) {
          apiElement.action = action;
        }
      }
    }
  }
};
var _UpdateConnectorAction = {
  _: function _(settingsInfo, workspaceId, connectorId, action) {
    if (settingsInfo.workspaces) {
      var workspaceInfo = settingsInfo.workspaces[workspaceId];
      if (workspaceInfo) {
        if (workspaceInfo.connectors) {
          var connectorInfo = workspaceInfo.connectors[connectorId];
          if (connectorInfo) {
            connectorInfo.action = action;
          }
        }
        if (workspaceInfo.flow) {
          if (workspaceInfo.flow.elements) {
            var elementInfo = workspaceInfo.flow.elements[connectorId];
            if (elementInfo) {
              elementInfo.action = action;
            }
          }
        }
      }
    }
  }
};
var _UpdateSectionAction = {
  _: function _(settingsInfo, section, action) {
    if (settingsInfo[section]) {
      var updateNameAction = _UpdateNameAction._;
      Object.keys(settingsInfo[section]).forEach(function (key) {
        updateNameAction(settingsInfo, section, key, action);
      });
    }
  }
};
var _UpdateNameAction = {
  _: function _(settingsInfo, section, key, action) {
    if (settingsInfo[section]) {
      var nameInfo = settingsInfo[section][key];
      if (nameInfo) {
        nameInfo.action = action;
      }
    }
  }
};
var _UpdateEDITabAction = {
  _: function _(settingsInfo, action) {
    if (settingsInfo.partners) {
      var updatePartnerAction = _UpdatePartnerAction._;
      Object.keys(settingsInfo.partners).forEach(function (partnerId) {
        if (settingsInfo.partners[partnerId].action != "ignore") {
          updatePartnerAction(settingsInfo, partnerId, action);
        }
      });
    }
    if (settingsInfo.documents) {
      var updateDocumentAction = _UpdateDocumentAction._;
      Object.keys(settingsInfo.documents).forEach(function (documentId) {
        if (settingsInfo.documents[documentId].action != "ignore") {
          updateDocumentAction(settingsInfo, documentId, action);
        }
      });
    }
  }
};
var _UpdatePartnerAction = {
  _: function _(settingsInfo, partnerId, action) {
    var _settingsInfo$partner;
    if (settingsInfo !== null && settingsInfo !== void 0 && (_settingsInfo$partner = settingsInfo.partners) !== null && _settingsInfo$partner !== void 0 && _settingsInfo$partner[partnerId]) {
      settingsInfo.partners[partnerId].action = action;
    }
  }
};
var _UpdateDocumentAction = {
  _: function _(settingsInfo, documentId, action) {
    var _settingsInfo$documen;
    if (settingsInfo !== null && settingsInfo !== void 0 && (_settingsInfo$documen = settingsInfo.documents) !== null && _settingsInfo$documen !== void 0 && _settingsInfo$documen[documentId]) {
      settingsInfo.documents[documentId].action = action;
    }
  }
};
var _import = /*#__PURE__*/new WeakMap();
var ImportModal = /*#__PURE__*/function (_React$Component6) {
  function ImportModal(props) {
    var _this7;
    migration_classCallCheck(this, ImportModal);
    _this7 = migration_callSuper(this, ImportModal, [props]);
    migration_defineProperty(_this7, "handleError", function (errorMessage) {
      _this7.setState({
        errorMessage: errorMessage
      });
    });
    migration_classPrivateFieldInitSpec(_this7, _import, function (handle, password, settingsInfo, page) {
      var _window5, _settingsInfo$element, _window$rsb$workflow$, _window6;
      page === null || page === void 0 || page.props.setLoadingText("Importing...");
      page === null || page === void 0 || page.props.setError(null);
      var params = new URLSearchParams();
      var currentWorkspaceId = (_window5 = window) === null || _window5 === void 0 || (_window5 = _window5.rsb) === null || _window5 === void 0 || (_window5 = _window5.workflow) === null || _window5 === void 0 ? void 0 : _window5.currentWorkspaceId;
      if (_this7.props.externalRef) {
        currentWorkspaceId = _this7.props.externalRef.current.workspaceId;
      }
      if (_this7.props.isFlow) {
        params.append("WorkspaceId", currentWorkspaceId);
      }
      if (password && password != null) {
        params.append("Password", password);
      }
      var rect = ((_settingsInfo$element = settingsInfo.elementsboundingrect) !== null && _settingsInfo$element !== void 0 ? _settingsInfo$element : "").split(/,/g);
      var position = (_window$rsb$workflow$ = (_window6 = window) === null || _window6 === void 0 || (_window6 = _window6.rsb) === null || _window6 === void 0 || (_window6 = _window6.workflow) === null || _window6 === void 0 ? void 0 : _window6.importPosition) !== null && _window$rsb$workflow$ !== void 0 ? _window$rsb$workflow$ : {};
      if (!!position && !!rect && rect.length == 4 && !Number.isNaN(parseFloat(position.left)) && !Number.isNaN(parseFloat(position.top)) && !Number.isNaN(parseFloat(rect[0])) && !Number.isNaN(parseFloat(rect[1]))) {
        params.append("OffsetX", parseFloat(rect[0]) - parseFloat(position.left));
        params.append("OffsetY", parseFloat(rect[1]) - parseFloat(position.top));
      }
      params.append("Handle", handle);
      params.append("SettingsInfo", JSON.stringify(settingsInfo));
      axios/* default */.A.post("src/standard/migrationImport.rsb?@json", params).then(function (response) {
        if (page) {
          page.props.setLoadingText(null);
          var data = response.data;
          var errMsg = (0,components_utils/* getResultErrorMessage */.hz)(data.items);
          if (errMsg) {
            page.props.setError(errMsg);
          } else {
            page.props.close();
            window.location.reload();
          }
        }
      });
    });
    _this7.state = {
      errorMessage: null
    };
    return _this7;
  }
  migration_inherits(ImportModal, _React$Component6);
  return migration_createClass(ImportModal, [{
    key: "render",
    value: function render() {
      var _this$props$initialPa;
      var modalId = this.props.id ? this.props.id : "migrationImportModal";
      return /*#__PURE__*/react.createElement(ProgressModal, {
        id: modalId,
        externalRef: this.props.externalRef,
        initialPageType: (_this$props$initialPa = this.props.initialPageType) !== null && _this$props$initialPa !== void 0 ? _this$props$initialPa : ImportUploadPage,
        initialPageProps: {
          "import": migration_classPrivateFieldGet(_import, this),
          isFlow: this.props.isFlow,
          isFlowConnectors: this.props.isFlowConnectors,
          externalRef: this.props.externalRef
        },
        finishButtonText: "Import",
        finishButtonIcon: "fas fa-file-import"
      });
    }
  }]);
}(react.Component);
var _customExportLabel = /*#__PURE__*/new WeakMap();
var ExportInitialPage = /*#__PURE__*/function (_React$Component7) {
  function ExportInitialPage(props) {
    var _this8;
    migration_classCallCheck(this, ExportInitialPage);
    _this8 = migration_callSuper(this, ExportInitialPage, [props]);
    migration_classPrivateFieldInitSpec(_this8, _customExportLabel, null);
    migration_defineProperty(_this8, "handleNextPage", function () {
      var params = new URLSearchParams();
      var selectedConnectors = [];
      var selectedGroups = [];
      if (_this8.props.externalRef) {
        if (_this8.props.isFlow && _this8.props.isFlowConnectors) {
          var _this8$props$external, _this8$props$external2;
          selectedGroups = (_this8$props$external = _this8.props.externalRef.current) === null || _this8$props$external === void 0 || (_this8$props$external = _this8$props$external.operationalGroups) === null || _this8$props$external === void 0 ? void 0 : _this8$props$external.map(function (group) {
            return group.toLowerCase();
          });
          if (((_this8$props$external2 = _this8.props.externalRef.current) === null || _this8$props$external2 === void 0 || (_this8$props$external2 = _this8$props$external2.operationalConnectorIds) === null || _this8$props$external2 === void 0 ? void 0 : _this8$props$external2.length) > 0) {
            var _this8$props$external3;
            selectedConnectors = (_this8$props$external3 = _this8.props.externalRef.current) === null || _this8$props$external3 === void 0 ? void 0 : _this8$props$external3.operationalConnectorIds;
            var currentWorkspaceId = _this8.props.externalRef.current.operationalWorkspaceIds[0];
            var ids = selectedConnectors.map(function (elem) {
              return currentWorkspaceId + ":" + elem;
            }).join(";");
            params.append("ConnectorIds", ids);
          }
        } else {
          var _this8$props$external4;
          if (((_this8$props$external4 = _this8.props.externalRef.current) === null || _this8$props$external4 === void 0 || (_this8$props$external4 = _this8$props$external4.operationalWorkspaceIds) === null || _this8$props$external4 === void 0 ? void 0 : _this8$props$external4.length) === 1) {
            params.append("ConnectorIds", _this8.props.externalRef.current.operationalWorkspaceIds[0] + ":*");
          } else {
            var _this8$props$external5;
            var _ids = (_this8$props$external5 = _this8.props.externalRef.current) === null || _this8$props$external5 === void 0 || (_this8$props$external5 = _this8$props$external5.operationalWorkspaceIds) === null || _this8$props$external5 === void 0 ? void 0 : _this8$props$external5.join(":*;");
            params.append("ConnectorIds", _ids + ":*");
          }
        }
      } else {
        var _window$rsb$workflow$2, _window7;
        var _currentWorkspaceId = (_window$rsb$workflow$2 = (_window7 = window) === null || _window7 === void 0 || (_window7 = _window7.rsb) === null || _window7 === void 0 || (_window7 = _window7.workflow) === null || _window7 === void 0 ? void 0 : _window7.currentWorkspaceId) !== null && _window$rsb$workflow$2 !== void 0 ? _window$rsb$workflow$2 : "";
        var initializeConnectorIds = "";
        if (_this8.props.isFlow && _currentWorkspaceId) {
          if (_this8.props.isFlowConnectors) {
            var _window8, _window9;
            selectedGroups = (_window8 = window) === null || _window8 === void 0 || (_window8 = _window8.rsb) === null || _window8 === void 0 || (_window8 = _window8.workflow) === null || _window8 === void 0 ? void 0 : _window8.selectedGroups;
            if ((_window9 = window) !== null && _window9 !== void 0 && (_window9 = _window9.rsb) !== null && _window9 !== void 0 && (_window9 = _window9.workflow) !== null && _window9 !== void 0 && _window9.selectedConnectors) {
              selectedConnectors = window.rsb.workflow.selectedConnectors.split(";");
              initializeConnectorIds = selectedConnectors.map(function (elem) {
                return _currentWorkspaceId + ":" + elem;
              }).join(";");
            }
          } else {
            initializeConnectorIds = _currentWorkspaceId + ":*";
          }
        }
        params.append("ConnectorIds", initializeConnectorIds);
      }
      axios/* default */.A.post("src/standard/migrationInitializeExport.rsb?@json", params).then(function (response) {
        var data = response.data;
        var errMsg = (0,components_utils/* getResultErrorMessage */.hz)(data.items);
        if (errMsg) {
          _this8.props.setError(errMsg);
        } else {
          var settingsInfo = data.items && data.items[0] && data.items[0].settingsinfo;
          if (settingsInfo) {
            var settingsInfoObj = JSON.parse(settingsInfo);
            if (_this8.props.isFlow && _this8.props.isFlowConnectors) {
              if (selectedConnectors) {
                Object.values(settingsInfoObj.workspaces).forEach(function (workspaceInfo) {
                  var _workspaceInfo$flow;
                  if (workspaceInfo.connectors) {
                    Object.values(workspaceInfo.connectors).forEach(function (connectorInfo) {
                      if (!selectedConnectors.includes(connectorInfo.id)) {
                        delete workspaceInfo.connectors[connectorInfo.id];
                      }
                    });
                  }
                  if (workspaceInfo !== null && workspaceInfo !== void 0 && (_workspaceInfo$flow = workspaceInfo.flow) !== null && _workspaceInfo$flow !== void 0 && _workspaceInfo$flow.elements) {
                    Object.values(workspaceInfo.flow.elements).forEach(function (elementInfo) {
                      if (!selectedConnectors.includes(elementInfo.id)) {
                        delete workspaceInfo.flow.elements[elementInfo.id];
                      }
                    });
                  }
                });
              }
              if (selectedGroups) {
                Object.values(settingsInfoObj.workspaces).forEach(function (workspaceInfo) {
                  var _workspaceInfo$flow2;
                  if (workspaceInfo !== null && workspaceInfo !== void 0 && (_workspaceInfo$flow2 = workspaceInfo.flow) !== null && _workspaceInfo$flow2 !== void 0 && _workspaceInfo$flow2.apis) {
                    Object.values(workspaceInfo.flow.apis).forEach(function (apiInfo) {
                      var apiKey = (apiInfo.name + apiInfo.method).toLowerCase();
                      if (!selectedGroups.includes(apiKey)) {
                        delete workspaceInfo.flow.apis[apiKey];
                      }
                    });
                  }
                  if (workspaceInfo.apis) {
                    Object.values(workspaceInfo.apis).forEach(function (apiInfo) {
                      var apiKey = (apiInfo.name + apiInfo.method).toLowerCase();
                      if (!selectedGroups.includes(apiKey)) {
                        delete workspaceInfo.flow.apis[apiKey];
                      }
                    });
                  }
                });
              }
              settingsInfo.workspaces && Object.values(settingsInfo.workspaces).forEach(function (workspaceInfo) {
                workspaceInfo.settings = {
                  existing: "false",
                  action: "ignore"
                };
              });
            }
            if (_this8.state.exportType != "all") {
              var nextPageType = ExportCustomizePage;
              _this8.props.setNextPage(nextPageType, {
                settingsInfo: settingsInfoObj,
                "export": _this8.props["export"],
                filename: _this8.state.filename,
                password: _this8.state.password,
                isFlow: _this8.props.isFlow,
                isFlowConnectors: _this8.props.isFlowConnectors
              });
            } else {
              _this8.props["export"](settingsInfoObj, _this8.state.filename, _this8.state.password, _this8);
            }
          } else {
            _this8.props.setError("No SettingsInfo.");
          }
        }
      });
    });
    migration_defineProperty(_this8, "handleTypeChanged", function (event) {
      _this8.setState({
        exportType: event.target.value
      });
      _this8.props.setIsFinalPage(event.target.value == "all");
    });
    migration_defineProperty(_this8, "handlePasswordChanged", function (event) {
      _this8.setState({
        password: event.target.value
      });
      _this8.props.enableNext(event.target.value != "");
    });
    migration_defineProperty(_this8, "handleFilenameChanged", function (event) {
      var filename = event.target.value + (_this8.props.isFlow ? ".arcflow" : ".arc");
      _this8.setState({
        filename: filename
      });
    });
    migration_defineProperty(_this8, "handleSensitiveChanged", function (event) {
      if (_this8.props.isFlow) {
        _this8.setState({
          exportSensitive: event.target.checked
        });
        if (event.target.checked) {
          _this8.setState({
            password: ""
          });
          _this8.props.enableNext(false);
        } else {
          _this8.props.enableNext(true);
        }
      }
    });
    _this8.props.setTitle(_this8.props.isFlow ? _this8.props.isFlowConnectors ? "Selected Items Export" : "Workspace Export" : "Application Settings Export");
    _this8.props.enablePrev(false);
    _this8.props.setIsFinalPage(true);
    _this8.props.enableNext(false);
    _this8.props.onNextPage(_this8.handleNextPage);
    _this8.props.setHelpLink("help.rst#Importing-Exporting-Flows");
    _this8.state = {
      exportSensitive: true,
      exportType: "all",
      password: null,
      filename: null
    };
    migration_classPrivateFieldSet(_customExportLabel, _this8, /*#__PURE__*/react.createRef());
    return _this8;
  }
  migration_inherits(ExportInitialPage, _React$Component7);
  return migration_createClass(ExportInitialPage, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this9 = this;
      var elem = migration_classPrivateFieldGet(_customExportLabel, this).current;
      if (elem != null) {
        // The bootstrap may not be loaded when mounting to DOM tree.
        setTimeout(function () {
          new window.bootstrap.Popover(elem, {
            container: "body",
            content: _this9.props.isFlow ? _this9.props.isFlowConnectors ? "Custom export allows you to select specific flows and settings to export" : "Custom export allows you to select specific flows and settings to export." : "Custom export allows you to select specific workspaces and settings to export.",
            html: true,
            placement: "top",
            trigger: "hover"
          });
        }, 500);
      }
    }
  }, {
    key: "render",
    value: function render() {
      return /*#__PURE__*/react.createElement("form", {
        className: "form-horizontal form-settings",
        autoComplete: "off",
        noValidate: "novalidate"
      }, /*#__PURE__*/react.createElement("input", {
        type: "password",
        name: "no-password",
        className: "rsb-form-nosubmit",
        defaultValue: "",
        autoComplete: "new-password",
        style: {
          display: "none"
        }
      }), /*#__PURE__*/react.createElement("p", null, this.props.isFlow ? "Application settings are exported as an .arcflow file." : "Application settings are exported as an .arc file."), /*#__PURE__*/react.createElement("div", {
        className: "form-group row mb-3"
      }, /*#__PURE__*/react.createElement("label", {
        htmlFor: "type",
        className: "col-md-5 control-label col-form-label"
      }, "Type"), /*#__PURE__*/react.createElement("div", {
        className: "col-md-6"
      }, /*#__PURE__*/react.createElement("div", {
        className: "radio pt-2"
      }, /*#__PURE__*/react.createElement("label", null, /*#__PURE__*/react.createElement("input", {
        type: "radio",
        className: "form-check-input",
        name: "type",
        value: "all",
        defaultChecked: true,
        onChange: this.handleTypeChanged
      }), " ", this.props.isFlow ? this.props.isFlowConnectors ? "Export all selected items and settings" : "Export all flows and settings" : "Export all workspaces and settings")), /*#__PURE__*/react.createElement("div", {
        className: "radio pt-2"
      }, /*#__PURE__*/react.createElement("label", {
        ref: migration_classPrivateFieldGet(_customExportLabel, this)
      }, /*#__PURE__*/react.createElement("input", {
        type: "radio",
        className: "form-check-input",
        name: "type",
        value: "custom",
        onChange: this.handleTypeChanged
      }), " ", "Custom export", "\xA0", /*#__PURE__*/react.createElement("sup", null, /*#__PURE__*/react.createElement("i", {
        className: "fa fa-question-circle"
      })))))), !this.props.isFlow && /*#__PURE__*/react.createElement("div", {
        className: "form-group row mb-3"
      }, /*#__PURE__*/react.createElement("label", {
        htmlFor: "migrationExportModal_filename",
        className: "col-md-5 control-label col-form-label"
      }, "File Name"), /*#__PURE__*/react.createElement("div", {
        className: "col-md-6"
      }, /*#__PURE__*/react.createElement("div", {
        className: "input-group"
      }, /*#__PURE__*/react.createElement("input", {
        type: "text",
        className: "form-control",
        name: "filename",
        id: "migrationExportModal_filename",
        placeholder: "CDataArc",
        "aria-describedby": "filename-ext",
        onChange: this.handleFilenameChanged
      }), /*#__PURE__*/react.createElement("span", {
        className: "input-group-text",
        id: "filename-ext"
      }, this.props.isFlow ? ".arcflow" : ".arc")))), /*#__PURE__*/react.createElement("div", {
        className: "form-group row mb-3"
      }, /*#__PURE__*/react.createElement("label", {
        htmlFor: "migrationExportModal_sensitive",
        className: "col-md-5 control-label col-form-label"
      }, "Export Sensitive Values"), /*#__PURE__*/react.createElement("div", {
        className: "col-md-6"
      }, /*#__PURE__*/react.createElement("div", {
        className: "checkbox"
      }, /*#__PURE__*/react.createElement("label", null, /*#__PURE__*/react.createElement("input", {
        className: "form-check-input",
        type: "checkbox",
        name: "sensitive",
        id: "migrationExportModal_sensitive",
        onChange: this.handleSensitiveChanged,
        defaultChecked: true,
        disabled: !this.props.isFlow
      }), /*#__PURE__*/react.createElement("span", null, "Enable"))))), this.state.exportSensitive && /*#__PURE__*/react.createElement("div", {
        className: "form-group row"
      }, /*#__PURE__*/react.createElement("label", {
        htmlFor: "migrationExportModalPassword",
        className: "col-md-5 control-label col-form-label"
      }, "Password"), /*#__PURE__*/react.createElement("div", {
        className: "col-md-6"
      }, /*#__PURE__*/react.createElement("div", null, /*#__PURE__*/react.createElement("input", {
        type: "password",
        className: "form-control",
        name: "password",
        id: "migrationExportModalPassword",
        onChange: this.handlePasswordChanged
      })), /*#__PURE__*/react.createElement("div", {
        className: "migration-modal-value-text"
      }, /*#__PURE__*/react.createElement("p", null, "Create a password to export and encrypt sensitive values.")))));
    }
  }]);
}(react.Component);
var _settingsInfo2 = /*#__PURE__*/new WeakMap();
var _showIncludeWorkspaceSettings2 = /*#__PURE__*/new WeakMap();
var _includeWorkspaceSettings2 = /*#__PURE__*/new WeakMap();
var _workspaceActions2 = /*#__PURE__*/new WeakMap();
var _updateWorkspaceAction2 = /*#__PURE__*/new WeakMap();
var _updateNameAction2 = /*#__PURE__*/new WeakMap();
var _updatePartnerAction2 = /*#__PURE__*/new WeakMap();
var _updateDocumentAction2 = /*#__PURE__*/new WeakMap();
var _updateAPIAction2 = /*#__PURE__*/new WeakMap();
var _updateConnectorAction2 = /*#__PURE__*/new WeakMap();
var ExportCustomizePage = /*#__PURE__*/function (_React$Component8) {
  function ExportCustomizePage(props) {
    var _this10;
    migration_classCallCheck(this, ExportCustomizePage);
    _this10 = migration_callSuper(this, ExportCustomizePage, [props]);
    migration_classPrivateFieldInitSpec(_this10, _settingsInfo2, null);
    migration_classPrivateFieldInitSpec(_this10, _showIncludeWorkspaceSettings2, false);
    migration_classPrivateFieldInitSpec(_this10, _includeWorkspaceSettings2, true);
    migration_classPrivateFieldInitSpec(_this10, _workspaceActions2, {});
    migration_defineProperty(_this10, "handleNextPage", function () {
      _this10.props["export"](migration_classPrivateFieldGet(_settingsInfo2, _this10), _this10.props.filename, _this10.props.password, _this10);
    });
    migration_defineProperty(_this10, "handleWorkspacesClicked", function () {
      _this10.setState({
        showingTab: "workspaces"
      });
    });
    migration_defineProperty(_this10, "handleSettingsClicked", function () {
      _this10.setState({
        showingTab: "settings"
      });
    });
    migration_defineProperty(_this10, "handleEDIClicked", function () {
      _this10.setState({
        showingTab: "edi"
      });
    });
    migration_defineProperty(_this10, "handleWorkspaceActionChange", function (workspaceId, action) {
      migration_classPrivateFieldGet(_updateWorkspaceAction2, _this10).call(_this10, workspaceId, action);
    });
    migration_defineProperty(_this10, "handleNameActionChange", function (section, action) {
      migration_classPrivateFieldGet(_updateNameAction2, _this10).call(_this10, section, action);
    });
    migration_defineProperty(_this10, "handlePartnerActionChange", function (partnerId, action) {
      migration_classPrivateFieldGet(_updatePartnerAction2, _this10).call(_this10, partnerId, action);
    });
    migration_defineProperty(_this10, "handleDocumentActionChange", function (documentId, action) {
      migration_classPrivateFieldGet(_updateDocumentAction2, _this10).call(_this10, documentId, action);
    });
    migration_defineProperty(_this10, "handleAPIActionChange", function (workspaceId, apiId, action) {
      migration_classPrivateFieldGet(_updateAPIAction2, _this10).call(_this10, workspaceId, apiId, action);
    });
    migration_defineProperty(_this10, "handleConnectorActionChange", function (workspaceId, connectorId, action) {
      migration_classPrivateFieldGet(_updateConnectorAction2, _this10).call(_this10, workspaceId, connectorId, action);
    });
    migration_defineProperty(_this10, "handleIncludeWorkspaceSettingsChange", function (enable) {
      migration_classPrivateFieldSet(_includeWorkspaceSettings2, _this10, enable);
      migration_classPrivateFieldGet(_showIncludeWorkspaceSettings2, _this10) && Object.values(migration_classPrivateFieldGet(_settingsInfo2, _this10).workspaces).forEach(function (workspaceInfo) {
        workspaceInfo.settings.action = enable && migration_classPrivateFieldGet(_workspaceActions2, _this10)[workspaceInfo.id] !== "ignore" ? "skip" : "ignore";
      });
    });
    migration_classPrivateFieldInitSpec(_this10, _updateWorkspaceAction2, function (workspaceId, action) {
      if (migration_classPrivateFieldGet(_settingsInfo2, _this10).workspaces) {
        var workspaceInfo = migration_classPrivateFieldGet(_settingsInfo2, _this10).workspaces[workspaceId];
        if (workspaceInfo) {
          migration_classPrivateFieldGet(_workspaceActions2, _this10)[workspaceInfo.id] = action;
          if (workspaceInfo.connectors) {
            Object.values(workspaceInfo.connectors).forEach(function (connectorInfo) {
              connectorInfo.action = action;
            });
          }
          if (workspaceInfo.flow) {
            if (workspaceInfo.flow.elements) {
              Object.values(workspaceInfo.flow.elements).forEach(function (elementInfo) {
                elementInfo.action = action;
              });
            }
            if (workspaceInfo.flow.views) {
              Object.values(workspaceInfo.flow.views).forEach(function (viewInfo) {
                viewInfo.action = action;
              });
            }
            if (workspaceInfo.flow.apis) {
              Object.values(workspaceInfo.flow.apis).forEach(function (apiInfo) {
                apiInfo.action = action;
              });
            }
          }
          if (workspaceInfo.apis) {
            Object.values(workspaceInfo.apis).forEach(function (apiInfo) {
              apiInfo.action = action;
            });
          }
          if (workspaceInfo.settings && action) workspaceInfo.settings.action = !migration_classPrivateFieldGet(_includeWorkspaceSettings2, _this10) ? "ignore" : action;
        }
      }
    });
    migration_classPrivateFieldInitSpec(_this10, _updateNameAction2, function (section, action) {
      if (migration_classPrivateFieldGet(_settingsInfo2, _this10)[section]) {
        Object.values(migration_classPrivateFieldGet(_settingsInfo2, _this10)[section]).forEach(function (nameInfo) {
          nameInfo.action = action;
        });
      } else if (migration_classPrivateFieldGet(_settingsInfo2, _this10).settings && migration_classPrivateFieldGet(_settingsInfo2, _this10).settings[section]) {
        var settingInfo = migration_classPrivateFieldGet(_settingsInfo2, _this10).settings[section];
        if (settingInfo) {
          settingInfo.action = action;
        }
      }
    });
    migration_classPrivateFieldInitSpec(_this10, _updatePartnerAction2, function (partnerId, action) {
      var _classPrivateFieldGet13;
      if ((_classPrivateFieldGet13 = migration_classPrivateFieldGet(_settingsInfo2, _this10)) !== null && _classPrivateFieldGet13 !== void 0 && (_classPrivateFieldGet13 = _classPrivateFieldGet13.partners) !== null && _classPrivateFieldGet13 !== void 0 && _classPrivateFieldGet13[partnerId]) {
        migration_classPrivateFieldGet(_settingsInfo2, _this10).partners[partnerId].action = action;
      }
    });
    migration_classPrivateFieldInitSpec(_this10, _updateDocumentAction2, function (documentId, action) {
      var _classPrivateFieldGet14;
      if ((_classPrivateFieldGet14 = migration_classPrivateFieldGet(_settingsInfo2, _this10)) !== null && _classPrivateFieldGet14 !== void 0 && (_classPrivateFieldGet14 = _classPrivateFieldGet14.documents) !== null && _classPrivateFieldGet14 !== void 0 && _classPrivateFieldGet14[documentId]) {
        migration_classPrivateFieldGet(_settingsInfo2, _this10).documents[documentId].action = action;
      }
    });
    migration_classPrivateFieldInitSpec(_this10, _updateAPIAction2, function (workspaceId, apiId, action) {
      var _classPrivateFieldGet15, _workspaceInfo$flow3;
      var workspaceInfo = (_classPrivateFieldGet15 = migration_classPrivateFieldGet(_settingsInfo2, _this10)) === null || _classPrivateFieldGet15 === void 0 ? void 0 : _classPrivateFieldGet15.workspaces[workspaceId];
      if (workspaceInfo !== null && workspaceInfo !== void 0 && workspaceInfo.apis) {
        var apiInfo = workspaceInfo.apis[apiId.toLowerCase()];
        if (apiInfo) {
          apiInfo.action = action;
        }
      }
      if (workspaceInfo !== null && workspaceInfo !== void 0 && (_workspaceInfo$flow3 = workspaceInfo.flow) !== null && _workspaceInfo$flow3 !== void 0 && _workspaceInfo$flow3.apis) {
        var flowAPIInfo = workspaceInfo.flow.apis[apiId.toLowerCase()];
        if (flowAPIInfo) {
          flowAPIInfo.action = action;
        }
      }
    });
    migration_classPrivateFieldInitSpec(_this10, _updateConnectorAction2, function (workspaceId, connectorId, action) {
      var _classPrivateFieldGet16, _workspaceInfo$flow4;
      var workspaceInfo = (_classPrivateFieldGet16 = migration_classPrivateFieldGet(_settingsInfo2, _this10)) === null || _classPrivateFieldGet16 === void 0 ? void 0 : _classPrivateFieldGet16.workspaces[workspaceId];
      if (workspaceInfo !== null && workspaceInfo !== void 0 && workspaceInfo.connectors) {
        var connectorInfo = workspaceInfo.connectors[connectorId];
        if (connectorInfo) {
          connectorInfo.action = action;
        }
      }
      if (workspaceInfo !== null && workspaceInfo !== void 0 && (_workspaceInfo$flow4 = workspaceInfo.flow) !== null && _workspaceInfo$flow4 !== void 0 && _workspaceInfo$flow4.elements) {
        var elementInfo = workspaceInfo.flow.elements[connectorId];
        if (elementInfo) {
          elementInfo.action = action;
        }
      }
    });
    _this10.props.setTitle(_this10.props.isFlow ? _this10.isFlowConnectors ? "Customize Selected Items Export" : "Customize Workspace Export" : "Customize Application Settings Export");
    _this10.props.onNextPage(_this10.handleNextPage);
    _this10.props.enableNext(true);
    _this10.props.enablePrev(true);
    _this10.props.setIsFinalPage(true);
    _this10.props.setHelpLink("help.rst#Importing-Exporting-Flows");
    _this10.state = {
      showingTab: "workspaces"
    };
    migration_classPrivateFieldSet(_settingsInfo2, _this10, _this10.props.settingsInfo);
    migration_classPrivateFieldSet(_showIncludeWorkspaceSettings2, _this10, Object.values(migration_classPrivateFieldGet(_settingsInfo2, _this10).workspaces || {}).find(function (workspaceInfo) {
      var _workspaceInfo$settin2;
      return (_workspaceInfo$settin2 = workspaceInfo.settings) === null || _workspaceInfo$settin2 === void 0 ? void 0 : _workspaceInfo$settin2.existing;
    }) != null);
    if (migration_classPrivateFieldGet(_settingsInfo2, _this10).workspaces) {
      Object.values(migration_classPrivateFieldGet(_settingsInfo2, _this10).workspaces).forEach(function (workspaceInfo) {
        if (workspaceInfo.connectors) {
          Object.values(workspaceInfo.connectors).forEach(function (connectorInfo) {
            connectorInfo.action = "skip";
          });
        }
      });
    }
    return _this10;
  }
  migration_inherits(ExportCustomizePage, _React$Component8);
  return migration_createClass(ExportCustomizePage, [{
    key: "render",
    value: function render() {
      var showingTab = null;
      switch (this.state.showingTab) {
        case "workspaces":
          if (this.props.isFlow) {
            var workspaceInfo = null;
            if (migration_classPrivateFieldGet(_settingsInfo2, this).workspaces) {
              workspaceInfo = Object.values(migration_classPrivateFieldGet(_settingsInfo2, this).workspaces)[0];
            }
            showingTab = /*#__PURE__*/react.createElement(MigrationTabs/* CustomizeFlowTab */.zM, {
              isImport: false,
              workspaceInfo: workspaceInfo,
              onAPIActionChange: this.handleAPIActionChange,
              onConnectorActionChange: this.handleConnectorActionChange,
              includeWorkspaceSettings: migration_classPrivateFieldGet(_includeWorkspaceSettings2, this),
              onIncludeWorkspaceSettingsChange: migration_classPrivateFieldGet(_showIncludeWorkspaceSettings2, this) ? this.handleIncludeWorkspaceSettingsChange : undefined
            });
          } else {
            showingTab = /*#__PURE__*/react.createElement(MigrationTabs/* CustomizeWorkspacesTab */.le, {
              isImport: false,
              workspacesInfo: migration_classPrivateFieldGet(_settingsInfo2, this).workspaces,
              onActionChange: this.handleWorkspaceActionChange,
              includeWorkspaceSettings: migration_classPrivateFieldGet(_includeWorkspaceSettings2, this),
              onIncludeWorkspaceSettingsChange: migration_classPrivateFieldGet(_showIncludeWorkspaceSettings2, this) ? this.handleIncludeWorkspaceSettingsChange : undefined
            });
          }
          break;
        case "edi":
          showingTab = /*#__PURE__*/react.createElement(MigrationTabs/* CustomizeEDITab */.dF, {
            isImport: false,
            settingsInfo: migration_classPrivateFieldGet(_settingsInfo2, this),
            onPartnerActionChange: this.handlePartnerActionChange,
            onDocumentActionChange: this.handleDocumentActionChange
          });
          break;
        case "settings":
          showingTab = /*#__PURE__*/react.createElement(MigrationTabs/* CustomizeSettingsTab */.EX, {
            isImport: false,
            settingsInfo: migration_classPrivateFieldGet(_settingsInfo2, this),
            onNameActionChange: this.handleNameActionChange
          });
          break;
        default:
          break;
      }
      return /*#__PURE__*/react.createElement("div", null, /*#__PURE__*/react.createElement("div", null, /*#__PURE__*/react.createElement("ul", {
        className: "nav nav-tabs tab-underline",
        role: "tablist"
      }, /*#__PURE__*/react.createElement("li", {
        className: "nav-item",
        role: "presentation"
      }, /*#__PURE__*/react.createElement("a", {
        className: "nav-link " + (this.state.showingTab == "workspaces" ? "active" : ""),
        onClick: this.handleWorkspacesClicked
      }, this.props.isFlow ? "Workspace" : "Workspaces")), !this.props.isFlow && (this.props.settingsInfo.partners || this.props.settingsInfo.documents) && /*#__PURE__*/react.createElement("li", {
        className: "nav-item",
        role: "presentation"
      }, /*#__PURE__*/react.createElement("a", {
        className: "nav-link " + (this.state.showingTab == "edi" ? "active" : ""),
        onClick: this.handleEDIClicked
      }, "EDI")), /*#__PURE__*/react.createElement("li", {
        className: "nav-item",
        role: "presentation"
      }, /*#__PURE__*/react.createElement("a", {
        className: "nav-link " + (this.state.showingTab == "settings" ? "active" : ""),
        onClick: this.handleSettingsClicked
      }, "Settings")))), /*#__PURE__*/react.createElement("div", {
        className: "tab-content"
      }, /*#__PURE__*/react.createElement("div", {
        className: "tab-pane active show",
        role: "tabpanel"
      }, showingTab)));
    }
  }]);
}(react.Component);
var _export = /*#__PURE__*/new WeakMap();
var ExportModal = /*#__PURE__*/function (_React$Component9) {
  function ExportModal(props) {
    var _this11;
    migration_classCallCheck(this, ExportModal);
    _this11 = migration_callSuper(this, ExportModal, [props]);
    migration_defineProperty(_this11, "handleError", function (errorMessage) {
      _this11.setState({
        errorMessage: errorMessage
      });
    });
    migration_classPrivateFieldInitSpec(_this11, _export, function (settingsInfo, filename, password, page) {
      var _window10, _window11;
      var isFlow = _this11.props.isFlow;
      var isFlowConnectors = _this11.props.isFlowConnectors;
      var selectedConnectors = (_window10 = window) === null || _window10 === void 0 || (_window10 = _window10.rsb) === null || _window10 === void 0 || (_window10 = _window10.workflow) === null || _window10 === void 0 ? void 0 : _window10.selectedConnectors;
      var currentWorkspaceId = (_window11 = window) === null || _window11 === void 0 || (_window11 = _window11.rsb) === null || _window11 === void 0 || (_window11 = _window11.workflow) === null || _window11 === void 0 ? void 0 : _window11.currentWorkspaceId;
      if (_this11.props.externalRef) {
        var _this11$props$externa, _this11$props$externa2;
        currentWorkspaceId = (_this11$props$externa = _this11.props.externalRef) === null || _this11$props$externa === void 0 || (_this11$props$externa = _this11$props$externa.current) === null || _this11$props$externa === void 0 ? void 0 : _this11$props$externa.operationalWorkspaceIds[0];
        selectedConnectors = (_this11$props$externa2 = _this11.props.externalRef) === null || _this11$props$externa2 === void 0 || (_this11$props$externa2 = _this11$props$externa2.current) === null || _this11$props$externa2 === void 0 ? void 0 : _this11$props$externa2.operationalConnectorIds;
      }
      var params = new URLSearchParams();
      if (_this11.props.isFlow) {
        params.append("WorkspaceId", currentWorkspaceId);
      }
      if (password) {
        params.append("Password", password);
      }
      params.append("SettingsInfo", JSON.stringify(settingsInfo));
      axios/* default */.A.post("src/standard/migrationExport.rsb?@json", params).then(function (response) {
        var _response$data;
        if (response !== null && response !== void 0 && (_response$data = response.data) !== null && _response$data !== void 0 && _response$data.items) {
          var errorMessage = (0,components_utils/* getResultErrorMessage */.hz)(response.data.items);
          if (errorMessage) {
            page.props.setError(errorMessage);
          } else {
            var byteStr = atob(response.data.items[0].arcflow);
            var ia = new Uint8Array(byteStr.length);
            for (var i = 0; i < byteStr.length; i++) {
              ia[i] = byteStr.charCodeAt(i);
            }
            var dataBlob = new Blob([ia], {
              type: "application/zip"
            });
            var fileReader = new FileReader();
            fileReader.readAsDataURL(dataBlob);
            fileReader.onload = function (e) {
              var a = document.createElement("a");
              if (filename) {
                a.download = filename;
              } else if (isFlow) {
                if (isFlowConnectors && !selectedConnectors.includes(";")) {
                  a.download = selectedConnectors + ".arcflow";
                } else {
                  a.download = currentWorkspaceId + ".arcflow";
                }
              } else {
                a.download = "CDataArc.arc";
              }
              a.href = e.target.result;
              document.body.appendChild(a);
              a.click();
              document.body.removeChild(a);
            };
            page.props.close();
          }
        }
      });
    });
    _this11.state = {
      errorMessage: null
    };
    return _this11;
  }
  migration_inherits(ExportModal, _React$Component9);
  return migration_createClass(ExportModal, [{
    key: "render",
    value: function render() {
      var modalId = this.props.id ? this.props.id : "migrationExportModal";
      return /*#__PURE__*/react.createElement(ProgressModal, {
        id: modalId,
        externalRef: this.props.externalRef,
        initialPageType: ExportInitialPage,
        initialPageProps: {
          "export": migration_classPrivateFieldGet(_export, this),
          isFlow: this.props.isFlow,
          isFlowConnectors: this.props.isFlowConnectors,
          externalRef: this.props.externalRef
        },
        finishButtonText: "Export",
        finishButtonIcon: "fas fa-file-export"
      });
    }
  }]);
}(react.Component);
var DownloadSampleFlowPage = /*#__PURE__*/function (_React$Component10) {
  function DownloadSampleFlowPage(props) {
    var _window$rsb$sampleFlo4, _window$rsb5, _window$rsb$sampleFlo5, _window$rsb6;
    var _this12;
    migration_classCallCheck(this, DownloadSampleFlowPage);
    _this12 = migration_callSuper(this, DownloadSampleFlowPage, [props]);
    migration_defineProperty(_this12, "handleNextPage", function () {
      var _window$rsb$sampleFlo, _window$rsb, _window$rsb$sampleFlo2, _window$rsb2, _window$rsb$workflow$3, _window$rsb3;
      _this12.props.setLoadingText("Downloading File...");
      _this12.props.setError(null);
      var params = new URLSearchParams();
      params.append("guid", (_window$rsb$sampleFlo = (_window$rsb = window.rsb) === null || _window$rsb === void 0 || (_window$rsb = _window$rsb.sampleFlow) === null || _window$rsb === void 0 ? void 0 : _window$rsb.guid) !== null && _window$rsb$sampleFlo !== void 0 ? _window$rsb$sampleFlo : "");
      params.append("title", (_window$rsb$sampleFlo2 = (_window$rsb2 = window.rsb) === null || _window$rsb2 === void 0 || (_window$rsb2 = _window$rsb2.sampleFlow) === null || _window$rsb2 === void 0 ? void 0 : _window$rsb2.title) !== null && _window$rsb$sampleFlo2 !== void 0 ? _window$rsb$sampleFlo2 : "");
      params.append("workspaceid", (_window$rsb$workflow$3 = (_window$rsb3 = window.rsb) === null || _window$rsb3 === void 0 || (_window$rsb3 = _window$rsb3.workflow) === null || _window$rsb3 === void 0 ? void 0 : _window$rsb3.currentWorkspaceId) !== null && _window$rsb$workflow$3 !== void 0 ? _window$rsb$workflow$3 : "");
      axios/* default */.A.post("src/downloadSampleFlow.rsb?@json", params).then(function (response) {
        _this12.props.setLoadingText(null);
        var data = response.data;
        var errMsg = (0,components_utils/* getResultErrorMessage */.hz)(data.items);
        if (errMsg) {
          _this12.props.setError(errMsg);
        } else {
          var settingsInfo = data.items && data.items[0] && data.items[0].settingsinfo;
          var fileHandle = data.items && data.items[0] && data.items[0].handle;
          if (settingsInfo && fileHandle) {
            var _window$rsb$sampleFlo3, _window$rsb4, _window12;
            var settingsInfoObj = JSON.parse(settingsInfo);
            if (settingsInfoObj.workspaces) {
              Object.keys(settingsInfoObj.workspaces).forEach(function (key) {
                if (key) {
                  _this12.props.setError("This file appears to be a global export (.arc). Please navigate to the Migration tab within the Settings page to import it.");
                  _this12.props.setLoadingText(null);
                  return;
                }
              });
            }
            var nextPageType = ImportProcessedPage;
            _this12.props.setNextPage(nextPageType, {
              fileName: (_window$rsb$sampleFlo3 = (_window$rsb4 = window.rsb) === null || _window$rsb4 === void 0 || (_window$rsb4 = _window$rsb4.sampleFlow) === null || _window$rsb4 === void 0 ? void 0 : _window$rsb4.title) !== null && _window$rsb$sampleFlo3 !== void 0 ? _window$rsb$sampleFlo3 : "",
              settingsInfo: settingsInfoObj,
              fileHandle: fileHandle,
              "import": _this12.props["import"],
              isFlow: true,
              isFlowConnectors: false,
              workspaceId: (_window12 = window) === null || _window12 === void 0 || (_window12 = _window12.rsb) === null || _window12 === void 0 || (_window12 = _window12.workflow) === null || _window12 === void 0 ? void 0 : _window12.currentWorkspaceId
            });
          } else {
            _this12.props.setError("No SettingsInfo or Handle.");
          }
        }
      });
    });
    migration_defineProperty(_this12, "renderIcons", function (icons) {
      if (!icons) {
        return "";
      }
      var values = icons.split(",");
      var html = [];
      for (var index = 0; index < values.length; index++) {
        if (index > 0) {
          html.push(/*#__PURE__*/react.createElement("i", {
            key: "icon_" + index,
            className: "fa fa-solid fa-arrow-right-long"
          }));
        }
        html.push(/*#__PURE__*/react.createElement("a", {
          key: "link_" + index,
          className: "flow-port-img app-icon app-icon-" + values[index].trim().replace(/^cdata(.+)$/, "$1")
        }));
      }
      return html;
    });
    _this12.props.enablePrev(false);
    _this12.props.enableNext(true);
    _this12.props.onNextPage(_this12.handleNextPage);
    _this12.props.setTitle((_window$rsb$sampleFlo4 = (_window$rsb5 = window.rsb) === null || _window$rsb5 === void 0 || (_window$rsb5 = _window$rsb5.sampleFlow) === null || _window$rsb5 === void 0 ? void 0 : _window$rsb5.title) !== null && _window$rsb$sampleFlo4 !== void 0 ? _window$rsb$sampleFlo4 : "");
    _this12.props.setHelpLink((_window$rsb$sampleFlo5 = (_window$rsb6 = window.rsb) === null || _window$rsb6 === void 0 || (_window$rsb6 = _window$rsb6.sampleFlow) === null || _window$rsb6 === void 0 ? void 0 : _window$rsb6.url) !== null && _window$rsb$sampleFlo5 !== void 0 ? _window$rsb$sampleFlo5 : "", "View Detail");
    return _this12;
  }
  migration_inherits(DownloadSampleFlowPage, _React$Component10);
  return migration_createClass(DownloadSampleFlowPage, [{
    key: "render",
    value: function render() {
      var _window$rsb$sampleFlo6, _window$rsb7, _window$rsb$sampleFlo7, _window$rsb8;
      return /*#__PURE__*/react.createElement("form", {
        className: "form-horizontal form-settings",
        role: "form",
        method: "POST",
        autoComplete: "off",
        noValidate: "novalidate"
      }, /*#__PURE__*/react.createElement("div", {
        className: "form-group",
        "data-icons": ""
      }, this.renderIcons((_window$rsb$sampleFlo6 = (_window$rsb7 = window.rsb) === null || _window$rsb7 === void 0 || (_window$rsb7 = _window$rsb7.sampleFlow) === null || _window$rsb7 === void 0 ? void 0 : _window$rsb7.icons) !== null && _window$rsb$sampleFlo6 !== void 0 ? _window$rsb$sampleFlo6 : "")), /*#__PURE__*/react.createElement("br", null), /*#__PURE__*/react.createElement("div", null, /*#__PURE__*/react.createElement("span", null, (_window$rsb$sampleFlo7 = (_window$rsb8 = window.rsb) === null || _window$rsb8 === void 0 || (_window$rsb8 = _window$rsb8.sampleFlow) === null || _window$rsb8 === void 0 ? void 0 : _window$rsb8.desc) !== null && _window$rsb$sampleFlo7 !== void 0 ? _window$rsb$sampleFlo7 : "")));
    }
  }]);
}(react.Component);
var ImportSampleFlowModal = /*#__PURE__*/function (_React$Component11) {
  function ImportSampleFlowModal(props) {
    migration_classCallCheck(this, ImportSampleFlowModal);
    return migration_callSuper(this, ImportSampleFlowModal, [props]);
  }
  migration_inherits(ImportSampleFlowModal, _React$Component11);
  return migration_createClass(ImportSampleFlowModal, [{
    key: "render",
    value: function render() {
      return /*#__PURE__*/react.createElement(ImportModal, {
        id: "importSampleflowModal",
        initialPageType: DownloadSampleFlowPage,
        isFlow: true
      });
    }
  }]);
}(react.Component);
var UpgradeBuildModal = /*#__PURE__*/function (_React$Component12) {
  function UpgradeBuildModal(props) {
    var _this13;
    migration_classCallCheck(this, UpgradeBuildModal);
    _this13 = migration_callSuper(this, UpgradeBuildModal, [props]);
    _this13.state = {
      errorMessage: null
    };
    return _this13;
  }
  migration_inherits(UpgradeBuildModal, _React$Component12);
  return migration_createClass(UpgradeBuildModal, [{
    key: "render",
    value: function render() {
      return /*#__PURE__*/react.createElement(Modal, {
        id: "upgradeBuildModal"
      }, /*#__PURE__*/react.createElement(ModalHeader, {
        title: "Upgrade Required"
      }), /*#__PURE__*/react.createElement(ModalBody, null, /*#__PURE__*/react.createElement("p", null, "This flow includes one or more connectors that a new build. To Upgrade your build please go to ", /*#__PURE__*/react.createElement("a", {
        target: "_blank",
        rel: "noreferrer",
        href: "https://arc.cdata.com/"
      }, "arc.cdata.com"))), /*#__PURE__*/react.createElement(ModalFooter, null, /*#__PURE__*/react.createElement("button", {
        type: "button",
        className: "btn btn-outline-secondary",
        "data-bs-dismiss": "modal"
      }, /*#__PURE__*/react.createElement("i", {
        className: "fa fa-close"
      }), "\xA0Cancel")));
    }
  }]);
}(react.Component);

/***/ }),

/***/ 19967:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ ImportDropdown),
/* harmony export */   P: () => (/* binding */ ImportUtils)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96540);
var _ImportUtils;
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classPrivateFieldInitSpec(e, t, a) { _checkPrivateRedeclaration(e, t), t.set(e, a); }
function _checkPrivateRedeclaration(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object"); }
function _classPrivateFieldSet(s, a, r) { return s.set(_assertClassBrand(s, a), r), r; }
function _classPrivateFieldGet(s, a) { return s.get(_assertClassBrand(s, a)); }
function _assertClassBrand(e, t, n) { if ("function" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n; throw new TypeError("Private element is not present on this object"); }


var _dropdownRef = /*#__PURE__*/new WeakMap();
var _dropdown = /*#__PURE__*/new WeakMap();
var _options = /*#__PURE__*/new WeakMap();
var _defaultValue = /*#__PURE__*/new WeakMap();
var ImportDropdown = /*#__PURE__*/function (_React$Component) {
  function ImportDropdown(props) {
    var _this;
    _classCallCheck(this, ImportDropdown);
    _this = _callSuper(this, ImportDropdown, [props]);
    _classPrivateFieldInitSpec(_this, _dropdownRef, void 0);
    _classPrivateFieldInitSpec(_this, _dropdown, void 0);
    _classPrivateFieldInitSpec(_this, _options, {});
    _classPrivateFieldInitSpec(_this, _defaultValue, void 0);
    _defineProperty(_this, "handleOptionClick", function (event) {
      var value = event.target.dataset["arcDropdownValue"];
      if (_this.props.onChange) {
        _this.props.onChange(value, _this.props);
      }
    });
    props.options && props.options.forEach(function (option) {
      var _classPrivateFieldGet2;
      (_classPrivateFieldGet2 = _classPrivateFieldGet(_defaultValue, _this)) !== null && _classPrivateFieldGet2 !== void 0 ? _classPrivateFieldGet2 : _classPrivateFieldSet(_defaultValue, _this, option.value);
      _classPrivateFieldGet(_options, _this)[option.value] = option;
    });
    _classPrivateFieldSet(_dropdownRef, _this, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createRef());
    return _this;
  }
  _inherits(ImportDropdown, _React$Component);
  return _createClass(ImportDropdown, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var elem = _classPrivateFieldGet(_dropdownRef, this).current;
      if (elem != null) {
        _classPrivateFieldSet(_dropdown, this, new window.bootstrap.Dropdown(elem));
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props$className,
        _selectedOption$name,
        _this2 = this;
      var selectedOption = this.props.value && _classPrivateFieldGet(_options, this)[this.props.value];
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
        className: "dropdown migration-dropdown-group " + ((_this$props$className = this.props.className) !== null && _this$props$className !== void 0 ? _this$props$className : ""),
        style: this.props.style
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
        className: "migration-dropdown-title",
        type: "button",
        "data-bs-toggle": "dropdown",
        ref: _classPrivateFieldGet(_dropdownRef, this)
      }, (_selectedOption$name = selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.name) !== null && _selectedOption$name !== void 0 ? _selectedOption$name : this.props.value, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("i", {
        className: "fa fa-angle-down migration-dropdown-icon"
      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul", {
        className: "dropdown-menu dropdown-menu-end"
      }, Object.values(_classPrivateFieldGet(_options, this)).map(function (option) {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", {
          key: option.value
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("a", {
          className: "dropdown-item",
          "data-arc-dropdown-value": option.value,
          onClick: _this2.handleOptionClick
        }, option.name));
      })));
    }
  }]);
}(react__WEBPACK_IMPORTED_MODULE_0__.Component);
var ImportUtils = /*#__PURE__*/_createClass(function ImportUtils() {
  _classCallCheck(this, ImportUtils);
});
_ImportUtils = ImportUtils;
_defineProperty(ImportUtils, "Clone", function (object) {
  var copy = null;
  if (object.constructor === Array) {
    copy = [];
    for (var i = 0; i < object.length; i++) {
      if (_typeof(object[i]) === "object") {
        copy.push(_ImportUtils.Clone(object[i]));
      } else {
        copy.push(object[i]);
      }
    }
  } else {
    copy = {};
    for (var elem in object) {
      if (_typeof(object[elem]) === "object") {
        copy[elem] = _ImportUtils.Clone(object[elem]);
      } else {
        copy[elem] = object[elem];
      }
    }
  }
  return copy;
});

/***/ }),

/***/ 50691:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Y: () => (/* binding */ IsLicenseSufficient),
/* harmony export */   y: () => (/* binding */ PaidFeatureObj)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96540);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5556);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);


var propsTypes = {
  /**
   * currentType
   * 
   * see app.js rsb.connect.initPaidFeatures
   */
  currentType: prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOf(["no valid license", "disabled", "unlimited", "enterprise", "business", "professional", "standard", "starter", "true"]).isRequired,
  /**
   * ispaid
   * 
   * see app.js rsb.connect.initPaidFeatures
   */
  ispaid: prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOf(["no valid license", "disabled", "unlimited", "enterprise", "business", "professional", "standard", "starter", "true"]).isRequired
};
function IsLicenseSufficient(currentType, expectedLicenseType) {
  var types = ["no valid license", "disabled", "unlimited", "enterprise", "business", "professional", "standard", "starter", "true"];
  return types.indexOf(currentType) <= types.indexOf(expectedLicenseType);
}
function PaidFeatureObj(_ref) {
  var currentType = _ref.currentType,
    ispaid = _ref.ispaid,
    children = _ref.children;
  var sufficient = IsLicenseSufficient(currentType, ispaid);
  var paidFeatureObj = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.cloneElement(children, {
    readOnly: true,
    onMouseDown: function onMouseDown() {
      var _window;
      (_window = window) === null || _window === void 0 || (_window = _window.rsb) === null || _window === void 0 || (_window = _window.paidFeature) === null || _window === void 0 || _window.paidFeatureModal();
    }
  });
  return sufficient ? children : paidFeatureObj;
}
PaidFeatureObj.propTypes = propsTypes;


/***/ }),

/***/ 58447:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   G: () => (/* binding */ SearchBox)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96540);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5556);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }




var SearchBox = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.memo(function (_ref) {
  var searchText = _ref.searchText,
    onChanged = _ref.onChanged,
    placeHolder = _ref.placeHolder,
    inputRef = _ref.inputRef,
    onFocus = _ref.onFocus,
    onBlur = _ref.onBlur,
    appendClass = _ref.appendClass,
    nonAutoFocus = _ref.nonAutoFocus;
  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),
    _useState2 = _slicedToArray(_useState, 2),
    focus = _useState2[0],
    setFocus = _useState2[1];
  var handleFocus = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {
    if (onFocus != null) {
      onFocus();
    }
    setFocus(true);
  }, [onFocus]);
  var handleBlur = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {
    if (onBlur != null) {
      onBlur();
    }
    setFocus(false);
  }, [onBlur]);
  var shownPlaceHolder = placeHolder != null ? placeHolder : "Search";
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {
    className: "d-flex app-search-bar form-control " + (appendClass ? appendClass : "") + (focus ? " focus-input" : "")
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
    className: "search-glass-icon"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("i", {
    className: "fa fa-search"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {
    type: "text",
    autoFocus: !nonAutoFocus,
    className: "search-input",
    ref: function ref(_ref2) {
      if (inputRef != null) inputRef.current = _ref2;
    },
    placeholder: shownPlaceHolder,
    value: searchText ? searchText : "",
    onChange: function onChange(e) {
      return onChanged === null || onChanged === void 0 ? void 0 : onChanged.call(null, e.target.value);
    },
    onFocus: handleFocus,
    onBlur: handleBlur
  }), searchText && searchText.length > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {
    className: "search-clear-icon",
    onClick: function onClick() {
      return onChanged === null || onChanged === void 0 ? void 0 : onChanged.call(null, "");
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("i", {
    className: "fa fa-times-circle"
  })));
});
SearchBox.propTypes = {
  /**
   * The search text.
   */
  searchText: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().string),
  /**
   * Event: onChanged
   */
  onChanged: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().func).isRequired,
  /**
   * The append class names.
   */
  appendClass: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().string)
};


/***/ }),

/***/ 1295:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  I: () => (/* binding */ SearchBar),
  r: () => (/* binding */ _TableFilter)
});

// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(96540);
// EXTERNAL MODULE: ./node_modules/prop-types/index.js
var prop_types = __webpack_require__(5556);
var prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Spinner.js
var Spinner = __webpack_require__(70778);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Dropdown.js + 1 modules
var Dropdown = __webpack_require__(26465);
// EXTERNAL MODULE: ./src/components/utils/index.js + 1 modules
var utils = __webpack_require__(25337);
// EXTERNAL MODULE: ./src/components/searchbox/index.jsx
var searchbox = __webpack_require__(58447);
// EXTERNAL MODULE: ./src/components/dropdown-hacker/index.jsx
var dropdown_hacker = __webpack_require__(4938);
;// CONCATENATED MODULE: ./src/components/searchable-dropdown/index.jsx
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _classPrivateFieldInitSpec(e, t, a) { _checkPrivateRedeclaration(e, t), t.set(e, a); }
function _checkPrivateRedeclaration(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object"); }
function _classPrivateFieldSet(s, a, r) { return s.set(_assertClassBrand(s, a), r), r; }
function _classPrivateFieldGet(s, a) { return s.get(_assertClassBrand(s, a)); }
function _assertClassBrand(e, t, n) { if ("function" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n; throw new TypeError("Private element is not present on this object"); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }
function _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }
function _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }
function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }








var Footer = /*#__PURE__*/function (_React$Component) {
  function Footer(props) {
    _classCallCheck(this, Footer);
    return _callSuper(this, Footer, [props]);
  }
  _inherits(Footer, _React$Component);
  return _createClass(Footer, [{
    key: "render",
    value: function render() {
      return /*#__PURE__*/react.createElement("div", {
        className: "searchable-footer row"
      }, /*#__PURE__*/react.createElement("span", {
        className: "col-6"
      }, (0,utils/* FormatString */.FJ)("{0} of {1} items", this.props.size, this.props.max)), /*#__PURE__*/react.createElement("a", {
        className: "col-6",
        role: "button",
        onClick: this.props.onClearAll
      }, "Clear Selected"));
    }
  }]);
}(react.Component);
var ItemList = /*#__PURE__*/function (_React$Component2) {
  function ItemList(props) {
    var _this;
    _classCallCheck(this, ItemList);
    _this = _callSuper(this, ItemList, [props]);
    _defineProperty(_this, "handleClickMore", function () {
      _this.setState(function (state) {
        return {
          listSize: state.listSize + _this.props.defListSize
        };
      });
    });
    _defineProperty(_this, "handleClick", function (event) {
      // We only react for <input> and <a> element.
      if (event.target instanceof HTMLLabelElement) {
        return;
      }
      if (_this.props.onChecked) {
        _this.props.onChecked(event);
      }
    });
    _defineProperty(_this, "renderItem", function (key, label) {
      return /*#__PURE__*/react.createElement("a", {
        key: key,
        className: "searchable-item form-check dropdown-item",
        onClick: _this.handleClick,
        "data-id": key
      }, /*#__PURE__*/react.createElement("input", {
        className: "form-check-input",
        type: "checkbox",
        checked: _this.props.selectedIds.has(key),
        "data-id": key,
        id: key,
        onChange: function onChange() {}
      }), /*#__PURE__*/react.createElement("label", {
        className: "form-check-label",
        title: label,
        htmlFor: key
      }, label));
    });
    _defineProperty(_this, "renderItems", function (itemMap) {
      var listItems = [];
      itemMap.forEach(function (val, key) {
        if (listItems.length < _this.state.listSize) {
          listItems.push(_this.renderItem(key, val));
        }
      });
      return listItems;
    });
    _defineProperty(_this, "renderShowMore", function (itemCount) {
      if (itemCount <= _this.state.listSize) {
        return null;
      }
      return /*#__PURE__*/react.createElement("div", {
        className: "searchable-item dropdown-item",
        onClick: _this.handleClickMore
      }, /*#__PURE__*/react.createElement("a", {
        role: "button"
      }, "Show more"));
    });
    _this.state = {
      listSize: _this.props.defListSize
    };
    return _this;
  }
  _inherits(ItemList, _React$Component2);
  return _createClass(ItemList, [{
    key: "render",
    value: function render() {
      return /*#__PURE__*/react.createElement("div", {
        className: "searchable-list"
      }, this.renderItems(this.props.itemMap), this.renderShowMore(this.props.itemMap.size));
    }
  }]);
}(react.Component);
var DropdownMenu = /*#__PURE__*/function (_React$Component3) {
  function DropdownMenu(props) {
    var _this2;
    _classCallCheck(this, DropdownMenu);
    _this2 = _callSuper(this, DropdownMenu, [props]);
    _defineProperty(_this2, "handleSearchInput", function (text) {
      _this2.setState({
        keyword: text
      });
    });
    _defineProperty(_this2, "getShowedItems", function (keyword, originalMap) {
      var showedMap = new Map();
      if (!keyword) {
        showedMap = originalMap;
      } else {
        keyword = keyword.toLocaleLowerCase();
        var _iterator = _createForOfIteratorHelper(originalMap),
          _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var _step$value = _slicedToArray(_step.value, 2),
              key = _step$value[0],
              value = _step$value[1];
            if (value.toLocaleLowerCase().indexOf(keyword) >= 0) {
              showedMap.set(key, value);
            }
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      }
      return showedMap;
    });
    _defineProperty(_this2, "onClearAll", function () {
      _this2.setState({
        keyword: ""
      });
      _this2.props.onClearAll();
    });
    _defineProperty(_this2, "renderList", function () {
      if (_this2.props.isLoading) {
        return /*#__PURE__*/react.createElement("div", {
          className: "searchable-item dropdown-item mt-2"
        }, /*#__PURE__*/react.createElement(Spinner/* default */.A, {
          animation: "border",
          size: "sm",
          role: "status"
        }, /*#__PURE__*/react.createElement("span", {
          className: "visually-hidden"
        })), /*#__PURE__*/react.createElement("label", {
          className: "ms-2"
        }, "Loading More ..."));
      }
      var itemMap = _this2.getShowedItems(_this2.state.keyword, _this2.props.itemMap);
      return /*#__PURE__*/react.createElement(ItemList, {
        itemMap: itemMap,
        selectedIds: _this2.props.selectedIds,
        onChecked: _this2.props.onChecked,
        defListSize: _this2.props.defListSize
      });
    });
    _this2.state = {
      keyword: ""
    };
    return _this2;
  }
  _inherits(DropdownMenu, _React$Component3);
  return _createClass(DropdownMenu, [{
    key: "render",
    value: function render() {
      var itemMap = this.getShowedItems(this.state.keyword, this.props.itemMap);
      return /*#__PURE__*/react.createElement(Dropdown/* default */.A.Menu, {
        className: "searchable-menu",
        flip: false
      }, /*#__PURE__*/react.createElement(searchbox/* SearchBox */.G, {
        searchText: this.state.keyword,
        onChanged: this.handleSearchInput,
        appendClass: "searchable-input"
      }), this.renderList(), /*#__PURE__*/react.createElement(Dropdown/* default */.A.Divider, null), /*#__PURE__*/react.createElement(Footer, {
        max: itemMap.size,
        size: this.props.selectedIds.size,
        onClearAll: this.onClearAll
      }));
    }
  }], [{
    key: "getDerivedStateFromProps",
    value: function getDerivedStateFromProps(props, state) {
      if (!props.nextShow && state.keyword) {
        return {
          keyword: ""
        };
      } else {
        return null;
      }
    }
  }]);
}(react.Component);
var _itemMap = /*#__PURE__*/new WeakMap();
var _i18nMap = /*#__PURE__*/new WeakMap();
var _selectedIds = /*#__PURE__*/new WeakMap();
var SearchableDropdown = /*#__PURE__*/function (_React$Component4) {
  function SearchableDropdown(props) {
    var _this3;
    _classCallCheck(this, SearchableDropdown);
    _this3 = _callSuper(this, SearchableDropdown, [props]);
    _classPrivateFieldInitSpec(_this3, _itemMap, null);
    _classPrivateFieldInitSpec(_this3, _i18nMap, null);
    _classPrivateFieldInitSpec(_this3, _selectedIds, null);
    _defineProperty(_this3, "fireChange", function (event, checkedItemList) {
      if (_this3.props.onChange) {
        _this3.props.onChange(event, checkedItemList);
      }
    });
    _defineProperty(_this3, "handleChecked", function (e) {
      var selected = _classPrivateFieldGet(_selectedIds, _this3);
      var itemID = e.target.dataset.id;
      if (itemID) {
        if (selected.has(itemID)) {
          selected["delete"](itemID);
        } else {
          selected.add(itemID);
        }
      }
      var checkedItemList = [];
      selected.forEach(function (idKey) {
        checkedItemList.push(_classPrivateFieldGet(_itemMap, _this3).get(idKey));
      });
      _this3.fireChange(e, checkedItemList);
    });
    _defineProperty(_this3, "handleClearAll", function (e) {
      _this3.fireChange(e, []);
    });
    _defineProperty(_this3, "handleToggle", function (nextShow, callback) {
      _this3.setState({
        nextShow: nextShow
      });
      if (callback) {
        callback(nextShow);
      }
    });
    _this3.state = {
      nextShow: false
    };
    return _this3;
  }
  _inherits(SearchableDropdown, _React$Component4);
  return _createClass(SearchableDropdown, [{
    key: "renderSplitBtn",
    value: function renderSplitBtn(btnIcon, onClick) {
      return /*#__PURE__*/react.createElement("a", {
        className: "filter-close-button",
        onClick: onClick
      }, /*#__PURE__*/react.createElement("i", {
        className: "fa " + btnIcon
      }));
    }
  }, {
    key: "render",
    value: function render() {
      var _this4 = this;
      var defSize = this.props.defListSize;
      var parameter = SearchableDropdown.initByProps(this.props);
      var btnClass = parameter.btnClass;
      var title = parameter.title;
      _classPrivateFieldSet(_itemMap, this, parameter.itemMap);
      _classPrivateFieldSet(_i18nMap, this, parameter.i18nMap);
      _classPrivateFieldSet(_selectedIds, this, parameter.selectedIds);
      var isLoading = !this.props.itemList;
      return /*#__PURE__*/react.createElement(Dropdown/* default */.A, {
        autoClose: "outside",
        className: "searchable-dropdown",
        onToggle: function onToggle(nextShow) {
          return _this4.handleToggle(nextShow, _this4.props.onToggle);
        }
      }, /*#__PURE__*/react.createElement(dropdown_hacker/* DropdownHacker */.G, null), /*#__PURE__*/react.createElement(Dropdown/* default */.A.Toggle, {
        variant: btnClass,
        title: title
      }, this.props.splitDropdown ? this.renderSplitBtn(this.props.nonDropdownBtnIcon, this.props.nonDropdownBtnClick) : null, /*#__PURE__*/react.createElement("i", {
        className: "fa " + this.props.btnIcon
      }), "\xA0", title, "\xA0"), this.state.nextShow && /*#__PURE__*/react.createElement(DropdownMenu, {
        nextShow: this.state.nextShow,
        isLoading: isLoading,
        itemMap: _classPrivateFieldGet(_i18nMap, this),
        selectedIds: _classPrivateFieldGet(_selectedIds, this),
        defListSize: defSize,
        onChecked: this.handleChecked,
        onClearAll: this.handleClearAll
      }));
    }
  }], [{
    key: "getI18nNameByIndex",
    value: function getI18nNameByIndex(itemList, i18nList, index) {
      if (i18nList && i18nList instanceof Array && index > -1 && index < i18nList.length) {
        return i18nList[index];
      } else {
        return itemList[index];
      }
    }
  }, {
    key: "getI18nNameByValue",
    value: function getI18nNameByValue(itemList, i18nList, value) {
      if (!itemList) {
        return value;
      }
      var index = itemList.findIndex(function (element) {
        return element === value;
      });
      if (-1 === index) {
        return value;
      }
      return SearchableDropdown.getI18nNameByIndex(itemList, i18nList, index);
    }
  }, {
    key: "initByProps",
    value: function initByProps(props) {
      var checkedItemList = [];
      if (props.checkedItemList && props.checkedItemList instanceof Array) {
        checkedItemList = _toConsumableArray(props.checkedItemList);
      }
      var itemMap = new Map();
      var i18nMap = new Map();
      var idSet = new Set();
      var i = 0;
      for (; i < ((_props$itemList = props.itemList) === null || _props$itemList === void 0 ? void 0 : _props$itemList.length); i++) {
        var _props$itemList;
        var key = (0,utils/* genElemId */.Nf)("chk");
        var i18nName = SearchableDropdown.getI18nNameByIndex(props.itemList, props.i18nList, i);
        itemMap.set(key, props.itemList[i]);
        i18nMap.set(key, i18nName);
        var idx = checkedItemList.findIndex(function (element) {
          return element === props.itemList[i];
        });
        if (idx !== -1) {
          idSet.add(key);
          checkedItemList.splice(idx, 1);
        }
      }
      if (props.mergeCheckItems) {
        checkedItemList.forEach(function (element) {
          var key = (0,utils/* genElemId */.Nf)("chk");
          var i18nName = SearchableDropdown.getI18nNameByValue(props.itemList, props.i18nList, element);
          itemMap.set(key, element);
          i18nMap.set(key, i18nName);
          idSet.add(key);
        });
      }
      var cls = 0 === idSet.size ? "outline-secondary" : "primary";
      return {
        itemMap: itemMap,
        i18nMap: i18nMap,
        title: SearchableDropdown.getHeader(props.title, i18nMap, idSet, props.titlePrefix),
        btnClass: cls,
        selectedIds: idSet
      };
    }
  }, {
    key: "getHeader",
    value: function getHeader(title, i18nMap, selectedIds, titlePrefix) {
      var text = "";
      if (selectedIds.size <= 0) {
        text = titlePrefix + title;
      } else if (selectedIds.size === 1) {
        text = title + ": [" + i18nMap.get(selectedIds.keys().next().value) + "]";
      } else {
        text = title + ": (" + selectedIds.size + ")";
      }
      return text;
    }
  }]);
}(react.Component);
_defineProperty(SearchableDropdown, "defaultProps", {
  checkedItemList: [],
  defListSize: 8,
  btnIcon: "",
  titlePrefix: "",
  splitDropdown: false,
  nonDropdownBtnIcon: "",
  nonDropdownBtnClick: null,
  onToggle: null,
  mergeCheckItems: true
});
_defineProperty(SearchableDropdown, "propTypes", {
  /**
   * The item list is shown in list
   * If the itemList is null or undefined, the animation of "loading more ..." is shown.
   */
  itemList: prop_types_default().arrayOf((prop_types_default()).string),
  /**
   * The item values. The value list size must equal to the itemList if it is not null.
   */
  checkedItemList: prop_types_default().arrayOf((prop_types_default()).string),
  /**
   * The text in the dropdown menu button.
   */
  title: (prop_types_default()).string.isRequired,
  /**
   * The prefix text when no items are checked. The prefix inserts into the title.
   */
  titlePrefix: (prop_types_default()).string,
  /**
   * When the selected item changed.
   *   The first parameter is the React event object
   *   The second parameter is all selected values.
   */
  onChange: (prop_types_default()).func,
  /**
   * When the toggle button is clicked.
   *   The first parameter indicates whether the dropdown menu list shows or closes.
   */
  onToggle: (prop_types_default()).func,
  /**
   * Whether merge the checked items.
   *   True: merge the checked items.  False: only show the origin items and the checked items which not exist will be ignored.
   */
  mergeCheckItems: (prop_types_default()).bool,
  /**
   * The default visible size in the list
   */
  defListSize: (prop_types_default()).number,
  /**
   * The dropdown button icon when nothing is selected.
   */
  btnIcon: (prop_types_default()).string,
  /**
   * whether to split dropdown
   */
  splitDropdown: (prop_types_default()).bool,
  /**
   * The dropdown button icon
   */
  nonDropdownBtnIcon: (prop_types_default()).string,
  /**
   * The dropdown button click event
   */
  nonDropdownBtnClick: (prop_types_default()).func,
  /**
   * The i18n names is shown in list
   * The i18n is not concerned if value is undefined or empty array.
   * If not, the component will try to process the i18n. The array size should equal to the propTypes.itemList
   */
  i18nList: prop_types_default().arrayOf((prop_types_default()).string)
});
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Modal.js + 6 modules
var Modal = __webpack_require__(48032);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Button.js
var Button = __webpack_require__(25615);
;// CONCATENATED MODULE: ./src/components/table-filter/index.jsx
function table_filter_typeof(o) { "@babel/helpers - typeof"; return table_filter_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, table_filter_typeof(o); }
function _classPrivateMethodInitSpec(e, a) { table_filter_checkPrivateRedeclaration(e, a), a.add(e); }
function table_filter_createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = table_filter_unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function table_filter_toConsumableArray(r) { return table_filter_arrayWithoutHoles(r) || table_filter_iterableToArray(r) || table_filter_unsupportedIterableToArray(r) || table_filter_nonIterableSpread(); }
function table_filter_nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function table_filter_iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function table_filter_arrayWithoutHoles(r) { if (Array.isArray(r)) return table_filter_arrayLikeToArray(r); }
function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }
function table_filter_defineProperty(e, r, t) { return (r = table_filter_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function table_filter_classPrivateFieldInitSpec(e, t, a) { table_filter_checkPrivateRedeclaration(e, t), t.set(e, a); }
function table_filter_checkPrivateRedeclaration(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object"); }
function table_filter_classPrivateFieldGet(s, a) { return s.get(table_filter_assertClassBrand(s, a)); }
function table_filter_classPrivateFieldSet(s, a, r) { return s.set(table_filter_assertClassBrand(s, a), r), r; }
function table_filter_assertClassBrand(e, t, n) { if ("function" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n; throw new TypeError("Private element is not present on this object"); }
function table_filter_classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function table_filter_defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, table_filter_toPropertyKey(o.key), o); } }
function table_filter_createClass(e, r, t) { return r && table_filter_defineProperties(e.prototype, r), t && table_filter_defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function table_filter_toPropertyKey(t) { var i = table_filter_toPrimitive(t, "string"); return "symbol" == table_filter_typeof(i) ? i : i + ""; }
function table_filter_toPrimitive(t, r) { if ("object" != table_filter_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != table_filter_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function table_filter_callSuper(t, o, e) { return o = table_filter_getPrototypeOf(o), table_filter_possibleConstructorReturn(t, table_filter_isNativeReflectConstruct() ? Reflect.construct(o, e || [], table_filter_getPrototypeOf(t).constructor) : o.apply(t, e)); }
function table_filter_possibleConstructorReturn(t, e) { if (e && ("object" == table_filter_typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return table_filter_assertThisInitialized(t); }
function table_filter_assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e; }
function table_filter_isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (table_filter_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function table_filter_getPrototypeOf(t) { return table_filter_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, table_filter_getPrototypeOf(t); }
function table_filter_inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && table_filter_setPrototypeOf(t, e); }
function table_filter_setPrototypeOf(t, e) { return table_filter_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, table_filter_setPrototypeOf(t, e); }
function table_filter_slicedToArray(r, e) { return table_filter_arrayWithHoles(r) || table_filter_iterableToArrayLimit(r, e) || table_filter_unsupportedIterableToArray(r, e) || table_filter_nonIterableRest(); }
function table_filter_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function table_filter_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return table_filter_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? table_filter_arrayLikeToArray(r, a) : void 0; } }
function table_filter_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function table_filter_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function table_filter_arrayWithHoles(r) { if (Array.isArray(r)) return r; }









var searchProps = {
  /**
   * onChange event
   * Example:
   * (value: string) => void
   */
  onChange: (prop_types_default()).func,
  /**
   * The default value
   */
  defaultValue: (prop_types_default()).string,
  /**
   * onChange event
   * Example:
   * (value: string) => void
   */
  onClick: (prop_types_default()).func
};
var SearchBar = function SearchBar(props) {
  var _useState = (0,react.useState)(props.defaultValue || ""),
    _useState2 = table_filter_slicedToArray(_useState, 2),
    inputText = _useState2[0],
    setInputText = _useState2[1];
  var _useState3 = (0,react.useState)(!!props.defaultValue || false),
    _useState4 = table_filter_slicedToArray(_useState3, 2),
    showClear = _useState4[0],
    setShowClear = _useState4[1];
  var handleKeyUp = function handleKeyUp(event) {
    if (event.key === "Enter") {
      if (props.onClick) {
        props.onClick(inputText);
      }
    }
  };
  var handleInputChange = function handleInputChange(event) {
    var text = event.target.value;
    if (props.onChange) {
      props.onChange(text);
    }
    setInputText(text);
    setShowClear(!!text);
  };
  var handleClear = function handleClear() {
    if (props.onChange) {
      props.onChange("");
    }
    setInputText("");
    setShowClear(false);
  };
  return /*#__PURE__*/react.createElement("div", {
    className: "row mb-3 mt-3 mb-16 mt-16 justify-content-between text-search-bar"
  }, /*#__PURE__*/react.createElement("div", {
    className: "col-md-12 pull-right"
  }, /*#__PURE__*/react.createElement("div", {
    className: "input-group"
  }, /*#__PURE__*/react.createElement("input", {
    type: "text",
    className: "form-control form-control-sm",
    value: inputText,
    onChange: handleInputChange,
    onKeyUp: handleKeyUp,
    placeholder: "Search for..."
  }), showClear && /*#__PURE__*/react.createElement("span", {
    className: "text-clear fa fa-circle-x pe-1 pe-16",
    onClick: handleClear
  }), /*#__PURE__*/react.createElement("button", {
    className: "btn btn-outline-secondary",
    onClick: function onClick() {
      return (props === null || props === void 0 ? void 0 : props.onClick) && props.onClick(inputText);
    },
    type: "button"
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-search fa-3"
  })))), /*#__PURE__*/react.createElement("div", {
    className: "dataTables_processing card hidden"
  }, "Processing..."));
};
SearchBar.prototype = searchProps;
var ResetFilter = /*#__PURE__*/function (_React$Component) {
  function ResetFilter() {
    table_filter_classCallCheck(this, ResetFilter);
    return table_filter_callSuper(this, ResetFilter, arguments);
  }
  table_filter_inherits(ResetFilter, _React$Component);
  return table_filter_createClass(ResetFilter, [{
    key: "render",
    value: function render() {
      return /*#__PURE__*/react.createElement("div", {
        role: "group"
      }, /*#__PURE__*/react.createElement("button", {
        type: "button",
        className: "btn btn-link text-decoration-none",
        onClick: this.props.onClick
      }, "Reset Filters"));
    }
  }]);
}(react.Component);
var _startDate = /*#__PURE__*/new WeakMap();
var _endDate = /*#__PURE__*/new WeakMap();
var DateRangeModal = /*#__PURE__*/function (_React$Component2) {
  function DateRangeModal(props) {
    var _this;
    table_filter_classCallCheck(this, DateRangeModal);
    _this = table_filter_callSuper(this, DateRangeModal, [props]);
    table_filter_classPrivateFieldInitSpec(_this, _startDate, null);
    table_filter_classPrivateFieldInitSpec(_this, _endDate, null);
    table_filter_defineProperty(_this, "onDateChange", function (event, type) {
      if (type === "start") {
        table_filter_classPrivateFieldSet(_startDate, _this, event.target.value);
      } else {
        table_filter_classPrivateFieldSet(_endDate, _this, event.target.value);
      }
    });
    table_filter_defineProperty(_this, "onApplyDate", function (event) {
      if (table_filter_classPrivateFieldGet(_startDate, _this) && table_filter_classPrivateFieldGet(_endDate, _this) && new Date(table_filter_classPrivateFieldGet(_endDate, _this)) < new Date(table_filter_classPrivateFieldGet(_startDate, _this))) {
        _this.setState({
          error: "The start date must precede the end date."
        });
        return;
      }
      if (_this.props.onChange) {
        _this.props.onChange(event, table_filter_classPrivateFieldGet(_startDate, _this), table_filter_classPrivateFieldGet(_endDate, _this));
      }
    });
    table_filter_defineProperty(_this, "onHide", function () {
      _this.setState({
        error: null
      });
      _this.props.fireHidden();
    });
    table_filter_defineProperty(_this, "renderErrorResult", function () {
      return /*#__PURE__*/react.createElement("div", {
        className: "alert alert-dismissible alert-danger"
      }, /*#__PURE__*/react.createElement("button", {
        type: "button",
        className: "btn-close templateResult-btn",
        onClick: function onClick() {
          return _this.setState({
            error: ""
          });
        }
      }), /*#__PURE__*/react.createElement("span", null, _this.state.error));
    });
    _this.state = {
      error: ""
    };
    return _this;
  }
  table_filter_inherits(DateRangeModal, _React$Component2);
  return table_filter_createClass(DateRangeModal, [{
    key: "render",
    value: function render() {
      var _this2 = this;
      table_filter_classPrivateFieldSet(_startDate, this, undefined);
      table_filter_classPrivateFieldSet(_endDate, this, undefined);
      return /*#__PURE__*/react.createElement(Modal/* default */.A, _extends({
        show: this.props.show,
        onHide: this.onHide
      }, (0,utils/* onInputEnterDown */.yb)(function () {
        return _this2.onApplyDate();
      })), /*#__PURE__*/react.createElement(Modal/* default */.A.Header, {
        closeButton: true
      }, /*#__PURE__*/react.createElement(Modal/* default */.A.Title, null, "Custom Date Range")), /*#__PURE__*/react.createElement(Modal/* default */.A.Body, null, this.state.error ? this.renderErrorResult() : null, /*#__PURE__*/react.createElement("div", {
        className: "form-group row mb-3"
      }, /*#__PURE__*/react.createElement("label", {
        className: "col-md-4 control-label col-form-label",
        htmlFor: "startDate"
      }, "Start Date", ":"), /*#__PURE__*/react.createElement("div", {
        className: "col-md-6"
      }, /*#__PURE__*/react.createElement("div", {
        className: "input-group"
      }, /*#__PURE__*/react.createElement("input", {
        type: "datetime-local",
        className: "form-control",
        name: "startDate",
        onChange: function onChange(event) {
          return _this2.onDateChange(event, "start");
        }
      })))), /*#__PURE__*/react.createElement("div", {
        className: "form-group row mb-3"
      }, /*#__PURE__*/react.createElement("label", {
        className: "col-md-4 control-label col-form-label",
        htmlFor: "endDate"
      }, "End Date", ":"), /*#__PURE__*/react.createElement("div", {
        className: "col-md-6"
      }, /*#__PURE__*/react.createElement("div", {
        className: "input-group"
      }, /*#__PURE__*/react.createElement("input", {
        type: "datetime-local",
        className: "form-control",
        name: "endDate",
        onChange: function onChange(event) {
          return _this2.onDateChange(event, "end");
        }
      }))))), /*#__PURE__*/react.createElement(Modal/* default */.A.Footer, null, /*#__PURE__*/react.createElement(Button/* default */.A, {
        variant: "primary",
        onClick: function onClick(event) {
          return _this2.onApplyDate(event);
        }
      }, /*#__PURE__*/react.createElement("i", {
        className: "fa fa-check"
      }), "\xA0", "Apply")));
    }
  }]);
}(react.Component);
var DatePicker = /*#__PURE__*/function (_React$Component3) {
  function DatePicker(props) {
    var _this3;
    table_filter_classCallCheck(this, DatePicker);
    _this3 = table_filter_callSuper(this, DatePicker, [props]);
    table_filter_defineProperty(_this3, "getPrefix", function () {
      return _this3.props.title[0] === "[" ? "" : _this3.props.title + ": ";
    });
    table_filter_defineProperty(_this3, "showDateRangeModal", function () {
      _this3.setState({
        showModal: true
      });
    });
    table_filter_defineProperty(_this3, "hideDateRangeModal", function () {
      _this3.setState({
        showModal: false
      });
    });
    table_filter_defineProperty(_this3, "parseFilter", function (filterType, startDate, endDate) {
      var val = DatePicker.rebuildDate(filterType, startDate, endDate);
      val.title = _this3.getPrefix() + val.title;
      return val;
    });
    table_filter_defineProperty(_this3, "onCustomDateChange", function (event, start, end) {
      if (_this3.props.onChange) {
        _this3.props.onChange(event, {
          type: DatePicker.dateFilters.custom,
          start: start,
          end: end
        });
      }
      _this3.setState({
        showModal: false
      });
    });
    table_filter_defineProperty(_this3, "onBuiltInFilterClick", function (event, filterType) {
      if (!_this3.props.onChange) {
        return;
      }
      var result = _this3.parseFilter(filterType);
      _this3.props.onChange(event, {
        type: result.type,
        start: result.start
      });
    });
    table_filter_defineProperty(_this3, "renderFilters", function () {
      var list = Object.values(DatePicker.dateFilters).map(function (value) {
        if (value === DatePicker.dateFilters.custom) {
          return /*#__PURE__*/react.createElement(Dropdown/* default */.A.Item, {
            key: value,
            onClick: _this3.showDateRangeModal
          }, value);
        } else {
          return /*#__PURE__*/react.createElement(Dropdown/* default */.A.Item, {
            key: value,
            onClick: function onClick(event) {
              return _this3.onBuiltInFilterClick(event, value);
            }
          }, value);
        }
      });
      return list;
    });
    table_filter_defineProperty(_this3, "getTitleAndBtnClass", function (selectedItem) {
      if (!selectedItem || !selectedItem.type) {
        return [_this3.getPrefix() + DatePicker.dateFilters.allTime, "outline-secondary"];
      }
      var result = _this3.parseFilter(selectedItem.type, selectedItem.start, selectedItem.end);
      if (result.title.trim().lastIndexOf(DatePicker.dateFilters.allTime) >= 0) {
        return [result.title, "outline-secondary"];
      } else {
        return [result.title, "primary"];
      }
    });
    _this3.state = {
      showModal: false
    };
    return _this3;
  }
  table_filter_inherits(DatePicker, _React$Component3);
  return table_filter_createClass(DatePicker, [{
    key: "render",
    value: function render() {
      var _this$getTitleAndBtnC = this.getTitleAndBtnClass(this.props.selectedItem),
        _this$getTitleAndBtnC2 = table_filter_slicedToArray(_this$getTitleAndBtnC, 2),
        title = _this$getTitleAndBtnC2[0],
        btnClass = _this$getTitleAndBtnC2[1];
      return /*#__PURE__*/react.createElement(Dropdown/* default */.A, null, /*#__PURE__*/react.createElement(dropdown_hacker/* DropdownHacker */.G, null), /*#__PURE__*/react.createElement(Dropdown/* default */.A.Toggle, {
        variant: btnClass,
        title: title
      }, /*#__PURE__*/react.createElement("span", null, "\xA0", title, "\xA0")), /*#__PURE__*/react.createElement(Dropdown/* default */.A.Menu, {
        className: "searchable-menu"
      }, this.renderFilters(), /*#__PURE__*/react.createElement(DateRangeModal, {
        show: this.state.showModal,
        onChange: this.onCustomDateChange,
        fireHidden: this.hideDateRangeModal
      })));
    }
  }], [{
    key: "rebuildDate",
    value: function rebuildDate(filterType, startDate, endDate) {
      var start = null;
      var end = null;
      var tnow = new Date();
      var title = "";
      switch (filterType) {
        case DatePicker.dateFilters.allTime:
          title = DatePicker.dateFilters.allTime;
          break;
        case DatePicker.dateFilters.lastHour:
          start = new Date(Date.now() - 3600 * 1000);
          title = DatePicker.dateFilters.lastHour;
          break;
        case DatePicker.dateFilters.last6Hour:
          start = new Date(Date.now() - 6 * 3600 * 1000);
          title = DatePicker.dateFilters.last6Hour;
          break;
        case DatePicker.dateFilters.today:
          tnow.setHours(0, 0, 0, 0);
          title = DatePicker.dateFilters.today + " (" + tnow.toDateString() + ")";
          start = tnow;
          break;
        case DatePicker.dateFilters.month:
          tnow = new Date(tnow.getFullYear(), tnow.getMonth(), 1);
          title = DatePicker.dateFilters.month + " (" + tnow.toDateString() + " - now)";
          start = tnow;
          break;
        case DatePicker.dateFilters.quarter:
          tnow = new Date(tnow.getFullYear(), Math.floor(tnow.getMonth() / 3) * 3, 1);
          title = DatePicker.dateFilters.quarter + " (" + tnow.toDateString() + " - now)";
          start = tnow;
          break;
        case DatePicker.dateFilters.year:
          tnow = new Date(tnow.getFullYear(), 0, 1);
          title = DatePicker.dateFilters.year + " (" + tnow.toDateString() + " - now)";
          start = tnow;
          break;
        case DatePicker.dateFilters.custom:
          start = startDate;
          end = endDate;
          if (startDate) {
            title += new Date(startDate).toString();
          }
          title += " - ";
          if (endDate) {
            title += new Date(endDate).toString();
          } else {
            title += "now";
          }
          break;
        default:
          break;
      }
      return {
        type: filterType,
        start: start,
        end: end,
        title: title
      };
    }
  }]);
}(react.Component);
table_filter_defineProperty(DatePicker, "dateFilters", {
  allTime: "All-time",
  lastHour: "Last Hour",
  last6Hour: "Last 6 Hours",
  today: "Today",
  month: "Month to Date",
  quarter: "Quarter to Date",
  year: "Year to Date",
  custom: "Custom Date Range"
});
table_filter_defineProperty(DatePicker, "propTypes", {
  title: (prop_types_default()).string.isRequired,
  /**
   * The selected item. {type: filterType, start: new Date(), end: new Date()}
   * The value is not required apart from the custom date range
   */
  selectedItem: (prop_types_default()).object,
  /**
   * A function that is called when the date range is changed.
   *  (event, selectedItemObj)
   *    The event is the element.
   *    The selectedItemObj structure is {type: DatePicker.dateFilters.custom, start: start, end: end}
   */
  onChange: (prop_types_default()).func
});
var propTypes = {
  /**
   * All tracked headers and them values
   * Example:
   * const commonFilters = [
   *   {odataKey: "timestamp", label: "[Data Range]", options: [], isDatePicker: true},
   *   {odataKey: "connectorType", label: "All Connector Types", options: ["API", "MySQL", "PDF"], isDatePicker: false},
   *   {odataKey: "status", label: "All Statuses", options: ["Success", "Error", "Pending"], isDatePicker: false, i18nOptions: ["", "", ""]},
   * ];
   */
  commonFilters: prop_types_default().arrayOf((prop_types_default()).object).isRequired,
  /**
   * All tracked headers and them values
   * Example:
   * const moreFilters = [
   *   {odataKey: "senderId", label: "Sender Id", options: ["APEX_API", "Twitter"], isDatePicker: false},
   *   {odataKey: "receiverId", label: "Receiver Id", options: ["ByteDance", "BuildYourDream"], isDatePicker: false}
   * ];
   */
  moreFilters: prop_types_default().arrayOf((prop_types_default()).object),
  /**
   * The label text of dropdown for the more filters
   */
  moreFilterLabel: (prop_types_default()).string,
  /**
   * When the filter or search box change
   *  function (odataQuery, searchText, selectedMap)
   *  odataQuery: A odata query string is generated by all the filters
   *  searchText: The string comes from the search box.
   *  selectedMap: The map of selected item in dropdown lists.
   *                <"DropdownLabelText", [selectedItemNames]>
   */
  onChange: (prop_types_default()).func,
  /**
   * The key is used to save current filter status into local storage
   */
  storageKey: (prop_types_default()).string,
  /**
   * When the toggle button is clicked
   *  function (label, nextShow)
   *  label: The string value of label in option.
   *  nextShow: The dropdown menu shows or closes.
   */
  onToggle: (prop_types_default()).func
};
var propsDefaults = {
  commonFilters: [],
  moreFilters: null,
  moreFilterLabel: null,
  onChange: null,
  storageKey: null,
  onToggle: null
};
var _TableFilter = function TableFilter(props) {
  var initFilter = (0,react.useMemo)(function () {
    return _TableFilter.loadFilter(props.storageKey, [].concat(table_filter_toConsumableArray(props.commonFilters), table_filter_toConsumableArray(props.moreFilters || [])));
  }, [props.storageKey, props.commonFilters, props.moreFilters]);
  var _useState5 = (0,react.useState)((initFilter === null || initFilter === void 0 ? void 0 : initFilter.selectedMap) || new Map()),
    _useState6 = table_filter_slicedToArray(_useState5, 2),
    selectedMap = _useState6[0],
    setSelectedMap = _useState6[1];
  var _useState7 = (0,react.useState)((initFilter === null || initFilter === void 0 ? void 0 : initFilter.searchText) || ""),
    _useState8 = table_filter_slicedToArray(_useState7, 2),
    searchKeyword = _useState8[0],
    setSearchKeyWord = _useState8[1];
  var onDropdownChange = function onDropdownChange(event, label, selectedItems) {
    var map = new Map(selectedMap);
    map.set(label, selectedItems);
    setSelectedMap(map);
    onSearch(map);
  };
  var onSearch = function onSearch(selectedMap) {
    new StorageUtils().saveFilter(props.storageKey, searchKeyword, selectedMap, [].concat(table_filter_toConsumableArray(props.commonFilters), table_filter_toConsumableArray(props.moreFilters || [])));
    if (!props.onChange) {
      return;
    }
    var odataQuery = _TableFilter.buildODataQuery(selectedMap, props.commonFilters, props.moreFilters, props.moreFilterLabel);
    props.onChange(odataQuery, searchKeyword, new Map(selectedMap));
  };
  var onInput = function onInput(text) {
    setSearchKeyWord(text);
  };
  var onMoreFilterChange = function onMoreFilterChange(event, label, filterList, selectedItems) {
    var map = new Map(selectedMap);
    filterList.forEach(function (filter) {
      var foundInList = selectedItems.find(function (element) {
        return element === filter.label;
      });
      var foundInMap = map.has(filter.label);
      if (foundInList && !foundInMap) {
        map.set(filter.label, []);
      } else if (!foundInList && foundInMap) {
        map["delete"](filter.label);
      }
    });
    map.set(label, selectedItems);
    setSelectedMap(map);
    onSearch(map);
  };
  var onRemoveFilter = function onRemoveFilter(event, moreFilterLabel, filterLabel) {
    var map = new Map(selectedMap);
    map["delete"](filterLabel);
    var selectedFilterList = map.get(moreFilterLabel);
    var index = selectedFilterList.findIndex(function (element) {
      return element === filterLabel;
    });
    if (-1 === index) {
      console.log("Warning: The ".concat(filterLabel, " doesn't find in the selected header list."));
    } else {
      selectedFilterList.splice(index, 1);
    }
    map.set(moreFilterLabel, selectedFilterList);
    setSelectedMap(map);
    onSearch(map);
  };
  var onResetFilters = function onResetFilters() {
    var map = new Map();
    new StorageUtils().saveFilter(props.storageKey, searchKeyword, map);
    setSelectedMap(map);
    onSearch(map);
  };
  var _onToggle = function onToggle(label, nextShow) {
    if (props.onToggle) {
      props.onToggle(label, nextShow);
    }
  };
  var getSelectedItemList = function getSelectedItemList(key, isDate) {
    if (selectedMap.has(key)) {
      return selectedMap.get(key);
    }
    return isDate ? {} : [];
  };
  var getPrefixForAll = function getPrefixForAll() {
    return "All" + " ";
  };
  var renderCommonFilters = function renderCommonFilters(filterList) {
    var components = filterList.map(function (filter) {
      if (filter.isDatePicker) {
        return /*#__PURE__*/react.createElement(DatePicker, {
          key: filter.label,
          title: filter.label,
          onChange: function onChange(event, selectedDates) {
            return onDropdownChange(event, filter.label, selectedDates);
          },
          selectedItem: getSelectedItemList(filter.label, true)
        });
      } else {
        return /*#__PURE__*/react.createElement(SearchableDropdown, {
          key: filter.label,
          onChange: function onChange(event, selectedItems) {
            return onDropdownChange(event, filter.label, selectedItems);
          },
          onToggle: function onToggle(nextShow) {
            return _onToggle(filter.label, nextShow);
          },
          itemList: filter.options,
          i18nList: filter.i18nOptions,
          checkedItemList: getSelectedItemList(filter.label),
          title: filter.label,
          titlePrefix: getPrefixForAll(),
          mergeCheckItems: filter.mergeCheckItems
        });
      }
    });
    return components;
  };
  var renderMoreFilters = function renderMoreFilters(moreFilterLabel, filterList, selectedIdMap) {
    if (!filterList) {
      return null;
    }
    var components = [];
    var moreFilters = [];
    var _loop = function _loop(i) {
      moreFilters.push(filterList[i].label);
      if (selectedIdMap.has(filterList[i].label)) {
        components.push(/*#__PURE__*/react.createElement(SearchableDropdown, {
          key: filterList[i].label,
          onChange: function onChange(event, selectedItems) {
            return onDropdownChange(event, filterList[i].label, selectedItems);
          },
          onToggle: function onToggle(nextShow) {
            return _onToggle(filterList[i].label, nextShow);
          },
          splitDropdown: true,
          nonDropdownBtnIcon: "fa-circle-x",
          nonDropdownBtnClick: function nonDropdownBtnClick(event) {
            return onRemoveFilter(event, moreFilterLabel, filterList[i].label);
          },
          itemList: filterList[i].options,
          checkedItemList: getSelectedItemList(filterList[i].label),
          title: filterList[i].label,
          titlePrefix: getPrefixForAll()
        }));
      }
    };
    for (var i = 0; i < filterList.length; i++) {
      _loop(i);
    }
    components.push(/*#__PURE__*/react.createElement(SearchableDropdown, {
      key: moreFilterLabel,
      onChange: function onChange(event, selectedItems) {
        return onMoreFilterChange(event, moreFilterLabel, filterList, selectedItems);
      },
      onToggle: function onToggle(nextShow) {
        return _onToggle(moreFilterLabel, nextShow);
      },
      itemList: moreFilters,
      checkedItemList: getSelectedItemList(moreFilterLabel),
      title: moreFilterLabel,
      btnIcon: "fa-plus"
    }));
    return components;
  };
  var renderResetFilter = function renderResetFilter(selectedIdMap) {
    var _iterator = table_filter_createForOfIteratorHelper(selectedIdMap),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var _step$value = table_filter_slicedToArray(_step.value, 2),
          itemList = _step$value[1];
        if (!itemList) {
          continue;
        }
        if (Array.isArray(itemList) && itemList.length > 0 || Object.entries(itemList).length > 0) {
          return /*#__PURE__*/react.createElement(ResetFilter, {
            key: "Reset Filters",
            onClick: function onClick() {
              return onResetFilters();
            }
          });
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  };
  return /*#__PURE__*/react.createElement("div", {
    className: "table-filter classic-table-filter"
  }, /*#__PURE__*/react.createElement(SearchBar, {
    defaultValue: searchKeyword,
    onClick: function onClick() {
      return onSearch(selectedMap);
    },
    onChange: onInput
  }), /*#__PURE__*/react.createElement("div", {
    className: "table-filter-item row row-cols-auto g-2"
  }, renderCommonFilters(props.commonFilters), renderMoreFilters(props.moreFilterLabel, props.moreFilters, selectedMap), renderResetFilter(selectedMap)));
};

_TableFilter.prototype = propTypes;
_TableFilter.defaultProps = propsDefaults;
_TableFilter.loadFilter = function (storageKey, commonFilters) {
  var filter = new StorageUtils().loadFilter(storageKey, commonFilters);

  // Update date via date type
  if (!commonFilters) {
    return filter;
  }
  commonFilters.forEach(function (filterOption) {
    if (!filterOption.isDatePicker) {
      return;
    }
    if (filter.selectedMap.has(filterOption.label)) {
      var dateVal = filter.selectedMap.get(filterOption.label);
      dateVal = DatePicker.rebuildDate(dateVal.type, dateVal.start, dateVal.end);
      filter.selectedMap.set(filterOption.label, dateVal);
    }
  });
  return filter;
};
_TableFilter.buildODataQuery = function (selectedMap, commonFilters, moreFilters, moreFilterLabel) {
  var odataQuery = "";
  if (!selectedMap) {
    return odataQuery;
  }
  selectedMap.forEach(function (idList, label) {
    if (label === moreFilterLabel) {
      return;
    }
    var query = "";
    var filter = _TableFilter.getFilter(label, commonFilters, moreFilters);
    if (filter && filter.isDatePicker) {
      query = _TableFilter.getDateQuery(filter.odataKey, idList);
    } else {
      if (idList.length > 0) {
        if (filter) {
          query = _TableFilter.odataInArray(filter.odataKey, idList);
        } else {
          query = _TableFilter.odataInArray(label, idList);
          console.log("Unable to find specific filter by label text(".concat(label, ")"));
        }
      }
    }
    if (odataQuery === "") {
      odataQuery = query;
    } else if (query) {
      odataQuery += " and " + query;
    }
  });
  return odataQuery;
};
_TableFilter.getDateQuery = function (odataKey, dateList) {
  var dateTimeQuery = "";
  if (dateList.start && dateList.end) {
    dateTimeQuery = odataKey + " ge " + (0,utils/* odataEscape */.H7)(new Date(dateList.start).toISOString());
    dateTimeQuery += " and " + odataKey + " lt " + (0,utils/* odataEscape */.H7)(new Date(dateList.end).toISOString());
  } else if (dateList.start) {
    dateTimeQuery = odataKey + " ge " + (0,utils/* odataEscape */.H7)(new Date(dateList.start).toISOString());
  } else if (dateList.end) {
    dateTimeQuery = odataKey + " lt " + (0,utils/* odataEscape */.H7)(new Date(dateList.end).toISOString());
  }
  return dateTimeQuery;
};
_TableFilter.getFilter = function (label, commonFilters, moreFilters) {
  var filter = null;
  if (commonFilters) {
    filter = commonFilters.find(function (filter) {
      return filter.label === label;
    });
  }
  if (filter) {
    return filter;
  }
  if (moreFilters) {
    return moreFilters.find(function (filter) {
      return filter.label === label;
    });
  }
  return undefined;
};
_TableFilter.odataInArray = function (column, list) {
  if (!list || list.length <= 0) {
    return "";
  }
  var query = "";
  var hasEmptyStr = false;
  list.forEach(function (element, index) {
    if (0 !== index) {
      query += ", ";
    }
    if (!element) {
      hasEmptyStr = true;
    }
    query += (0,utils/* odataEscape */.H7)(element);
  });
  return hasEmptyStr ? "(".concat(column, " in (").concat(query, ") or ").concat(column, " eq null)") : "".concat(column, " in (").concat(query, ") ");
};
var _StorageUtils_brand = /*#__PURE__*/new WeakSet();
var StorageUtils = /*#__PURE__*/function () {
  function StorageUtils() {
    table_filter_classCallCheck(this, StorageUtils);
    _classPrivateMethodInitSpec(this, _StorageUtils_brand);
  }
  return table_filter_createClass(StorageUtils, [{
    key: "defaultStore",
    value: function defaultStore() {
      return {
        searchText: "",
        selectedMap: new Map()
      };
    }
  }, {
    key: "saveFilter",
    value: function saveFilter(storageKey, searchText, selectedMap, filterDefines) {
      if (!filterDefines) {
        table_filter_assertClassBrand(_StorageUtils_brand, this, _saveFilter).call(this, storageKey, searchText, selectedMap);
        return;
      }
      var newMap = new Map();
      var _iterator2 = table_filter_createForOfIteratorHelper(selectedMap),
        _step2;
      try {
        var _loop2 = function _loop2() {
          var _step2$value = table_filter_slicedToArray(_step2.value, 2),
            key = _step2$value[0],
            value = _step2$value[1];
          var define = filterDefines.find(function (element) {
            return element.label === key;
          });
          if (define) {
            newMap.set(define.odataKey, value);
          } else {
            newMap.set(key, value);
          }
        };
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          _loop2();
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      table_filter_assertClassBrand(_StorageUtils_brand, this, _saveFilter).call(this, storageKey, searchText, newMap);
    }
  }, {
    key: "loadFilter",
    value: function loadFilter(storageKey, filterDefines) {
      var filter = table_filter_assertClassBrand(_StorageUtils_brand, this, _loadFilter).call(this, storageKey);
      if (!filterDefines || filter.selectedMap.size <= 0) {
        return filter;
      }
      filterDefines.forEach(function (element) {
        if (filter.selectedMap.has(element.odataKey)) {
          if (element.label !== element.odataKey) {
            filter.selectedMap.set(element.label, filter.selectedMap.get(element.odataKey));
            filter.selectedMap["delete"](element.odataKey);
          }
        }
      });
      return filter;
    }
  }, {
    key: "loadFromStorage",
    value: function loadFromStorage() {
      var _window;
      var state = (_window = window) === null || _window === void 0 || (_window = _window.localStorage) === null || _window === void 0 ? void 0 : _window.getItem(StorageUtils.FILTER_STORE_KEY);
      try {
        return state ? JSON.parse(state) : {};
      } catch (_unused) {
        return {};
      }
    }
  }, {
    key: "saveToStorage",
    value: function saveToStorage(settings) {
      var _window2;
      (_window2 = window) === null || _window2 === void 0 || (_window2 = _window2.localStorage) === null || _window2 === void 0 || _window2.setItem(StorageUtils.FILTER_STORE_KEY, JSON.stringify(settings));
    }
  }]);
}();
function _saveFilter(storageKey, searchText, selectedMap) {
  if (!storageKey) {
    return;
  }
  var filter = this.defaultStore();
  if (searchText) {
    filter.searchText = searchText;
  }
  if (selectedMap) {
    filter.selectedMap = Object.fromEntries(selectedMap);
  }
  var settings = this.loadFromStorage();
  settings[storageKey] = filter;
  this.saveToStorage(settings);
}
function _loadFilter(storageKey) {
  if (!storageKey) {
    return this.defaultStore();
  }
  var settings = this.loadFromStorage();
  if (Object.prototype.hasOwnProperty.call(settings, storageKey)) {
    var filter = this.defaultStore();
    filter.searchText = settings[storageKey].searchText;
    filter.selectedMap = new Map(Object.entries(settings[storageKey].selectedMap));
    return filter;
  }
  return this.defaultStore();
}
table_filter_defineProperty(StorageUtils, "FILTER_STORE_KEY", "cdata.arc.tablefilter");

/***/ }),

/***/ 25337:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  LW: () => (/* binding */ FileToHex),
  XH: () => (/* binding */ FormatFileSize),
  _c: () => (/* binding */ FormatProcessingTime),
  F4: () => (/* binding */ FormatReactNode),
  gn: () => (/* binding */ FormatStatus),
  FJ: () => (/* binding */ FormatString),
  W9: () => (/* binding */ FormatTimestamp),
  Gf: () => (/* binding */ GetConnectorType),
  nT: () => (/* binding */ GetFileNameWithoutExt),
  jR: () => (/* binding */ GetFilenameExt),
  Dd: () => (/* binding */ GetTimeZoneDisplayName),
  dV: () => (/* binding */ RegisterComponent),
  u: () => (/* binding */ base64Decode),
  KA: () => (/* binding */ base64Encode),
  lW: () => (/* binding */ copyToClipboard),
  Hd: () => (/* binding */ equalIgnoreCase),
  Nt: () => (/* binding */ escapeRegExp),
  Xb: () => (/* binding */ evalTemplate),
  Fd: () => (/* binding */ fetchData),
  Td: () => (/* binding */ formatReactNode),
  JT: () => (/* binding */ formatString),
  Nf: () => (/* binding */ genElemId),
  G4: () => (/* binding */ getResourceLastModified),
  hz: () => (/* binding */ getResultErrorMessage),
  nY: () => (/* binding */ getValidXMLElementName),
  CO: () => (/* binding */ getValueAsBool),
  H7: () => (/* binding */ odataEscape),
  yb: () => (/* binding */ onInputEnterDown),
  w: () => (/* binding */ parseSingleLineCsv),
  wf: () => (/* binding */ renderReactModalByParent),
  LA: () => (/* binding */ responsiveTitle),
  ct: () => (/* binding */ securityRand),
  A3: () => (/* binding */ setResourceLastModified),
  Mg: () => (/* binding */ toFixed),
  jn: () => (/* binding */ useClickOutsideCheck),
  At: () => (/* binding */ useDocumentReady),
  GE: () => (/* binding */ verifyEmailAddress),
  $A: () => (/* binding */ withLoading),
  VL: () => (/* binding */ withQuery),
  fX: () => (/* binding */ xmlEscape)
});

// UNUSED EXPORTS: getComponentName, verifyIPFormat

// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(96540);
// EXTERNAL MODULE: ./node_modules/react-dom/client.js
var client = __webpack_require__(5338);
// EXTERNAL MODULE: ../../.react-shared/axios/index.jsx
var axios = __webpack_require__(29029);
// EXTERNAL MODULE: external "{}"
var external_ = __webpack_require__(87963);
;// CONCATENATED MODULE: ./src/components/utils/constants.js

var TOKENS = {
  DATE_LOCATION: 'US'
};
;// CONCATENATED MODULE: ./src/components/utils/index.js
var _excluded = ["loading"],
  _excluded2 = ["url", "params", "multiple", "onError"];
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }
function _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }
function _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }





function FormatString(pattern, args) {
  if (!Array.isArray(args)) {
    args = Array.prototype.slice.call(arguments, 1);
  }
  return pattern.replace(/{([0-9]+)}/g, function (m, i) {
    return args[parseInt(i)];
  });
}
function FormatReactNode(pattern, args) {
  if (!Array.isArray(args)) {
    args = Array.prototype.slice.call(arguments, 1);
  }
  var parts = pattern.split(/{([0-9]+)}/g);
  var result = [];
  for (var i = 0; i < parts.length; i++) {
    if (i % 2 === 0) {
      result.push(parts[i]);
    } else {
      var argIndex = parseInt(parts[i], 10);
      result.push(args[argIndex]);
    }
  }
  return /*#__PURE__*/react.createElement.apply(react, [react.Fragment, null].concat(result));
}
function RegisterComponent(Component, name) {
  var _window;
  if (!((_window = window) !== null && _window !== void 0 && (_window = _window.rsb) !== null && _window !== void 0 && _window.registerComponent)) throw new Error("The function rsb.registerComponent does not exist.");
  var compName = name || getComponentName(Component);
  window.rsb.registerComponent(compName, function (ele, props) {
    if (window.self !== window.top && window.parent.reactModalMgr) {
      var unmount = window.parent.reactModalMgr.render(compName, props);
      if (unmount) return unmount;
    }
    var root = client.createRoot(ele);
    root.render(/*#__PURE__*/react.createElement(Component, props));
    return function () {
      return root.unmount();
    };
  });
}
var renderReactModalByParent = function renderReactModalByParent(name, props) {
  var id = (0,react.useId)();
  var unmount = (0,react.useRef)(null);
  (0,react.useEffect)(function () {
    return function () {
      var _unmount$current;
      return (_unmount$current = unmount.current) === null || _unmount$current === void 0 ? void 0 : _unmount$current.call();
    };
  }, []);
  if (window.self !== window.top && window.parent.reactModalMgr != null) {
    var _unmount$current2, _props$key;
    (_unmount$current2 = unmount.current) === null || _unmount$current2 === void 0 || _unmount$current2.call();
    unmount.current = window.parent.reactModalMgr.render(name, _objectSpread(_objectSpread({}, props), {}, {
      key: "".concat(id, "_").concat((_props$key = props.key) !== null && _props$key !== void 0 ? _props$key : name)
    }));
  }
  return unmount.current != null;
};
function getComponentName(Component) {
  return Component.displayName || Component.name || "Component";
}
var _ref = function () {
    var resLastModifiedCache = new Map();
    var _defaultLastModified = null;
    var _getLatestLastModified = function _getLatestLastModified(lastModified, defaultLastModified) {
      if (!defaultLastModified || defaultLastModified === lastModified) return lastModified;else if (!lastModified) return defaultLastModified;else return new Date(lastModified).getTime() >= new Date(defaultLastModified).getTime() ? lastModified : defaultLastModified;
    };
    return [function (resId, lastModified) {
      var _window2, _window2$setResourceL;
      if (!lastModified) return;
      if (isNaN(new Date(lastModified))) lastModified = lastModified.split(", ").slice(-2).join(", ");
      if (!lastModified || isNaN(new Date(lastModified))) return;
      (_window2 = window) === null || _window2 === void 0 || (_window2 = _window2.rsb) === null || _window2 === void 0 || (_window2$setResourceL = _window2.setResourceLastModified) === null || _window2$setResourceL === void 0 || _window2$setResourceL.call(_window2, resId, lastModified);
      resLastModifiedCache.set(resId, lastModified);
      _defaultLastModified = _getLatestLastModified(lastModified, _defaultLastModified);
    }, function (resId) {
      var _window3, _window3$getResourceL, _window4;
      var lastModified = _getLatestLastModified((_window3 = window) === null || _window3 === void 0 || (_window3 = _window3.rsb) === null || _window3 === void 0 || (_window3$getResourceL = _window3.getResourceLastModified) === null || _window3$getResourceL === void 0 ? void 0 : _window3$getResourceL.call(_window3, resId), _defaultLastModified || ((_window4 = window) === null || _window4 === void 0 || (_window4 = _window4.arc) === null || _window4 === void 0 || (_window4 = _window4.hooks) === null || _window4 === void 0 ? void 0 : _window4.defaultLastModified));
      return _getLatestLastModified(resLastModifiedCache.get(resId), lastModified);
    }];
  }(),
  _ref2 = _slicedToArray(_ref, 2),
  setResourceLastModified = _ref2[0],
  getResourceLastModified = _ref2[1];

function fetchData(_x, _x2, _x3) {
  return _fetchData.apply(this, arguments);
}
function _fetchData() {
  _fetchData = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(controller, url, params) {
    var _response$data$items;
    var response, items, error;
    return _regeneratorRuntime().wrap(function _callee2$(_context2) {
      while (1) switch (_context2.prev = _context2.next) {
        case 0:
          _context2.next = 2;
          return axios/* default */.A.get(url, {
            signal: controller.signal,
            params: _objectSpread({
              "@json": true,
              "nonce": securityRand()
            }, params)
          });
        case 2:
          response = _context2.sent;
          items = (_response$data$items = response.data.items) !== null && _response$data$items !== void 0 ? _response$data$items : [];
          error = getResultErrorMessage(items);
          return _context2.abrupt("return", {
            error: error,
            items: items
          });
        case 6:
        case "end":
          return _context2.stop();
      }
    }, _callee2);
  }));
  return _fetchData.apply(this, arguments);
}
function withLoading(Component, Placeholder) {
  var LoadingComponent = /*#__PURE__*/react.forwardRef(function (props, ref) {
    var loading = props.loading,
      compProps = _objectWithoutProperties(props, _excluded);
    if (loading) {
      if (/*#__PURE__*/react.isValidElement(Placeholder)) return /*#__PURE__*/react.createElement(react.Fragment, null, Placeholder);
      return Placeholder ? /*#__PURE__*/react.createElement(Placeholder, compProps) : /*#__PURE__*/react.createElement("p", {
        className: "placeholder-glow"
      }, /*#__PURE__*/react.createElement("span", {
        className: "placeholder col-6"
      }));
    } else {
      return /*#__PURE__*/react.createElement(Component, _extends({
        ref: ref
      }, compProps));
    }
  });
  if (false) {}
  return LoadingComponent;
}
function withQuery(Component) {
  var QueryComponent = /*#__PURE__*/react.forwardRef(function (props, ref) {
    var url = props.url,
      params = props.params,
      multiple = props.multiple,
      onError = props.onError,
      compProps = _objectWithoutProperties(props, _excluded2);
    var _useState = (0,react.useState)(null),
      _useState2 = _slicedToArray(_useState, 2),
      data = _useState2[0],
      setData = _useState2[1];
    (0,react.useEffect)(function () {
      var controller = new AbortController();
      _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var paramsObj, result;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              paramsObj = JSON.parse(params || "{}");
              _context.prev = 1;
              _context.next = 4;
              return fetchData(controller, url, paramsObj);
            case 4:
              result = _context.sent;
              onError && result.error && onError(result.error, url, paramsObj, compProps);
              if (multiple === true) {
                setData({
                  entities: !result.error ? result.items : []
                });
              } else {
                setData(!result.error && result.items.length ? result.items[0] : {});
              }
              _context.next = 12;
              break;
            case 9:
              _context.prev = 9;
              _context.t0 = _context["catch"](1);
              onError && !axios/* default */.A.isCancel(_context.t0) && onError(_context.t0.message || _context.t0, url, paramsObj, compProps);
            case 12:
            case "end":
              return _context.stop();
          }
        }, _callee, null, [[1, 9]]);
      }))();
      return function () {
        data && setData(null);
        controller.abort();
      };
    }, [url, params]);
    return /*#__PURE__*/react.createElement(Component, _extends({
      ref: ref,
      loading: data == null
    }, data, compProps));
  });
  if (false) {}
  return QueryComponent;
}
function getResultErrorMessageByIndex(result, i) {
  var errorMsg = null;
  if (result && result.length > i) {
    errorMsg = result[i]["rsb:emessage"] || result[i]["errormessage"];
    if (errorMsg === "") {
      errorMsg = 'Unknown error';
    }
  }
  return errorMsg;
}
function getResultErrorMessage(result) {
  return getResultErrorMessageByIndex(result, 0);
}
function evalTemplate(template, args) {
  for (var name in args) {
    if (name && args.hasOwnProperty(name)) {
      var _args$name;
      template = template.replace(new RegExp(escapeRegExp("$" + name + "$"), "gm"), (_args$name = args[name]) !== null && _args$name !== void 0 ? _args$name : "");
    }
  }
  return template;
}
function escapeRegExp(text) {
  return text === null || text === void 0 ? void 0 : text.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}
function toFixed(number, fractionDigits) {
  return number && Number(number).toFixed(fractionDigits || 2).replace(/\.?0+$/, "") || "0";
}
function FormatTimestamp(dateTime) {
  var _window5;
  var hour12 = (((_window5 = window) === null || _window5 === void 0 || (_window5 = _window5.arc) === null || _window5 === void 0 || (_window5 = _window5.hooks) === null || _window5 === void 0 ? void 0 : _window5.timeFormat) || "24") === "12";
  var date = null;
  if (dateTime instanceof Date) {
    date = dateTime;
  } else if ((dateTime === null || dateTime === void 0 ? void 0 : dateTime.length) > 0) {
    date = new Date(dateTime);
  }
  if (date != null) {
    if (isNaN(date)) {
      return "";
    }
    var options = {
      hour12: hour12,
      year: TOKENS.DATE_LOCATION.toLowerCase() === "us" ? "2-digit" : "numeric",
      month: "2-digit",
      day: "2-digit",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit"
    };
    var ms = date.getMilliseconds();
    if (ms !== 0) {
      options.fractionalSecondDigits = 3;
    }
    return new Intl.DateTimeFormat("default", options).format(date);
  }
  return dateTime;
}
function GetTimeZoneDisplayName(timeZone) {
  try {
    var _Intl$DateTimeFormat$;
    var locales = navigator.language || navigator.userLanguage;
    var offset = (_Intl$DateTimeFormat$ = new Intl.DateTimeFormat(locales, {
      timeZone: timeZone,
      timeZoneName: "longOffset"
    }).formatToParts(new Date()).find(function (part) {
      return part.type === "timeZoneName";
    }).value) === null || _Intl$DateTimeFormat$ === void 0 ? void 0 : _Intl$DateTimeFormat$.replace("GMT", "UTC");
    var displayName = new Intl.DateTimeFormat(locales, {
      timeZone: timeZone,
      timeZoneName: "long"
    }).formatToParts(new Date()).find(function (part) {
      return part.type === "timeZoneName";
    }).value;
    return offset + " " + displayName;
  } catch (e) {
    return timeZone;
  }
}
function FormatFileSize(size) {
  var unitSet = ["bytes", "KB", "MB", "GB"];
  if (size !== "" && size >= 0) {
    var unit = unitSet[0];
    for (var i = 0; i < unitSet.length; i++) {
      unit = unitSet[i];
      if (size >= 1024 && i < unitSet.length - 1) {
        size = size / 1024;
      } else {
        break;
      }
    }
    if (size < 10) size = parseInt(size * 100) / 100;else if (size < 100) size = parseInt(size * 10) / 10;else size = parseInt(size);
    return size + " " + unit;
  }
  return "";
}
function GetFilenameExt(path) {
  if (path) {
    return path.substr((~-path.lastIndexOf(".") >>> 0) + 1);
  }
  return path;
}
function GetFileNameWithoutExt(filename) {
  if (filename) {
    filename = filename.split(/[/\\]/).pop();
    var lastDotIndex = filename.lastIndexOf('.');
    if (lastDotIndex === -1 || lastDotIndex === 0) {
      return filename;
    }
    return filename.substring(0, lastDotIndex);
  }
  return filename;
}
function FileToHex(_x4) {
  return _FileToHex.apply(this, arguments);
}
function _FileToHex() {
  _FileToHex = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(file) {
    var arrayBuffer, uint8Array, hexString, _iterator3, _step3, _byte, hex;
    return _regeneratorRuntime().wrap(function _callee3$(_context3) {
      while (1) switch (_context3.prev = _context3.next) {
        case 0:
          _context3.next = 2;
          return file.arrayBuffer();
        case 2:
          arrayBuffer = _context3.sent;
          uint8Array = new Uint8Array(arrayBuffer);
          hexString = "";
          _iterator3 = _createForOfIteratorHelper(uint8Array);
          try {
            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
              _byte = _step3.value;
              hex = _byte.toString(16).padStart(2, "0");
              hexString += hex;
            }
          } catch (err) {
            _iterator3.e(err);
          } finally {
            _iterator3.f();
          }
          return _context3.abrupt("return", hexString.toUpperCase());
        case 8:
        case "end":
          return _context3.stop();
      }
    }, _callee3);
  }));
  return _FileToHex.apply(this, arguments);
}
function FormatStatus(status) {
  var _status;
  if (!status) status = "Unsent";
  var lowerStatus = (_status = status) === null || _status === void 0 ? void 0 : _status.toLowerCase();
  var className = "text-" + lowerStatus;
  if (lowerStatus == "error") {
    className = "text-danger";
  }
  return /*#__PURE__*/react.createElement("span", {
    className: className
  }, status);
}
;
function FormatProcessingTime(processingTime) {
  var text = [];
  var hour = Math.floor(processingTime / 3600000);
  if (hour > 0) {
    text.push(hour + "h");
  }
  processingTime = processingTime % 3600000;
  var minute = Math.floor(processingTime / 60000);
  if (minute > 0) {
    text.push(minute + "m");
  }
  processingTime = processingTime % 60000;
  var second = Math.floor(processingTime / 1000);
  if (second > 0) {
    text.push(second + "s");
  }
  var millisecond = processingTime % 1000;
  if (processingTime >= 0) {
    text.push(millisecond + "ms");
  }
  return text.join(" ");
}
function odataEscape(str) {
  return "'" + (str || "").replace(/\\/g, "\\\\").replace(/'/g, "\\'") + "'";
}
function getValueAsBool(val, defaultValue) {
  if (defaultValue === undefined || defaultValue == null) defaultValue = false;else defaultValue = getValueAsBool(defaultValue);
  if (val === undefined || val == null) return defaultValue;
  if (typeof val === "boolean") return val;
  return /^\s*(true|1|on|yes|y)\s*$/i.test(val);
}
function securityRand() {
  if (Int32Array && window.crypto && window.crypto.getRandomValues) {
    var rands = new Uint32Array(1);
    window.crypto.getRandomValues(rands);
    return rands[0];
  } else {
    return Math.random();
  }
}
function genElemId(tagName) {
  return tagName + "_" + nextIndex();
}
var nextIndex = function () {
  var index = 0;
  return function () {
    return index++;
  };
}();
function GetConnectorType(workspaceId, connectorId) {
  var _window$rsb;
  /* Rely on ~/includes/connectorList.rst */
  var connectorList = (_window$rsb = window.rsb) === null || _window$rsb === void 0 ? void 0 : _window$rsb.connectorList;
  if (connectorList != null) {
    var workspace = connectorList[workspaceId.toLowerCase()];
    if (workspace != null) {
      var _workspace$connectors;
      return (_workspace$connectors = workspace.connectors[connectorId.toLowerCase()]) === null || _workspace$connectors === void 0 ? void 0 : _workspace$connectors.type;
    }
  }
  return null;
}
function equalIgnoreCase(lhs, rhs) {
  return (lhs === null || lhs === void 0 ? void 0 : lhs.toLowerCase()) === (rhs === null || rhs === void 0 ? void 0 : rhs.toLowerCase());
}
var useOutsideEventCheck = function useOutsideEventCheck(eventName, onOutsideEvent) {
  var eventNames = Array.isArray(eventName) ? eventName : [eventName];
  var ref = react.useRef(null);
  react.useEffect(function () {
    if (!onOutsideEvent) return;
    var handleOutsideEvent = function handleOutsideEvent(event) {
      if (ref.current && !ref.current.contains(event.target)) {
        onOutsideEvent();
      }
    };
    eventNames.forEach(function (eventName) {
      return document.addEventListener(eventName, handleOutsideEvent);
    });
    return function () {
      return eventNames.forEach(function (eventName) {
        return document.removeEventListener(eventName, handleOutsideEvent);
      });
    };
  }, [ref, eventNames, onOutsideEvent]);
  return ref;
};
var useClickOutsideCheck = function useClickOutsideCheck(onClickOutside, eventName) {
  return useOutsideEventCheck(eventName !== null && eventName !== void 0 ? eventName : "mousedown", onClickOutside);
};
var base64Encode = function base64Encode(str) {
  return btoa(unescape(encodeURIComponent(str)));
};
var base64Decode = function base64Decode(str) {
  return decodeURIComponent(escape(atob(str)));
};
function verifyEmailAddress(email) {
  return /^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(email.trim());
}
var getValidXMLElementName = function getValidXMLElementName(name) {
  name = name.replace(/[^\u0300-\u036F\u203F-\u2040-.0-9_a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u200FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/g, "_");
  return name && /[_a-zA-Z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u200FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/.test(name.charAt(0)) ? name : "_" + name;
};
var verifyIPFormat = function verifyIPFormat(ipStr) {
  var ipPartPatterns = [/^(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/, /^\*$/, /^(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)-(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/];
  var parts = ipStr.split('.');
  if (parts.length !== 4) {
    return false;
  }
  var _iterator = _createForOfIteratorHelper(parts),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var part = _step.value;
      var isValid = false;
      var _iterator2 = _createForOfIteratorHelper(ipPartPatterns),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var pattern = _step2.value;
          if (pattern.test(part)) {
            if (pattern === ipPartPatterns[2]) {
              var _part$split$map = part.split('-').map(Number),
                _part$split$map2 = _slicedToArray(_part$split$map, 2),
                start = _part$split$map2[0],
                end = _part$split$map2[1];
              if (start > end) {
                return false;
              }
            }
            isValid = true;
            break;
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      if (!isValid) {
        return false;
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return true;
};
var xmlEscape = function xmlEscape(text) {
  return (text || "").replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;");
};
var useDocumentReady = function useDocumentReady() {
  var _useState3 = (0,react.useState)(document.readyState === "complete"),
    _useState4 = _slicedToArray(_useState3, 2),
    ready = _useState4[0],
    setReady = _useState4[1];
  (0,react.useEffect)(function () {
    var onLoad = setReady.bind(null, true);
    window.addEventListener("load", onLoad);
    return function () {
      return window.removeEventListener("load", onLoad);
    };
  }, []);
  return ready;
};
var responsiveTitle = function responsiveTitle(title, innerElement, innerFirst) {
  return {
    onMouseEnter: function onMouseEnter(event) {
      var tempElement = document.createElement("div");
      tempElement.innerHTML = title;
      var element = event.target;
      var textElement = element;
      if (innerElement) {
        while (textElement.childElementCount > 0) {
          textElement = textElement.children[innerFirst ? 0 : textElement.childElementCount - 1];
        }
      }
      if (element.clientWidth < element.scrollWidth) {
        textElement.title = tempElement.innerText;
      } else {
        textElement.title = "";
      }
      tempElement.remove();
    }
  };
};
var onInputEnterDown = function onInputEnterDown(callback) {
  return {
    onKeyDown: function onKeyDown(event) {
      if (event.key === "Enter" && event.target.tagName.toLowerCase() === "input") {
        if (callback != null) {
          event.preventDefault();
          callback();
        }
      }
    }
  };
};
var copyToClipboard = function copyToClipboard(text, onCopyDone) {
  if (navigator.clipboard) {
    navigator.clipboard.writeText(text).then(onCopyDone);
  } else {
    var textarea = document.createElement("textarea");
    textarea.value = text;
    document.body.appendChild(textarea);
    textarea.select();
    document.execCommand("copy");
    document.body.removeChild(textarea);
    onCopyDone === null || onCopyDone === void 0 || onCopyDone.call(null);
  }
};
function formatString(pattern) {
  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    args[_key - 1] = arguments[_key];
  }
  return pattern.replace(/{(\d+)}/g, function (match, index) {
    var _args$argIndex;
    var argIndex = parseInt(index, 10);
    return (_args$argIndex = args[argIndex]) !== null && _args$argIndex !== void 0 ? _args$argIndex : match;
  });
}
function formatReactNode(pattern) {
  var parts = pattern.split(/{(\d+)}/g);
  var result = [];
  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
    args[_key2 - 1] = arguments[_key2];
  }
  for (var index = 0; index < parts.length; index++) {
    if (index % 2 === 0) {
      parts[index] && result.push(parts[index]);
    } else {
      var argIndex = parseInt(parts[index], 10);
      var arg = args[argIndex];
      if (arg !== undefined) {
        result.push(arg);
      } else {
        result.push("{".concat(argIndex, "}"));
      }
    }
  }
  return /*#__PURE__*/react.createElement.apply(react, [react.Fragment, null].concat(result));
}
function parseSingleLineCsv(csvString) {
  var fields = [];
  var currentField = "";
  var inQuote = false;
  for (var i = 0; i < csvString.length; i++) {
    var _char = csvString[i];
    var nextChar = csvString[i + 1];
    if (_char === '"') {
      if (inQuote && nextChar === '"') {
        // Handle escaped double quote: ""
        currentField += '"';
        i++;
      } else {
        inQuote = !inQuote;
      }
    } else if (_char === ',' && !inQuote) {
      // End of a field
      fields.push(currentField);
      currentField = "";
    } else if (_char === '\\' && nextChar) {
      // Handle escape character for the next character
      currentField += nextChar;
      i++;
    } else {
      currentField += _char;
    }
  }
  fields.push(currentField);
  return fields;
}

/***/ }),

/***/ 34854:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {


// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(96540);
// EXTERNAL MODULE: ./node_modules/react-dom/client.js
var client = __webpack_require__(5338);
// EXTERNAL MODULE: ./src/components/utils/index.js + 1 modules
var utils = __webpack_require__(25337);
;// CONCATENATED MODULE: ./src/settings/users/constants.js

var TOKENS = {
  USERS_PAGE_ROLES: 'Roles',
  USERS_PAGE_STATUS: 'Status',
  USERS_PAGE_USER_ROLE_ADMIN: 'Admin',
  USERS_PAGE_USER_ROLE_STANDARD: 'Standard',
  USERS_PAGE_USER_ROLE_SUPPORT: 'Support',
  USERS_PAGE_TABLE_USER_NAME: 'Username',
  USERS_PAGE_TABLE_ROLE: 'Roles',
  USERS_PAGE_TABLE_STATUS: 'Status',
  USERS_PAGE_STATUS_ACTIVE: 'Active',
  USERS_PAGE_STATUS_INACTIVE: 'Inactive',
  USERS_PAGE_AUTH_TOKEN_EXPIRES_ON: 'AuthToken Expires On',
  USERS_PAGE_AUTH_TOKEN_EXPIRES_NEVER: 'Never',
  USERS_PAGE_DELETE_BUTTON: 'Delete',
  USERS_PAGE_ADD_BUTTON: 'Add',
  USERS_MODAL_CLOSE: 'Close',
  USERS_MODAL_SAVE_CHANGES: 'Save Changes',
  USERS_MODAL_ADD_USER: 'Add User',
  USERS_MODAL_EDIT_USER: 'Edit User',
  USERS_MODAL_USER: 'User',
  USERS_MODAL_ADD_ROLE: 'Add Role',
  USERS_MODAL_PASSWORD: 'Password',
  USERS_MODAL_SENSITIVE_PASSWORD: "***************",
  USERS_MODAL_PASSWORD_TOOL: 'Change the Password by clicking the Account Menu - Change Password option',
  USERS_MODAL_API_ACCESS: 'API Access',
  USERS_MODAL_ACTIVE: 'Active',
  USERS_MODAL_ACCESS_WARN: 'For security purposes, this is the last time the authtoken will be shown. Please copy this authtoken to a safe place before saving this new user. If the authtoken is lost, a new one can be created for this user at any time.',
  USERS_MODAL_AUTHTOKEN: 'Authtoken',
  USERS_MODAL_EXPIRES_ON: 'Expires On',
  USERS_MODAL_EXPIRES_NEVER: 'Never',
  USERS_MODAL_TOKEN_LIFETIME: 'Token Lifetime (days)',
  USERS_MODAL_LIFETIME_TOOL: 'Set value to 0 to disable token expiration.',
  USERS_MODAL_MAX_REQUESTS: 'Max Requests (hr):',
  USERS_MODAL_MAX_REQUESTS_TOOL: 'The maximum requests per hour for this user. When left empty, the default value applies.',
  USERS_MODAL_MAX_CONCURRENT: 'Max Concurrent:',
  USERS_MODAL_MAX_CONCURRENT_TOOL: 'The maximum concurrent requests for this user. When left empty, the default value applies.',
  USERS_MODAL_FEDERATION_ID: 'Federation Id',
  USERS_PAGE_AND_MORE: 'and more...',
  TWO_FACTOR_AUTHENTICATION: 'Two-Factor Authentication',
  ENABLED: 'Enabled',
  NOT_ENABLED: 'Not Enabled',
  TWO_FACTOR_DESCRIPTION: 'Add an additional layer of security to your account and require a security code in addition to a password when logging in.',
  REMOVE: 'Remove',
  DISABLE_REMOVAL_TOTP_TOOLTIP: 'Remove the Two-Factor Authentication by clicking the Account Menu - Two-Factor Authentication - Remove',
  USER_MODAL_EMAIL: 'Email Address'
};
// EXTERNAL MODULE: ./src/components/table-filter/index.jsx + 1 modules
var table_filter = __webpack_require__(1295);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Button.js
var Button = __webpack_require__(25615);
// EXTERNAL MODULE: ./src/components/alert/DismissibleAlert.tsx
var DismissibleAlert = __webpack_require__(95631);
// EXTERNAL MODULE: ./src/components/arc-table/index.jsx
var arc_table = __webpack_require__(57491);
// EXTERNAL MODULE: ../../.react-shared/axios/index.jsx
var axios = __webpack_require__(29029);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Dropdown.js + 1 modules
var Dropdown = __webpack_require__(26465);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Modal.js + 6 modules
var Modal = __webpack_require__(48032);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/DropdownItem.js
var DropdownItem = __webpack_require__(93261);
// EXTERNAL MODULE: ./src/components/searchbox/index.jsx
var searchbox = __webpack_require__(58447);
// EXTERNAL MODULE: ./src/components/paid-feature-obj/index.jsx
var paid_feature_obj = __webpack_require__(50691);
// EXTERNAL MODULE: ./src/components/dropdown-hacker/index.jsx
var dropdown_hacker = __webpack_require__(4938);
// EXTERNAL MODULE: ./src/components/utils/arcHooks.ts
var arcHooks = __webpack_require__(17518);
;// CONCATENATED MODULE: ./src/settings/users/UserModal.jsx
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }












function UserModal(_ref) {
  var _window, _window3;
  var show = _ref.show,
    inputUser = _ref.inputUser,
    roleList = _ref.roleList,
    onClose = _ref.onClose,
    isSSOEnable = _ref.isSSOEnable,
    sussessCallBack = _ref.sussessCallBack;
  var currentTier = (_window = window) !== null && _window !== void 0 && (_window = _window.rsb) !== null && _window !== void 0 && (_window = _window.userModal) !== null && _window !== void 0 && _window.currentTier ? window.rsb.userModal.currentTier : "starter";
  var emptyValues = {
    user: "",
    roles: (0,paid_feature_obj/* IsLicenseSufficient */.Y)(currentTier, "enterprise") ? ["cdata_support"] : ["cdata_admin"],
    password: "",
    active: true,
    authtoken: "",
    federationid: "",
    hasToken: false,
    expiredin: 0,
    maxrequest: 0,
    maxconcurrent: 0,
    mfastatus: false,
    emailaddress: ""
  };
  var roleLabelObj = {
    "arcesb_admin": TOKENS.USERS_PAGE_USER_ROLE_ADMIN,
    "arcesb_standard": TOKENS.USERS_PAGE_USER_ROLE_STANDARD,
    "arcesb_support": TOKENS.USERS_PAGE_USER_ROLE_SUPPORT,
    "cdata_admin": TOKENS.USERS_PAGE_USER_ROLE_ADMIN,
    "cdata_standard": TOKENS.USERS_PAGE_USER_ROLE_STANDARD,
    "cdata_support": TOKENS.USERS_PAGE_USER_ROLE_SUPPORT
  };
  var _React$useState = react.useState({}),
    _React$useState2 = _slicedToArray(_React$useState, 2),
    result = _React$useState2[0],
    setResult = _React$useState2[1];
  var _React$useState3 = react.useState((inputUser === null || inputUser === void 0 ? void 0 : inputUser.user) || emptyValues),
    _React$useState4 = _slicedToArray(_React$useState3, 2),
    user = _React$useState4[0],
    setUser = _React$useState4[1];
  var _React$useState5 = react.useState(false),
    _React$useState6 = _slicedToArray(_React$useState5, 2),
    seePassword = _React$useState6[0],
    setSeePassword = _React$useState6[1];
  var _React$useState7 = react.useState(false),
    _React$useState8 = _slicedToArray(_React$useState7, 2),
    removeMFA = _React$useState8[0],
    setRemoveMFA = _React$useState8[1];
  var _React$useState9 = react.useState(TOKENS.USERS_MODAL_EXPIRES_NEVER),
    _React$useState10 = _slicedToArray(_React$useState9, 2),
    expiresText = _React$useState10[0],
    setExpiresText = _React$useState10[1];
  react.useEffect(function () {
    if (inputUser !== null && inputUser !== void 0 && inputUser.user) {
      var tempRoles = [];
      inputUser.roles.map(function (id) {
        var role = roleList[id.replace("arcesb_", "cdata_")];
        if (role) {
          tempRoles.push(id);
        }
      });
      setUser(_objectSpread(_objectSpread({}, inputUser), {}, {
        roles: tempRoles
      }));
      setExpiresText(getExpiresText(new Date(inputUser.tokencreation), inputUser === null || inputUser === void 0 ? void 0 : inputUser.expiredin));
    } else {
      setUser(emptyValues);
    }
    setRemoveMFA(false);
    setResult({
      message: ""
    });
  }, [inputUser]);
  var handlerUserChange = function handlerUserChange(e) {
    var value = e.target.value;
    value = value.replace(/[,]/g, "");
    setUser(_objectSpread(_objectSpread({}, user), {}, {
      user: value,
      authtoken: (value ? value + ":" : "") + trimUsername(user.authtoken)
    }));
  };
  var trimUsername = function trimUsername(authtoken) {
    if (authtoken && authtoken.lastIndexOf(":") >= 0) {
      return authtoken.substring(authtoken.lastIndexOf(":") + 1);
    } else {
      return authtoken;
    }
  };
  var handlerPasswordChange = function handlerPasswordChange(e) {
    setUser(_objectSpread(_objectSpread({}, user), {}, {
      password: e.target.value
    }));
  };
  var handlerAccessChange = /*#__PURE__*/function () {
    var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e) {
      return _regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            if (e.target.checked) {
              setResult({
                type: "warning",
                message: TOKENS.USERS_MODAL_ACCESS_WARN
              });
              if (!user.hasToken) {
                handlerRefreshToken();
              } else {
                setUser(_objectSpread(_objectSpread({}, user), {}, {
                  hasToken: true
                }));
              }
            } else {
              setUser(_objectSpread(_objectSpread({}, user), {}, {
                hasToken: false,
                authtoken: ""
              }));
              setResult({
                message: ""
              });
            }
          case 1:
          case "end":
            return _context.stop();
        }
      }, _callee);
    }));
    return function handlerAccessChange(_x) {
      return _ref2.apply(this, arguments);
    };
  }();
  var handlerActiveChange = function handlerActiveChange(e) {
    setUser(_objectSpread(_objectSpread({}, user), {}, {
      active: e.target.checked
    }));
  };
  var handlerFederationIdChange = function handlerFederationIdChange(e) {
    setUser(_objectSpread(_objectSpread({}, user), {}, {
      federationid: e.target.value
    }));
  };
  var handlerSensitiveBtnClick = function handlerSensitiveBtnClick() {
    setSeePassword(!seePassword);
  };
  var getExpiresText = function getExpiresText(dateInput, expiredin) {
    if (expiredin > 0) {
      var date = new Date(dateInput);
      if ("Invalid Date" == date) {
        date = new Date();
      }
      date.setTime(date.getTime() + Number(expiredin) * 86400000);
      return (0,utils/* FormatTimestamp */.W9)(date);
    } else {
      return TOKENS.USERS_MODAL_EXPIRES_NEVER;
    }
  };
  var handlerRefreshToken = /*#__PURE__*/function () {
    var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
      var _window2;
      var response, currentDate;
      return _regeneratorRuntime().wrap(function _callee2$(_context2) {
        while (1) switch (_context2.prev = _context2.next) {
          case 0:
            _context2.next = 2;
            return axios/* default */.A.get("src/generateNewToken.rsb?@json&" + ((_window2 = window) === null || _window2 === void 0 || (_window2 = _window2.rsb) === null || _window2 === void 0 ? void 0 : _window2.securityRand()));
          case 2:
            response = _context2.sent;
            currentDate = new Date();
            setExpiresText(getExpiresText(currentDate, user.expiredin));
            setUser(_objectSpread(_objectSpread({}, user), {}, {
              hasToken: true,
              authtoken: (user.user ? user.user + ":" : "") + response.data.items[0].authtoken,
              tokencreation: currentDate
            }));
            setResult({
              type: "warning",
              message: TOKENS.USERS_MODAL_ACCESS_WARN
            });
          case 7:
          case "end":
            return _context2.stop();
        }
      }, _callee2);
    }));
    return function handlerRefreshToken() {
      return _ref3.apply(this, arguments);
    };
  }();
  var handlerLeftTimeChange = function handlerLeftTimeChange(e) {
    setUser(_objectSpread(_objectSpread({}, user), {}, {
      expiredin: e.target.value
    }));
    setExpiresText(getExpiresText(new Date(user.tokencreation), e.target.value));
  };
  var handlerMaxRequestChange = function handlerMaxRequestChange(e) {
    setUser(_objectSpread(_objectSpread({}, user), {}, {
      maxrequest: e.target.value
    }));
  };
  var handlerMaxConCurrentChange = function handlerMaxConCurrentChange(e) {
    setUser(_objectSpread(_objectSpread({}, user), {}, {
      maxconcurrent: e.target.value
    }));
  };
  var handlerDeleteRole = function handlerDeleteRole(index) {
    var roles = user.roles;
    if (roles && roles.length >= index + 1) {
      roles.splice(index, 1);
    }
    handlerRoleChange(roles);
  };
  var handlerAddRole = function handlerAddRole() {
    var roles = user.roles;
    if (roles.length < 1) roles.push("");
    roles.push("");
    handlerRoleChange(roles);
  };
  var handlerRoleSelectorItemClick = function handlerRoleSelectorItemClick(role, roleIndex) {
    var roles = user.roles;
    roles.splice(roleIndex, 1, role);
    handlerRoleChange(roles);
  };
  var handlerRoleChange = function handlerRoleChange(newRoles) {
    var isActive = user.active;
    if (!(0,paid_feature_obj/* IsLicenseSufficient */.Y)(currentTier, "enterprise")) {
      if (undefined === newRoles.find(function (role) {
        return role.toLowerCase() === "cdata_admin" || role.toLowerCase() === "arcesb_admin";
      })) {
        isActive = false;
      }
    }
    setUser(_objectSpread(_objectSpread({}, user), {}, {
      roles: newRoles,
      active: isActive
    }));
  };
  var handlerEmailChange = function handlerEmailChange(e) {
    setUser(_objectSpread(_objectSpread({}, user), {}, {
      emailaddress: e.target.value
    }));
  };
  var RoleList = function RoleList(_ref4) {
    var roleIndex = _ref4.roleIndex;
    var _React$useState11 = react.useState(""),
      _React$useState12 = _slicedToArray(_React$useState11, 2),
      searchText = _React$useState12[0],
      setSearchText = _React$useState12[1];
    var handlerSearchBoxChanged = function handlerSearchBoxChanged(text) {
      setSearchText(text);
    };
    var showCount = 0;
    var showItemList = Object.keys(roleList).map(function (id, index) {
      var role = roleList[id.replace("arcesb_", "cdata_")];
      var name = roleLabelObj[role.id] ? roleLabelObj[role.id] : role.name;
      if ((!searchText || role.name.toLowerCase().includes(searchText.toLowerCase())) && !user.roles.includes(id)) {
        showCount++;
        return /*#__PURE__*/react.createElement(paid_feature_obj/* PaidFeatureObj */.y, {
          key: index,
          ispaid: role.id.toLowerCase() === "cdata_admin" ? "true" : "enterprise",
          currentType: currentTier
        }, /*#__PURE__*/react.createElement(DropdownItem/* default */.A, {
          className: "d-flex flex-column searchable-item",
          value: role.id,
          onClick: function onClick() {
            return handlerRoleSelectorItemClick(role.id, roleIndex);
          }
        }, /*#__PURE__*/react.createElement("div", {
          className: "role-item-name"
        }, /*#__PURE__*/react.createElement("span", null, name)), /*#__PURE__*/react.createElement("div", {
          className: "role-item-desc"
        }, /*#__PURE__*/react.createElement("span", null, role.desc))));
      } else {
        return null;
      }
    });
    return /*#__PURE__*/react.createElement(react.Fragment, null, searchText || showCount > 7 ? /*#__PURE__*/react.createElement(searchbox/* SearchBox */.G, {
      searchText: searchText,
      onChanged: handlerSearchBoxChanged
    }) : null, /*#__PURE__*/react.createElement("div", {
      className: "role-items-list"
    }, showItemList));
  };
  var getRoleItems = function getRoleItems() {
    if (user.roles && user.roles.length > 0) {
      return user.roles.map(function (id, index) {
        var role = id ? roleList[id.replace("arcesb_", "cdata_")] : "";
        var name = role ? roleLabelObj[role.id] ? roleLabelObj[role.id] : role.name : "";
        return /*#__PURE__*/react.createElement("div", {
          className: "input-group user-roles-selector-group",
          key: index
        }, /*#__PURE__*/react.createElement(Dropdown/* default */.A, {
          className: "user-roles-selector"
        }, /*#__PURE__*/react.createElement(dropdown_hacker/* DropdownHacker */.G, null), /*#__PURE__*/react.createElement(Dropdown/* default */.A.Toggle, {
          variant: "outline-secondary",
          className: "text-end w-100 roles-selector-button",
          disabled: user.user == window.rsb.userModal.currentUser
        }, /*#__PURE__*/react.createElement("span", {
          className: "ms-1 pull-left text-truncate"
        }, name), /*#__PURE__*/react.createElement("i", {
          className: "fas fa-chevron-down ms-1 custom-chevron-icon"
        })), /*#__PURE__*/react.createElement(Dropdown/* default */.A.Menu, {
          className: "w-100 pt-0",
          style: Object.keys(roleList).length > 7 ? {
            borderTop: "none"
          } : {}
        }, /*#__PURE__*/react.createElement(RoleList, {
          roleIndex: index
        }))), /*#__PURE__*/react.createElement(Button/* default */.A, {
          variant: "outline-secondary",
          onClick: function onClick() {
            return handlerDeleteRole(index);
          },
          disabled: user.roles && user.roles.length <= 1 || (inputUser === null || inputUser === void 0 ? void 0 : inputUser.user) == window.rsb.userModal.currentUser
        }, /*#__PURE__*/react.createElement("i", {
          className: "fa fa-trash"
        })));
      });
    } else {
      return /*#__PURE__*/react.createElement("div", {
        className: "input-group user-roles-selector-group"
      }, /*#__PURE__*/react.createElement(Dropdown/* default */.A, {
        className: "user-roles-selector"
      }, /*#__PURE__*/react.createElement(dropdown_hacker/* DropdownHacker */.G, null), /*#__PURE__*/react.createElement(paid_feature_obj/* PaidFeatureObj */.y, {
        ispaid: "enterprise",
        currentType: currentTier
      }, /*#__PURE__*/react.createElement(Dropdown/* default */.A.Toggle, {
        variant: "outline-secondary",
        className: "text-end w-100 roles-selector-button"
      }, /*#__PURE__*/react.createElement("span", {
        className: "ms-1 pull-left text-truncate"
      }), /*#__PURE__*/react.createElement("i", {
        className: "fas fa-chevron-down ms-1 custom-chevron-icon"
      }))), /*#__PURE__*/react.createElement(Dropdown/* default */.A.Menu, {
        className: "w-100 pt-0",
        style: {
          borderTop: "none"
        }
      }, /*#__PURE__*/react.createElement(RoleList, {
        roleIndex: 0
      }))), /*#__PURE__*/react.createElement(Button/* default */.A, {
        variant: "outline-secondary",
        disabled: true
      }, /*#__PURE__*/react.createElement("i", {
        className: "fa fa-trash"
      })));
    }
  };
  var isDisableActive = function isDisableActive() {
    var disabled = true;
    if ((0,paid_feature_obj/* IsLicenseSufficient */.Y)(currentTier, "enterprise")) {
      disabled = false;
    } else if (user.roles && user.roles.find(function (role) {
      return role.toLowerCase() === "cdata_admin" || role.toLowerCase() === "arcesb_admin";
    })) {
      disabled = false;
    }
    if (!disabled) {
      disabled = (inputUser === null || inputUser === void 0 ? void 0 : inputUser.user) === window.rsb.userModal.currentUser;
    }
    return disabled;
  };
  var isDisableRemoveMFA = function isDisableRemoveMFA() {
    return (inputUser === null || inputUser === void 0 ? void 0 : inputUser.user) && inputUser.user === window.rsb.userModal.currentUser;
  };
  var execSaveChangeResponse = function execSaveChangeResponse(response) {
    var data = response.data;
    var errMsg = window.rsb.getResultErrorMessage(data.items);
    if (errMsg) {
      setResult({
        type: "error",
        message: errMsg
      });
    } else {
      if (sussessCallBack) {
        sussessCallBack();
      }
      onClose();
    }
  };
  var onSaveChange = function onSaveChange() {
    var params = new URLSearchParams();
    params.append("user", user.user);
    params.append("password", user.password);
    var tempRoles = [];
    user.roles.forEach(function (role) {
      if (role) {
        tempRoles.push(role);
      }
    });
    params.append("roles", tempRoles.join(","));
    params.append("authtoken", trimUsername(user.authtoken));
    params.append("expiredin", "" + user.expiredin);
    params.append("maxrequest", "" + user.maxrequest);
    params.append("maxconcurrent", "" + user.maxconcurrent);
    params.append("federationid", user.federationid);
    params.append("active", user.active ? "True" : "False");
    params.append("removemfa", removeMFA);
    params.append("csrftoken", window.rsb.userModal.csrftoken);
    params.append("emailaddress", user.emailaddress);
    if (inputUser !== null && inputUser !== void 0 && inputUser.user) {
      axios/* default */.A.put("src/admin/users.rsd?@json", params).then(function (response) {
        execSaveChangeResponse(response);
      });
    } else {
      axios/* default */.A.post("src/admin/users.rsd?@json", params).then(function (response) {
        execSaveChangeResponse(response);
      });
    }
  };
  var disabled = !(user.user && user.password);
  return /*#__PURE__*/react.createElement(Modal/* default */.A, _extends({
    show: show,
    onHide: onClose,
    backdrop: "static",
    keyboard: true
  }, (0,utils/* onInputEnterDown */.yb)(disabled ? null : onSaveChange)), /*#__PURE__*/react.createElement(Modal/* default */.A.Header, {
    closeButton: true
  }, /*#__PURE__*/react.createElement(Modal/* default */.A.Title, null, inputUser !== null && inputUser !== void 0 && inputUser.user ? TOKENS.USERS_MODAL_EDIT_USER : TOKENS.USERS_MODAL_ADD_USER)), /*#__PURE__*/react.createElement(Modal/* default */.A.Body, null, /*#__PURE__*/react.createElement(DismissibleAlert/* default */.A, {
    type: result.type,
    message: result.message,
    onClose: function onClose() {
      return setResult({
        message: null
      });
    }
  }), /*#__PURE__*/react.createElement("div", {
    className: "form-group row mb-3"
  }, /*#__PURE__*/react.createElement("label", {
    className: "col-md-4 control-label col-form-label"
  }, TOKENS.USERS_PAGE_TABLE_USER_NAME + ":"), /*#__PURE__*/react.createElement("div", {
    className: "col-md-6"
  }, /*#__PURE__*/react.createElement("input", {
    type: "text",
    autoFocus: true,
    className: "form-control",
    value: user.user,
    onChange: handlerUserChange,
    disabled: inputUser !== null && inputUser !== void 0 && inputUser.user ? true : false
  }))), /*#__PURE__*/react.createElement("div", {
    className: "form-group row mb-3"
  }, /*#__PURE__*/react.createElement("label", {
    className: "col-md-4 control-label col-form-label"
  }, TOKENS.USERS_PAGE_ROLES), /*#__PURE__*/react.createElement("div", {
    className: "col-md-6"
  }, getRoleItems(), /*#__PURE__*/react.createElement("div", {
    className: "mt-2"
  }, user.roles && user.user != window.rsb.userModal.currentUser && /*#__PURE__*/react.createElement(paid_feature_obj/* PaidFeatureObj */.y, {
    ispaid: "enterprise",
    currentType: currentTier
  }, /*#__PURE__*/react.createElement("span", {
    className: "add-role-span",
    onClick: handlerAddRole
  }, TOKENS.USERS_MODAL_ADD_ROLE))))), /*#__PURE__*/react.createElement("div", {
    className: "form-group row mb-3"
  }, /*#__PURE__*/react.createElement("label", {
    className: "col-md-4 control-label col-form-label"
  }, TOKENS.USERS_MODAL_PASSWORD + ":"), /*#__PURE__*/react.createElement("div", {
    className: "col-md-6"
  }, inputUser !== null && inputUser !== void 0 && inputUser.user && inputUser.user == window.rsb.userModal.currentUser ? /*#__PURE__*/react.createElement("input", {
    "data-tooltip-id": "reactPopover",
    "data-tooltip-content": TOKENS.USERS_MODAL_PASSWORD_TOOL,
    className: "form-control",
    type: "password",
    value: TOKENS.USERS_MODAL_SENSITIVE_PASSWORD,
    disabled: true
  }) : /*#__PURE__*/react.createElement("div", {
    className: "input-group password-group"
  }, /*#__PURE__*/react.createElement("input", {
    type: seePassword ? "text" : "password",
    className: "form-control",
    autoComplete: "new-password",
    value: user.password,
    onChange: handlerPasswordChange
  }), user.password && user.password.length > 0 && user.password != TOKENS.USERS_MODAL_SENSITIVE_PASSWORD && /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    onClick: handlerSensitiveBtnClick
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa " + (seePassword ? "fa-eye-slash" : "fa-eye")
  }))))), /*#__PURE__*/react.createElement("div", {
    className: "form-group row mb-3"
  }, /*#__PURE__*/react.createElement("label", {
    className: "col-md-4 control-label col-form-label"
  }, TOKENS.USER_MODAL_EMAIL + ":"), /*#__PURE__*/react.createElement("div", {
    className: "col-md-6"
  }, /*#__PURE__*/react.createElement("input", {
    className: "form-control",
    type: "email",
    value: user.emailaddress,
    onChange: handlerEmailChange
  }))), /*#__PURE__*/react.createElement("div", {
    className: "form-group row mb-3"
  }, /*#__PURE__*/react.createElement("label", {
    className: "col-md-4 control-label col-form-label"
  }, TOKENS.USERS_MODAL_API_ACCESS + ":"), /*#__PURE__*/react.createElement("div", {
    className: "col-md-6"
  }, /*#__PURE__*/react.createElement("div", {
    className: "checkbox"
  }, /*#__PURE__*/react.createElement("label", null, /*#__PURE__*/react.createElement(paid_feature_obj/* PaidFeatureObj */.y, {
    ispaid: ((_window3 = window) === null || _window3 === void 0 || (_window3 = _window3.rsb) === null || _window3 === void 0 || (_window3 = _window3.userModal) === null || _window3 === void 0 ? void 0 : _window3.apiaccess_tier) || "disabled",
    currentType: currentTier
  }, /*#__PURE__*/react.createElement("input", {
    type: "checkbox",
    className: "form-check-input",
    checked: user.hasToken,
    onChange: handlerAccessChange
  })))))), user.hasToken && /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement("div", {
    className: "form-group row mb-3"
  }, /*#__PURE__*/react.createElement("label", {
    className: "col-md-4 control-label col-form-label"
  }, TOKENS.USERS_MODAL_AUTHTOKEN + ":"), /*#__PURE__*/react.createElement("div", {
    className: "col-md-7"
  }, /*#__PURE__*/react.createElement("div", {
    className: "input-group"
  }, /*#__PURE__*/react.createElement("input", {
    type: "text",
    value: user.authtoken,
    className: "form-control",
    readOnly: true
  }), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    onClick: handlerRefreshToken
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-refresh"
  }))), TOKENS.USERS_MODAL_EXPIRES_ON, ":\xA0", /*#__PURE__*/react.createElement("span", {
    className: "exp",
    style: {
      "fontStyle": "italic"
    }
  }, expiresText))), /*#__PURE__*/react.createElement("div", {
    className: "form-group row mb-3"
  }, /*#__PURE__*/react.createElement("label", {
    className: "col-md-4 control-label col-form-label"
  }, TOKENS.USERS_MODAL_TOKEN_LIFETIME + ":"), /*#__PURE__*/react.createElement("div", {
    className: "col-md-4"
  }, /*#__PURE__*/react.createElement("div", {
    className: "expiration"
  }, /*#__PURE__*/react.createElement("input", {
    "data-tooltip-id": "reactPopover",
    "data-tooltip-content": TOKENS.USERS_MODAL_LIFETIME_TOOL,
    className: "form-control",
    type: "number",
    value: user.expiredin || 0,
    onChange: handlerLeftTimeChange
  })))), /*#__PURE__*/react.createElement("div", {
    className: "form-group row mb-3"
  }, /*#__PURE__*/react.createElement("label", {
    className: "col-md-4 control-label col-form-label"
  }, TOKENS.USERS_MODAL_MAX_REQUESTS), /*#__PURE__*/react.createElement("div", {
    className: "col-md-2"
  }, /*#__PURE__*/react.createElement("input", {
    "data-tooltip-id": "reactPopover",
    "data-tooltip-content": TOKENS.USERS_MODAL_MAX_REQUESTS_TOOL,
    type: "number",
    className: "form-control",
    value: user.maxrequest || 0,
    onChange: handlerMaxRequestChange
  })), /*#__PURE__*/react.createElement("div", {
    className: "col-md-6 control-label col-form-label"
  }, /*#__PURE__*/react.createElement("i", {
    className: "pull-left"
  }, "*", /*#__PURE__*/react.createElement("span", null, "Default (0)")))), /*#__PURE__*/react.createElement("div", {
    className: "form-group row mb-3"
  }, /*#__PURE__*/react.createElement("label", {
    className: "col-md-4 control-label col-form-label"
  }, TOKENS.USERS_MODAL_MAX_CONCURRENT), /*#__PURE__*/react.createElement("div", {
    className: "col-md-2"
  }, /*#__PURE__*/react.createElement("input", {
    "data-tooltip-id": "reactPopover",
    "data-tooltip-content": TOKENS.USERS_MODAL_MAX_CONCURRENT_TOOL,
    type: "number",
    className: "form-control",
    value: user.maxconcurrent || 0,
    onChange: handlerMaxConCurrentChange
  })), /*#__PURE__*/react.createElement("div", {
    className: "col-md-6 control-label col-form-label"
  }, /*#__PURE__*/react.createElement("i", {
    className: "pull-left"
  }, "*", /*#__PURE__*/react.createElement("span", null, "Default (0)"))))), isSSOEnable && /*#__PURE__*/react.createElement("div", {
    className: "form-group row mb-3"
  }, /*#__PURE__*/react.createElement("label", {
    className: "col-md-4 control-label col-form-label"
  }, TOKENS.USERS_MODAL_FEDERATION_ID + ":"), /*#__PURE__*/react.createElement("div", {
    className: "col-md-6"
  }, /*#__PURE__*/react.createElement(paid_feature_obj/* PaidFeatureObj */.y, {
    ispaid: "enterprise",
    currentType: currentTier
  }, /*#__PURE__*/react.createElement("input", {
    type: "text",
    className: "form-control ",
    value: user.federationid,
    onChange: handlerFederationIdChange
  })))), (0,arcHooks/* useIsEnableMFA */.VH)() && /*#__PURE__*/react.createElement("div", {
    className: "form-group row mb-3"
  }, /*#__PURE__*/react.createElement("label", {
    className: "col-md-4 control-label col-form-label"
  }, TOKENS.TWO_FACTOR_AUTHENTICATION + ":"), /*#__PURE__*/react.createElement("div", {
    className: "col-md-8"
  }, /*#__PURE__*/react.createElement("div", {
    className: "h6 pt-0"
  }, inputUser !== null && inputUser !== void 0 && inputUser.mfastatus ? TOKENS.ENABLED : TOKENS.NOT_ENABLED), /*#__PURE__*/react.createElement("div", {
    className: ""
  }, TOKENS.TWO_FACTOR_DESCRIPTION), (inputUser === null || inputUser === void 0 ? void 0 : inputUser.mfastatus) && /*#__PURE__*/react.createElement("div", {
    className: "checkbox",
    "data-tooltip-id": "reactPopover",
    "data-tooltip-content": isDisableRemoveMFA() ? TOKENS.DISABLE_REMOVAL_TOTP_TOOLTIP : null
  }, /*#__PURE__*/react.createElement("label", null, /*#__PURE__*/react.createElement("input", {
    type: "checkbox",
    className: "form-check-input",
    disabled: isDisableRemoveMFA(),
    checked: removeMFA,
    onChange: function onChange(event) {
      return setRemoveMFA(event.target.checked);
    }
  }), "\xA0", TOKENS.REMOVE)))), /*#__PURE__*/react.createElement("div", {
    className: "form-group row mb-3"
  }, /*#__PURE__*/react.createElement("label", {
    className: "col-md-4 control-label col-form-label"
  }, TOKENS.USERS_MODAL_ACTIVE + ":"), /*#__PURE__*/react.createElement("div", {
    className: "col-md-4"
  }, /*#__PURE__*/react.createElement("div", {
    className: "checkbox"
  }, /*#__PURE__*/react.createElement("label", null, /*#__PURE__*/react.createElement("input", {
    type: "checkbox",
    className: "form-check-input",
    checked: user.active,
    onChange: handlerActiveChange,
    disabled: isDisableActive()
  })))))), /*#__PURE__*/react.createElement(Modal/* default */.A.Footer, null, /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    onClick: onClose
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-times",
    "aria-hidden": "true"
  }), /*#__PURE__*/react.createElement("span", {
    className: "btn-text"
  }, "\xA0", TOKENS.USERS_MODAL_CLOSE)), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "primary",
    disabled: disabled,
    onClick: onSaveChange
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-save",
    "aria-hidden": "true"
  }), /*#__PURE__*/react.createElement("span", {
    className: "btn-text"
  }, "\xA0", TOKENS.USERS_MODAL_SAVE_CHANGES))));
}
// EXTERNAL MODULE: ./node_modules/react-dom/server.browser.js
var server_browser = __webpack_require__(65848);
;// CONCATENATED MODULE: ./src/settings/users/index.jsx
function users_typeof(o) { "@babel/helpers - typeof"; return users_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, users_typeof(o); }
function users_regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ users_regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == users_typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(users_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function users_asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function users_asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { users_asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { users_asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function users_slicedToArray(r, e) { return users_arrayWithHoles(r) || users_iterableToArrayLimit(r, e) || users_unsupportedIterableToArray(r, e) || users_nonIterableRest(); }
function users_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function users_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return users_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? users_arrayLikeToArray(r, a) : void 0; } }
function users_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function users_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function users_arrayWithHoles(r) { if (Array.isArray(r)) return r; }











function UsersPage(_ref) {
  var _window2;
  var tableRef = _ref.tableRef;
  /* variable */
  var _React$useState = react.useState({}),
    _React$useState2 = users_slicedToArray(_React$useState, 2),
    roleList = _React$useState2[0],
    setRoleList = _React$useState2[1];
  var _React$useState3 = react.useState([]),
    _React$useState4 = users_slicedToArray(_React$useState3, 2),
    filterOptions = _React$useState4[0],
    setFilterOptions = _React$useState4[1];
  var commonFilters = react.useMemo(function () {
    return buildCommonFilters(filterOptions);
  }, [filterOptions]);
  var initialQuery = react.useMemo(function () {
    return buildInitQuery(commonFilters);
  }, []);
  var _React$useState5 = react.useState({}),
    _React$useState6 = users_slicedToArray(_React$useState5, 2),
    inputUser = _React$useState6[0],
    setInputUser = _React$useState6[1];
  var _React$useState7 = react.useState(false),
    _React$useState8 = users_slicedToArray(_React$useState7, 2),
    showModal = _React$useState8[0],
    setShowModal = _React$useState8[1];
  var _React$useState9 = react.useState(""),
    _React$useState10 = users_slicedToArray(_React$useState9, 2),
    errorMessage = _React$useState10[0],
    setErrorMessage = _React$useState10[1];
  var _React$useState11 = react.useState(true),
    _React$useState12 = users_slicedToArray(_React$useState11, 2),
    isDelBtnDisabled = _React$useState12[0],
    setIsDelBtnDisabled = _React$useState12[1];
  var tableApiRef = react.useRef(tableRef || {});
  var roleLabelObj = {
    "arcesb_admin": TOKENS.USERS_PAGE_USER_ROLE_ADMIN,
    "arcesb_standard": TOKENS.USERS_PAGE_USER_ROLE_STANDARD,
    "arcesb_support": TOKENS.USERS_PAGE_USER_ROLE_SUPPORT,
    "cdata_admin": TOKENS.USERS_PAGE_USER_ROLE_ADMIN,
    "cdata_standard": TOKENS.USERS_PAGE_USER_ROLE_STANDARD,
    "cdata_support": TOKENS.USERS_PAGE_USER_ROLE_SUPPORT
  };
  var columns = [{
    id: "user",
    header: TOKENS.USERS_PAGE_TABLE_USER_NAME,
    accessorKey: "user",
    flexGrow: 1
  }, {
    id: "roles",
    header: TOKENS.USERS_PAGE_TABLE_ROLE,
    accessorKey: "roles",
    flexGrow: 1,
    cell: function cell(props) {
      var _props$row;
      var roles = props === null || props === void 0 || (_props$row = props.row) === null || _props$row === void 0 || (_props$row = _props$row.original) === null || _props$row === void 0 ? void 0 : _props$row.roles.split(",");
      var displayName = "";
      var popoverItemsCount = 0;
      var popoverItems = roles.map(function (role, index) {
        var _roleList$roles$index;
        if (index > 10) {
          popoverItemsCount++;
          return null;
        }
        var itemName = roleLabelObj[role] ? roleLabelObj[role] : (_roleList$roles$index = roleList[roles[index]]) !== null && _roleList$roles$index !== void 0 && _roleList$roles$index.name ? roleList[roles[index]].name : "";
        if (itemName) {
          if (!displayName) {
            displayName = itemName;
          } else {
            popoverItemsCount++;
            return /*#__PURE__*/react.createElement("div", {
              key: index
            }, itemName);
          }
        }
        return null;
      });
      if (popoverItemsCount > 0) {
        return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement("span", null, displayName), /*#__PURE__*/react.createElement("span", {
          className: "column-role-hover",
          "data-tooltip-id": "reactPopover",
          "data-tooltip-place": "bottom",
          "data-tooltip-html": (0,server_browser.renderToStaticMarkup)(/*#__PURE__*/react.createElement(react.Fragment, null, popoverItems, popoverItemsCount > 10 ? /*#__PURE__*/react.createElement("div", null, TOKENS.USERS_PAGE_AND_MORE) : null))
        }, "+" + popoverItemsCount));
      } else {
        return /*#__PURE__*/react.createElement("span", null, displayName);
      }
    }
  }, {
    id: "active",
    header: TOKENS.USERS_PAGE_TABLE_STATUS,
    accessorKey: "active",
    flexGrow: 1,
    cell: function cell(props) {
      var _props$row2;
      var active = props === null || props === void 0 || (_props$row2 = props.row) === null || _props$row2 === void 0 || (_props$row2 = _props$row2.original) === null || _props$row2 === void 0 ? void 0 : _props$row2.active;
      var cellElm;
      if (active.toLowerCase() == "true") {
        cellElm = /*#__PURE__*/react.createElement("span", null, TOKENS.USERS_PAGE_STATUS_ACTIVE);
      } else {
        cellElm = /*#__PURE__*/react.createElement("span", null, TOKENS.USERS_PAGE_STATUS_INACTIVE);
      }
      return cellElm;
    }
  }, {
    id: "mfa",
    header: TOKENS.TWO_FACTOR_AUTHENTICATION,
    accessorKey: "mfastatus",
    flexGrow: 1,
    cell: function cell(props) {
      var _props$row3;
      var mfaStatus = props === null || props === void 0 || (_props$row3 = props.row) === null || _props$row3 === void 0 || (_props$row3 = _props$row3.original) === null || _props$row3 === void 0 ? void 0 : _props$row3.mfastatus;
      var cellElm;
      if (mfaStatus.toLowerCase() === "true") {
        cellElm = /*#__PURE__*/react.createElement("span", null, TOKENS.ENABLED);
      } else {
        cellElm = /*#__PURE__*/react.createElement("span", null, TOKENS.DISABLED);
      }
      return cellElm;
    }
  }, {
    id: "tokenexpireson",
    header: TOKENS.USERS_PAGE_AUTH_TOKEN_EXPIRES_ON,
    accessorKey: "tokenexpireson",
    flexGrow: 1,
    cell: function cell(props) {
      var _props$row4, _props$row5, _props$row6;
      var creation = props === null || props === void 0 || (_props$row4 = props.row) === null || _props$row4 === void 0 || (_props$row4 = _props$row4.original) === null || _props$row4 === void 0 ? void 0 : _props$row4.tokencreation;
      var expiredin = props === null || props === void 0 || (_props$row5 = props.row) === null || _props$row5 === void 0 || (_props$row5 = _props$row5.original) === null || _props$row5 === void 0 ? void 0 : _props$row5.expiredin;
      var cellElm;
      if (!creation || expiredin <= 0) {
        cellElm = /*#__PURE__*/react.createElement("span", null, TOKENS.USERS_PAGE_AUTH_TOKEN_EXPIRES_NEVER);
      } else {
        var date = new Date(creation);
        date.setTime(date.getTime() + Number(expiredin) * 86400000);
        cellElm = /*#__PURE__*/react.createElement("span", null, (0,utils/* FormatTimestamp */.W9)(date));
      }
      if (props !== null && props !== void 0 && (_props$row6 = props.row) !== null && _props$row6 !== void 0 && _props$row6.original) {
        props.row.original.hasToken = String(!!creation);
      }
      return cellElm;
    }
  }].filter(function (item) {
    return (0,arcHooks/* useIsEnableMFA */.VH)() || item.id !== "mfa";
  });
  react.useEffect(function () {
    var controller = new AbortController();
    users_asyncToGenerator(/*#__PURE__*/users_regeneratorRuntime().mark(function _callee() {
      return users_regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            _context.next = 2;
            return loadRoles(controller);
          case 2:
          case "end":
            return _context.stop();
        }
      }, _callee);
    }))();
    return function () {
      return controller.abort();
    };
  }, []);
  function loadRoles(_x) {
    return _loadRoles.apply(this, arguments);
  }
  function _loadRoles() {
    _loadRoles = users_asyncToGenerator(/*#__PURE__*/users_regeneratorRuntime().mark(function _callee3(controller) {
      var response, tmpRoleList, filterOptions, filterI18nOptions;
      return users_regeneratorRuntime().wrap(function _callee3$(_context3) {
        while (1) switch (_context3.prev = _context3.next) {
          case 0:
            _context3.next = 2;
            return (0,utils/* fetchData */.Fd)(controller, "src/getRolesTableView.rsd?@json");
          case 2:
            response = _context3.sent;
            if (!response.error) {
              _context3.next = 6;
              break;
            }
            setErrorMessage(response.error);
            return _context3.abrupt("return");
          case 6:
            tmpRoleList = {};
            filterOptions = [];
            filterI18nOptions = [];
            response.items.forEach(function (item) {
              tmpRoleList[item.id] = {
                id: item.id,
                name: item.name,
                desc: item.description
              };
              switch (item.id.toLowerCase()) {
                case "cdata_admin":
                case "arcesb_admin":
                  filterOptions.push("admin");
                  filterI18nOptions.push(TOKENS.USERS_PAGE_USER_ROLE_ADMIN);
                  break;
                case "cdata_standard":
                case "arcesb_standard":
                  filterOptions.push("standard");
                  filterI18nOptions.push(TOKENS.USERS_PAGE_USER_ROLE_STANDARD);
                  break;
                case "cdata_support":
                case "arcesb_support":
                  filterOptions.push("support");
                  filterI18nOptions.push(TOKENS.USERS_PAGE_USER_ROLE_SUPPORT);
                  break;
                default:
                  filterOptions.push(item.id);
                  filterI18nOptions.push(item.name);
              }
            });
            setRoleList(tmpRoleList);
            setFilterOptions({
              options: filterOptions,
              i18nOptions: filterI18nOptions
            });
          case 12:
          case "end":
            return _context3.stop();
        }
      }, _callee3);
    }));
    return _loadRoles.apply(this, arguments);
  }
  function buildCommonFilters(filterOptions) {
    return [{
      odataKey: "roles",
      label: TOKENS.USERS_PAGE_ROLES,
      options: filterOptions.options,
      i18nOptions: filterOptions.i18nOptions,
      isDatePicker: false
    }, {
      odataKey: "status",
      label: TOKENS.USERS_PAGE_STATUS,
      options: ["Active", "Inactive"],
      i18nOptions: [TOKENS.USERS_PAGE_STATUS_ACTIVE, TOKENS.USERS_PAGE_STATUS_INACTIVE],
      isDatePicker: false
    }];
  }
  function buildODataQuery(odataQuery, searchText) {
    var filter = "";
    if (searchText) {
      filter = "substringof(".concat((0,utils/* odataEscape */.H7)(searchText), ", User) eq True");
    }
    if (odataQuery && filter) {
      filter = "(".concat(odataQuery, ") and (").concat(filter, ")");
    } else if (odataQuery) {
      filter = "(".concat(odataQuery, ")");
    } else if (filter) {
      filter = "(".concat(filter, ")");
    }
    return filter;
  }
  function buildInitQuery(commonFilters) {
    var val = table_filter/* TableFilter */.r.loadFilter("SettingsUser", commonFilters);
    var query = table_filter/* TableFilter */.r.buildODataQuery(val.selectedMap, commonFilters);
    return buildODataQuery(query, val.searchText);
  }
  var onSearch = /*#__PURE__*/function () {
    var _ref3 = users_asyncToGenerator(/*#__PURE__*/users_regeneratorRuntime().mark(function _callee2(odataQuery, searchText) {
      var filter;
      return users_regeneratorRuntime().wrap(function _callee2$(_context2) {
        while (1) switch (_context2.prev = _context2.next) {
          case 0:
            setIsDelBtnDisabled(true);
            filter = buildODataQuery(odataQuery, searchText);
            _context2.prev = 2;
            _context2.next = 5;
            return tableApiRef.setUrlParams({
              "$filter": filter
            });
          case 5:
            _context2.next = 10;
            break;
          case 7:
            _context2.prev = 7;
            _context2.t0 = _context2["catch"](2);
            setError(_context2.t0);
          case 10:
          case "end":
            return _context2.stop();
        }
      }, _callee2, null, [[2, 7]]);
    }));
    return function onSearch(_x2, _x3) {
      return _ref3.apply(this, arguments);
    };
  }();
  var setError = function setError(error) {
    if (error !== null && error !== void 0 && error.message) {
      setErrorMessage(error.message);
    }
  };
  var reloadUserTable = function reloadUserTable() {
    tableApiRef.reload();
    setIsDelBtnDisabled(true);
  };
  window.setErrorMessage = setErrorMessage;
  window.reloadUserTable = reloadUserTable;
  var onRefresh = function onRefresh() {
    reloadUserTable();
    return false;
  };
  var onAddUser = function onAddUser() {
    setInputUser({});
    setShowModal(true);
  };
  var onDelUser = function onDelUser(event) {
    var _window;
    var users = tableApiRef.getSelectedRows().map(function (value) {
      return value === null || value === void 0 ? void 0 : value.original;
    });
    ((_window = window) === null || _window === void 0 || (_window = _window.rsb) === null || _window === void 0 || (_window = _window.userDatatable) === null || _window === void 0 ? void 0 : _window.deleteUsers) && window.rsb.userDatatable.deleteUsers(event, users);
  };
  var renderEditModal = function renderEditModal(event, row) {
    var selectedRow = row === null || row === void 0 ? void 0 : row.original;
    setInputUser({
      user: selectedRow.user,
      username: selectedRow.username,
      tokencreation: selectedRow.tokencreation,
      maxconcurrent: parseInt(selectedRow.maxconcurrent) < 0 ? 0 : parseInt(selectedRow.maxconcurrent),
      maxrequest: parseInt(selectedRow.maxrequest) < 0 ? 0 : parseInt(selectedRow.maxrequest),
      active: selectedRow.active.toLowerCase() == "true",
      expiredin: parseInt(selectedRow.expiredin) < 0 ? 0 : parseInt(selectedRow.expiredin),
      federationid: selectedRow.federationid || "",
      password: TOKENS.USERS_MODAL_SENSITIVE_PASSWORD,
      authtoken: selectedRow.hasToken.toLowerCase() == "true" ? TOKENS.USERS_MODAL_SENSITIVE_PASSWORD : "",
      roles: selectedRow.roles.split(","),
      hasToken: selectedRow.hasToken.toLowerCase() == "true",
      mfastatus: selectedRow.mfastatus.toLowerCase() === "true",
      emailaddress: selectedRow.emailaddress
    });
    setShowModal(true);
  };
  var onRowSelectionChange = function onRowSelectionChange(updater, currentRowSelection) {
    var newSelectedOBJ = updater(currentRowSelection);
    if (newSelectedOBJ && Object.keys(newSelectedOBJ).length > 0) {
      setIsDelBtnDisabled(false);
    } else {
      setIsDelBtnDisabled(true);
    }
  };
  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement(UserModal, {
    show: showModal,
    inputUser: inputUser,
    roleList: roleList,
    onClose: function onClose() {
      return setShowModal(false);
    },
    isSSOEnable: (_window2 = window) === null || _window2 === void 0 || (_window2 = _window2.rsb) === null || _window2 === void 0 || (_window2 = _window2.userModal) === null || _window2 === void 0 ? void 0 : _window2.isSSOEnable,
    sussessCallBack: reloadUserTable
  }), /*#__PURE__*/react.createElement("div", {
    className: "settings-header"
  }, /*#__PURE__*/react.createElement("h5", null)), /*#__PURE__*/react.createElement("div", {
    className: "user-datatable-action-container btn-group"
  }, /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    className: "btn btn-sm btn-user-datatable-refresh",
    onClick: onRefresh
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-refresh"
  }), "\xA0"), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    className: "btn btn-sm btn-user-datatable-delete",
    onClick: onDelUser,
    disabled: isDelBtnDisabled
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-trash"
  }), "\xA0", TOKENS.USERS_PAGE_DELETE_BUTTON), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    className: "btn btn-sm btn-user-datatable-add",
    onClick: onAddUser
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-plus"
  }), "\xA0", TOKENS.USERS_PAGE_ADD_BUTTON)), /*#__PURE__*/react.createElement(DismissibleAlert/* default */.A, {
    type: "error",
    message: errorMessage,
    onClose: function onClose() {
      return setErrorMessage(null);
    }
  }), /*#__PURE__*/react.createElement(table_filter/* TableFilter */.r, {
    storageKey: "SettingsUser",
    commonFilters: commonFilters,
    onChange: onSearch
  }), /*#__PURE__*/react.createElement(arc_table/* default */.A, {
    tableBodyRowProps: {
      onClick: renderEditModal
    },
    urlParams: {
      "$filter": initialQuery
    },
    onRowSelectionChange: onRowSelectionChange,
    columns: columns,
    url: "src/admin/users.rsd",
    initialSorting: [{
      id: "timestamp",
      desc: true
    }],
    rowSelection: true,
    tableApiRef: tableApiRef,
    onError: setError
  }));
}
;// CONCATENATED MODULE: ./src/settings/certificates/constants.js

var constants_TOKENS = {
  CERT_PAGE_RESOURCES: 'Resources',
  CERT_PAGE_NAME: 'Name',
  CERT_PAGE_SUBJECT: 'Subject',
  CERT_PAGE_ISSUER: 'Issuer',
  CERT_PAGE_SERIAL_NUMBER: 'Serial Number',
  CERT_PAGE_EXPIRATION_DATE: 'Expiration Date',
  CERT_PAGE_THUMBPRINT: 'Thumbprint',
  CERT_PAGE_ASSOCIATED_RESOURCES: 'Associated Resource',
  CERT_PAGE_DELETE_BUTTON: 'Delete',
  CERT_PAGE_ADD_BUTTON: 'Add',
  CERT_PAGE_UPLOAD_BUTTON: 'Upload'
};
;// CONCATENATED MODULE: ./src/settings/shared/utils.js
function utils_typeof(o) { "@babel/helpers - typeof"; return utils_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, utils_typeof(o); }
function utils_regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ utils_regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == utils_typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(utils_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function utils_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function utils_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? utils_ownKeys(Object(t), !0).forEach(function (r) { utils_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : utils_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function utils_defineProperty(e, r, t) { return (r = utils_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function utils_toPropertyKey(t) { var i = utils_toPrimitive(t, "string"); return "symbol" == utils_typeof(i) ? i : i + ""; }
function utils_toPrimitive(t, r) { if ("object" != utils_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != utils_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function utils_asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function utils_asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { utils_asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { utils_asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }


function sendGetRequest(_x, _x2) {
  return _sendGetRequest.apply(this, arguments);
}
function _sendGetRequest() {
  _sendGetRequest = utils_asyncToGenerator(/*#__PURE__*/utils_regeneratorRuntime().mark(function _callee(url, params) {
    var _response$data$items;
    var response, items, error;
    return utils_regeneratorRuntime().wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          _context.next = 2;
          return axios/* default */.A.get(url, {
            params: utils_objectSpread({
              "@json": true
            }, params)
          });
        case 2:
          response = _context.sent;
          items = (_response$data$items = response.data.items) !== null && _response$data$items !== void 0 ? _response$data$items : [];
          error = (0,utils/* getResultErrorMessage */.hz)(items);
          return _context.abrupt("return", {
            error: error,
            items: items
          });
        case 6:
        case "end":
          return _context.stop();
      }
    }, _callee);
  }));
  return _sendGetRequest.apply(this, arguments);
}
function getSplitArr(data, key) {
  var rltArr = [];
  data === null || data === void 0 || data.map(function (item) {
    var usage = item[key];
    if (usage === "") {
      if (!rltArr.includes("(none)")) {
        rltArr.push("(none)");
      }
    } else if (!usage.includes(",")) {
      if (!rltArr.includes(usage)) {
        rltArr.push(usage);
      }
    } else {
      var splitedArr = usage.split(",");
      splitedArr.map(function (entity) {
        var trimmedEntity = entity.trim();
        if (!rltArr.includes(trimmedEntity)) {
          rltArr.push(trimmedEntity);
        }
      });
    }
  });
  return rltArr;
}

// EXTERNAL MODULE: ./src/data/certificates/index.ts + 4 modules
var certificates = __webpack_require__(1879);
;// CONCATENATED MODULE: ./src/settings/certificates/index.jsx
function certificates_typeof(o) { "@babel/helpers - typeof"; return certificates_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, certificates_typeof(o); }
function certificates_regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ certificates_regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == certificates_typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(certificates_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function certificates_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function certificates_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? certificates_ownKeys(Object(t), !0).forEach(function (r) { certificates_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : certificates_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function certificates_defineProperty(e, r, t) { return (r = certificates_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function certificates_toPropertyKey(t) { var i = certificates_toPrimitive(t, "string"); return "symbol" == certificates_typeof(i) ? i : i + ""; }
function certificates_toPrimitive(t, r) { if ("object" != certificates_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != certificates_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || certificates_unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return certificates_arrayLikeToArray(r); }
function certificates_asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function certificates_asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { certificates_asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { certificates_asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function certificates_slicedToArray(r, e) { return certificates_arrayWithHoles(r) || certificates_iterableToArrayLimit(r, e) || certificates_unsupportedIterableToArray(r, e) || certificates_nonIterableRest(); }
function certificates_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function certificates_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return certificates_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? certificates_arrayLikeToArray(r, a) : void 0; } }
function certificates_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function certificates_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function certificates_arrayWithHoles(r) { if (Array.isArray(r)) return r; }










function CertPage(_ref) {
  var tableRef = _ref.tableRef;
  /* variable */
  var buildCommonFilters = function buildCommonFilters(filterOptions) {
    var connectoridOptions = null;
    if (Object.prototype.hasOwnProperty.call(filterOptions, "connectorids")) {
      connectoridOptions = filterOptions["connectorids"].sort();
    }
    return [{
      odataKey: "connectorids",
      label: constants_TOKENS.CERT_PAGE_RESOURCES,
      options: connectoridOptions,
      isDatePicker: false
    }];
  };
  var _React$useState = react.useState({}),
    _React$useState2 = certificates_slicedToArray(_React$useState, 2),
    filterOptions = _React$useState2[0],
    setFilterOptions = _React$useState2[1];
  var commonFilters = react.useMemo(function () {
    return buildCommonFilters(filterOptions);
  }, [filterOptions]);
  var initialQuery = react.useMemo(function () {
    return buildInitQuery(commonFilters);
  }, []);
  var _React$useState3 = react.useState("error"),
    _React$useState4 = certificates_slicedToArray(_React$useState3, 2),
    alertType = _React$useState4[0],
    setAlertType = _React$useState4[1];
  var _React$useState5 = react.useState(""),
    _React$useState6 = certificates_slicedToArray(_React$useState5, 2),
    alertMsg = _React$useState6[0],
    setAlertMsg = _React$useState6[1];
  var _React$useState7 = react.useState(true),
    _React$useState8 = certificates_slicedToArray(_React$useState7, 2),
    isDelBtnDisabled = _React$useState8[0],
    setIsDelBtnDisabled = _React$useState8[1];
  var tableApiRef = react.useRef(tableRef || {});
  var _useCertificatesStore = (0,certificates/* useCertificatesStore */.Pl)(function (state) {
      return [state.privileges, state.fetchPrivilege];
    }),
    _useCertificatesStore2 = certificates_slicedToArray(_useCertificatesStore, 2),
    privileges = _useCertificatesStore2[0],
    fetchPrivilege = _useCertificatesStore2[1];
  react.useEffect(function () {
    fetchPrivilege();
  }, []);
  var columns = [{
    id: "name",
    header: constants_TOKENS.CERT_PAGE_NAME,
    accessorKey: "name",
    flexGrow: 1,
    cell: function cell(props) {
      var _props$row, _props$row2;
      var category = props === null || props === void 0 || (_props$row = props.row) === null || _props$row === void 0 || (_props$row = _props$row.original) === null || _props$row === void 0 ? void 0 : _props$row.category;
      var name = props === null || props === void 0 || (_props$row2 = props.row) === null || _props$row2 === void 0 || (_props$row2 = _props$row2.original) === null || _props$row2 === void 0 ? void 0 : _props$row2.name;
      var nameElmRlt;
      if ((category === null || category === void 0 ? void 0 : category.toLowerCase()) == "public") {
        nameElmRlt = /*#__PURE__*/react.createElement("span", null, name);
      } else {
        nameElmRlt = /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement("i", {
          className: "fa fa-solid fa-key-skeleton pull-right pt-1"
        }), /*#__PURE__*/react.createElement("span", null, name));
      }
      return /*#__PURE__*/react.createElement("div", {
        className: "text-truncate"
      }, nameElmRlt);
    }
  }, {
    id: "subject",
    header: constants_TOKENS.CERT_PAGE_SUBJECT,
    accessorKey: "issuedto",
    flexGrow: 1
  }, {
    id: "issuer",
    header: constants_TOKENS.CERT_PAGE_ISSUER,
    accessorKey: "issuedby",
    flexGrow: 1
  }, {
    id: "serialnumber",
    header: constants_TOKENS.CERT_PAGE_SERIAL_NUMBER,
    accessorKey: "serialnumber",
    flexGrow: 1
  }, {
    id: "expirationdate",
    header: constants_TOKENS.CERT_PAGE_EXPIRATION_DATE,
    accessorKey: "expirationdate",
    cell: function cell(props) {
      return (0,utils/* FormatTimestamp */.W9)(props.getValue());
    },
    flexGrow: 1
  }, {
    id: "thumbprint",
    header: constants_TOKENS.CERT_PAGE_THUMBPRINT,
    accessorKey: "thumbprint",
    flexGrow: 1
  }, {
    id: "connectorids",
    header: constants_TOKENS.CERT_PAGE_ASSOCIATED_RESOURCES,
    accessorKey: "connectorids",
    flexGrow: 1
  }];
  var onToggle = /*#__PURE__*/function () {
    var _ref2 = certificates_asyncToGenerator(/*#__PURE__*/certificates_regeneratorRuntime().mark(function _callee(label, nextShow) {
      var filter, params;
      return certificates_regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            if (nextShow) {
              _context.next = 2;
              break;
            }
            return _context.abrupt("return");
          case 2:
            filter = commonFilters.find(function (element) {
              return element.label === label;
            });
            params = {
              "$select": filter.odataKey,
              "$orderby": filter.odataKey
            };
            sendGetRequest("api/certificates.rsd", params).then(function (result) {
              if (result.error) {
                setError({
                  message: result.error
                });
                return;
              }
              if (result.items) {
                if (filter.odataKey === "connectorids") {
                  filterOptions[filter.odataKey] = getSplitArr(result.items, filter.odataKey);
                } else {
                  filterOptions[filter.odataKey] = _toConsumableArray(new Set(result.items.map(function (item) {
                    return item[filter.odataKey];
                  })));
                }
                setFilterOptions(certificates_objectSpread({}, filterOptions));
              }
            });
          case 5:
          case "end":
            return _context.stop();
        }
      }, _callee);
    }));
    return function onToggle(_x, _x2) {
      return _ref2.apply(this, arguments);
    };
  }();
  function buildODataQuery(odataQuery, searchText) {
    var filter = "";
    if (searchText) {
      filter = "substringof(".concat((0,utils/* odataEscape */.H7)(searchText), ", IssuedTo) eq True or substringof(").concat((0,utils/* odataEscape */.H7)(searchText), ", ConnectorIds) eq True or substringof(").concat((0,utils/* odataEscape */.H7)(searchText), ", Name) eq True or substringof(").concat((0,utils/* odataEscape */.H7)(searchText), ", serialnumber) eq True");
    }
    if (odataQuery && filter) {
      filter = "(".concat(odataQuery, ") and (").concat(filter, ")");
    } else if (odataQuery) {
      filter = "(".concat(odataQuery, ")");
    } else if (filter) {
      filter = "(".concat(filter, ")");
    }
    return filter;
  }
  function buildInitQuery(commonFilters) {
    var val = table_filter/* TableFilter */.r.loadFilter("SettingsCert", commonFilters);
    var query = table_filter/* TableFilter */.r.buildODataQuery(val.selectedMap, commonFilters);
    return buildODataQuery(query, val.searchText);
  }
  var onSearch = /*#__PURE__*/function () {
    var _ref3 = certificates_asyncToGenerator(/*#__PURE__*/certificates_regeneratorRuntime().mark(function _callee2(odataQuery, searchText) {
      var filter;
      return certificates_regeneratorRuntime().wrap(function _callee2$(_context2) {
        while (1) switch (_context2.prev = _context2.next) {
          case 0:
            setIsDelBtnDisabled(true);
            filter = buildODataQuery(odataQuery, searchText);
            _context2.prev = 2;
            _context2.next = 5;
            return tableApiRef.setUrlParams({
              "$filter": filter
            });
          case 5:
            _context2.next = 11;
            break;
          case 7:
            _context2.prev = 7;
            _context2.t0 = _context2["catch"](2);
            setAlertType("error");
            setError(_context2.t0);
          case 11:
          case "end":
            return _context2.stop();
        }
      }, _callee2, null, [[2, 7]]);
    }));
    return function onSearch(_x3, _x4) {
      return _ref3.apply(this, arguments);
    };
  }();
  var setError = function setError(error) {
    if (error !== null && error !== void 0 && error.message) {
      setAlertMsg(error.message);
    }
  };
  window.setAlertType = setAlertType;
  window.setAlertMsg = setAlertMsg;
  window.reloadCertTable = function () {
    tableApiRef.reload();
    setIsDelBtnDisabled(true);
    fetchPrivilege();
  };
  var onRefresh = function onRefresh() {
    window.reloadCertTable && window.reloadCertTable();
    return false;
  };
  var onAddCert = function onAddCert() {
    var _window;
    ((_window = window) === null || _window === void 0 || (_window = _window.rsb) === null || _window === void 0 || (_window = _window.certificateDatatable) === null || _window === void 0 ? void 0 : _window.createCert) && window.rsb.certificateDatatable.createCert();
    return false;
  };
  var onUploadCert = function onUploadCert() {
    var _window2;
    var type = "";
    if (hasPrivilege(certificates/* CertificateAction */.AU.CreatePublic, "") && hasPrivilege(certificates/* CertificateAction */.AU.CreatePrivate, "")) {
      type = "All";
    } else if (hasPrivilege(certificates/* CertificateAction */.AU.CreatePublic, "")) {
      type = "public";
    } else if (hasPrivilege(certificates/* CertificateAction */.AU.CreatePrivate, "")) {
      type = "Private";
    } else {
      console.error("The upload event should not be triggered");
    }
    ((_window2 = window) === null || _window2 === void 0 || (_window2 = _window2.rsb) === null || _window2 === void 0 || (_window2 = _window2.certificateDatatable) === null || _window2 === void 0 ? void 0 : _window2.uploadCert) && window.rsb.certificateDatatable.uploadCert(null, type);
    return false;
  };
  var parseConnectorIds = function parseConnectorIds(connectorids) {
    if (!connectorids) {
      return "";
    }
    return (0,utils/* parseSingleLineCsv */.w)(connectorids);
  };
  var onDelCert = function onDelCert(event) {
    var _window3;
    var certs = tableApiRef.getSelectedRows().map(function (value) {
      var _value$original;
      return certificates_objectSpread(certificates_objectSpread({}, value === null || value === void 0 ? void 0 : value.original), {}, {
        connectorids: parseConnectorIds(value === null || value === void 0 || (_value$original = value.original) === null || _value$original === void 0 ? void 0 : _value$original.connectorids)
      });
    });
    ((_window3 = window) === null || _window3 === void 0 || (_window3 = _window3.rsb) === null || _window3 === void 0 || (_window3 = _window3.certificateDatatable) === null || _window3 === void 0 ? void 0 : _window3.deleteCerts) && window.rsb.certificateDatatable.deleteCerts(event, certs);
  };
  var renderEditModal = function renderEditModal(event, row) {
    var _row$original, _window4;
    var selectedRow = certificates_objectSpread(certificates_objectSpread({}, row === null || row === void 0 ? void 0 : row.original), {}, {
      connectorids: parseConnectorIds(row === null || row === void 0 || (_row$original = row.original) === null || _row$original === void 0 ? void 0 : _row$original.connectorids),
      privileges: {
        download: hasPrivilege(certificates/* CertificateAction */.AU.DownloadPrivate, row === null || row === void 0 ? void 0 : row.original.name) || hasPrivilege(certificates/* CertificateAction */.AU.DownloadPublic, row === null || row === void 0 ? void 0 : row.original.name),
        rename: hasPrivilege(certificates/* CertificateAction */.AU.RenamePrivate, row === null || row === void 0 ? void 0 : row.original.name) || hasPrivilege(certificates/* CertificateAction */.AU.RenamePublic, row === null || row === void 0 ? void 0 : row.original.name)
      }
    });
    (_window4 = window) === null || _window4 === void 0 || (_window4 = _window4.rsb) === null || _window4 === void 0 || (_window4 = _window4.certificateDatatable) === null || _window4 === void 0 || _window4.renderEditModal(event, selectedRow);
  };
  var onRowSelectionChange = function onRowSelectionChange(updater, currentRowSelection) {
    var newSelectedOBJ = updater(currentRowSelection);
    if (newSelectedOBJ && Object.keys(newSelectedOBJ).length > 0) {
      var _privileges$get, _privileges$get2;
      if (((_privileges$get = privileges.get(certificates/* CertificateAction */.AU.DeletePrivate)) === null || _privileges$get === void 0 || (_privileges$get = _privileges$get.certificates) === null || _privileges$get === void 0 ? void 0 : _privileges$get.length) > 0 || ((_privileges$get2 = privileges.get(certificates/* CertificateAction */.AU.DeletePublic)) === null || _privileges$get2 === void 0 || (_privileges$get2 = _privileges$get2.certificates) === null || _privileges$get2 === void 0 ? void 0 : _privileges$get2.length) > 0) {
        setIsDelBtnDisabled(false);
      }
    } else {
      setIsDelBtnDisabled(true);
    }
  };
  var hasPrivilege = react.useCallback(function (action, resource) {
    var policy = privileges.get(action);
    if (policy) {
      if (policy.action.toLowerCase().indexOf("create") === 0) {
        return policy.certificates && policy.certificates.length === 1 && policy.certificates[0] === "*";
      } else {
        var _policy$certificates;
        return (_policy$certificates = policy.certificates) === null || _policy$certificates === void 0 ? void 0 : _policy$certificates.some(function (name) {
          return name.toLowerCase() === (resource === null || resource === void 0 ? void 0 : resource.toLowerCase());
        });
      }
    }
    return false;
  }, [privileges]);
  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement("div", {
    className: "settings-header"
  }, /*#__PURE__*/react.createElement("h5", null)), /*#__PURE__*/react.createElement("div", {
    className: "certificate-datatable-action-container btn-group"
  }, /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    className: "btn btn-sm btn-certificate-datatable-refresh",
    onClick: onRefresh
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-refresh"
  }), "\xA0"), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    className: "btn btn-sm btn-certificate-datatable-delete",
    onClick: onDelCert,
    disabled: isDelBtnDisabled
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-trash"
  }), "\xA0", constants_TOKENS.CERT_PAGE_DELETE_BUTTON), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    className: "btn btn-sm btn-certificate-datatable-add",
    onClick: onAddCert,
    disabled: !hasPrivilege(certificates/* CertificateAction */.AU.CreatePrivate, "")
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-plus"
  }), "\xA0", constants_TOKENS.CERT_PAGE_ADD_BUTTON), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    className: "btn btn-sm btn-certificate-datatable-add",
    onClick: onUploadCert,
    disabled: !(hasPrivilege(certificates/* CertificateAction */.AU.CreatePublic, "") || hasPrivilege(certificates/* CertificateAction */.AU.CreatePrivate, ""))
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-upload"
  }), "\xA0", constants_TOKENS.CERT_PAGE_UPLOAD_BUTTON)), /*#__PURE__*/react.createElement(DismissibleAlert/* default */.A, {
    type: alertType,
    message: alertMsg,
    onClose: function onClose() {
      return setAlertMsg(null);
    }
  }), /*#__PURE__*/react.createElement(table_filter/* TableFilter */.r, {
    storageKey: "SettingsCert",
    commonFilters: commonFilters,
    onChange: onSearch,
    onToggle: onToggle
  }), /*#__PURE__*/react.createElement(arc_table/* default */.A, {
    tableBodyRowProps: {
      onClick: renderEditModal
    },
    urlParams: {
      "$filter": initialQuery
    },
    onRowSelectionChange: onRowSelectionChange,
    columns: columns,
    url: "api/certificates.rsd",
    initialSorting: [{
      id: "timestamp",
      desc: true
    }],
    rowSelection: true,
    tableApiRef: tableApiRef,
    onError: setError
  }));
}
;// CONCATENATED MODULE: ./src/settings/vault/constants.js

var vault_constants_TOKENS = {
  VAULT_PAGE_TYPES: 'Types',
  VAULT_PAGE_TYPES_ENCRYPTED: 'Encrypted',
  VAULT_PAGE_TYPES_STANDARD: 'Standard',
  VAULT_PAGE_TAGS: 'Tags',
  VAULT_PAGE_RESOURCES: 'Resources',
  VAULT_PAGE_NAME: 'Name',
  VAULT_PAGE_TYPE: 'Type',
  VAULT_PAGE_VALUE: 'Value',
  VAULT_PAGE_ASSOCIATED_REOUSRCES: 'Associated Resources',
  VAULT_PAGE_DELETE_BUTTON: 'Delete',
  VAULT_PAGE_ADD_BUTTON: 'Add'
};
;// CONCATENATED MODULE: ./src/settings/vault/index.jsx
function vault_typeof(o) { "@babel/helpers - typeof"; return vault_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, vault_typeof(o); }
function vault_regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ vault_regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == vault_typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(vault_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function vault_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function vault_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? vault_ownKeys(Object(t), !0).forEach(function (r) { vault_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : vault_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function vault_defineProperty(e, r, t) { return (r = vault_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function vault_toPropertyKey(t) { var i = vault_toPrimitive(t, "string"); return "symbol" == vault_typeof(i) ? i : i + ""; }
function vault_toPrimitive(t, r) { if ("object" != vault_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != vault_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function vault_toConsumableArray(r) { return vault_arrayWithoutHoles(r) || vault_iterableToArray(r) || vault_unsupportedIterableToArray(r) || vault_nonIterableSpread(); }
function vault_nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function vault_iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function vault_arrayWithoutHoles(r) { if (Array.isArray(r)) return vault_arrayLikeToArray(r); }
function vault_asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function vault_asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { vault_asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { vault_asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function vault_slicedToArray(r, e) { return vault_arrayWithHoles(r) || vault_iterableToArrayLimit(r, e) || vault_unsupportedIterableToArray(r, e) || vault_nonIterableRest(); }
function vault_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function vault_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return vault_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? vault_arrayLikeToArray(r, a) : void 0; } }
function vault_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function vault_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function vault_arrayWithHoles(r) { if (Array.isArray(r)) return r; }









function VaultPage(_ref) {
  var _window4;
  var tableRef = _ref.tableRef;
  var PASSWORD_MASK = "***************";
  /* variable */
  var buildCommonFilters = function buildCommonFilters(filterOptions) {
    var tagsOptions = null;
    var resourceOptions = null;
    if (Object.prototype.hasOwnProperty.call(filterOptions, "tags")) {
      tagsOptions = filterOptions["tags"].sort();
    }
    if (Object.prototype.hasOwnProperty.call(filterOptions, "usages")) {
      resourceOptions = filterOptions["usages"].sort();
    }
    return [{
      odataKey: "type",
      label: vault_constants_TOKENS.VAULT_PAGE_TYPES,
      options: ["Encrypted", "Standard"],
      i18nOptions: [vault_constants_TOKENS.VAULT_PAGE_TYPES_ENCRYPTED, vault_constants_TOKENS.VAULT_PAGE_TYPES_STANDARD],
      isDatePicker: false
    }, {
      odataKey: "tags",
      label: vault_constants_TOKENS.VAULT_PAGE_TAGS,
      options: tagsOptions,
      isDatePicker: false
    }, {
      odataKey: "usages",
      label: vault_constants_TOKENS.VAULT_PAGE_RESOURCES,
      options: resourceOptions,
      isDatePicker: false
    }];
  };
  var _React$useState = react.useState({}),
    _React$useState2 = vault_slicedToArray(_React$useState, 2),
    filterOptions = _React$useState2[0],
    setFilterOptions = _React$useState2[1];
  var commonFilters = react.useMemo(function () {
    return buildCommonFilters(filterOptions);
  }, [filterOptions]);
  var initialQuery = react.useMemo(function () {
    return buildInitQuery(commonFilters);
  }, []);
  var _React$useState3 = react.useState("error"),
    _React$useState4 = vault_slicedToArray(_React$useState3, 2),
    alertType = _React$useState4[0],
    setAlertType = _React$useState4[1];
  var _React$useState5 = react.useState(""),
    _React$useState6 = vault_slicedToArray(_React$useState5, 2),
    alertMsg = _React$useState6[0],
    setAlertMsg = _React$useState6[1];
  var _React$useState7 = react.useState(true),
    _React$useState8 = vault_slicedToArray(_React$useState7, 2),
    isDelBtnDisabled = _React$useState8[0],
    setIsDelBtnDisabled = _React$useState8[1];
  var tableApiRef = react.useRef(tableRef || {});
  var columns = [{
    id: "name",
    header: vault_constants_TOKENS.VAULT_PAGE_NAME,
    accessorKey: "name",
    flexGrow: 1
  }, {
    id: "type",
    header: vault_constants_TOKENS.VAULT_PAGE_TYPE,
    accessorKey: "type",
    flexGrow: 1
  }, {
    id: "value",
    header: vault_constants_TOKENS.VAULT_PAGE_VALUE,
    accessorKey: "value",
    flexGrow: 1,
    cell: function cell(props) {
      var _props$row;
      var type = props === null || props === void 0 || (_props$row = props.row) === null || _props$row === void 0 || (_props$row = _props$row.original) === null || _props$row === void 0 ? void 0 : _props$row.type;
      if ("Encrypted" === type) {
        return PASSWORD_MASK;
      } else {
        var _props$row2;
        return props === null || props === void 0 || (_props$row2 = props.row) === null || _props$row2 === void 0 || (_props$row2 = _props$row2.original) === null || _props$row2 === void 0 ? void 0 : _props$row2.value;
      }
    }
  }, {
    id: "tags",
    header: vault_constants_TOKENS.VAULT_PAGE_TAGS,
    accessorKey: "tags",
    flexGrow: 1
  }, {
    id: "usages",
    header: vault_constants_TOKENS.VAULT_PAGE_ASSOCIATED_REOUSRCES,
    accessorKey: "usages",
    flexGrow: 1
  }];
  var onToggle = /*#__PURE__*/function () {
    var _ref2 = vault_asyncToGenerator(/*#__PURE__*/vault_regeneratorRuntime().mark(function _callee(label, nextShow) {
      var filter, params;
      return vault_regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            if (nextShow) {
              _context.next = 2;
              break;
            }
            return _context.abrupt("return");
          case 2:
            filter = commonFilters.find(function (element) {
              return element.label === label;
            });
            params = {
              "$select": filter.odataKey,
              "$orderby": filter.odataKey
            };
            sendGetRequest("api/vault.rsd", params).then(function (result) {
              if (result.error) {
                setError({
                  message: result.error
                });
                return;
              }
              if (result.items) {
                if (filter.odataKey === "usages" || filter.odataKey === "tags") {
                  filterOptions[filter.odataKey] = getSplitArr(result.items, filter.odataKey);
                } else {
                  filterOptions[filter.odataKey] = vault_toConsumableArray(new Set(result.items.map(function (item) {
                    return item[filter.odataKey];
                  })));
                }
                setFilterOptions(vault_objectSpread({}, filterOptions));
              }
            });
          case 5:
          case "end":
            return _context.stop();
        }
      }, _callee);
    }));
    return function onToggle(_x, _x2) {
      return _ref2.apply(this, arguments);
    };
  }();
  function buildODataQuery(odataQuery, searchText) {
    var filter = "";
    if (searchText) {
      filter = "substringof(".concat((0,utils/* odataEscape */.H7)(searchText), ", Tags) eq True or substringof(").concat((0,utils/* odataEscape */.H7)(searchText), ", Value) eq True or substringof(").concat((0,utils/* odataEscape */.H7)(searchText), ", Name) eq True");
    }
    if (odataQuery && filter) {
      filter = "(".concat(odataQuery, ") and (").concat(filter, ")");
    } else if (odataQuery) {
      filter = "(".concat(odataQuery, ")");
    } else if (filter) {
      filter = "(".concat(filter, ")");
    }
    return filter;
  }
  function buildInitQuery(commonFilters) {
    var val = table_filter/* TableFilter */.r.loadFilter("SettingsVault", commonFilters);
    var query = table_filter/* TableFilter */.r.buildODataQuery(val.selectedMap, commonFilters);
    return buildODataQuery(query, val.searchText);
  }
  var onSearch = /*#__PURE__*/function () {
    var _ref3 = vault_asyncToGenerator(/*#__PURE__*/vault_regeneratorRuntime().mark(function _callee2(odataQuery, searchText) {
      var filter;
      return vault_regeneratorRuntime().wrap(function _callee2$(_context2) {
        while (1) switch (_context2.prev = _context2.next) {
          case 0:
            setIsDelBtnDisabled(true);
            filter = buildODataQuery(odataQuery, searchText);
            _context2.prev = 2;
            _context2.next = 5;
            return tableApiRef.setUrlParams({
              "$filter": filter
            });
          case 5:
            _context2.next = 11;
            break;
          case 7:
            _context2.prev = 7;
            _context2.t0 = _context2["catch"](2);
            setAlertType("error");
            setError(_context2.t0);
          case 11:
          case "end":
            return _context2.stop();
        }
      }, _callee2, null, [[2, 7]]);
    }));
    return function onSearch(_x3, _x4) {
      return _ref3.apply(this, arguments);
    };
  }();
  var setError = function setError(error) {
    if (error !== null && error !== void 0 && error.message) {
      setAlertMsg(error.message);
    }
  };
  window.setAlertType = setAlertType;
  window.setAlertMsg = setAlertMsg;
  window.reloadVaultTable = function () {
    tableApiRef.reload();
    setIsDelBtnDisabled(true);
  };
  window.selectedRows = function () {
    return tableApiRef.getSelectedRows().map(function (value) {
      return value === null || value === void 0 ? void 0 : value.original;
    });
  };
  var onRefresh = function onRefresh() {
    window.reloadVaultTable && window.reloadVaultTable();
    return false;
  };
  var onAddVault = function onAddVault() {
    var _window;
    ((_window = window) === null || _window === void 0 || (_window = _window.rsb) === null || _window === void 0 || (_window = _window.vaultDatatable) === null || _window === void 0 ? void 0 : _window.addVault) && window.rsb.vaultDatatable.addVault();
    return false;
  };
  var onDelVault = function onDelVault(event) {
    var _window2;
    var vaults = tableApiRef.getSelectedRows().map(function (value) {
      return value === null || value === void 0 ? void 0 : value.original;
    });
    ((_window2 = window) === null || _window2 === void 0 || (_window2 = _window2.rsb) === null || _window2 === void 0 || (_window2 = _window2.vaultDatatable) === null || _window2 === void 0 ? void 0 : _window2.deletevaults) && window.rsb.vaultDatatable.deletevaults(event, vaults);
  };
  var renderEditModal = function renderEditModal(event, row) {
    var _window3;
    var selectedRow = row === null || row === void 0 ? void 0 : row.original;
    (_window3 = window) === null || _window3 === void 0 || (_window3 = _window3.rsb) === null || _window3 === void 0 || (_window3 = _window3.vaultDatatable) === null || _window3 === void 0 || _window3.renderEditModal(event, vault_objectSpread(vault_objectSpread({}, selectedRow), {}, {
      value: "Encrypted" === (selectedRow === null || selectedRow === void 0 ? void 0 : selectedRow.type) ? PASSWORD_MASK : selectedRow === null || selectedRow === void 0 ? void 0 : selectedRow.value
    }));
  };
  var onRowSelectionChange = function onRowSelectionChange(updater, currentRowSelection) {
    var newSelectedOBJ = updater(currentRowSelection);
    if (newSelectedOBJ && Object.keys(newSelectedOBJ).length > 0) {
      setIsDelBtnDisabled(false);
    } else {
      setIsDelBtnDisabled(true);
    }
  };
  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement("div", {
    className: "settings-header"
  }, /*#__PURE__*/react.createElement("h5", null)), ((_window4 = window) === null || _window4 === void 0 || (_window4 = _window4.rsb) === null || _window4 === void 0 || (_window4 = _window4.settings) === null || _window4 === void 0 ? void 0 : _window4.isAdmin) && /*#__PURE__*/react.createElement("div", {
    className: "vault-datatable-action-container btn-group"
  }, /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    className: "btn btn-sm btn-vault-datatable-refresh",
    onClick: onRefresh
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-refresh"
  }), "\xA0"), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    className: "btn btn-sm btn-vault-datatable-delete",
    onClick: onDelVault,
    disabled: isDelBtnDisabled
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-trash"
  }), "\xA0", vault_constants_TOKENS.VAULT_PAGE_DELETE_BUTTON), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    className: "btn btn-sm btn-vault-datatable-add",
    onClick: onAddVault
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-plus"
  }), "\xA0", vault_constants_TOKENS.VAULT_PAGE_ADD_BUTTON)), /*#__PURE__*/react.createElement(DismissibleAlert/* default */.A, {
    type: alertType,
    message: alertMsg,
    onClose: function onClose() {
      return setAlertMsg(null);
    }
  }), /*#__PURE__*/react.createElement(table_filter/* TableFilter */.r, {
    storageKey: "SettingsVault",
    commonFilters: commonFilters,
    onChange: onSearch,
    onToggle: onToggle
  }), /*#__PURE__*/react.createElement(arc_table/* default */.A, {
    tableBodyRowProps: {
      onClick: renderEditModal
    },
    urlParams: {
      "$filter": initialQuery
    },
    onRowSelectionChange: onRowSelectionChange,
    columns: columns,
    url: "api/vault.rsd",
    initialSorting: [{
      id: "timestamp",
      desc: true
    }],
    rowSelection: true,
    tableApiRef: tableApiRef,
    onError: setError
  }));
}
;// CONCATENATED MODULE: ./src/settings/connections/constants.js

var connections_constants_TOKENS = {
  CONNECTION_PAGE_DELETE_BUTTON: 'Delete',
  CONNECTION_PAGE_ADD_BUTTON: 'Add',
  CONNECTION_PAGE_NAME: 'Name',
  CONNECTION_PAGE_TYPE: 'Type',
  CONNECTION_PAGE_ASSOCIATED_CONNECTOR_IDS: 'Associated Connector Ids',
  CONNECTION_PAGE_CONNECTOR_IDS: 'Connector Ids',
  CONNECTION_PAGE_LAST_MODIFIED: 'Last Modified'
};
;// CONCATENATED MODULE: ./src/settings/connections/index.jsx
function connections_typeof(o) { "@babel/helpers - typeof"; return connections_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, connections_typeof(o); }
function connections_regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ connections_regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == connections_typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(connections_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function connections_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function connections_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? connections_ownKeys(Object(t), !0).forEach(function (r) { connections_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : connections_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function connections_defineProperty(e, r, t) { return (r = connections_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function connections_toPropertyKey(t) { var i = connections_toPrimitive(t, "string"); return "symbol" == connections_typeof(i) ? i : i + ""; }
function connections_toPrimitive(t, r) { if ("object" != connections_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != connections_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function connections_toConsumableArray(r) { return connections_arrayWithoutHoles(r) || connections_iterableToArray(r) || connections_unsupportedIterableToArray(r) || connections_nonIterableSpread(); }
function connections_nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function connections_iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function connections_arrayWithoutHoles(r) { if (Array.isArray(r)) return connections_arrayLikeToArray(r); }
function connections_asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function connections_asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { connections_asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { connections_asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function connections_slicedToArray(r, e) { return connections_arrayWithHoles(r) || connections_iterableToArrayLimit(r, e) || connections_unsupportedIterableToArray(r, e) || connections_nonIterableRest(); }
function connections_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function connections_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return connections_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? connections_arrayLikeToArray(r, a) : void 0; } }
function connections_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function connections_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function connections_arrayWithHoles(r) { if (Array.isArray(r)) return r; }









function ConnectionPage(_ref) {
  var tableRef = _ref.tableRef;
  /* variable */
  var buildCommonFilters = function buildCommonFilters(filterOptions) {
    var typeOptions = null;
    var resourceOptions = null;
    if (Object.prototype.hasOwnProperty.call(filterOptions, "category")) {
      typeOptions = filterOptions["category"].sort();
    }
    if (Object.prototype.hasOwnProperty.call(filterOptions, "usage")) {
      resourceOptions = filterOptions["usage"].sort();
    }
    return [{
      odataKey: "category",
      label: connections_constants_TOKENS.CONNECTION_PAGE_TYPE,
      options: typeOptions,
      isDatePicker: false
    }, {
      odataKey: "usage",
      label: connections_constants_TOKENS.CONNECTION_PAGE_CONNECTOR_IDS,
      options: resourceOptions,
      isDatePicker: false
    }];
  };
  var _React$useState = react.useState({}),
    _React$useState2 = connections_slicedToArray(_React$useState, 2),
    filterOptions = _React$useState2[0],
    setFilterOptions = _React$useState2[1];
  var commonFilters = react.useMemo(function () {
    return buildCommonFilters(filterOptions);
  }, [filterOptions]);
  var initialQuery = react.useMemo(function () {
    return buildInitQuery(commonFilters);
  }, []);
  var _React$useState3 = react.useState("error"),
    _React$useState4 = connections_slicedToArray(_React$useState3, 2),
    alertType = _React$useState4[0],
    setAlertType = _React$useState4[1];
  var _React$useState5 = react.useState(""),
    _React$useState6 = connections_slicedToArray(_React$useState5, 2),
    alertMsg = _React$useState6[0],
    setAlertMsg = _React$useState6[1];
  var _React$useState7 = react.useState(true),
    _React$useState8 = connections_slicedToArray(_React$useState7, 2),
    isDelBtnDisabled = _React$useState8[0],
    setIsDelBtnDisabled = _React$useState8[1];
  var tableApiRef = react.useRef(tableRef || {});
  var columns = [{
    id: "name",
    header: connections_constants_TOKENS.CONNECTION_PAGE_NAME,
    accessorKey: "name",
    flexGrow: 1
  }, {
    id: "category",
    header: connections_constants_TOKENS.CONNECTION_PAGE_TYPE,
    accessorKey: "category",
    flexGrow: 1,
    cell: function cell(props) {
      return /*#__PURE__*/react.createElement("div", {
        className: "d-flex"
      }, /*#__PURE__*/react.createElement("i", {
        className: "connector-type-cell-icon app-icon app-icon-" + props.getValue().toLowerCase().replace(/^cdata(.+)$/, "$1")
      }), /*#__PURE__*/react.createElement("span", null, props.getValue()));
    }
  }, {
    id: "usage",
    header: connections_constants_TOKENS.CONNECTION_PAGE_ASSOCIATED_CONNECTOR_IDS,
    accessorKey: "usage",
    flexGrow: 1
  }, {
    id: "lastmodified",
    header: connections_constants_TOKENS.CONNECTION_PAGE_LAST_MODIFIED,
    accessorKey: "lastmodified",
    flexGrow: 1,
    cell: function cell(props) {
      return /*#__PURE__*/react.createElement("span", null, (0,utils/* FormatTimestamp */.W9)(new Date(parseInt(props.getValue()))));
    }
  }];
  var onToggle = /*#__PURE__*/function () {
    var _ref2 = connections_asyncToGenerator(/*#__PURE__*/connections_regeneratorRuntime().mark(function _callee(label, nextShow) {
      var filter, params;
      return connections_regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            if (nextShow) {
              _context.next = 2;
              break;
            }
            return _context.abrupt("return");
          case 2:
            filter = commonFilters.find(function (element) {
              return element.label === label;
            });
            params = {
              "$select": filter.odataKey,
              "$orderby": filter.odataKey
            };
            sendGetRequest("src/sharedConnections.rsd", params).then(function (result) {
              if (result.error) {
                setError({
                  message: result.error
                });
                return;
              }
              if (result.items) {
                if (filter.odataKey === "usage") {
                  filterOptions[filter.odataKey] = getSplitArr(result.items, "usage");
                } else {
                  filterOptions[filter.odataKey] = connections_toConsumableArray(new Set(result.items.map(function (item) {
                    return item[filter.odataKey];
                  })));
                }
                setFilterOptions(connections_objectSpread({}, filterOptions));
              }
            });
          case 5:
          case "end":
            return _context.stop();
        }
      }, _callee);
    }));
    return function onToggle(_x, _x2) {
      return _ref2.apply(this, arguments);
    };
  }();
  function buildODataQuery(odataQuery, searchText) {
    var filter = "";
    if (searchText) {
      filter = "substringof(".concat((0,utils/* odataEscape */.H7)(searchText), ", Name) eq True or Category eq ").concat((0,utils/* odataEscape */.H7)(searchText));
    }
    if (odataQuery && filter) {
      filter = "(".concat(odataQuery, ") and (").concat(filter, ")");
    } else if (odataQuery) {
      filter = "(".concat(odataQuery, ")");
    } else if (filter) {
      filter = "(".concat(filter, ")");
    }
    return filter;
  }
  function buildInitQuery(commonFilters) {
    var val = table_filter/* TableFilter */.r.loadFilter("SettingsConnection", commonFilters);
    var query = table_filter/* TableFilter */.r.buildODataQuery(val.selectedMap, commonFilters);
    return buildODataQuery(query, val.searchText);
  }
  var onSearch = /*#__PURE__*/function () {
    var _ref3 = connections_asyncToGenerator(/*#__PURE__*/connections_regeneratorRuntime().mark(function _callee2(odataQuery, searchText) {
      var filter;
      return connections_regeneratorRuntime().wrap(function _callee2$(_context2) {
        while (1) switch (_context2.prev = _context2.next) {
          case 0:
            setIsDelBtnDisabled(true);
            filter = buildODataQuery(odataQuery, searchText);
            _context2.prev = 2;
            _context2.next = 5;
            return tableApiRef.setUrlParams({
              "$filter": filter
            });
          case 5:
            _context2.next = 11;
            break;
          case 7:
            _context2.prev = 7;
            _context2.t0 = _context2["catch"](2);
            setAlertType("error");
            setError(_context2.t0);
          case 11:
          case "end":
            return _context2.stop();
        }
      }, _callee2, null, [[2, 7]]);
    }));
    return function onSearch(_x3, _x4) {
      return _ref3.apply(this, arguments);
    };
  }();
  var setError = function setError(error) {
    if (error !== null && error !== void 0 && error.message) {
      setAlertMsg(error.message);
    }
  };
  window.setAlertType = setAlertType;
  window.setAlertMsg = setAlertMsg;
  window.reloadConnectionTable = function () {
    tableApiRef.reload();
    setIsDelBtnDisabled(true);
  };
  window.selectedRows = function () {
    return tableApiRef.getSelectedRows().map(function (value) {
      return value === null || value === void 0 ? void 0 : value.original;
    });
  };
  var onRefresh = function onRefresh() {
    window.reloadConnectionTable && window.reloadConnectionTable();
    return false;
  };
  var onAddConnection = function onAddConnection() {
    var _window;
    ((_window = window) === null || _window === void 0 || (_window = _window.rsb) === null || _window === void 0 || (_window = _window.connectionDatatable) === null || _window === void 0 ? void 0 : _window.createConnection) && window.rsb.connectionDatatable.createConnection();
    return false;
  };
  var onDelConnection = function onDelConnection() {
    var _window2;
    ((_window2 = window) === null || _window2 === void 0 || (_window2 = _window2.rsb) === null || _window2 === void 0 || (_window2 = _window2.connectionDatatable) === null || _window2 === void 0 ? void 0 : _window2.deleteConnectionModal) && window.rsb.connectionDatatable.deleteConnectionModal();
  };
  var renderEditModal = function renderEditModal(event, row) {
    var _window3;
    var selectedRow = row === null || row === void 0 ? void 0 : row.original;
    (_window3 = window) === null || _window3 === void 0 || (_window3 = _window3.rsb) === null || _window3 === void 0 || (_window3 = _window3.connectionDatatable) === null || _window3 === void 0 || _window3.renderEditModal(event, selectedRow);
  };
  var onRowSelectionChange = function onRowSelectionChange(updater, currentRowSelection) {
    var newSelectedOBJ = updater(currentRowSelection);
    if (newSelectedOBJ && Object.keys(newSelectedOBJ).length > 0) {
      setIsDelBtnDisabled(false);
    } else {
      setIsDelBtnDisabled(true);
    }
  };
  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement("div", {
    className: "settings-header"
  }, /*#__PURE__*/react.createElement("h5", null)), /*#__PURE__*/react.createElement("div", {
    className: "connection-datatable-action-container btn-group"
  }, /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    className: "btn btn-sm btn-connection-datatable-refresh",
    onClick: onRefresh
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-refresh"
  }), "\xA0"), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    className: "btn btn-sm btn-connection-datatable-delete",
    onClick: onDelConnection,
    disabled: isDelBtnDisabled
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-trash"
  }), "\xA0", connections_constants_TOKENS.CONNECTION_PAGE_DELETE_BUTTON), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    className: "btn btn-sm btn-connection-datatable-add",
    onClick: onAddConnection
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-plus"
  }), "\xA0", connections_constants_TOKENS.CONNECTION_PAGE_ADD_BUTTON)), /*#__PURE__*/react.createElement(DismissibleAlert/* default */.A, {
    type: alertType,
    message: alertMsg,
    onClose: function onClose() {
      return setAlertMsg(null);
    }
  }), /*#__PURE__*/react.createElement(table_filter/* TableFilter */.r, {
    storageKey: "SettingsConnection",
    commonFilters: commonFilters,
    onChange: onSearch,
    onToggle: onToggle
  }), /*#__PURE__*/react.createElement(arc_table/* default */.A, {
    tableBodyRowProps: {
      onClick: renderEditModal
    },
    urlParams: {
      "$filter": initialQuery
    },
    onRowSelectionChange: onRowSelectionChange,
    columns: columns,
    url: "src/sharedConnections.rsd",
    initialSorting: [{
      id: "timestamp",
      desc: true
    }],
    rowSelection: true,
    tableApiRef: tableApiRef,
    onError: setError
  }));
}
// EXTERNAL MODULE: ./src/components/migration/index.jsx + 1 modules
var migration = __webpack_require__(29886);
;// CONCATENATED MODULE: ./src/settings/migration/index.jsx



function MigrationPage() {
  var importModalContainer = document.createElement("div");
  document.getElementsByTagName("body")[0].appendChild(importModalContainer);
  var importModalRoot = client.createRoot(importModalContainer);
  window.importModal = /*#__PURE__*/react.createElement(migration/* ImportModal */.zb, {
    isFlow: false
  });
  importModalRoot.render(window.importModal);
  var exportModalContainer = document.createElement("div");
  document.getElementsByTagName("body")[0].appendChild(exportModalContainer);
  var exportModalRoot = client.createRoot(exportModalContainer);
  exportModalRoot.render(/*#__PURE__*/react.createElement(migration/* ExportModal */.OM, {
    isFlow: false
  }));
}
// EXTERNAL MODULE: ./src/components/message-view/MessageViewNav.jsx
var MessageViewNav = __webpack_require__(60208);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Nav.js + 1 modules
var Nav = __webpack_require__(14197);
;// CONCATENATED MODULE: ./src/settings/roles/constants.js

var roles_constants_TOKENS = {
  AddRole: 'Add Role',
  RoleName: 'Role Name',
  RoleDescription: 'Description',
  RoleNamePlaceholder: 'Role Name',
  RoleDescPlaceholder: 'Role Description',
  Close: 'Close',
  Next: 'Next',
  Apply: 'Apply',
  EditRoleModal: 'Edit Role Modal',
  TableAddBtn: 'Add',
  TableDeleteBtn: 'Delete',
  TableAllWorkspaces: 'All Workspaces',
  TableAllUsers: 'All Users',
  TableFilterWorkspaces: 'Workspaces',
  TableFilterHeaderUsers: 'Users',
  TableHeaderName: 'Name',
  TableHeaderDescription: 'Description',
  AssociatedWorkspaces: 'Associated Workspaces',
  AssociatedUsers: 'Associated Users',
  DeleteRoles: 'Delete Role(s)',
  AddPolicy: 'Add Policy',
  DetailNavPolicies: 'Policies({0}/{1})',
  PolicyName: 'Policy {0}',
  ExceedMaxPolicyCount: 'Unable to create policy more than {0}.',
  SaveRole: 'Save Role',
  FilterNone: '(None)',
  FilterAllWorkspaces: '(All Workspaces)',
  AddUsers: 'Add Users',
  UserName: 'Username',
  UserStatus: 'Status',
  WelcomeToUser: 'Associate users to this role',
  DeleteUsers: 'Delete User(s)',
  SaveSuccessAlert: 'Save successful',
  ExpandAllBtn: 'Expand All',
  CollapseAllBtn: 'Collapse All',
  WorkspacePermissions: 'Workspace Permissions',
  ConnectorPermissions: 'Connector Permissions',
  SelectWorkspaces: 'Select Workspaces',
  AssociateAllWorkspaces: 'Associate all workspaces',
  AllWorkspacesSelected: 'All current and future workspaces will be visible to the user and are affected by this policy\'s permission configuration.',
  PartialWorkspacesSelected: 'The workspaces displayed below will be visible to the user and are affected by this policy\'s permission configuration.',
  NoWorkspacesSelected: 'No workspaces selected',
  SelectAll: 'Select All',
  DeselectAll: 'Deselect All',
  SelectWorkspacesPlaceholder: 'Search',
  AllPermissions: 'All Permissions',
  UserActive: 'Active',
  UserInactive: 'Inactive',
  RoleNotFound: 'Unable to find a role with roleId={0}',
  BuiltinRoleReadonly: 'The role {0} is a built-in role. It cannot be edited.',
  PolicyDesigner: 'Designer',
  PolicyJson: 'JSON',
  UnableToDesignerViewHeader: 'Unable to Render in Designer View',
  UnableToDesignerViewBody: 'We are unable to render the JSON configuration in the designer view. If you change to the designer view, this JSON configuration will be reset and cleared. <br><br> Do you want to switch to the designer view?',
  ChangeToDesignerView: 'Change to Designer View',
  UnableToRenderInDesigner: 'The JSON policy is not able to represent in the designer.',
  NoPolicySummary: 'This policy was configured using JSON, To view its details, expand the policy.',
  AndMore: 'and more...',
  PolicyError: 'Save failed. The following policies are missing the minimum number of permissions and/or associated workspaces.',
  AtLeastOnWorkspace: 'Select at least one Workspace',
  JsonEditorWarning: 'The configuration for this policy cannot be rendered in the designer view and can only be displayed in a JSON format. Edit policy with the JSON input below. To edit the policy in the designer view, click here:',
  NavSettings: 'Settings',
  AssociatedCertificates: 'Associated Certificates',
  CertificatePermissions: 'Certificate Permissions',
  AssociateAllCertificates: 'Associate all certificates',
  AllCertificatesSelected: 'All current and future certificates will be visible to the user and are affected by this policy\'s permission configuration.',
  PartialCertificatesSelected: 'The certificates displayed below will be visible to the user and are affected by this policy\'s permission configuration.',
  NoCertificatesSelected: 'No certificates selected',
  SelectCertificates: 'Select Certificates'
};
var FILTER = {
  VALUE_NONE: "",
  VALUE_ALL: "*"
};
var WORKSPACE_PERMISSIONS = [{
  permission: "UpdateSettings",
  name: 'Update Settings',
  description: 'Permits a user to update the configuration of a workspace.'
}, {
  permission: "ModifyFlow",
  name: 'Modify Flow',
  description: 'Permits a user to modify the placement of connectors, and connections between connectors.'
}];
var CONNECTOR_PERMISSIONS = [{
  permission: "UpdateSettings",
  name: 'Update Settings',
  description: 'Permits a user to update the configuration of a connector.'
}, {
  permission: "Delete",
  name: 'Delete',
  description: 'Permits a user to delete connectors.'
}, {
  permission: "Create",
  name: 'Create',
  description: 'Permits a user to create connectors.'
}, {
  permission: "UploadFiles",
  name: 'Upload Files',
  description: 'Permits a user to upload new files in the Input tab of a connector.'
}, {
  permission: "SendFiles",
  name: 'Send Files',
  description: 'Permits a user to send files manually in the Input tab of a connector.'
}, {
  permission: "ReceiveFiles",
  name: 'Receive Files',
  description: 'Permits a user to receive files manually in the Output tab of a connector.'
}, {
  permission: "DeleteFiles",
  name: 'Delete Files',
  description: 'Permits a user to delete unsent files in the Input tab of a connector.'
}, {
  permission: "DeleteTransactions",
  name: 'Delete Transactions',
  description: 'Permits a user to delete transactions related to a connector.'
}, {
  permission: "Requeue",
  name: 'Re-queue',
  description: 'Permits a user to re-queue files that have already been sent in a connector\'s Input tab.'
}];
var CERTIFICATE_PERMISSIONS = [{
  permission: "DownloadPublic",
  name: 'Download Public',
  description: 'Permits a user to download a public certificate.'
}, {
  permission: "DownloadPrivate",
  name: 'Download Private',
  description: 'Permits a user to download a private certificate.'
}, {
  permission: "RenamePublic",
  name: 'Rename Public',
  description: 'Permits a user to rename a public certificate.'
}, {
  permission: "RenamePrivate",
  name: 'Rename Private',
  description: 'Permits a user to rename a private certificate.'
}, {
  permission: "ListPublic",
  name: 'List Public',
  description: 'Permits a user to list public certificates or get detail of a certificate.'
}, {
  permission: "ListPrivate",
  name: 'List Private',
  description: 'Permits a user to list private certificates or get detail of a certificate.'
}, {
  permission: "CreatePublic",
  name: 'Create Public',
  description: 'Permits a user to create a public certificate.'
}, {
  permission: "CreatePrivate",
  name: 'Create Private',
  description: 'Permits a user to create a private certificate.'
}, {
  permission: "DeletePublic",
  name: 'Delete Public',
  description: 'Permits a user to delete a public certificate.'
}, {
  permission: "DeletePrivate",
  name: 'Delete Private',
  description: 'Permits a user to delete a private certificate.'
}];

// EXTERNAL MODULE: ./node_modules/prop-types/index.js
var prop_types = __webpack_require__(5556);
var prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Card.js + 2 modules
var Card = __webpack_require__(4190);
;// CONCATENATED MODULE: ./src/settings/roles/WorkspaceConnectorPermissionTable.jsx





var PermissionColumns = [{
  id: "Name",
  header: roles_constants_TOKENS.TableHeaderName,
  accessorKey: "name",
  size: 180
}, {
  id: "Description",
  header: roles_constants_TOKENS.TableHeaderDescription,
  accessorKey: "description"
}];
var getSelectedRows = function getSelectedRows(tableData, selectedData) {
  var selectedRows = {};
  if (selectedData.length === 1 && selectedData[0] === "*") {
    tableData.forEach(function (element, index) {
      return selectedRows[index] = true;
    });
    return selectedRows;
  }
  var _loop = function _loop(i) {
    if (selectedData.find(function (element) {
      return tableData[i].permission.toLowerCase() === element.toLowerCase();
    })) {
      selectedRows[i] = true;
    }
  };
  for (var i = 0; i < tableData.length; i++) {
    _loop(i);
  }
  return selectedRows;
};
var WorkspaceConnectorPermissionTable = function WorkspaceConnectorPermissionTable(_ref) {
  var workspaces = _ref.workspaces,
    connectors = _ref.connectors,
    onChange = _ref.onChange;
  var tableWorkspaceRef = {};
  var tableConnectorRef = {};
  var onWorkspaceRowSelectionChange = function onWorkspaceRowSelectionChange(updater, currentRowSelection) {
    var postSelection = updater(currentRowSelection);
    var rowList = tableWorkspaceRef.getRows();
    var permissions = [];
    var _loop2 = function _loop2(index) {
      if (postSelection[index]) {
        var _rowList$find$origina;
        permissions.push((_rowList$find$origina = rowList.find(function (element) {
          return element.id === index;
        }).original) === null || _rowList$find$origina === void 0 ? void 0 : _rowList$find$origina.permission);
      }
    };
    for (var index in postSelection) {
      _loop2(index);
    }
    onChange({
      workspaces: [].concat(permissions, ["Read"]),
      connectors: connectors
    });
  };
  var onConnectorRowSelectionChange = function onConnectorRowSelectionChange(updater, currentRowSelection) {
    var postSelection = updater(currentRowSelection);
    var rowList = tableConnectorRef.getRows();
    var permissions = [];
    var _loop3 = function _loop3(index) {
      if (postSelection[index]) {
        var _rowList$find$origina2;
        permissions.push((_rowList$find$origina2 = rowList.find(function (element) {
          return element.id === index;
        }).original) === null || _rowList$find$origina2 === void 0 ? void 0 : _rowList$find$origina2.permission);
      }
    };
    for (var index in postSelection) {
      _loop3(index);
    }
    onChange({
      workspaces: workspaces,
      connectors: permissions
    });
  };
  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement("div", {
    className: "workspace-header"
  }, /*#__PURE__*/react.createElement("h4", null, roles_constants_TOKENS.WorkspacePermissions)), /*#__PURE__*/react.createElement("hr", null), /*#__PURE__*/react.createElement(arc_table/* default */.A, {
    onRowSelectionChange: onWorkspaceRowSelectionChange,
    key: "w" + workspaces,
    columns: PermissionColumns,
    url: null,
    data: WORKSPACE_PERMISSIONS,
    rowSelection: true,
    paging: false,
    tableApiRef: tableWorkspaceRef,
    selectedRows: getSelectedRows(WORKSPACE_PERMISSIONS, workspaces)
  }), /*#__PURE__*/react.createElement("div", {
    className: "workspace-header"
  }, /*#__PURE__*/react.createElement("h4", null, roles_constants_TOKENS.ConnectorPermissions)), /*#__PURE__*/react.createElement("hr", null), /*#__PURE__*/react.createElement(arc_table/* default */.A, {
    onRowSelectionChange: onConnectorRowSelectionChange,
    key: "c" + connectors,
    columns: PermissionColumns,
    url: null,
    data: CONNECTOR_PERMISSIONS,
    rowSelection: true,
    paging: false,
    tableApiRef: tableConnectorRef,
    selectedRows: getSelectedRows(CONNECTOR_PERMISSIONS, connectors)
  }));
};
WorkspaceConnectorPermissionTable.propTypes = {
  /**
   * workspace permissions
   */
  workspaces: (prop_types_default()).array.isRequired,
  /**
   * connector permissions. For example
   * - [] means not at all.
   * - ["Delete", "UpdateSettings"]
   * - ["*"] means all.
   */
  connectors: (prop_types_default()).array.isRequired,
  /**
   * An event is triggered after the workspace permissions or connector permissions are changed.
   */
  onChange: (prop_types_default()).func.isRequired
};

;// CONCATENATED MODULE: ./src/settings/roles/WorkspaceFragment.jsx



var WorkspaceFragment = function WorkspaceFragment(_ref) {
  var name = _ref.name,
    connector = _ref.connector,
    api = _ref.api,
    user = _ref.user;
  return /*#__PURE__*/react.createElement("div", {
    className: "row"
  }, /*#__PURE__*/react.createElement("div", {
    className: "col text-truncate"
  }, /*#__PURE__*/react.createElement("span", null, name)), /*#__PURE__*/react.createElement("div", {
    className: "mw-fit col-md-3 row row-cols-auto g-2 mt-0"
  }, /*#__PURE__*/react.createElement("span", {
    className: "col mt-0"
  }, connector, "\xA0", /*#__PURE__*/react.createElement("i", {
    className: "fa-solid fa-link-horizontal"
  })), /*#__PURE__*/react.createElement("span", {
    className: "col mt-0"
  }, api, "\xA0", /*#__PURE__*/react.createElement("i", {
    className: "fa-solid fa-laptop"
  })), /*#__PURE__*/react.createElement("span", {
    className: "col mt-0"
  }, user, "\xA0", /*#__PURE__*/react.createElement("i", {
    className: "fa-regular fa-user"
  }))));
};
WorkspaceFragment.propTypes = {
  /**
   * workspace name
   */
  name: (prop_types_default()).string.isRequired,
  /**
   * connector count
   */
  connector: (prop_types_default()).string,
  /**
   * flow APIs count
   */
  api: (prop_types_default()).string,
  /**
   * user count to indicate how many users has been associated to this workspace
   */
  user: (prop_types_default()).string
};
/* harmony default export */ const roles_WorkspaceFragment = (WorkspaceFragment);
;// CONCATENATED MODULE: ./src/settings/roles/SelectWorkspaceModal.jsx
function SelectWorkspaceModal_extends() { return SelectWorkspaceModal_extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, SelectWorkspaceModal_extends.apply(null, arguments); }
function SelectWorkspaceModal_toConsumableArray(r) { return SelectWorkspaceModal_arrayWithoutHoles(r) || SelectWorkspaceModal_iterableToArray(r) || SelectWorkspaceModal_unsupportedIterableToArray(r) || SelectWorkspaceModal_nonIterableSpread(); }
function SelectWorkspaceModal_nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function SelectWorkspaceModal_iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function SelectWorkspaceModal_arrayWithoutHoles(r) { if (Array.isArray(r)) return SelectWorkspaceModal_arrayLikeToArray(r); }
function SelectWorkspaceModal_slicedToArray(r, e) { return SelectWorkspaceModal_arrayWithHoles(r) || SelectWorkspaceModal_iterableToArrayLimit(r, e) || SelectWorkspaceModal_unsupportedIterableToArray(r, e) || SelectWorkspaceModal_nonIterableRest(); }
function SelectWorkspaceModal_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function SelectWorkspaceModal_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return SelectWorkspaceModal_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? SelectWorkspaceModal_arrayLikeToArray(r, a) : void 0; } }
function SelectWorkspaceModal_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function SelectWorkspaceModal_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function SelectWorkspaceModal_arrayWithHoles(r) { if (Array.isArray(r)) return r; }










var SelectWorkspaceModal = function SelectWorkspaceModal(_ref) {
  var workspaces = _ref.workspaces,
    show = _ref.show,
    onChange = _ref.onChange,
    onHide = _ref.onHide;
  var _useState = (0,react.useState)([]),
    _useState2 = SelectWorkspaceModal_slicedToArray(_useState, 2),
    selectedWorkspaces = _useState2[0],
    setSelectedWorkspaces = _useState2[1];
  var _useState3 = (0,react.useState)(""),
    _useState4 = SelectWorkspaceModal_slicedToArray(_useState3, 2),
    searchText = _useState4[0],
    setSearchText = _useState4[1];
  var toggleWorkspaceSelection = function toggleWorkspaceSelection(workspaceName) {
    var isSelected = selectedWorkspaces.includes(workspaceName);
    if (isSelected) {
      setSelectedWorkspaces(selectedWorkspaces.filter(function (name) {
        return name !== workspaceName;
      }));
    } else {
      setSelectedWorkspaces([].concat(SelectWorkspaceModal_toConsumableArray(selectedWorkspaces), [workspaceName]));
    }
  };
  var toggleSelectAll = function toggleSelectAll(deselectAll) {
    if (deselectAll) {
      setSelectedWorkspaces([]);
    } else {
      setSelectedWorkspaces(workspaces.map(function (workspace) {
        return workspace.name;
      }));
    }
  };
  return /*#__PURE__*/react.createElement(Modal/* default */.A, SelectWorkspaceModal_extends({
    show: show,
    onHide: onHide,
    backdrop: "static",
    className: "select-workspace-modal"
  }, (0,utils/* onInputEnterDown */.yb)(function () {
    return onChange(selectedWorkspaces);
  })), /*#__PURE__*/react.createElement(Modal/* default */.A.Header, {
    closeButton: true
  }, /*#__PURE__*/react.createElement(Modal/* default */.A.Title, null, roles_constants_TOKENS.SelectWorkspaces)), /*#__PURE__*/react.createElement(Modal/* default */.A.Body, null, /*#__PURE__*/react.createElement("div", {
    className: "table-filter"
  }, /*#__PURE__*/react.createElement(searchbox/* SearchBox */.G, {
    searchText: searchText,
    onChanged: setSearchText
  })), /*#__PURE__*/react.createElement("div", {
    className: "select-toggle"
  }, /*#__PURE__*/react.createElement("a", {
    className: "btn btn-text",
    onClick: function onClick() {
      return toggleSelectAll(false);
    }
  }, roles_constants_TOKENS.SelectAll), /*#__PURE__*/react.createElement("a", {
    className: "btn btn-text",
    onClick: function onClick() {
      return toggleSelectAll(true);
    }
  }, roles_constants_TOKENS.DeselectAll)), /*#__PURE__*/react.createElement("div", {
    className: "workspace-container"
  }, workspaces.map(function (workspace, index) {
    return workspace.name.toLowerCase().includes(searchText.toLowerCase()) && /*#__PURE__*/react.createElement("div", {
      key: index,
      className: "card mt-2 form-group"
    }, /*#__PURE__*/react.createElement("div", {
      className: "card-body checkbox ms-3 form-check"
    }, /*#__PURE__*/react.createElement("input", {
      type: "checkbox",
      id: workspace.name,
      className: "form-check-input",
      checked: selectedWorkspaces.includes(workspace.name),
      onChange: function onChange() {
        return toggleWorkspaceSelection(workspace.name);
      }
    }), /*#__PURE__*/react.createElement("label", {
      htmlFor: workspace.name,
      className: "ps-3 col-form-label form-check-label"
    }, /*#__PURE__*/react.createElement(roles_WorkspaceFragment, {
      name: workspace.name,
      connector: workspace.connector,
      api: workspace.api,
      user: workspace.user
    }))));
  }))), /*#__PURE__*/react.createElement(Modal/* default */.A.Footer, null, /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    onClick: onHide
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-times",
    "aria-hidden": "true"
  }), "\xA0", roles_constants_TOKENS.Close), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "primary",
    onClick: function onClick() {
      return onChange(selectedWorkspaces);
    }
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-check",
    "aria-hidden": "true"
  }), "\xA0", roles_constants_TOKENS.Apply)));
};
SelectWorkspaceModal.propTypes = {
  /**
   * all unselected workspace array.
   * [{
   *   name: "Default",
   *   connector: 8,
   *   api: 4,
   *   user: 5
   * },
   * {
   *   name: "space1",
   *   connector: 9,
   *   api: 5,
   *   user: 6
   * }];
   */
  workspaces: (prop_types_default()).array.isRequired,
  show: (prop_types_default()).bool.isRequired,
  onChange: (prop_types_default()).func.isRequired,
  onHide: (prop_types_default()).func
};
/* harmony default export */ const roles_SelectWorkspaceModal = (SelectWorkspaceModal);
;// CONCATENATED MODULE: ./src/settings/roles/AssociatedWorkspace.jsx
function AssociatedWorkspace_toConsumableArray(r) { return AssociatedWorkspace_arrayWithoutHoles(r) || AssociatedWorkspace_iterableToArray(r) || AssociatedWorkspace_unsupportedIterableToArray(r) || AssociatedWorkspace_nonIterableSpread(); }
function AssociatedWorkspace_nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function AssociatedWorkspace_iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function AssociatedWorkspace_arrayWithoutHoles(r) { if (Array.isArray(r)) return AssociatedWorkspace_arrayLikeToArray(r); }
function AssociatedWorkspace_slicedToArray(r, e) { return AssociatedWorkspace_arrayWithHoles(r) || AssociatedWorkspace_iterableToArrayLimit(r, e) || AssociatedWorkspace_unsupportedIterableToArray(r, e) || AssociatedWorkspace_nonIterableRest(); }
function AssociatedWorkspace_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function AssociatedWorkspace_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return AssociatedWorkspace_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? AssociatedWorkspace_arrayLikeToArray(r, a) : void 0; } }
function AssociatedWorkspace_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function AssociatedWorkspace_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function AssociatedWorkspace_arrayWithHoles(r) { if (Array.isArray(r)) return r; }






var AssociatedWorkspace = function AssociatedWorkspace(_ref) {
  var selected = _ref.selected,
    workspaces = _ref.workspaces,
    onChange = _ref.onChange;
  var _React$useState = react.useState(false),
    _React$useState2 = AssociatedWorkspace_slicedToArray(_React$useState, 2),
    showModal = _React$useState2[0],
    setShowModal = _React$useState2[1];
  var onCheck = function onCheck(isCheck) {
    if (isCheck) {
      onChange(["*"]);
    } else {
      onChange([]);
    }
  };
  var onDelete = function onDelete(name) {
    onChange(selected.filter(function (val) {
      return val !== name;
    }));
  };
  var onSelectWorkspaces = function onSelectWorkspaces(names) {
    var tmp = selected.filter(function (element) {
      return element !== "*";
    });
    onChange([].concat(AssociatedWorkspace_toConsumableArray(tmp), AssociatedWorkspace_toConsumableArray(names)));
    setShowModal(false);
  };
  var renderLabel = function renderLabel() {
    var text = "";
    if (selected.length === 0) {
      text = roles_constants_TOKENS.NoWorkspacesSelected;
    } else if (isSelectAll()) {
      text = roles_constants_TOKENS.AllWorkspacesSelected;
    } else {
      text = roles_constants_TOKENS.PartialWorkspacesSelected;
    }
    return /*#__PURE__*/react.createElement("span", {
      className: "text-body"
    }, text);
  };
  var renderWorkspaces = function renderWorkspaces() {
    if (isSelectAll()) {
      return null;
    }
    return selected.map(function (name) {
      var wp = workspaces.find(function (workspace) {
        return workspace.name === name;
      }) || {
        name: name,
        user: "0",
        connector: "0"
      };
      return /*#__PURE__*/react.createElement("div", {
        key: wp.name,
        className: "card workspace-card mt-2"
      }, /*#__PURE__*/react.createElement("div", {
        className: "card-body"
      }, /*#__PURE__*/react.createElement("div", {
        className: "row align-items-center"
      }, /*#__PURE__*/react.createElement("div", {
        className: "col-md-11"
      }, /*#__PURE__*/react.createElement(roles_WorkspaceFragment, {
        key: wp.name,
        name: wp.name,
        user: wp.user,
        api: wp.api,
        connector: wp.connector
      })), /*#__PURE__*/react.createElement("div", {
        className: "col-md-1"
      }, /*#__PURE__*/react.createElement("a", {
        className: "btn btn-light",
        onClick: function onClick() {
          return onDelete(wp.name);
        }
      }, /*#__PURE__*/react.createElement("i", {
        className: "fa fa-trash"
      }))))));
    });
  };
  var isSelectAll = function isSelectAll() {
    return selected.includes("*");
  };
  var getUnselectedWorkspaces = function getUnselectedWorkspaces() {
    var unselected = [];
    var _loop = function _loop(i) {
      if (!selected.find(function (name) {
        return workspaces[i].name === name;
      })) {
        unselected.push(workspaces[i]);
      }
    };
    for (var i = 0; i < workspaces.length; i++) {
      _loop(i);
    }
    return unselected;
  };
  return /*#__PURE__*/react.createElement(react.Fragment, null, showModal && /*#__PURE__*/react.createElement(roles_SelectWorkspaceModal, {
    onChange: onSelectWorkspaces,
    show: showModal,
    workspaces: getUnselectedWorkspaces(),
    onHide: function onHide() {
      return setShowModal(false);
    }
  }), /*#__PURE__*/react.createElement("div", {
    className: "workspace-header"
  }, /*#__PURE__*/react.createElement("div", {
    className: "row"
  }, /*#__PURE__*/react.createElement("div", {
    className: "col"
  }, /*#__PURE__*/react.createElement("h4", null, roles_constants_TOKENS.AssociatedWorkspaces)), /*#__PURE__*/react.createElement("div", {
    className: "col-md-auto checkbox mt-2"
  }, /*#__PURE__*/react.createElement("label", null, /*#__PURE__*/react.createElement("input", {
    type: "checkbox",
    className: "form-check-input ms-3",
    checked: isSelectAll(),
    onChange: function onChange(event) {
      return onCheck(event.target.checked);
    }
  }), roles_constants_TOKENS.AssociateAllWorkspaces), /*#__PURE__*/react.createElement("label", null, /*#__PURE__*/react.createElement("a", {
    className: "btn btn-text",
    onClick: function onClick() {
      return setShowModal(true);
    }
  }, roles_constants_TOKENS.SelectWorkspaces)))), /*#__PURE__*/react.createElement("span", {
    className: "text-secondary"
  }, roles_constants_TOKENS.AtLeastOnWorkspace)), /*#__PURE__*/react.createElement("hr", null), renderLabel(), renderWorkspaces());
};
AssociatedWorkspace.propTypes = {
  /**
   * workspace names. For example:
   * - []
   * - ["Default", "space1", "space2"]
   * - ["*"]
   */
  selected: (prop_types_default()).array.isRequired,
  /**
   * all workspace array.
   * [{
   *   name: "Default",
   *   connector: 8,
   *   api: 4,
   *   user: 5
   * },
   * {
   *   name: "space1",
   *   connector: 9,
   *   api: 5,
   *   user: 6
   * }];
   */
  workspaces: (prop_types_default()).array.isRequired,
  /**
   * An event is triggered after the selected workspaces are changed.
   */
  onChange: (prop_types_default()).func.isRequired
};
/* harmony default export */ const roles_AssociatedWorkspace = (AssociatedWorkspace);
// EXTERNAL MODULE: ./src/components/arc-suspense/index.jsx
var arc_suspense = __webpack_require__(20289);
;// CONCATENATED MODULE: ./src/settings/roles/shared.js
function shared_typeof(o) { "@babel/helpers - typeof"; return shared_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, shared_typeof(o); }
function shared_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function shared_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? shared_ownKeys(Object(t), !0).forEach(function (r) { shared_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : shared_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function shared_defineProperty(e, r, t) { return (r = shared_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function shared_toPropertyKey(t) { var i = shared_toPrimitive(t, "string"); return "symbol" == shared_typeof(i) ? i : i + ""; }
function shared_toPrimitive(t, r) { if ("object" != shared_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != shared_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function buildPolicyObj(existentPolicy, props) {
  var policy = existentPolicy ? shared_objectSpread({}, existentPolicy) : {};
  var value = policy.workspacePermissions || [];
  if (Object.prototype.hasOwnProperty.call(props, "workspacePermissions")) {
    value = props.workspacePermissions || [];
  } else if (Object.prototype.hasOwnProperty.call(props, "workspacepermissions")) {
    value = props.workspacepermissions || [];
  }
  if (typeof value === 'string' || value instanceof String) {
    value = JSON.parse(value);
  }
  policy["workspacePermissions"] = value;
  value = policy.connectorPermissions || [];
  if (Object.prototype.hasOwnProperty.call(props, "connectorPermissions")) {
    value = props.connectorPermissions || [];
  } else if (Object.prototype.hasOwnProperty.call(props, "connectorpermissions")) {
    value = props.connectorpermissions || [];
  }
  if (typeof value === 'string' || value instanceof String) {
    value = JSON.parse(value);
  }
  policy["connectorPermissions"] = value;
  value = policy.certificatePermissions || [];
  if (Object.prototype.hasOwnProperty.call(props, "certificatePermissions")) {
    value = props.certificatePermissions || [];
  } else if (Object.prototype.hasOwnProperty.call(props, "certificatepermissions")) {
    value = props.certificatepermissions || [];
  }
  if (typeof value === 'string' || value instanceof String) {
    value = JSON.parse(value);
  }
  policy["certificatePermissions"] = value;
  value = policy.associatedWorkspaces || [];
  if (Object.prototype.hasOwnProperty.call(props, "associatedWorkspaces")) {
    value = props.associatedWorkspaces || [];
  } else if (Object.prototype.hasOwnProperty.call(props, "associatedworkspaces")) {
    value = props.associatedworkspaces || [];
  }
  if (typeof value === 'string' || value instanceof String) {
    value = JSON.parse(value);
  }
  policy["associatedWorkspaces"] = value;
  value = policy.associatedCertificates || [];
  if (Object.prototype.hasOwnProperty.call(props, "associatedCertificates")) {
    value = props.associatedCertificates || [];
  } else if (Object.prototype.hasOwnProperty.call(props, "associatedcertificates")) {
    value = props.associatedcertificates || [];
  }
  if (typeof value === 'string' || value instanceof String) {
    value = JSON.parse(value);
  }
  policy["associatedCertificates"] = value;
  value = policy.json || "";
  if (Object.prototype.hasOwnProperty.call(props, "json")) {
    value = props.json;
  }
  try {
    var jsonObj = JSON.parse(value);
    value = JSON.stringify(jsonObj, null, 2);
  } catch (ex) {}
  policy["json"] = value;
  return policy;
}
function isAcceptablePolicy(policy) {
  if (policy.json && policy.json.length > 2) {
    return true;
  }
  if (!policy["associatedWorkspaces"] || !policy["associatedCertificates"] || !policy["workspacePermissions"] || !policy["connectorPermissions"] || !policy["certificatePermissions"]) {
    return false;
  }
  if (policy["associatedWorkspaces"].length <= 0) {
    return false;
  }
  return true;
}

;// CONCATENATED MODULE: ./src/settings/roles/AssociatedCertificate.jsx
function AssociatedCertificate_extends() { return AssociatedCertificate_extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, AssociatedCertificate_extends.apply(null, arguments); }
function AssociatedCertificate_toConsumableArray(r) { return AssociatedCertificate_arrayWithoutHoles(r) || AssociatedCertificate_iterableToArray(r) || AssociatedCertificate_unsupportedIterableToArray(r) || AssociatedCertificate_nonIterableSpread(); }
function AssociatedCertificate_nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function AssociatedCertificate_iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function AssociatedCertificate_arrayWithoutHoles(r) { if (Array.isArray(r)) return AssociatedCertificate_arrayLikeToArray(r); }
function AssociatedCertificate_slicedToArray(r, e) { return AssociatedCertificate_arrayWithHoles(r) || AssociatedCertificate_iterableToArrayLimit(r, e) || AssociatedCertificate_unsupportedIterableToArray(r, e) || AssociatedCertificate_nonIterableRest(); }
function AssociatedCertificate_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function AssociatedCertificate_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return AssociatedCertificate_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? AssociatedCertificate_arrayLikeToArray(r, a) : void 0; } }
function AssociatedCertificate_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function AssociatedCertificate_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function AssociatedCertificate_arrayWithHoles(r) { if (Array.isArray(r)) return r; }









var AssociatedCertificate = function AssociatedCertificate(_ref) {
  var selected = _ref.selected,
    onChange = _ref.onChange;
  var _React$useState = react.useState(false),
    _React$useState2 = AssociatedCertificate_slicedToArray(_React$useState, 2),
    showModal = _React$useState2[0],
    setShowModal = _React$useState2[1];
  var context = react.useContext(PolicyCardContext);
  var onCheck = function onCheck(isCheck) {
    if (isCheck) {
      onChange(["*"]);
    } else {
      onChange([]);
    }
  };
  var onDelete = function onDelete(name) {
    onChange(selected.filter(function (val) {
      return val !== name;
    }));
  };
  var onSelectCertificates = function onSelectCertificates(names) {
    var tmp = selected.filter(function (element) {
      return element !== "*";
    });
    onChange([].concat(AssociatedCertificate_toConsumableArray(tmp), AssociatedCertificate_toConsumableArray(names)));
    setShowModal(false);
  };
  var renderLabel = function renderLabel() {
    var text = "";
    if (selected.length === 0) {
      text = roles_constants_TOKENS.NoCertificatesSelected;
    } else if (isSelectAll()) {
      text = roles_constants_TOKENS.AllCertificatesSelected;
    } else {
      text = roles_constants_TOKENS.PartialCertificatesSelected;
    }
    return /*#__PURE__*/react.createElement("span", {
      className: "text-body"
    }, text);
  };
  var renderCertificates = function renderCertificates() {
    if (isSelectAll()) {
      return null;
    }
    return selected.map(function (name) {
      return /*#__PURE__*/react.createElement("div", {
        key: name,
        className: "card workspace-card mt-2"
      }, /*#__PURE__*/react.createElement("div", {
        className: "card-body py-2"
      }, /*#__PURE__*/react.createElement("div", {
        className: "row align-items-center"
      }, /*#__PURE__*/react.createElement("div", {
        className: "col-md-11"
      }, /*#__PURE__*/react.createElement("span", null, name)), /*#__PURE__*/react.createElement("div", {
        className: "col-md-1"
      }, /*#__PURE__*/react.createElement("a", {
        className: "btn btn-light",
        onClick: function onClick() {
          return onDelete(name);
        }
      }, /*#__PURE__*/react.createElement("i", {
        className: "fa fa-trash"
      }))))));
    });
  };
  var isSelectAll = function isSelectAll() {
    return selected.includes("*");
  };
  var getUnselectedWorkspaces = function getUnselectedWorkspaces() {
    var certificates = context.presentCertificates;
    var unselected = [];
    var _loop = function _loop(i) {
      if (!selected.find(function (name) {
        return certificates[i].name === name;
      })) {
        unselected.push(certificates[i]);
      }
    };
    for (var i = 0; i < certificates.length; i++) {
      _loop(i);
    }
    return unselected;
  };
  return /*#__PURE__*/react.createElement(react.Fragment, null, showModal && /*#__PURE__*/react.createElement(SelectCertificateModal, {
    onChange: onSelectCertificates,
    show: showModal,
    certificates: getUnselectedWorkspaces(),
    onHide: function onHide() {
      return setShowModal(false);
    }
  }), /*#__PURE__*/react.createElement("div", {
    className: "associated-certificates-header"
  }, /*#__PURE__*/react.createElement("div", {
    className: "row"
  }, /*#__PURE__*/react.createElement("div", {
    className: "col"
  }, /*#__PURE__*/react.createElement("h4", null, roles_constants_TOKENS.AssociatedCertificates)), /*#__PURE__*/react.createElement("div", {
    className: "col-md-auto checkbox mt-2"
  }, /*#__PURE__*/react.createElement("label", null, /*#__PURE__*/react.createElement("input", {
    type: "checkbox",
    className: "form-check-input ms-3",
    checked: isSelectAll(),
    onChange: function onChange(event) {
      return onCheck(event.target.checked);
    }
  }), roles_constants_TOKENS.AssociateAllCertificates), /*#__PURE__*/react.createElement("label", null, /*#__PURE__*/react.createElement("a", {
    className: "btn btn-text",
    onClick: function onClick() {
      return setShowModal(true);
    }
  }, roles_constants_TOKENS.SelectCertificates))))), /*#__PURE__*/react.createElement("hr", null), renderLabel(), renderCertificates());
};
var SelectCertificateModal = function SelectCertificateModal(_ref2) {
  var certificates = _ref2.certificates,
    show = _ref2.show,
    onChange = _ref2.onChange,
    onHide = _ref2.onHide;
  var _useState = (0,react.useState)([]),
    _useState2 = AssociatedCertificate_slicedToArray(_useState, 2),
    selectedCertificates = _useState2[0],
    setSelectedCertificates = _useState2[1];
  var _useState3 = (0,react.useState)(""),
    _useState4 = AssociatedCertificate_slicedToArray(_useState3, 2),
    searchText = _useState4[0],
    setSearchText = _useState4[1];
  var toggleSelection = function toggleSelection(workspaceName) {
    var isSelected = selectedCertificates.includes(workspaceName);
    if (isSelected) {
      setSelectedCertificates(selectedCertificates.filter(function (name) {
        return name !== workspaceName;
      }));
    } else {
      setSelectedCertificates([].concat(AssociatedCertificate_toConsumableArray(selectedCertificates), [workspaceName]));
    }
  };
  var toggleSelectAll = function toggleSelectAll(deselectAll) {
    if (deselectAll) {
      setSelectedCertificates([]);
    } else {
      setSelectedCertificates(certificates.map(function (workspace) {
        return workspace.name;
      }));
    }
  };
  return /*#__PURE__*/react.createElement(Modal/* default */.A, AssociatedCertificate_extends({
    show: show,
    onHide: onHide,
    backdrop: "static",
    className: "select-workspace-modal"
  }, (0,utils/* onInputEnterDown */.yb)(function () {
    return onChange(selectedCertificates);
  })), /*#__PURE__*/react.createElement(Modal/* default */.A.Header, {
    closeButton: true
  }, /*#__PURE__*/react.createElement(Modal/* default */.A.Title, null, roles_constants_TOKENS.SelectCertificates)), /*#__PURE__*/react.createElement(Modal/* default */.A.Body, null, /*#__PURE__*/react.createElement("div", {
    className: "table-filter"
  }, /*#__PURE__*/react.createElement(searchbox/* SearchBox */.G, {
    searchText: searchText,
    onChanged: setSearchText
  })), /*#__PURE__*/react.createElement("div", {
    className: "select-toggle"
  }, /*#__PURE__*/react.createElement("a", {
    className: "btn btn-text",
    onClick: function onClick() {
      return toggleSelectAll(false);
    }
  }, roles_constants_TOKENS.SelectAll), /*#__PURE__*/react.createElement("a", {
    className: "btn btn-text",
    onClick: function onClick() {
      return toggleSelectAll(true);
    }
  }, roles_constants_TOKENS.DeselectAll)), /*#__PURE__*/react.createElement("div", {
    className: "workspace-container"
  }, certificates.map(function (certificate, index) {
    return certificate.name.toLowerCase().includes(searchText.toLowerCase()) && /*#__PURE__*/react.createElement("div", {
      key: index,
      className: "card mt-2 form-group"
    }, /*#__PURE__*/react.createElement("div", {
      className: "card-body py-2 checkbox form-check"
    }, /*#__PURE__*/react.createElement("input", {
      type: "checkbox",
      id: certificate.name,
      className: "form-check-input",
      checked: selectedCertificates.includes(certificate.name),
      onChange: function onChange() {
        return toggleSelection(certificate.name);
      }
    }), /*#__PURE__*/react.createElement("label", {
      htmlFor: certificate.name,
      className: "ps-3 col-form-label form-check-label"
    }, certificate.name)));
  }))), /*#__PURE__*/react.createElement(Modal/* default */.A.Footer, null, /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    onClick: onHide
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-times",
    "aria-hidden": "true"
  }), "\xA0", roles_constants_TOKENS.Close), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "primary",
    onClick: function onClick() {
      return onChange(selectedCertificates);
    }
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-check",
    "aria-hidden": "true"
  }), "\xA0", roles_constants_TOKENS.Apply)));
};
AssociatedCertificate.propTypes = {
  /**
   * workspace names. For example:
   * - []
   * - ["Default", "space1", "space2"]
   * - ["*"]
   */
  selected: (prop_types_default()).array.isRequired,
  /**
   * An event is triggered after the selected certificates are changed.
   */
  onChange: (prop_types_default()).func.isRequired
};
/* harmony default export */ const roles_AssociatedCertificate = (AssociatedCertificate);
;// CONCATENATED MODULE: ./src/settings/roles/CertificatePermissionTable.jsx






var CertificatePermissionTable = function CertificatePermissionTable(_ref) {
  var certificates = _ref.certificates,
    onChange = _ref.onChange;
  var tableCertificateRef = {};
  var onCertificateRowSelectionChange = function onCertificateRowSelectionChange(updater, currentRowSelection) {
    var postSelection = updater(currentRowSelection);
    var rowList = tableCertificateRef.getRows();
    var permissions = [];
    var _loop = function _loop(index) {
      if (postSelection[index]) {
        var _rowList$find$origina;
        permissions.push((_rowList$find$origina = rowList.find(function (element) {
          return element.id === index;
        }).original) === null || _rowList$find$origina === void 0 ? void 0 : _rowList$find$origina.permission);
      }
    };
    for (var index in postSelection) {
      _loop(index);
    }
    onChange({
      certificates: permissions
    });
  };
  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement("div", {
    className: "workspace-header"
  }, /*#__PURE__*/react.createElement("h4", null, roles_constants_TOKENS.CertificatePermissions)), /*#__PURE__*/react.createElement("hr", null), /*#__PURE__*/react.createElement(arc_table/* default */.A, {
    onRowSelectionChange: onCertificateRowSelectionChange,
    key: "c" + certificates,
    columns: PermissionColumns,
    url: null,
    data: CERTIFICATE_PERMISSIONS,
    rowSelection: true,
    paging: false,
    tableApiRef: tableCertificateRef,
    selectedRows: getSelectedRows(CERTIFICATE_PERMISSIONS, certificates)
  }));
};
CertificatePermissionTable.propTypes = {
  /**
   * certificate permissions
   */
  certificates: (prop_types_default()).array.isRequired,
  /**
   * An event is triggered after the workspace permissions or connector permissions are changed.
   */
  onChange: (prop_types_default()).func.isRequired
};
/* harmony default export */ const roles_CertificatePermissionTable = (CertificatePermissionTable);
;// CONCATENATED MODULE: ./src/settings/roles/PolicyCard.jsx
function PolicyCard_typeof(o) { "@babel/helpers - typeof"; return PolicyCard_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, PolicyCard_typeof(o); }
function PolicyCard_slicedToArray(r, e) { return PolicyCard_arrayWithHoles(r) || PolicyCard_iterableToArrayLimit(r, e) || PolicyCard_unsupportedIterableToArray(r, e) || PolicyCard_nonIterableRest(); }
function PolicyCard_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function PolicyCard_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return PolicyCard_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? PolicyCard_arrayLikeToArray(r, a) : void 0; } }
function PolicyCard_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function PolicyCard_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function PolicyCard_arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function PolicyCard_regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ PolicyCard_regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == PolicyCard_typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(PolicyCard_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function PolicyCard_asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function PolicyCard_asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { PolicyCard_asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { PolicyCard_asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }















var JsonEditor = /*#__PURE__*/react.lazy(function () {
  return Promise.all(/* import() */[__webpack_require__.e("vendors-node_modules_codemirror_autocomplete_dist_index_js-node_modules_codemirror_commands_d-53935c"), __webpack_require__.e("vendors-node_modules_codemirror_dist_index_js"), __webpack_require__.e("src_components_arc-codemirror_CopyCodeButton_jsx-src_components_arc-codemirror_FormatCodeButton_jsx"), __webpack_require__.e("src_settings_roles_JsonEditor_jsx")]).then(__webpack_require__.bind(__webpack_require__, 8263));
});
var PolicyCardContext = /*#__PURE__*/react.createContext({});
var buildPolicyJson = /*#__PURE__*/function () {
  var _ref = PolicyCard_asyncToGenerator(/*#__PURE__*/PolicyCard_regeneratorRuntime().mark(function _callee(policy) {
    var _response$data$items;
    var URL, data, response, items, errorMsg;
    return PolicyCard_regeneratorRuntime().wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          URL = "src/buildPolicyJson.rsb?@json";
          data = {
            workspacePermissions: JSON.stringify(policy.workspacePermissions),
            connectorPermissions: JSON.stringify(policy.connectorPermissions),
            certificatePermissions: JSON.stringify(policy.certificatePermissions),
            associatedWorkspaces: JSON.stringify(policy.associatedWorkspaces),
            associatedCertificates: JSON.stringify(policy.associatedCertificates)
          };
          _context.next = 4;
          return axios/* default */.A.post(URL, new URLSearchParams(data));
        case 4:
          response = _context.sent;
          items = (_response$data$items = response.data.items) !== null && _response$data$items !== void 0 ? _response$data$items : [];
          errorMsg = (0,utils/* getResultErrorMessage */.hz)(items);
          if (!errorMsg) {
            _context.next = 11;
            break;
          }
          return _context.abrupt("return", {
            error: errorMsg
          });
        case 11:
          return _context.abrupt("return", buildPolicyObj(policy, {
            json: items[0].json
          }));
        case 12:
        case "end":
          return _context.stop();
      }
    }, _callee);
  }));
  return function buildPolicyJson(_x) {
    return _ref.apply(this, arguments);
  };
}();
var parsePolicyJson = /*#__PURE__*/function () {
  var _ref2 = PolicyCard_asyncToGenerator(/*#__PURE__*/PolicyCard_regeneratorRuntime().mark(function _callee2(policy) {
    var _response$data$items2;
    var URL, data, response, items, errorMsg, role;
    return PolicyCard_regeneratorRuntime().wrap(function _callee2$(_context2) {
      while (1) switch (_context2.prev = _context2.next) {
        case 0:
          _context2.prev = 0;
          JSON.parse(policy.json);
          _context2.next = 7;
          break;
        case 4:
          _context2.prev = 4;
          _context2.t0 = _context2["catch"](0);
          return _context2.abrupt("return", {
            error: _context2.t0.message
          });
        case 7:
          URL = "src/parsePolicyJson.rsb?@json";
          data = {
            json: policy.json
          };
          _context2.next = 11;
          return axios/* default */.A.post(URL, new URLSearchParams(data));
        case 11:
          response = _context2.sent;
          items = (_response$data$items2 = response.data.items) !== null && _response$data$items2 !== void 0 ? _response$data$items2 : [];
          errorMsg = (0,utils/* getResultErrorMessage */.hz)(items);
          if (!errorMsg) {
            _context2.next = 18;
            break;
          }
          return _context2.abrupt("return", {
            error: errorMsg
          });
        case 18:
          role = items[0];
          return _context2.abrupt("return", buildPolicyObj(policy, role));
        case 20:
        case "end":
          return _context2.stop();
      }
    }, _callee2, null, [[0, 4]]);
  }));
  return function parsePolicyJson(_x2) {
    return _ref2.apply(this, arguments);
  };
}();
var PolicyCardBody = function PolicyCardBody(_ref3) {
  var expand = _ref3.expand,
    isDesigner = _ref3.isDesigner,
    presentWorkspaces = _ref3.presentWorkspaces,
    policy = _ref3.policy,
    onChange = _ref3.onChange;
  var context = react.useContext(PolicyCardContext);
  var onWorkspaceConnectorPermissionsChange = function onWorkspaceConnectorPermissionsChange(permissions) {
    onChange(buildPolicyObj(policy, {
      connectorPermissions: permissions.connectors,
      workspacePermissions: permissions.workspaces
    }));
  };
  var onCertificatePermissionsChange = function onCertificatePermissionsChange(permissions) {
    onChange(buildPolicyObj(policy, {
      certificatePermissions: permissions.certificates
    }));
  };
  var onAssociatedWorkspacesChange = function onAssociatedWorkspacesChange(names) {
    onChange(buildPolicyObj(policy, {
      associatedWorkspaces: names
    }));
  };
  var onAssociatedCertificatesChange = function onAssociatedCertificatesChange(names) {
    onChange(buildPolicyObj(policy, {
      associatedCertificates: names
    }));
  };
  var onJsonChange = function onJsonChange(jsonStr) {
    onChange(buildPolicyObj(policy, {
      json: jsonStr
    }));
  };
  var getPermissionNames = function getPermissionNames(type, permissions) {
    if (permissions.length === 1 && permissions[0] === "*") {
      return [roles_constants_TOKENS.AllPermissions];
    }
    var defines = [];
    if (type === "workspace") {
      defines = WORKSPACE_PERMISSIONS;
    } else if (type === "connector") {
      defines = CONNECTOR_PERMISSIONS;
    } else if (type === "certificate") {
      defines = CERTIFICATE_PERMISSIONS;
    }
    return permissions.map(function (permission) {
      var element = defines.find(function (define) {
        return define.permission === permission;
      });
      if (element) {
        return element.name;
      }
    });
  };
  var renderCollapseBody = function renderCollapseBody() {
    var wpNames = getPermissionNames("workspace", policy.workspacePermissions).join(", ");
    var cpNames = getPermissionNames("connector", policy.connectorPermissions).join(", ");
    var certNames = getPermissionNames("certificate", policy.certificatePermissions).join(", ");
    var workspaceCount = policy.associatedWorkspaces.length;
    if (1 === workspaceCount && policy.associatedWorkspaces[0] === "*") {
      workspaceCount = presentWorkspaces.length;
    }
    var certificateCount = policy.associatedCertificates.length;
    if (1 === certificateCount && policy.associatedCertificates[0] === "*") {
      certificateCount = context.presentCertificates.length;
    }
    return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement("div", {
      className: "row"
    }, /*#__PURE__*/react.createElement("div", {
      className: "col-md-10"
    }, /*#__PURE__*/react.createElement("p", {
      className: "mb-1"
    }, /*#__PURE__*/react.createElement("span", {
      className: "mtext-body b-1"
    }, roles_constants_TOKENS.WorkspacePermissions, "\xA0"), /*#__PURE__*/react.createElement("span", {
      className: "text-secondary lh-lg"
    }, wpNames)), /*#__PURE__*/react.createElement("p", {
      className: "mb-1"
    }, /*#__PURE__*/react.createElement("span", {
      className: "text-body mb-1"
    }, roles_constants_TOKENS.ConnectorPermissions, "\xA0"), /*#__PURE__*/react.createElement("span", {
      className: "text-secondary lh-lg"
    }, cpNames))), /*#__PURE__*/react.createElement("div", {
      className: "col-md-2"
    }, /*#__PURE__*/react.createElement("p", {
      className: "mb-1"
    }, /*#__PURE__*/react.createElement("span", {
      className: "text-body mb-1"
    }, roles_constants_TOKENS.AssociatedWorkspaces, "\xA0"), /*#__PURE__*/react.createElement("span", {
      className: "text-secondary lh-lg"
    }, workspaceCount)))), /*#__PURE__*/react.createElement("hr", null), /*#__PURE__*/react.createElement("div", {
      className: "row"
    }, /*#__PURE__*/react.createElement("div", {
      className: "col-md-10"
    }, /*#__PURE__*/react.createElement("p", {
      className: "mb-1"
    }, /*#__PURE__*/react.createElement("span", {
      className: "mtext-body b-1"
    }, roles_constants_TOKENS.CertificatePermissions, "\xA0"), /*#__PURE__*/react.createElement("span", {
      className: "text-secondary lh-lg"
    }, certNames))), /*#__PURE__*/react.createElement("div", {
      className: "col-md-2"
    }, /*#__PURE__*/react.createElement("p", {
      className: "mb-1"
    }, /*#__PURE__*/react.createElement("span", {
      className: "text-body mb-1"
    }, roles_constants_TOKENS.AssociatedCertificates, "\xA0"), /*#__PURE__*/react.createElement("span", {
      className: "text-secondary lh-lg"
    }, certificateCount)))));
  };
  var renderExpandBody = function renderExpandBody() {
    return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement("div", {
      className: "row"
    }, /*#__PURE__*/react.createElement("div", {
      className: "col-md-6"
    }, /*#__PURE__*/react.createElement(WorkspaceConnectorPermissionTable, {
      connectors: policy.connectorPermissions,
      workspaces: policy.workspacePermissions,
      onChange: onWorkspaceConnectorPermissionsChange
    })), /*#__PURE__*/react.createElement("div", {
      className: "col-md-6"
    }, /*#__PURE__*/react.createElement(roles_AssociatedWorkspace, {
      onChange: onAssociatedWorkspacesChange,
      workspaces: presentWorkspaces,
      selected: policy.associatedWorkspaces
    }))), /*#__PURE__*/react.createElement("hr", null), /*#__PURE__*/react.createElement("div", {
      className: "row"
    }, /*#__PURE__*/react.createElement("div", {
      className: "col-md-6"
    }, /*#__PURE__*/react.createElement(roles_CertificatePermissionTable, {
      certificates: policy.certificatePermissions,
      onChange: onCertificatePermissionsChange
    })), /*#__PURE__*/react.createElement("div", {
      className: "col-md-6"
    }, /*#__PURE__*/react.createElement(roles_AssociatedCertificate, {
      onChange: onAssociatedCertificatesChange,
      selected: policy.associatedCertificates
    }))));
  };
  var renderJsonEditor = function renderJsonEditor() {
    return /*#__PURE__*/react.createElement("div", null, /*#__PURE__*/react.createElement(arc_suspense/* default */.A, null, /*#__PURE__*/react.createElement(JsonEditor, {
      text: policy.json,
      onChange: onJsonChange,
      readOnly: context.isBuiltinRole,
      autoFocus: false
    })));
  };
  if (expand) {
    return isDesigner ? renderExpandBody() : renderJsonEditor();
  } else {
    return renderCollapseBody();
  }
};
var PolicyCard = function PolicyCard(_ref4) {
  var name = _ref4.name,
    enableDelete = _ref4.enableDelete,
    expand = _ref4.expand,
    presentWorkspaces = _ref4.presentWorkspaces,
    policy = _ref4.policy,
    enableJsonEditor = _ref4.enableJsonEditor,
    onToggle = _ref4.onToggle,
    onDelete = _ref4.onDelete,
    onPolicyChange = _ref4.onPolicyChange;
  var _useState = (0,react.useState)(true),
    _useState2 = PolicyCard_slicedToArray(_useState, 2),
    isDesigner = _useState2[0],
    setIsDesigner = _useState2[1];
  var _useState3 = (0,react.useState)(false),
    _useState4 = PolicyCard_slicedToArray(_useState3, 2),
    showModal = _useState4[0],
    setShowModal = _useState4[1];
  var _React$useState = react.useState(null),
    _React$useState2 = PolicyCard_slicedToArray(_React$useState, 2),
    error = _React$useState2[0],
    setError = _React$useState2[1];
  var _React$useState3 = react.useState({}),
    _React$useState4 = PolicyCard_slicedToArray(_React$useState3, 2),
    parsedPolicy = _React$useState4[0],
    setParsedPolicy = _React$useState4[1];
  react.useEffect(function () {
    if (isOnlyEditor()) {
      setIsDesigner(false);
    }
  }, [policy.json]);
  var isOnlyEditor = function isOnlyEditor() {
    return policy.json && policy.json !== "{}";
  };
  var handleToggle = function handleToggle() {
    onToggle(!expand);
  };
  var onToggleDesigner = /*#__PURE__*/function () {
    var _ref5 = PolicyCard_asyncToGenerator(/*#__PURE__*/PolicyCard_regeneratorRuntime().mark(function _callee3(isDesignerBtn) {
      var response, _response;
      return PolicyCard_regeneratorRuntime().wrap(function _callee3$(_context3) {
        while (1) switch (_context3.prev = _context3.next) {
          case 0:
            if (!(isDesignerBtn === isDesigner)) {
              _context3.next = 2;
              break;
            }
            return _context3.abrupt("return");
          case 2:
            if (isDesigner) {
              _context3.next = 9;
              break;
            }
            _context3.next = 5;
            return parsePolicyJson(policy);
          case 5:
            response = _context3.sent;
            if (response.error) {
              setError(response.error);
            } else {
              if (response.json && response.json !== "{}") {
                // Show warning modal
                // The json in editor cannot be rendered to Designer.
                setParsedPolicy(response);
                setShowModal(true);
              } else {
                onPolicyChange(response);
                setIsDesigner(true);
                setError(null);
              }
            }
            _context3.next = 19;
            break;
          case 9:
            _context3.next = 11;
            return buildPolicyJson(policy);
          case 11:
            _response = _context3.sent;
            if (!_response.error) {
              _context3.next = 17;
              break;
            }
            setError(_response.error);
            return _context3.abrupt("return");
          case 17:
            onPolicyChange(_response);
          case 18:
            setIsDesigner(false);
          case 19:
          case "end":
            return _context3.stop();
        }
      }, _callee3);
    }));
    return function onToggleDesigner(_x3) {
      return _ref5.apply(this, arguments);
    };
  }();
  var onChangeToDesigner = /*#__PURE__*/function () {
    var _ref6 = PolicyCard_asyncToGenerator(/*#__PURE__*/PolicyCard_regeneratorRuntime().mark(function _callee4() {
      return PolicyCard_regeneratorRuntime().wrap(function _callee4$(_context4) {
        while (1) switch (_context4.prev = _context4.next) {
          case 0:
            onPolicyChange(buildPolicyObj(parsedPolicy, {
              json: ""
            }));
            setIsDesigner(true);
            setShowModal(false);
            setError(null);
          case 4:
          case "end":
            return _context4.stop();
        }
      }, _callee4);
    }));
    return function onChangeToDesigner() {
      return _ref6.apply(this, arguments);
    };
  }();
  var renderModal = function renderModal() {
    return /*#__PURE__*/react.createElement(Modal/* default */.A, {
      className: "remove-report-modal",
      show: showModal,
      backdrop: "static",
      onHide: function onHide() {
        return setShowModal(false);
      }
    }, /*#__PURE__*/react.createElement(Modal/* default */.A.Header, {
      closeButton: true
    }, /*#__PURE__*/react.createElement(Modal/* default */.A.Title, null, roles_constants_TOKENS.UnableToDesignerViewHeader)), /*#__PURE__*/react.createElement(Modal/* default */.A.Body, null, /*#__PURE__*/react.createElement("span", {
      dangerouslySetInnerHTML: {
        __html: roles_constants_TOKENS.UnableToDesignerViewBody
      }
    })), /*#__PURE__*/react.createElement(Modal/* default */.A.Footer, null, /*#__PURE__*/react.createElement("button", {
      className: "btn btn-outline-secondary",
      onClick: function onClick() {
        return setShowModal(false);
      }
    }, /*#__PURE__*/react.createElement("i", {
      className: "fa fa-times"
    }), "\xA0", roles_constants_TOKENS.Close), /*#__PURE__*/react.createElement("button", {
      className: "btn btn-primary",
      onClick: onChangeToDesigner
    }, /*#__PURE__*/react.createElement("i", {
      className: "fa fa-arrow-right-arrow-left"
    }), "\xA0", roles_constants_TOKENS.ChangeToDesignerView)));
  };
  var renderCardBody = function renderCardBody() {
    if (enableJsonEditor) {
      if (isOnlyEditor() && !expand) {
        return /*#__PURE__*/react.createElement("div", {
          className: "card-text"
        }, roles_constants_TOKENS.NoPolicySummary);
      } else {
        return /*#__PURE__*/react.createElement(PolicyCardBody, {
          expand: expand,
          isDesigner: isDesigner,
          presentWorkspaces: presentWorkspaces,
          policy: policy,
          onChange: onPolicyChange
        });
      }
    } else {
      if (isOnlyEditor()) {
        if (expand) {
          return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement("div", {
            className: "alert alert-secondary",
            role: "alert"
          }, roles_constants_TOKENS.JsonEditorWarning, /*#__PURE__*/react.createElement("a", {
            className: "btn btn-text",
            onClick: function onClick() {
              return onToggleDesigner(true);
            }
          }, roles_constants_TOKENS.ChangeToDesignerView)), /*#__PURE__*/react.createElement(PolicyCardBody, {
            expand: expand,
            isDesigner: isDesigner,
            presentWorkspaces: presentWorkspaces,
            policy: policy,
            onChange: onPolicyChange
          }));
        } else {
          return /*#__PURE__*/react.createElement("div", {
            className: "card-text alert alert-warning"
          }, roles_constants_TOKENS.UnableToRenderInDesigner);
        }
      } else {
        return /*#__PURE__*/react.createElement(PolicyCardBody, {
          expand: expand,
          isDesigner: isDesigner,
          presentWorkspaces: presentWorkspaces,
          policy: policy,
          onChange: onPolicyChange
        });
      }
    }
  };
  var renderEditorToggle = function renderEditorToggle() {
    if (!enableJsonEditor) {
      return null;
    }
    if (expand) {
      return /*#__PURE__*/react.createElement("div", {
        role: "group",
        className: "btn-group"
      }, /*#__PURE__*/react.createElement("button", {
        type: "button",
        className: "btn " + (isDesigner ? "btn-primary" : "btn-outline-secondary"),
        onClick: function onClick() {
          return onToggleDesigner(true);
        }
      }, /*#__PURE__*/react.createElement("i", {
        className: "fa fa-list"
      }), "\xA0", roles_constants_TOKENS.PolicyDesigner), /*#__PURE__*/react.createElement("button", {
        type: "button",
        className: "btn " + (isDesigner ? "btn-outline-secondary" : "btn-primary"),
        onClick: function onClick() {
          return onToggleDesigner(false);
        }
      }, /*#__PURE__*/react.createElement("i", {
        className: "fa fa-code"
      }), "\xA0", roles_constants_TOKENS.PolicyJson));
    }
    if (isOnlyEditor()) {
      return /*#__PURE__*/react.createElement("span", {
        className: "badge rounded-pill bg-secondary"
      }, /*#__PURE__*/react.createElement("i", {
        className: "fa fa-code"
      }), "\xA0JSON");
    }
    return null;
  };
  return /*#__PURE__*/react.createElement(Card/* default */.A, {
    className: "mt-3" + (isAcceptablePolicy(policy) ? "" : " error")
  }, renderModal(), /*#__PURE__*/react.createElement(Card/* default */.A.Header, null, /*#__PURE__*/react.createElement("div", {
    className: "pull-left"
  }, /*#__PURE__*/react.createElement("a", {
    className: "btn btn-light",
    onClick: handleToggle
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa ".concat(expand ? "fa-chevron-up" : "fa-chevron-down")
  })), /*#__PURE__*/react.createElement("span", null, name)), /*#__PURE__*/react.createElement("div", {
    className: "pull-right"
  }, renderEditorToggle(), /*#__PURE__*/react.createElement("a", {
    className: "btn btn-light ".concat(enableDelete ? "" : "disabled"),
    onClick: function onClick() {
      return onDelete(name);
    }
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-trash"
  })))), /*#__PURE__*/react.createElement(Card/* default */.A.Body, null, /*#__PURE__*/react.createElement(DismissibleAlert/* default */.A, {
    type: "error",
    message: error,
    onClose: function onClose() {
      return setError(null);
    }
  }), renderCardBody()));
};
PolicyCard.propTypes = {
  /**
   * policy name
   */
  name: (prop_types_default()).string.isRequired,
  /**
   * when false the delete button is disabled.
   */
  enableDelete: (prop_types_default()).bool.isRequired,
  /**
   * when true the policy is expanded.
   */
  expand: (prop_types_default()).bool.isRequired,
  /**
   * policy object.
   * {
   *  workspacePermissions: [],
   *  connectorPermissions: [],
   *  certificatePermissions: [],
   *  associatedWorkspaces: []
   *  associatedCertificates: []
   * }
   */
  policy: (prop_types_default()).object.isRequired,
  /**
   * all existent workspace names
   */
  presentWorkspaces: (prop_types_default()).array.isRequired,
  /**
   * An event is triggered after the arrow button is clicked.
   */
  onToggle: (prop_types_default()).func.isRequired,
  /**
   * An event is triggered after the delete button is clicked. The event will not be trigger when the enableDelete is false.
   */
  onDelete: (prop_types_default()).func.isRequired,
  /**
   * An event is triggered after the policy changes.
   */
  onPolicyChange: (prop_types_default()).func.isRequired
};

;// CONCATENATED MODULE: ./src/settings/roles/SelectUserModal.jsx
function SelectUserModal_extends() { return SelectUserModal_extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, SelectUserModal_extends.apply(null, arguments); }
function SelectUserModal_slicedToArray(r, e) { return SelectUserModal_arrayWithHoles(r) || SelectUserModal_iterableToArrayLimit(r, e) || SelectUserModal_unsupportedIterableToArray(r, e) || SelectUserModal_nonIterableRest(); }
function SelectUserModal_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function SelectUserModal_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return SelectUserModal_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? SelectUserModal_arrayLikeToArray(r, a) : void 0; } }
function SelectUserModal_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function SelectUserModal_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function SelectUserModal_arrayWithHoles(r) { if (Array.isArray(r)) return r; }









var SelectUserModal = function SelectUserModal(_ref) {
  var users = _ref.users,
    show = _ref.show,
    onChange = _ref.onChange,
    onHide = _ref.onHide;
  var _useState = (0,react.useState)(""),
    _useState2 = SelectUserModal_slicedToArray(_useState, 2),
    searchText = _useState2[0],
    setSearchText = _useState2[1];
  var _useState3 = (0,react.useState)(new Set()),
    _useState4 = SelectUserModal_slicedToArray(_useState3, 2),
    selectedUsers = _useState4[0],
    setSelectedUsers = _useState4[1];
  var tableRef = {};
  var handleNext = function handleNext() {
    onChange(Array.from(selectedUsers));
  };
  var columns = [{
    id: "username",
    header: roles_constants_TOKENS.UserName,
    accessorKey: "user"
  }, {
    id: "active",
    header: roles_constants_TOKENS.UserStatus,
    accessorKey: "active",
    cell: function cell(props) {
      return props.getValue().toLowerCase() === "true" ? roles_constants_TOKENS.UserActive : roles_constants_TOKENS.UserInactive;
    }
  }];
  var onRowSelectionChange = function onRowSelectionChange(updater, currentRowSelection) {
    var postSelection = updater(currentRowSelection);
    var rowList = tableRef.getRows(); // It only embraces rows in current page.
    var userSet = new Set(selectedUsers);
    if (Object.keys(postSelection).length > Object.keys(currentRowSelection).length) {
      var _loop = function _loop(index) {
        if (postSelection[index]) {
          var userRecord = rowList.find(function (element) {
            return element.id === index;
          });
          if (userRecord) {
            var _userRecord$original;
            userSet.add((_userRecord$original = userRecord.original) === null || _userRecord$original === void 0 ? void 0 : _userRecord$original.user);
          }
        }
      };
      // add
      for (var index in postSelection) {
        _loop(index);
      }
    } else if (Object.keys(postSelection).length < Object.keys(currentRowSelection).length) {
      var _loop2 = function _loop2(_index) {
        if (!postSelection[_index]) {
          var userRecord = rowList.find(function (element) {
            return element.id === _index;
          });
          if (userRecord) {
            var _userRecord$original2;
            userSet["delete"]((_userRecord$original2 = userRecord.original) === null || _userRecord$original2 === void 0 ? void 0 : _userRecord$original2.user);
          }
        }
      };
      // remove
      for (var _index in currentRowSelection) {
        _loop2(_index);
      }
    }
    setSelectedUsers(userSet);
  };
  var getSelectedRows = function getSelectedRows(tableData) {
    var selectedRows = {};
    for (var i = 0; i < tableData.length; i++) {
      if (selectedUsers.has(tableData[i].user)) {
        selectedRows[i] = true;
      }
    }
    return selectedRows;
  };
  var filteredData = searchText ? users.filter(function (user) {
    return user.user.toLowerCase().includes(searchText.toLowerCase());
  }) : users;
  return /*#__PURE__*/react.createElement(Modal/* default */.A, SelectUserModal_extends({
    className: "adduser-modal form-group",
    backdrop: "static",
    show: show,
    onHide: onHide
  }, (0,utils/* onInputEnterDown */.yb)(handleNext)), /*#__PURE__*/react.createElement(Modal/* default */.A.Header, {
    closeButton: true
  }, /*#__PURE__*/react.createElement(Modal/* default */.A.Title, null, roles_constants_TOKENS.AddUsers)), /*#__PURE__*/react.createElement(Modal/* default */.A.Body, null, /*#__PURE__*/react.createElement("div", {
    className: "table-filter"
  }, /*#__PURE__*/react.createElement(searchbox/* SearchBox */.G, {
    searchText: searchText,
    onChanged: setSearchText
  })), /*#__PURE__*/react.createElement(arc_table/* default */.A, {
    key: filteredData.length,
    columns: columns,
    initialSorting: [{
      id: "username",
      desc: false
    }],
    data: filteredData,
    paging: false,
    rowSelection: true,
    tableApiRef: tableRef,
    onRowSelectionChange: onRowSelectionChange,
    selectedRows: getSelectedRows(filteredData)
  })), /*#__PURE__*/react.createElement(Modal/* default */.A.Footer, null, /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    onClick: onHide
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-times",
    "aria-hidden": "true"
  }), "\xA0", roles_constants_TOKENS.Close), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "primary",
    onClick: handleNext,
    disabled: selectedUsers.size === 0
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa-regular fa-arrow-right"
  }), "\xA0", roles_constants_TOKENS.Apply)));
};
SelectUserModal.propTypes = {
  /**
   * users. for example:
   * [{
   *   name: "admin",
   *   active: true
   * },
   * {
   *   name: "rssbus",
   *   active: false
   * }]
   */
  users: (prop_types_default()).array.isRequired,
  /**
   * When true The modal will show itself.
   */
  show: (prop_types_default()).bool.isRequired,
  /**
   * An event is triggered after the Next button is clicked.
   */
  onChange: (prop_types_default()).func.isRequired,
  /**
   * A callback fired when the header or footer closeButton is clicked.
   */
  onHide: (prop_types_default()).func
};
/* harmony default export */ const roles_SelectUserModal = (SelectUserModal);
;// CONCATENATED MODULE: ./src/settings/shared/constants.js

var shared_constants_TOKENS = {
  DeleteModalCancel: 'Cancel',
  DeleteModalDelete: 'Delete',
  DeleteModalConfirm1: 'Are you sure you want to delete the'
};
;// CONCATENATED MODULE: ./src/settings/shared/ConfirmRemovalModal.jsx
function ConfirmRemovalModal_typeof(o) { "@babel/helpers - typeof"; return ConfirmRemovalModal_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, ConfirmRemovalModal_typeof(o); }
function ConfirmRemovalModal_regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ ConfirmRemovalModal_regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == ConfirmRemovalModal_typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(ConfirmRemovalModal_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function ConfirmRemovalModal_asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function ConfirmRemovalModal_asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { ConfirmRemovalModal_asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { ConfirmRemovalModal_asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function ConfirmRemovalModal_slicedToArray(r, e) { return ConfirmRemovalModal_arrayWithHoles(r) || ConfirmRemovalModal_iterableToArrayLimit(r, e) || ConfirmRemovalModal_unsupportedIterableToArray(r, e) || ConfirmRemovalModal_nonIterableRest(); }
function ConfirmRemovalModal_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function ConfirmRemovalModal_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return ConfirmRemovalModal_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? ConfirmRemovalModal_arrayLikeToArray(r, a) : void 0; } }
function ConfirmRemovalModal_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function ConfirmRemovalModal_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function ConfirmRemovalModal_arrayWithHoles(r) { if (Array.isArray(r)) return r; }





function ConfirmRemovalModal(_ref) {
  var show = _ref.show,
    header = _ref.header,
    nameList = _ref.nameList,
    handleClose = _ref.handleClose,
    handleDeleted = _ref.handleDeleted;
  var _React$useState = react.useState(null),
    _React$useState2 = ConfirmRemovalModal_slicedToArray(_React$useState, 2),
    errorMessage = _React$useState2[0],
    setErrorMessage = _React$useState2[1];
  var onDelete = /*#__PURE__*/function () {
    var _ref2 = ConfirmRemovalModal_asyncToGenerator(/*#__PURE__*/ConfirmRemovalModal_regeneratorRuntime().mark(function _callee() {
      return ConfirmRemovalModal_regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            if (handleDeleted) {
              handleDeleted(function (msg) {
                if (msg) {
                  setErrorMessage(msg);
                }
              });
            }
          case 1:
          case "end":
            return _context.stop();
        }
      }, _callee);
    }));
    return function onDelete() {
      return _ref2.apply(this, arguments);
    };
  }();
  var renderBody = function renderBody() {
    return /*#__PURE__*/react.createElement("span", {
      className: "text-wrap text-break"
    }, shared_constants_TOKENS.DeleteModalConfirm1, "\xA0", /*#__PURE__*/react.createElement("b", null, nameList.join(", ")), "\xA0?");
  };
  return /*#__PURE__*/react.createElement(Modal/* default */.A, {
    className: "remove-report-modal",
    show: show,
    backdrop: "static",
    onHide: handleClose
  }, /*#__PURE__*/react.createElement(Modal/* default */.A.Header, {
    closeButton: true
  }, /*#__PURE__*/react.createElement(Modal/* default */.A.Title, null, header)), /*#__PURE__*/react.createElement(Modal/* default */.A.Body, null, /*#__PURE__*/react.createElement(DismissibleAlert/* default */.A, {
    type: "error",
    message: errorMessage,
    onClose: function onClose() {
      return setErrorMessage(null);
    }
  }), renderBody()), /*#__PURE__*/react.createElement(Modal/* default */.A.Footer, null, /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    onClick: handleClose
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-times"
  }), "\xA0", shared_constants_TOKENS.DeleteModalCancel), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "danger",
    autoFocus: true,
    disabled: !!errorMessage,
    onClick: onDelete
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-trash"
  }), "\xA0", shared_constants_TOKENS.DeleteModalDelete)));
}
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Form.js + 9 modules
var Form = __webpack_require__(44324);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Row.js
var Row = __webpack_require__(44479);
// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Col.js
var Col = __webpack_require__(61105);
;// CONCATENATED MODULE: ./src/settings/roles/EditRoleModal.jsx
function EditRoleModal_extends() { return EditRoleModal_extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, EditRoleModal_extends.apply(null, arguments); }
function EditRoleModal_slicedToArray(r, e) { return EditRoleModal_arrayWithHoles(r) || EditRoleModal_iterableToArrayLimit(r, e) || EditRoleModal_unsupportedIterableToArray(r, e) || EditRoleModal_nonIterableRest(); }
function EditRoleModal_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function EditRoleModal_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return EditRoleModal_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? EditRoleModal_arrayLikeToArray(r, a) : void 0; } }
function EditRoleModal_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function EditRoleModal_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function EditRoleModal_arrayWithHoles(r) { if (Array.isArray(r)) return r; }









var EditRoleModal = function EditRoleModal(_ref) {
  var name = _ref.name,
    description = _ref.description,
    show = _ref.show,
    onChange = _ref.onChange,
    onHide = _ref.onHide;
  var _React$useState = react.useState(name),
    _React$useState2 = EditRoleModal_slicedToArray(_React$useState, 2),
    nameInput = _React$useState2[0],
    setNameInput = _React$useState2[1];
  var _React$useState3 = react.useState(description),
    _React$useState4 = EditRoleModal_slicedToArray(_React$useState3, 2),
    descriptionInput = _React$useState4[0],
    setDescriptionInput = _React$useState4[1];
  var handleApply = function handleApply() {
    if (onChange) {
      onChange({
        name: nameInput,
        description: descriptionInput
      });
    }
  };
  return /*#__PURE__*/react.createElement(Modal/* default */.A, EditRoleModal_extends({
    className: "editrole-modal form-group",
    backdrop: "static",
    show: show,
    onHide: onHide
  }, (0,utils/* onInputEnterDown */.yb)(handleApply)), /*#__PURE__*/react.createElement(Modal/* default */.A.Header, {
    closeButton: true
  }, /*#__PURE__*/react.createElement(Modal/* default */.A.Title, null, roles_constants_TOKENS.EditRoleModal)), /*#__PURE__*/react.createElement(Modal/* default */.A.Body, null, /*#__PURE__*/react.createElement(Form/* default */.A.Group, {
    as: Row/* default */.A,
    className: "mb-3"
  }, /*#__PURE__*/react.createElement(Form/* default */.A.Label, {
    column: true,
    md: "4"
  }, roles_constants_TOKENS.RoleName), /*#__PURE__*/react.createElement(Col/* default */.A, {
    md: "8"
  }, /*#__PURE__*/react.createElement(Form/* default */.A.Control, {
    placeholder: roles_constants_TOKENS.RoleNamePlaceholder,
    autoFocus: true,
    value: nameInput,
    onChange: function onChange(event) {
      return setNameInput(event.target.value);
    }
  }))), /*#__PURE__*/react.createElement(Form/* default */.A.Group, {
    as: Row/* default */.A,
    className: "mb-3"
  }, /*#__PURE__*/react.createElement(Form/* default */.A.Label, {
    column: true,
    md: "4"
  }, roles_constants_TOKENS.RoleDescription), /*#__PURE__*/react.createElement(Col/* default */.A, {
    md: "8"
  }, /*#__PURE__*/react.createElement(Form/* default */.A.Control, {
    as: "textarea",
    rows: 3,
    value: descriptionInput,
    onChange: function onChange(event) {
      return setDescriptionInput(event.target.value);
    },
    placeholder: roles_constants_TOKENS.RoleDescPlaceholder
  })))), /*#__PURE__*/react.createElement(Modal/* default */.A.Footer, null, /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    onClick: onHide
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-times",
    "aria-hidden": "true"
  }), "\xA0", roles_constants_TOKENS.Close), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "primary",
    onClick: handleApply,
    disabled: !nameInput
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa-regular fa-arrow-right"
  }), "\xA0", roles_constants_TOKENS.Apply)));
};
EditRoleModal.propTypes = {
  /**
   * role name
   */
  name: (prop_types_default()).string.isRequired,
  /**
   * role description
   */
  description: (prop_types_default()).string,
  /**
   * When true The modal will show itself.
   */
  show: (prop_types_default()).bool.isRequired,
  /**
   * An event is triggered after the Next button is clicked.
   */
  onChange: (prop_types_default()).func.isRequired,
  /**
   * A callback fired when the header or footer closeButton is clicked.
   */
  onHide: (prop_types_default()).func
};
/* harmony default export */ const roles_EditRoleModal = (EditRoleModal);
;// CONCATENATED MODULE: ./src/components/unsaved-prompt/index.jsx


var UnsavedPrompt = function UnsavedPrompt(_ref) {
  var hasUnsavedChanges = _ref.hasUnsavedChanges;
  react.useEffect(function () {
    var onBeforeUnload = function onBeforeUnload(e) {
      if (hasUnsavedChanges) {
        e.preventDefault();
        e.returnValue = "";
      }
    };
    window.addEventListener("beforeunload", onBeforeUnload);
    return function () {
      window.removeEventListener("beforeunload", onBeforeUnload);
    };
  }, [hasUnsavedChanges]);
  return /*#__PURE__*/react.createElement(react.Fragment, null);
};
UnsavedPrompt.propTypes = {
  /**
   * Whether to show the modal?
   */
  hasUnsavedChanges: (prop_types_default()).bool
};
/* harmony default export */ const unsaved_prompt = (UnsavedPrompt);
// EXTERNAL MODULE: ./node_modules/react-dom/index.js
var react_dom = __webpack_require__(40961);
// EXTERNAL MODULE: ./node_modules/react-querybuilder/dist/react-querybuilder.mjs + 2 modules
var react_querybuilder = __webpack_require__(18149);
;// CONCATENATED MODULE: ./src/settings/roles/RoleDetails.jsx
function RoleDetails_typeof(o) { "@babel/helpers - typeof"; return RoleDetails_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, RoleDetails_typeof(o); }
function RoleDetails_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function RoleDetails_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? RoleDetails_ownKeys(Object(t), !0).forEach(function (r) { RoleDetails_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : RoleDetails_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function RoleDetails_defineProperty(e, r, t) { return (r = RoleDetails_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function RoleDetails_toPropertyKey(t) { var i = RoleDetails_toPrimitive(t, "string"); return "symbol" == RoleDetails_typeof(i) ? i : i + ""; }
function RoleDetails_toPrimitive(t, r) { if ("object" != RoleDetails_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != RoleDetails_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function RoleDetails_regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ RoleDetails_regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == RoleDetails_typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(RoleDetails_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function RoleDetails_asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function RoleDetails_asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { RoleDetails_asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { RoleDetails_asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function RoleDetails_toConsumableArray(r) { return RoleDetails_arrayWithoutHoles(r) || RoleDetails_iterableToArray(r) || RoleDetails_unsupportedIterableToArray(r) || RoleDetails_nonIterableSpread(); }
function RoleDetails_nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function RoleDetails_iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function RoleDetails_arrayWithoutHoles(r) { if (Array.isArray(r)) return RoleDetails_arrayLikeToArray(r); }
function RoleDetails_slicedToArray(r, e) { return RoleDetails_arrayWithHoles(r) || RoleDetails_iterableToArrayLimit(r, e) || RoleDetails_unsupportedIterableToArray(r, e) || RoleDetails_nonIterableRest(); }
function RoleDetails_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function RoleDetails_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return RoleDetails_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? RoleDetails_arrayLikeToArray(r, a) : void 0; } }
function RoleDetails_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function RoleDetails_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function RoleDetails_arrayWithHoles(r) { if (Array.isArray(r)) return r; }




















var PolicyTab = function PolicyTab(_ref) {
  var policies = _ref.policies,
    presentWorkspaces = _ref.presentWorkspaces,
    maxPolicy = _ref.maxPolicy,
    enableJsonEditor = _ref.enableJsonEditor,
    onChange = _ref.onChange,
    onError = _ref.onError;
  var ref = react.useRef();
  var _React$useState = react.useState([0]),
    _React$useState2 = RoleDetails_slicedToArray(_React$useState, 2),
    expands = _React$useState2[0],
    setExpands = _React$useState2[1];
  var _React$useState3 = react.useState((0,react_querybuilder/* generateID */.ni)()),
    _React$useState4 = RoleDetails_slicedToArray(_React$useState3, 2),
    keyPrefix = _React$useState4[0],
    setKeyPrefix = _React$useState4[1];
  var onAdd = function onAdd() {
    if (policies.length >= maxPolicy) {
      onError(utils/* FormatString */.FJ(roles_constants_TOKENS.ExceedMaxPolicyCount, maxPolicy));
      return;
    }
    if (onChange) {
      var _ref$current;
      (0,react_dom.flushSync)(function () {
        var newPolicy = buildPolicyObj({}, {});
        newPolicy.workspacePermissions = ["Read"];
        var newPolicies = [].concat(RoleDetails_toConsumableArray(policies), [newPolicy]);
        onChange(newPolicies);
        setExpands([].concat(RoleDetails_toConsumableArray(expands), [newPolicies.length - 1]));
      });
      (_ref$current = ref.current) === null || _ref$current === void 0 || _ref$current.scrollIntoView();
    }
  };
  var _onDelete = function onDelete(index) {
    var newArray = [];
    for (var i = 0; i < expands.length; i++) {
      if (expands[i] !== index) {
        newArray.push(expands[i] < index ? expands[i] : expands[i] - 1);
      }
    }
    setExpands(newArray);
    setKeyPrefix((0,react_querybuilder/* generateID */.ni)());
    if (onChange) {
      onChange(policies.filter(function (val, idx) {
        return idx !== index;
      }));
    }
  };
  var _onToggle = function onToggle(index) {
    var i = expands.indexOf(index);
    if (-1 !== i) {
      setExpands(expands.filter(function (val) {
        return val !== index;
      }));
    } else {
      setExpands([].concat(RoleDetails_toConsumableArray(expands), [index]));
    }
  };
  var onExpandAll = function onExpandAll() {
    var newArray = [];
    for (var i = 0; i < policies.length; i++) {
      newArray.push(i);
    }
    setExpands(newArray);
  };
  var _onPolicyChange = function onPolicyChange(index, policy) {
    var newArray = RoleDetails_toConsumableArray(policies);
    newArray[index] = policy;
    if (onChange) {
      onChange(newArray);
    }
  };
  var renderPolicies = function renderPolicies() {
    var component = [];
    var _loop = function _loop(i) {
      var name = utils/* FormatString */.FJ(roles_constants_TOKENS.PolicyName, i + 1);
      if (i === policies.length - 1) {
        component.push(/*#__PURE__*/react.createElement("div", {
          key: (0,react_querybuilder/* generateID */.ni)(),
          ref: ref
        }));
      }
      component.push(/*#__PURE__*/react.createElement(PolicyCard, {
        key: keyPrefix + name,
        name: name,
        enableDelete: policies.length > 1,
        enableJsonEditor: enableJsonEditor,
        expand: expands.includes(i),
        policy: policies[i],
        presentWorkspaces: presentWorkspaces,
        onToggle: function onToggle() {
          return _onToggle(i);
        },
        onDelete: function onDelete() {
          return _onDelete(i);
        },
        onPolicyChange: function onPolicyChange(val) {
          return _onPolicyChange(i, val);
        }
      }));
    };
    for (var i = 0; i < policies.length; i++) {
      _loop(i);
    }
    return component;
  };
  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement("div", {
    className: "header-btn"
  }, /*#__PURE__*/react.createElement(Button/* default */.A, {
    className: "",
    variant: "outline-secondary",
    onClick: onAdd
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa-solid fa-plus"
  }), "\xA0", roles_constants_TOKENS.AddPolicy), /*#__PURE__*/react.createElement("div", {
    className: "pull-right"
  }, /*#__PURE__*/react.createElement("a", {
    className: "btn btn-text",
    onClick: onExpandAll
  }, roles_constants_TOKENS.ExpandAllBtn), /*#__PURE__*/react.createElement("a", {
    className: "btn btn-text",
    onClick: function onClick() {
      return setExpands([]);
    }
  }, roles_constants_TOKENS.CollapseAllBtn))), renderPolicies());
};
var UserTab = function UserTab(_ref2) {
  var associatedUsers = _ref2.associatedUsers,
    presentUsers = _ref2.presentUsers,
    onChange = _ref2.onChange,
    onError = _ref2.onError;
  var _React$useState5 = react.useState(false),
    _React$useState6 = RoleDetails_slicedToArray(_React$useState5, 2),
    showAddition = _React$useState6[0],
    setShowAddition = _React$useState6[1];
  var _React$useState7 = react.useState(false),
    _React$useState8 = RoleDetails_slicedToArray(_React$useState7, 2),
    showRemoval = _React$useState8[0],
    setShowRemoval = _React$useState8[1];
  var _React$useState9 = react.useState([]),
    _React$useState10 = RoleDetails_slicedToArray(_React$useState9, 2),
    removalNames = _React$useState10[0],
    setRemovalNames = _React$useState10[1];
  var _React$useState11 = react.useState(""),
    _React$useState12 = RoleDetails_slicedToArray(_React$useState11, 2),
    searchKey = _React$useState12[0],
    setSearchKey = _React$useState12[1];
  var _React$useState13 = react.useState(true),
    _React$useState14 = RoleDetails_slicedToArray(_React$useState13, 2),
    isDelBtnDisabled = _React$useState14[0],
    setIsDelBtnDisabled = _React$useState14[1];
  var tableApiRef = {};
  var columns = [{
    id: "name",
    header: roles_constants_TOKENS.UserName,
    accessorKey: "name"
  }, {
    id: "status",
    header: roles_constants_TOKENS.UserStatus,
    accessorKey: "active",
    cell: function cell(props) {
      return props.getValue().toLowerCase() === "true" ? roles_constants_TOKENS.UserActive : roles_constants_TOKENS.UserInactive;
    }
  }];
  var onAddUsers = function onAddUsers(users) {
    onChange(associatedUsers.concat(users));
    setShowAddition(false);
    setIsDelBtnDisabled(true);
  };
  var onDeleteUsers = function onDeleteUsers() {
    var names = [];
    var rows = tableApiRef.getSelectedRows();
    associatedUsers.forEach(function (val) {
      if (!rows.find(function (row) {
        return row.original.name === val;
      })) {
        names.push(val);
      }
    });
    onChange(names);
    setShowRemoval(false);
    setIsDelBtnDisabled(true);
  };
  var onDelConfirm = function onDelConfirm() {
    var names = [];
    var rows = tableApiRef.getSelectedRows();
    rows.forEach(function (row) {
      names.push(row.original.name);
    });
    setShowRemoval(true);
    setRemovalNames(names);
  };
  var onRowSelectionChange = function onRowSelectionChange(updater, currentRowSelection) {
    var newSelectedOBJ = updater(currentRowSelection);
    if (newSelectedOBJ && Object.keys(newSelectedOBJ).length > 0) {
      setIsDelBtnDisabled(false);
    } else {
      setIsDelBtnDisabled(true);
    }
  };
  var onSearchKeyChange = function onSearchKeyChange(keyword) {
    setSearchKey(keyword.toLowerCase());
    setIsDelBtnDisabled(true);
  };
  var getUnassociatedUsers = function getUnassociatedUsers() {
    var unassociatedUsers = [];
    presentUsers.forEach(function (user) {
      if (!associatedUsers.includes(user.user)) {
        unassociatedUsers.push(user);
      }
    });
    return unassociatedUsers;
  };
  var getAssociatedUsers = function getAssociatedUsers() {
    var users = [];
    associatedUsers.forEach(function (name) {
      if (searchKey && -1 === name.toLowerCase().indexOf(searchKey)) {
        return;
      }
      for (var i = 0; i < presentUsers.length; i++) {
        if (name === presentUsers[i].user) {
          users.push({
            name: presentUsers[i].user,
            active: presentUsers[i].active
          });
          return;
        }
      }
    });
    return users;
  };
  var renderWelcome = function renderWelcome() {
    if (associatedUsers && associatedUsers.length > 0) {
      return null;
    }
    return /*#__PURE__*/react.createElement("div", {
      className: "user-welcome"
    }, /*#__PURE__*/react.createElement("div", {
      className: "text-center icon"
    }, /*#__PURE__*/react.createElement("i", {
      className: "fa fa-light fa-user fa-5x",
      "aria-hidden": "true"
    })), /*#__PURE__*/react.createElement("p", {
      className: "text-center lead"
    }, roles_constants_TOKENS.WelcomeToUser), /*#__PURE__*/react.createElement("button", {
      type: "button",
      className: "btn btn-primary ms-auto me-auto d-block",
      onClick: function onClick() {
        return setShowAddition(true);
      }
    }, /*#__PURE__*/react.createElement("i", {
      className: "fa fa-plus",
      "aria-hidden": "true"
    }), "\xA0", roles_constants_TOKENS.AddUsers));
  };
  var renderTableView = function renderTableView() {
    if (!associatedUsers || associatedUsers.length === 0) {
      return null;
    }
    var userData = getAssociatedUsers();
    return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement(ConfirmRemovalModal, {
      show: showRemoval,
      header: roles_constants_TOKENS.DeleteUsers,
      nameList: removalNames,
      handleClose: function handleClose() {
        return setShowRemoval(false);
      },
      handleDeleted: onDeleteUsers
    }), /*#__PURE__*/react.createElement("div", {
      className: "btn-group"
    }, /*#__PURE__*/react.createElement(Button/* default */.A, {
      variant: "outline-secondary",
      className: "btn btn-sm",
      onClick: onDelConfirm,
      disabled: isDelBtnDisabled
    }, /*#__PURE__*/react.createElement("i", {
      className: "fa fa-trash"
    }), "\xA0", roles_constants_TOKENS.TableDeleteBtn), /*#__PURE__*/react.createElement(Button/* default */.A, {
      variant: "outline-secondary",
      className: "btn btn-sm",
      onClick: function onClick() {
        return setShowAddition(true);
      }
    }, /*#__PURE__*/react.createElement("i", {
      className: "fa fa-plus"
    }), "\xA0", roles_constants_TOKENS.TableAddBtn)), /*#__PURE__*/react.createElement("div", {
      className: "table-filter"
    }, /*#__PURE__*/react.createElement(table_filter/* SearchBar */.I, {
      onClick: onSearchKeyChange
    })), /*#__PURE__*/react.createElement(arc_table/* default */.A, {
      columns: columns,
      url: null,
      data: userData,
      key: userData.length,
      onRowSelectionChange: onRowSelectionChange,
      initialSorting: [{
        id: "name",
        desc: false
      }],
      onError: onError,
      rowSelection: true,
      tableApiRef: tableApiRef
    }));
  };
  return /*#__PURE__*/react.createElement(react.Fragment, null, showAddition && /*#__PURE__*/react.createElement(roles_SelectUserModal, {
    show: showAddition,
    users: getUnassociatedUsers(),
    onChange: onAddUsers,
    onHide: function onHide() {
      return setShowAddition(false);
    }
  }), renderWelcome(), renderTableView());
};

// The workspace:Read permission is removed on new UI if the workspace is disabled.
function buildPolicyJSONs(_x) {
  return _buildPolicyJSONs.apply(this, arguments);
}
function _buildPolicyJSONs() {
  _buildPolicyJSONs = RoleDetails_asyncToGenerator(/*#__PURE__*/RoleDetails_regeneratorRuntime().mark(function _callee4(policies) {
    var newPolicies, i, policy, tp;
    return RoleDetails_regeneratorRuntime().wrap(function _callee4$(_context4) {
      while (1) switch (_context4.prev = _context4.next) {
        case 0:
          newPolicies = RoleDetails_toConsumableArray(policies);
          i = 0;
        case 2:
          if (!(i < policies.length)) {
            _context4.next = 12;
            break;
          }
          policy = policies[i];
          if (!(!policy.json && policy.workspacePermissions.length === 0)) {
            _context4.next = 9;
            break;
          }
          _context4.next = 7;
          return buildPolicyJson(policy);
        case 7:
          tp = _context4.sent;
          if (!tp.error) {
            newPolicies[i] = tp;
          }
        case 9:
          i++;
          _context4.next = 2;
          break;
        case 12:
          return _context4.abrupt("return", newPolicies);
        case 13:
        case "end":
          return _context4.stop();
      }
    }, _callee4);
  }));
  return _buildPolicyJSONs.apply(this, arguments);
}
var RoleDetails = function RoleDetails(_ref3) {
  var enableJsonEditor = _ref3.enableJsonEditor;
  var maxPolicy = 10;
  var urlGetWorkspaces = "src/getRolePageWorkspaces.rsb?@json";
  var urlGetCertificates = "api/certificates.rsd";
  var urlGetUsers = "src/admin/users.rsd?@json";
  var urlGetRole = "src/role.rsd?@json";
  var urlSetRole = "src/role.rsd?@json";
  var _React$useState15 = react.useState("policies"),
    _React$useState16 = RoleDetails_slicedToArray(_React$useState15, 2),
    showingTab = _React$useState16[0],
    setShowingTab = _React$useState16[1];
  var _React$useState17 = react.useState(false),
    _React$useState18 = RoleDetails_slicedToArray(_React$useState17, 2),
    showEdit = _React$useState18[0],
    setShowEdit = _React$useState18[1];
  var _React$useState19 = react.useState("error"),
    _React$useState20 = RoleDetails_slicedToArray(_React$useState19, 2),
    alertType = _React$useState20[0],
    setAlertType = _React$useState20[1];
  var _React$useState21 = react.useState(null),
    _React$useState22 = RoleDetails_slicedToArray(_React$useState21, 2),
    alertMessage = _React$useState22[0],
    setAlertMessage = _React$useState22[1];
  var _React$useState23 = react.useState(false),
    _React$useState24 = RoleDetails_slicedToArray(_React$useState23, 2),
    hasUnsaved = _React$useState24[0],
    setHasUnsaved = _React$useState24[1];
  var _React$useState25 = react.useState({
      id: "",
      name: "",
      description: ""
    }),
    _React$useState26 = RoleDetails_slicedToArray(_React$useState25, 2),
    basicInfo = _React$useState26[0],
    setBasicInfo = _React$useState26[1];
  var _React$useState27 = react.useState([]),
    _React$useState28 = RoleDetails_slicedToArray(_React$useState27, 2),
    associatedUsers = _React$useState28[0],
    setAssociatedUsers = _React$useState28[1];
  var _React$useState29 = react.useState([buildPolicyObj({}, {})]),
    _React$useState30 = RoleDetails_slicedToArray(_React$useState29, 2),
    policies = _React$useState30[0],
    setPolicies = _React$useState30[1];
  var _React$useState31 = react.useState([]),
    _React$useState32 = RoleDetails_slicedToArray(_React$useState31, 2),
    presentWorkspaces = _React$useState32[0],
    setPresentWorkspaces = _React$useState32[1];
  var _React$useState33 = react.useState([]),
    _React$useState34 = RoleDetails_slicedToArray(_React$useState33, 2),
    presentUsers = _React$useState34[0],
    setPresentUsers = _React$useState34[1];
  var _React$useState35 = react.useState([]),
    _React$useState36 = RoleDetails_slicedToArray(_React$useState35, 2),
    presentCertificates = _React$useState36[0],
    setPresentCertificates = _React$useState36[1];
  react.useEffect(function () {
    var controller = new AbortController();
    RoleDetails_asyncToGenerator(/*#__PURE__*/RoleDetails_regeneratorRuntime().mark(function _callee() {
      var searchParams;
      return RoleDetails_regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            searchParams = new URLSearchParams(window.location.search);
            _context.next = 3;
            return loadRole(searchParams.get("roleid"), controller);
          case 3:
          case "end":
            return _context.stop();
        }
      }, _callee);
    }))();
    return function () {
      controller.abort();
    };
  }, [window.location.search]);
  var onKeyDown = function onKeyDown(event) {
    var code = event.which || event.keyCode;
    var charCode = String.fromCharCode(code).toLowerCase();
    if ((event.ctrlKey || event.metaKey) && charCode === "s") {
      event.preventDefault();
      onSave();
    }
  };
  react.useEffect(function () {
    document.addEventListener("keydown", onKeyDown);
    return function () {
      document.removeEventListener("keydown", onKeyDown);
    };
  }, [onKeyDown]);
  var navItems = [{
    name: roles_constants_TOKENS.NavSettings,
    href: "settings.rst#rolesTab"
  }, {
    name: basicInfo.name,
    href: ""
  }];
  var loadRole = /*#__PURE__*/function () {
    var _ref5 = RoleDetails_asyncToGenerator(/*#__PURE__*/RoleDetails_regeneratorRuntime().mark(function _callee2(roleId, controller) {
      var rspRole, role, policies, users, count, i, props, rspWorkspaces, rspUsers, rspCertificates;
      return RoleDetails_regeneratorRuntime().wrap(function _callee2$(_context2) {
        while (1) switch (_context2.prev = _context2.next) {
          case 0:
            _context2.next = 2;
            return (0,utils/* fetchData */.Fd)(controller, urlGetRole, {
              id: roleId
            });
          case 2:
            rspRole = _context2.sent;
            if (!rspRole.error) {
              _context2.next = 7;
              break;
            }
            setAlertType("error");
            setAlertMessage(rspRole.error);
            return _context2.abrupt("return");
          case 7:
            if (!(rspRole.items.length === 0)) {
              _context2.next = 11;
              break;
            }
            setAlertType("error");
            setAlertMessage((0,utils/* FormatString */.FJ)(roles_constants_TOKENS.RoleNotFound, roleId));
            return _context2.abrupt("return");
          case 11:
            role = rspRole.items[0];
            if (isBuiltinRole(role.id)) {
              setAlertType("warning");
              setAlertMessage((0,utils/* FormatString */.FJ)(roles_constants_TOKENS.BuiltinRoleReadonly, roleId));
            }
            policies = [];
            users = "";
            if (role.workspacepermissions || role.connectorpermissions || role.certificatepermissions || role.associatedworkspaces || role.associatedcertificates || role.json) {
              if (Array.isArray(role.workspacepermissions || role.connectorpermissions || role.certificatepermissions || role.associatedworkspaces || role.associatedcertificates || role.json)) {
                count = Math.max(role.workspacepermissions.length, role.json.length);
                for (i = 0; i < count; i++) {
                  props = {
                    workspacePermissions: role.workspacepermissions[i],
                    connectorPermissions: role.connectorpermissions[i],
                    certificatePermissions: role.certificatepermissions[i],
                    associatedWorkspaces: role.associatedworkspaces[i],
                    associatedCertificates: role.associatedcertificates[i],
                    json: role.json[i]
                  };
                  policies.push(buildPolicyObj({}, props));
                }
              } else {
                policies.push(buildPolicyObj({}, role));
              }
            }
            _context2.next = 18;
            return buildPolicyJSONs(policies);
          case 18:
            policies = _context2.sent;
            if (policies.length === 0) {
              policies.push(buildPolicyObj({}, {}));
            }
            if (role.users) {
              users = role.users;
            }
            setBasicInfo({
              id: role.id,
              name: role.name,
              description: role.description || ""
            });
            setPolicies(policies);
            setAssociatedUsers(users.split(",").filter(function (element) {
              return element;
            }));
            _context2.next = 26;
            return (0,utils/* fetchData */.Fd)(controller, urlGetWorkspaces, {});
          case 26:
            rspWorkspaces = _context2.sent;
            _context2.next = 29;
            return (0,utils/* fetchData */.Fd)(controller, urlGetUsers, {});
          case 29:
            rspUsers = _context2.sent;
            _context2.next = 32;
            return (0,utils/* fetchData */.Fd)(controller, urlGetCertificates, {
              "$select": "name, storetype",
              "$orderby": "name"
            });
          case 32:
            rspCertificates = _context2.sent;
            if (!(rspWorkspaces.error || rspUsers.error || rspCertificates.error)) {
              _context2.next = 37;
              break;
            }
            setAlertType("error");
            setAlertMessage(rspWorkspaces.error + rspUsers.error + rspCertificates.error);
            return _context2.abrupt("return");
          case 37:
            setPresentWorkspaces(rspWorkspaces.items);
            setPresentUsers(rspUsers.items);
            setPresentCertificates(rspCertificates.items);
          case 40:
          case "end":
            return _context2.stop();
        }
      }, _callee2);
    }));
    return function loadRole(_x2, _x3) {
      return _ref5.apply(this, arguments);
    };
  }();
  var onPoliciesChange = function onPoliciesChange(policies) {
    setPolicies(policies);
    setHasUnsaved(true);
  };
  var onUsersChange = function onUsersChange(users) {
    setAssociatedUsers(users);
    setHasUnsaved(true);
  };
  var onBasicInfoChange = function onBasicInfoChange(role) {
    setBasicInfo({
      id: basicInfo.id,
      name: role.name,
      description: role.description
    });
    setShowEdit(false);
    setHasUnsaved(true);
  };
  var onSave = /*#__PURE__*/function () {
    var _ref6 = RoleDetails_asyncToGenerator(/*#__PURE__*/RoleDetails_regeneratorRuntime().mark(function _callee3() {
      var _response$data$items;
      var unacceptableIndex, i, elements, role, index, response, items, error;
      return RoleDetails_regeneratorRuntime().wrap(function _callee3$(_context3) {
        while (1) switch (_context3.prev = _context3.next) {
          case 0:
            unacceptableIndex = [];
            for (i = 0; i < policies.length; i++) {
              if (!isAcceptablePolicy(policies[i])) {
                unacceptableIndex.push(i);
              }
            }
            if (!(unacceptableIndex.length > 0)) {
              _context3.next = 9;
              break;
            }
            setAlertType("error");
            elements = [];
            elements.push(/*#__PURE__*/react.createElement("span", {
              key: "summary"
            }, roles_constants_TOKENS.PolicyError));
            elements.push(/*#__PURE__*/react.createElement("ul", {
              key: "list"
            }, unacceptableIndex.map(function (index) {
              return /*#__PURE__*/react.createElement("li", {
                key: index
              }, utils/* FormatString */.FJ(roles_constants_TOKENS.PolicyName, index + 1));
            })));
            setAlertMessage(elements);
            return _context3.abrupt("return", false);
          case 9:
            role = RoleDetails_objectSpread({}, basicInfo);
            role.users = JSON.stringify(associatedUsers);
            index = 0;
            policies.forEach(function (policy) {
              index++;
              role["workspacePermissions#" + index] = JSON.stringify(policy.workspacePermissions);
              role["connectorPermissions#" + index] = JSON.stringify(policy.connectorPermissions);
              role["certificatePermissions#" + index] = JSON.stringify(policy.certificatePermissions);
              role["associatedWorkspaces#" + index] = JSON.stringify(policy.associatedWorkspaces);
              role["associatedCertificates#" + index] = JSON.stringify(policy.associatedCertificates);
              role["json#" + index] = policy.json;
            });
            _context3.next = 15;
            return axios/* default */.A.put(urlSetRole, new URLSearchParams(role));
          case 15:
            response = _context3.sent;
            items = (_response$data$items = response.data.items) !== null && _response$data$items !== void 0 ? _response$data$items : [];
            error = (0,utils/* getResultErrorMessage */.hz)(items);
            if (error) {
              setAlertType("error");
              setAlertMessage(error);
            } else {
              setAlertType("success");
              setAlertMessage(roles_constants_TOKENS.SaveSuccessAlert);
            }
            setHasUnsaved(false);
          case 20:
          case "end":
            return _context3.stop();
        }
      }, _callee3);
    }));
    return function onSave() {
      return _ref6.apply(this, arguments);
    };
  }();
  var onError = function onError(msg) {
    if (msg) {
      setAlertType("error");
      setAlertMessage(msg);
    } else {
      setAlertMessage(null);
    }
  };
  var isBuiltinRole = function isBuiltinRole(id) {
    return id === "cdata_support" || id === "cdata_admin" || id === "cdata_standard";
  };
  var showPolicyErrorClass = function showPolicyErrorClass() {
    return alertType === "error" && alertMessage ? " role-error" : "";
  };
  return /*#__PURE__*/react.createElement("div", {
    className: "role-detail" + (isBuiltinRole(basicInfo.id) ? " role-builtin" : "") + showPolicyErrorClass()
  }, /*#__PURE__*/react.createElement(unsaved_prompt, {
    hasUnsavedChanges: hasUnsaved
  }), showEdit && /*#__PURE__*/react.createElement(roles_EditRoleModal, {
    show: showEdit,
    onChange: onBasicInfoChange,
    onHide: function onHide() {
      return setShowEdit(false);
    },
    name: basicInfo.name,
    description: basicInfo.description
  }), /*#__PURE__*/react.createElement("div", {
    className: "row role-nav"
  }, /*#__PURE__*/react.createElement(MessageViewNav/* default */.A, {
    items: navItems,
    className: "breadcrumb-item text-truncate col-md-10"
  }), /*#__PURE__*/react.createElement("div", {
    className: "col-md-2 gap-1 d-flex justify-content-end"
  }, /*#__PURE__*/react.createElement("a", {
    className: "btn btn-outline-secondary",
    href: "help.rst#User-Roles",
    target: "_blank"
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-question-circle"
  })), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "primary",
    onClick: onSave
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-save"
  }), "\xA0", roles_constants_TOKENS.SaveRole))), /*#__PURE__*/react.createElement(DismissibleAlert/* default */.A, {
    type: alertType,
    message: alertMessage,
    onClose: function onClose() {
      return setAlertMessage(null);
    }
  }), /*#__PURE__*/react.createElement("div", {
    className: "row role-header"
  }, /*#__PURE__*/react.createElement("h3", {
    className: "text-truncate"
  }, basicInfo.name), /*#__PURE__*/react.createElement("a", {
    className: "btn",
    onClick: function onClick() {
      return setShowEdit(true);
    }
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa-regular fa-pen-to-square"
  }))), /*#__PURE__*/react.createElement("p", {
    className: "text-wrap text-break"
  }, basicInfo.description), /*#__PURE__*/react.createElement("div", {
    className: "role-navbar"
  }, /*#__PURE__*/react.createElement(Nav/* default */.A, {
    variant: "tabs",
    className: "tab-underline",
    onSelect: function onSelect(key) {
      return setShowingTab(key);
    }
  }, /*#__PURE__*/react.createElement(Nav/* default */.A.Item, null, /*#__PURE__*/react.createElement(Nav/* default */.A.Link, {
    eventKey: "policies",
    active: showingTab === "policies"
  }, utils/* FormatString */.FJ(roles_constants_TOKENS.DetailNavPolicies, policies.length, Math.max(policies.length, maxPolicy)))), /*#__PURE__*/react.createElement(Nav/* default */.A.Item, null, /*#__PURE__*/react.createElement(Nav/* default */.A.Link, {
    eventKey: "users",
    active: showingTab === "users"
  }, roles_constants_TOKENS.AssociatedUsers)))), /*#__PURE__*/react.createElement("div", {
    className: "tab-content pt-4 pb-3"
  }, /*#__PURE__*/react.createElement("div", {
    className: "tab-policy ".concat(showingTab === "policies" ? "" : "hidden")
  }, /*#__PURE__*/react.createElement(PolicyCardContext.Provider, {
    value: {
      isBuiltinRole: isBuiltinRole(basicInfo.id),
      presentCertificates: presentCertificates
    }
  }, /*#__PURE__*/react.createElement(PolicyTab, {
    policies: policies,
    presentWorkspaces: presentWorkspaces,
    maxPolicy: maxPolicy,
    enableJsonEditor: enableJsonEditor,
    onError: onError,
    onChange: onPoliciesChange
  }))), /*#__PURE__*/react.createElement("div", {
    className: "tab-user ".concat(showingTab === "users" ? "" : "hidden")
  }, /*#__PURE__*/react.createElement(UserTab, {
    associatedUsers: associatedUsers,
    presentUsers: presentUsers,
    onError: onError,
    onChange: onUsersChange
  }))));
};
/* harmony default export */ const roles_RoleDetails = (RoleDetails);
;// CONCATENATED MODULE: ./src/settings/roles/AddRoleModal.jsx
function AddRoleModal_typeof(o) { "@babel/helpers - typeof"; return AddRoleModal_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, AddRoleModal_typeof(o); }
function AddRoleModal_extends() { return AddRoleModal_extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, AddRoleModal_extends.apply(null, arguments); }
function AddRoleModal_regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ AddRoleModal_regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == AddRoleModal_typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(AddRoleModal_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function AddRoleModal_asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function AddRoleModal_asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { AddRoleModal_asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { AddRoleModal_asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function AddRoleModal_slicedToArray(r, e) { return AddRoleModal_arrayWithHoles(r) || AddRoleModal_iterableToArrayLimit(r, e) || AddRoleModal_unsupportedIterableToArray(r, e) || AddRoleModal_nonIterableRest(); }
function AddRoleModal_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function AddRoleModal_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return AddRoleModal_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? AddRoleModal_arrayLikeToArray(r, a) : void 0; } }
function AddRoleModal_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function AddRoleModal_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function AddRoleModal_arrayWithHoles(r) { if (Array.isArray(r)) return r; }











var AddRoleModal = function AddRoleModal(_ref) {
  var show = _ref.show,
    urlCreateRole = _ref.urlCreateRole,
    onChange = _ref.onChange,
    onHide = _ref.onHide;
  var _React$useState = react.useState(""),
    _React$useState2 = AddRoleModal_slicedToArray(_React$useState, 2),
    name = _React$useState2[0],
    setName = _React$useState2[1];
  var _React$useState3 = react.useState(""),
    _React$useState4 = AddRoleModal_slicedToArray(_React$useState3, 2),
    description = _React$useState4[0],
    setDescription = _React$useState4[1];
  var _React$useState5 = react.useState(""),
    _React$useState6 = AddRoleModal_slicedToArray(_React$useState5, 2),
    errorMessage = _React$useState6[0],
    setErrorMessage = _React$useState6[1];
  var handleNext = /*#__PURE__*/function () {
    var _ref2 = AddRoleModal_asyncToGenerator(/*#__PURE__*/AddRoleModal_regeneratorRuntime().mark(function _callee() {
      var _response$data$items;
      var params, response, items, error;
      return AddRoleModal_regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            params = new URLSearchParams();
            params.append("name", name);
            params.append("description", description);
            _context.next = 5;
            return axios/* default */.A.post(urlCreateRole, params);
          case 5:
            response = _context.sent;
            items = (_response$data$items = response.data.items) !== null && _response$data$items !== void 0 ? _response$data$items : [];
            error = (0,utils/* getResultErrorMessage */.hz)(items);
            if (!error) {
              _context.next = 11;
              break;
            }
            setErrorMessage(error);
            return _context.abrupt("return");
          case 11:
            if (onChange) {
              onChange(items[0].id);
            }
          case 12:
          case "end":
            return _context.stop();
        }
      }, _callee);
    }));
    return function handleNext() {
      return _ref2.apply(this, arguments);
    };
  }();
  return /*#__PURE__*/react.createElement(Modal/* default */.A, AddRoleModal_extends({
    className: "addrole-modal form-group",
    backdrop: "static",
    show: show,
    onHide: onHide
  }, (0,utils/* onInputEnterDown */.yb)(handleNext)), /*#__PURE__*/react.createElement(Modal/* default */.A.Header, {
    closeButton: true
  }, /*#__PURE__*/react.createElement(Modal/* default */.A.Title, null, roles_constants_TOKENS.AddRole)), /*#__PURE__*/react.createElement(Modal/* default */.A.Body, null, /*#__PURE__*/react.createElement(DismissibleAlert/* default */.A, {
    type: "error",
    message: errorMessage,
    onClose: function onClose() {
      return setErrorMessage(null);
    }
  }), /*#__PURE__*/react.createElement(Form/* default */.A.Group, {
    as: Row/* default */.A,
    className: "mb-3"
  }, /*#__PURE__*/react.createElement(Form/* default */.A.Label, {
    column: true,
    md: "4"
  }, roles_constants_TOKENS.RoleName), /*#__PURE__*/react.createElement(Col/* default */.A, {
    md: "8"
  }, /*#__PURE__*/react.createElement(Form/* default */.A.Control, {
    placeholder: roles_constants_TOKENS.RoleNamePlaceholder,
    autoFocus: true,
    value: name,
    onChange: function onChange(event) {
      return setName(event.target.value);
    }
  }))), /*#__PURE__*/react.createElement(Form/* default */.A.Group, {
    as: Row/* default */.A,
    className: "mb-3"
  }, /*#__PURE__*/react.createElement(Form/* default */.A.Label, {
    column: true,
    md: "4"
  }, roles_constants_TOKENS.RoleDescription), /*#__PURE__*/react.createElement(Col/* default */.A, {
    md: "8"
  }, /*#__PURE__*/react.createElement(Form/* default */.A.Control, {
    as: "textarea",
    rows: 3,
    value: description,
    onChange: function onChange(event) {
      return setDescription(event.target.value);
    },
    placeholder: roles_constants_TOKENS.RoleDescPlaceholder
  })))), /*#__PURE__*/react.createElement(Modal/* default */.A.Footer, null, /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    onClick: onHide
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-times",
    "aria-hidden": "true"
  }), "\xA0", roles_constants_TOKENS.Close), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "primary",
    onClick: handleNext,
    disabled: !name
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa-regular fa-arrow-right"
  }), "\xA0", roles_constants_TOKENS.Next)));
};
AddRoleModal.propTypes = {
  /**
   * When true The modal will show itself.
   */
  show: (prop_types_default()).bool.isRequired,
  /**
   * The URL is used to create role.
   */
  urlCreateRole: (prop_types_default()).string.isRequired,
  /**
   * An event is triggered after the Next button is clicked.
   */
  onChange: (prop_types_default()).func.isRequired,
  /**
   * A callback fired when the header or footer closeButton is clicked.
   */
  onHide: (prop_types_default()).func
};
/* harmony default export */ const roles_AddRoleModal = (AddRoleModal);
;// CONCATENATED MODULE: ./src/settings/roles/RolesTable.jsx
function RolesTable_typeof(o) { "@babel/helpers - typeof"; return RolesTable_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, RolesTable_typeof(o); }
function RolesTable_regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ RolesTable_regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == RolesTable_typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(RolesTable_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function RolesTable_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function RolesTable_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? RolesTable_ownKeys(Object(t), !0).forEach(function (r) { RolesTable_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : RolesTable_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function RolesTable_defineProperty(e, r, t) { return (r = RolesTable_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function RolesTable_toPropertyKey(t) { var i = RolesTable_toPrimitive(t, "string"); return "symbol" == RolesTable_typeof(i) ? i : i + ""; }
function RolesTable_toPrimitive(t, r) { if ("object" != RolesTable_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != RolesTable_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function RolesTable_asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function RolesTable_asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { RolesTable_asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { RolesTable_asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function RolesTable_slicedToArray(r, e) { return RolesTable_arrayWithHoles(r) || RolesTable_iterableToArrayLimit(r, e) || RolesTable_unsupportedIterableToArray(r, e) || RolesTable_nonIterableRest(); }
function RolesTable_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function RolesTable_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return RolesTable_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? RolesTable_arrayLikeToArray(r, a) : void 0; } }
function RolesTable_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function RolesTable_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function RolesTable_arrayWithHoles(r) { if (Array.isArray(r)) return r; }














var columns = [{
  id: "name",
  header: roles_constants_TOKENS.TableHeaderName,
  accessorKey: "name"
}, {
  id: "description",
  header: roles_constants_TOKENS.TableHeaderDescription,
  accessorKey: "description",
  enableSorting: false
}, {
  id: "workspaces",
  header: roles_constants_TOKENS.AssociatedWorkspaces,
  accessorKey: "workspaces",
  cell: function cell(props) {
    if (!props.getValue()) {
      return /*#__PURE__*/react.createElement(react.Fragment, null);
    }
    var workspaces = props.getValue();
    if (workspaces === "*") {
      return /*#__PURE__*/react.createElement("span", null, roles_constants_TOKENS.TableAllWorkspaces);
    }
    var component = [];
    var mySet = new Set();
    workspaces.split(",").forEach(mySet.add, mySet);
    if (mySet.has("*")) {
      return /*#__PURE__*/react.createElement("span", null, roles_constants_TOKENS.TableAllWorkspaces);
    }
    var workspaceCount = 0;
    mySet.forEach(function (val) {
      if (component.length < 10) {
        component.push(/*#__PURE__*/react.createElement("div", {
          key: val,
          className: "text-truncate"
        }, val.trim()));
      }
      workspaceCount++;
    });
    return /*#__PURE__*/react.createElement("span", {
      className: "has-tooltip",
      "data-tooltip-id": "reactPopover",
      "data-tooltip-place": "right",
      "data-tooltip-html": (0,server_browser.renderToStaticMarkup)(/*#__PURE__*/react.createElement(react.Fragment, null, component, workspaceCount > 10 ? /*#__PURE__*/react.createElement("div", {
        className: "text-truncate"
      }, roles_constants_TOKENS.AndMore) : null))
    }, workspaceCount);
  }
}, {
  id: "users",
  header: roles_constants_TOKENS.AssociatedUsers,
  accessorKey: "users",
  cell: function cell(props) {
    if (!props.getValue()) {
      return /*#__PURE__*/react.createElement(react.Fragment, null);
    }
    var userCount = 0;
    var component = props.getValue().split(",").map(function (val) {
      userCount++;
      if (userCount <= 10) {
        return /*#__PURE__*/react.createElement("div", {
          key: val,
          className: "text-truncate"
        }, val.trim());
      }
      return null;
    });
    return /*#__PURE__*/react.createElement("span", {
      className: "has-tooltip",
      "data-tooltip-id": "reactPopover",
      "data-tooltip-place": "right",
      "data-tooltip-html": (0,server_browser.renderToStaticMarkup)(/*#__PURE__*/react.createElement(react.Fragment, null, component, userCount > 10 ? /*#__PURE__*/react.createElement("div", {
        className: "text-truncate"
      }, roles_constants_TOKENS.AndMore) : null))
    }, userCount);
  }
}];
function buildInitQuery(commonFilters, browserStorageKey) {
  var val = table_filter/* TableFilter */.r.loadFilter(browserStorageKey, commonFilters);
  var oDataQuery = table_filter/* TableFilter */.r.buildODataQuery(val.selectedMap, commonFilters);
  return buildODataQuery(oDataQuery, val.searchText);
}
function buildODataQuery(odataQuery, searchText) {
  var filter = "";
  if (searchText) {
    filter = "substringof(".concat((0,utils/* odataEscape */.H7)(searchText), ", name) eq True");
  }
  if (odataQuery && filter) {
    filter = "(".concat(odataQuery, ") and (").concat(filter, ")");
  } else if (odataQuery) {
    filter = "(".concat(odataQuery, ")");
  } else if (filter) {
    filter = "(".concat(filter, ")");
  }
  return filter;
}
function buildCommonFilters(filterOptions) {
  var workspaceOptions = filterOptions["workspace"] || [FILTER.VALUE_ALL, FILTER.VALUE_NONE];
  var userOptions = filterOptions["user"] || [FILTER.VALUE_NONE];
  var workspaceI18n = workspaceOptions.map(function (option) {
    if (option === FILTER.VALUE_NONE) {
      return roles_constants_TOKENS.FilterNone;
    } else if (option === FILTER.VALUE_ALL) {
      return roles_constants_TOKENS.FilterAllWorkspaces;
    } else {
      return option;
    }
  });
  var userI18n = userOptions.map(function (option) {
    if (option === FILTER.VALUE_NONE) {
      return roles_constants_TOKENS.FilterNone;
    } else {
      return option;
    }
  });
  return [{
    odataKey: "workspace",
    label: roles_constants_TOKENS.TableFilterWorkspaces,
    options: workspaceOptions,
    i18nOptions: workspaceI18n,
    isDatePicker: false
  }, {
    odataKey: "user",
    label: roles_constants_TOKENS.TableFilterHeaderUsers,
    options: userOptions,
    i18nOptions: userI18n,
    isDatePicker: false
  }];
}
function RolesTable() {
  var urlGetRolesTableView = "src/getRolesTableView.rsd?@json";
  var urlDeleteRoles = "src/role.rsd?@json";
  var urlCreateRole = "src/role.rsd?@json";
  var browserStorageKey = "SettingsRoles";
  var _React$useState = react.useState({}),
    _React$useState2 = RolesTable_slicedToArray(_React$useState, 2),
    filterOptions = _React$useState2[0],
    setFilterOptions = _React$useState2[1];
  var _React$useState3 = react.useState(false),
    _React$useState4 = RolesTable_slicedToArray(_React$useState3, 2),
    showAddition = _React$useState4[0],
    setShowAddition = _React$useState4[1];
  var _React$useState5 = react.useState(false),
    _React$useState6 = RolesTable_slicedToArray(_React$useState5, 2),
    showRemoval = _React$useState6[0],
    setShowRemoval = _React$useState6[1];
  var _React$useState7 = react.useState([]),
    _React$useState8 = RolesTable_slicedToArray(_React$useState7, 2),
    removalNames = _React$useState8[0],
    setRemovalNames = _React$useState8[1];
  var commonFilters = react.useMemo(function () {
    return buildCommonFilters(filterOptions);
  }, [filterOptions]);
  var initialQuery = react.useMemo(function () {
    return buildInitQuery(commonFilters, browserStorageKey);
  }, []);
  var _React$useState9 = react.useState(null),
    _React$useState10 = RolesTable_slicedToArray(_React$useState9, 2),
    errorMessage = _React$useState10[0],
    setErrorMessage = _React$useState10[1];
  var _React$useState11 = react.useState(true),
    _React$useState12 = RolesTable_slicedToArray(_React$useState11, 2),
    isDelBtnDisabled = _React$useState12[0],
    setIsDelBtnDisabled = _React$useState12[1];
  var tableApiRef = {};
  var onToggle = /*#__PURE__*/function () {
    var _ref = RolesTable_asyncToGenerator(/*#__PURE__*/RolesTable_regeneratorRuntime().mark(function _callee(label, nextShow) {
      var filter, params;
      return RolesTable_regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            if (nextShow) {
              _context.next = 2;
              break;
            }
            return _context.abrupt("return");
          case 2:
            filter = commonFilters.find(function (element) {
              return element.label === label;
            });
            params = {
              "$select": filter.odataKey
            };
            sendGetRequest(urlGetRolesTableView, params).then(function (result) {
              var error = (0,utils/* getResultErrorMessage */.hz)(result);
              if (error) {
                setErrorMessage(error);
                return;
              }
              if (!result.items) {
                return;
              }
              var hasAll = false;
              var hasNone = false;
              var optionArray = [];
              var optionSet = new Set();
              result.items.forEach(function (item) {
                optionArray = item[filter.odataKey === "workspace" ? "workspaces" : "users"].split(",");
                if (optionArray.length > 0) {
                  optionArray.forEach(function (val) {
                    if (val && val === "*") {
                      hasAll = true;
                    } else {
                      optionSet.add(val);
                    }
                  });
                } else {
                  hasNone = true;
                }
              });
              optionArray = [];
              if (hasNone) {
                optionArray.push(FILTER.VALUE_NONE);
              }
              if (hasAll) {
                optionArray.push(FILTER.VALUE_ALL);
              }
              optionArray = optionArray.concat(Array.from(optionSet).sort());
              filterOptions[filter.odataKey] = optionArray;
              setFilterOptions(RolesTable_objectSpread({}, filterOptions));
            });
          case 5:
          case "end":
            return _context.stop();
        }
      }, _callee);
    }));
    return function onToggle(_x, _x2) {
      return _ref.apply(this, arguments);
    };
  }();
  var onSearch = /*#__PURE__*/function () {
    var _ref2 = RolesTable_asyncToGenerator(/*#__PURE__*/RolesTable_regeneratorRuntime().mark(function _callee2(odataQuery, searchText) {
      var filter;
      return RolesTable_regeneratorRuntime().wrap(function _callee2$(_context2) {
        while (1) switch (_context2.prev = _context2.next) {
          case 0:
            filter = buildODataQuery(odataQuery, searchText);
            _context2.prev = 1;
            _context2.next = 4;
            return tableApiRef.setUrlParams({
              "$filter": filter
            });
          case 4:
            _context2.next = 9;
            break;
          case 6:
            _context2.prev = 6;
            _context2.t0 = _context2["catch"](1);
            setErrorMessage(_context2.t0);
          case 9:
            setIsDelBtnDisabled(true);
          case 10:
          case "end":
            return _context2.stop();
        }
      }, _callee2, null, [[1, 6]]);
    }));
    return function onSearch(_x3, _x4) {
      return _ref2.apply(this, arguments);
    };
  }();
  var onRefresh = /*#__PURE__*/function () {
    var _ref3 = RolesTable_asyncToGenerator(/*#__PURE__*/RolesTable_regeneratorRuntime().mark(function _callee3() {
      return RolesTable_regeneratorRuntime().wrap(function _callee3$(_context3) {
        while (1) switch (_context3.prev = _context3.next) {
          case 0:
            _context3.next = 2;
            return tableApiRef.reload();
          case 2:
            setFilterOptions({});
            setIsDelBtnDisabled(true);
          case 4:
          case "end":
            return _context3.stop();
        }
      }, _callee3);
    }));
    return function onRefresh() {
      return _ref3.apply(this, arguments);
    };
  }();
  var onAddRole = function onAddRole() {
    setShowAddition(true);
  };
  var onRowClicked = function onRowClicked(event, row) {
    goToRoleDetail(row.original.id);
  };
  var onDelRole = /*#__PURE__*/function () {
    var _ref4 = RolesTable_asyncToGenerator(/*#__PURE__*/RolesTable_regeneratorRuntime().mark(function _callee4() {
      var _response$data$items;
      var rows, ids, i, response, items, error;
      return RolesTable_regeneratorRuntime().wrap(function _callee4$(_context4) {
        while (1) switch (_context4.prev = _context4.next) {
          case 0:
            rows = tableApiRef.getSelectedRows();
            ids = {};
            for (i = 0; i < rows.length; i++) {
              ids["id#" + (i + 1)] = rows[i].original.id;
            }
            _context4.next = 5;
            return axios/* default */.A["delete"](urlDeleteRoles, {
              headers: {
                "content-type": "application/x-www-form-urlencoded"
              },
              data: ids
            });
          case 5:
            response = _context4.sent;
            items = (_response$data$items = response.data.items) !== null && _response$data$items !== void 0 ? _response$data$items : [];
            error = (0,utils/* getResultErrorMessage */.hz)(items);
            if (error) {
              setErrorMessage(error);
            }
            setShowRemoval(false);
            setIsDelBtnDisabled(true);
            tableApiRef.reload();
            setFilterOptions({});
          case 13:
          case "end":
            return _context4.stop();
        }
      }, _callee4);
    }));
    return function onDelRole() {
      return _ref4.apply(this, arguments);
    };
  }();
  var onDelConfirm = function onDelConfirm() {
    var names = [];
    var rows = tableApiRef.getSelectedRows();
    rows.forEach(function (row) {
      names.push(row.original.name);
    });
    setShowRemoval(true);
    setRemovalNames(names);
  };
  var onRowSelectionChange = function onRowSelectionChange(updater, currentRowSelection) {
    var newSelectedOBJ = updater(currentRowSelection);
    if (newSelectedOBJ && Object.keys(newSelectedOBJ).length > 0) {
      setIsDelBtnDisabled(false);
    } else {
      setIsDelBtnDisabled(true);
    }
  };
  var onError = function onError(error) {
    if (error !== null && error !== void 0 && error.message) {
      setErrorMessage(error.message);
    }
  };
  var onCreateRole = /*#__PURE__*/function () {
    var _ref5 = RolesTable_asyncToGenerator(/*#__PURE__*/RolesTable_regeneratorRuntime().mark(function _callee5(roleId) {
      return RolesTable_regeneratorRuntime().wrap(function _callee5$(_context5) {
        while (1) switch (_context5.prev = _context5.next) {
          case 0:
            goToRoleDetail(roleId);
          case 1:
          case "end":
            return _context5.stop();
        }
      }, _callee5);
    }));
    return function onCreateRole(_x5) {
      return _ref5.apply(this, arguments);
    };
  }();
  var goToRoleDetail = function goToRoleDetail(id) {
    window.location.href = "settings.rst?roleid=" + encodeURIComponent(id);
  };
  return /*#__PURE__*/react.createElement("div", {
    className: "role-table"
  }, /*#__PURE__*/react.createElement(ConfirmRemovalModal, {
    show: showRemoval,
    header: roles_constants_TOKENS.DeleteRoles,
    nameList: removalNames,
    handleClose: function handleClose() {
      return setShowRemoval(false);
    },
    handleDeleted: onDelRole
  }), showAddition && /*#__PURE__*/react.createElement(roles_AddRoleModal, {
    show: showAddition,
    urlCreateRole: urlCreateRole,
    onChange: onCreateRole,
    onHide: function onHide() {
      return setShowAddition(false);
    }
  }), /*#__PURE__*/react.createElement("div", {
    className: "settings-header"
  }, /*#__PURE__*/react.createElement("h5", null)), /*#__PURE__*/react.createElement("div", {
    className: "btn-group"
  }, /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    className: "btn btn-sm",
    onClick: onRefresh
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-refresh"
  }), "\xA0"), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    className: "btn btn-sm",
    onClick: onDelConfirm,
    disabled: isDelBtnDisabled
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-trash"
  }), "\xA0", roles_constants_TOKENS.TableDeleteBtn), /*#__PURE__*/react.createElement(Button/* default */.A, {
    variant: "outline-secondary",
    className: "btn btn-sm",
    onClick: onAddRole
  }, /*#__PURE__*/react.createElement("i", {
    className: "fa fa-plus"
  }), "\xA0", roles_constants_TOKENS.TableAddBtn)), /*#__PURE__*/react.createElement(DismissibleAlert/* default */.A, {
    type: "error",
    message: errorMessage,
    onClose: function onClose() {
      return setErrorMessage(null);
    }
  }), /*#__PURE__*/react.createElement(table_filter/* TableFilter */.r, {
    storageKey: browserStorageKey,
    commonFilters: commonFilters,
    onChange: onSearch,
    onToggle: onToggle
  }), /*#__PURE__*/react.createElement(arc_table/* default */.A, {
    tableBodyRowProps: {
      onClick: onRowClicked
    },
    onRowSelectionChange: onRowSelectionChange,
    urlParams: {
      "$filter": initialQuery
    },
    columns: columns,
    url: urlGetRolesTableView,
    initialSorting: [{
      id: "name",
      desc: false
    }],
    rowSelection: true,
    tableApiRef: tableApiRef,
    onError: onError
  }));
}
;// CONCATENATED MODULE: ./src/settings/roles/index.jsx




var RolesPage = function RolesPage() {
  return /*#__PURE__*/react.createElement(RolesTable, null);
};

;// CONCATENATED MODULE: ./src/settings/index.jsx










function renderComponents() {
  var searchParams = new URLSearchParams(window.location.search);
  if (searchParams.get("roleid")) {
    var rootElement = client.createRoot(document.getElementById("roleDetails"));
    rootElement.render(/*#__PURE__*/react.createElement(roles_RoleDetails, window.rsb.roleDetail.settings));
    return;
  }
  (0,utils/* RegisterComponent */.dV)(UsersPage, "Settings.Users");
  (0,utils/* RegisterComponent */.dV)(RolesPage, "Settings.Roles");
  (0,utils/* RegisterComponent */.dV)(roles_RoleDetails, "Settings.RoleDetails");
  (0,utils/* RegisterComponent */.dV)(CertPage, "Settings.Certificates");
  (0,utils/* RegisterComponent */.dV)(VaultPage, "Settings.Vault");
  (0,utils/* RegisterComponent */.dV)(ConnectionPage, "Settings.Connections");
  MigrationPage();
}
renderComponents();

/***/ }),

/***/ 95631:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ DismissibleAlert)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96540);

function DismissibleAlert({ type, message, className, onClose }) {
    const alertStyle = {
        whiteSpace: "pre-wrap",
    };
    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {
        const timer = setTimeout(() => {
            if (type !== "error" && type !== "warning") {
                onClose && onClose();
            }
        }, 10000);
        return () => clearTimeout(timer);
    }, [type, message, onClose]);
    return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, message &&
        react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: `text-break alert alert-${type === "error" ? "danger" : type} alert-dismissible ${className || "mt-3"}`, role: "alert", style: alertStyle },
            message,
            onClose != null &&
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", { type: "button", className: "btn-close", onClick: onClose }))));
}


/***/ }),

/***/ 17518:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BJ: () => (/* binding */ useLicenseTier),
/* harmony export */   D6: () => (/* binding */ useEnv),
/* harmony export */   FC: () => (/* binding */ useNodeId),
/* harmony export */   II: () => (/* binding */ useProdName),
/* harmony export */   J5: () => (/* binding */ useIsSupport),
/* harmony export */   Mo: () => (/* binding */ useFlowSnapshotConnectorThreshold),
/* harmony export */   Ol: () => (/* binding */ useLicDeprecatedOthers),
/* harmony export */   Rz: () => (/* binding */ useServerTimeZoneOffset),
/* harmony export */   VH: () => (/* binding */ useIsEnableMFA),
/* harmony export */   WU: () => (/* binding */ useDiskUsage),
/* harmony export */   Xv: () => (/* binding */ useServerTimeZoneId),
/* harmony export */   ey: () => (/* binding */ usePubUrl),
/* harmony export */   h7: () => (/* binding */ useIsAdmin),
/* harmony export */   h_: () => (/* binding */ useAppVersion),
/* harmony export */   iZ: () => (/* binding */ useCurrentUser),
/* harmony export */   jq: () => (/* binding */ useIsAdminOrStandard),
/* harmony export */   ok: () => (/* binding */ useLanguage),
/* harmony export */   rC: () => (/* binding */ useAllowUnmaskedPasswords),
/* harmony export */   rL: () => (/* binding */ useIsCloud),
/* harmony export */   s$: () => (/* binding */ useIsNotifyReady)
/* harmony export */ });
/* unused harmony exports useIsStandard, useTimeFormat */
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96540);

function useCurrentUser() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.currentUser; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.currentUser]);
}
function useIsAdmin() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.isAdmin; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.isAdmin]);
}
function useIsStandard() {
    var _a, _b;
    return React.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.isStandard; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.isStandard]);
}
function useIsAdminOrStandard() {
    var _a, _b, _c, _d;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b, _c, _d; return ((_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.isAdmin) || ((_d = (_c = window === null || window === void 0 ? void 0 : window.arc) === null || _c === void 0 ? void 0 : _c.hooks) === null || _d === void 0 ? void 0 : _d.isStandard); }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.isAdmin, (_d = (_c = window === null || window === void 0 ? void 0 : window.arc) === null || _c === void 0 ? void 0 : _c.hooks) === null || _d === void 0 ? void 0 : _d.isStandard]);
}
function useIsSupport() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.isSupport; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.isSupport]);
}
function usePubUrl() {
    var _a, _b;
    const pubUrl = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.pubUrl; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.pubUrl]);
    let canParse = false;
    if ("canParse" in URL) { // Only support in Chrome 120+
        canParse = URL.canParse(pubUrl);
    }
    else {
        try {
            new window.URL(pubUrl);
            canParse = true;
        }
        catch (e) {
            // ignore
        }
    }
    if (!canParse) {
        if (!pubUrl.toLowerCase().startsWith("http://") && !pubUrl.toLowerCase().startsWith("https://")) {
            return `${window.location.protocol}//${pubUrl}${pubUrl.endsWith("/") ? "" : "/"}`;
        }
    }
    return pubUrl.endsWith("/") ? pubUrl : `${pubUrl}/`;
}
function useNodeId() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.nodeId; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.nodeId]);
}
function useIsCloud() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.isCloud; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.isCloud]);
}
/**
* @deprecated Use `useLicenseStore` instead
*/
function useLicenseTier() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.licenseTier; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.licenseTier]);
}
function useFlowSnapshotConnectorThreshold() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.flowSnapshotConnectorThreshold; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.flowSnapshotConnectorThreshold]);
}
function useLicDeprecatedOthers() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.licDeprecatedOthers; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.licDeprecatedOthers]);
}
function useIsEnableMFA() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.isenablemfa; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.isenablemfa]);
}
function useTimeFormat() {
    var _a, _b;
    return React.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.timeFormat; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.timeFormat]);
}
function useServerTimeZoneId() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.timeZoneId; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.timeZoneId]);
}
function useServerTimeZoneOffset() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.timeZoneOffset; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.timeZoneOffset]);
}
function useAppVersion() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.appVersion; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.appVersion]);
}
function useAllowUnmaskedPasswords() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.allowUnmaskedPasswords; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.allowUnmaskedPasswords]);
}
function useProdName() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.prodName; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.prodName]);
}
function useIsNotifyReady() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.isNotifyReady; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.isNotifyReady]);
}
function useLanguage() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.language; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.language]);
}
function useDiskUsage() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.diskUsage; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.diskUsage]);
}
function useEnv() {
    var _a, _b;
    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => { var _a, _b; return (_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.env; }, [(_b = (_a = window === null || window === void 0 ? void 0 : window.arc) === null || _a === void 0 ? void 0 : _a.hooks) === null || _b === void 0 ? void 0 : _b.env]);
}


/***/ }),

/***/ 1879:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  AU: () => (/* reexport */ CertificateAction),
  Pl: () => (/* reexport */ useCertificatesStore)
});

// UNUSED EXPORTS: CertificateProvider, useCertificate

// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(96540);
;// CONCATENATED MODULE: ./src/data/certificates/contexts.ts

const CertificateContext = react.createContext(null);
function CertificateProvider({ children, certificate }) {
    return (React.createElement(CertificateContext.Provider, {
        value: certificate,
    }, children));
}
function useCertificate(silence) {
    const certificate = React.useContext(CertificateContext);
    if (certificate == null && !silence)
        throw new Error("Missing CertificateProvider in the tree");
    return certificate;
}

// EXTERNAL MODULE: ./node_modules/zustand/esm/vanilla.mjs
var vanilla = __webpack_require__(97283);
// EXTERNAL MODULE: ./node_modules/zustand/esm/index.mjs
var esm = __webpack_require__(7282);
// EXTERNAL MODULE: ./src/utils/index.ts
var utils = __webpack_require__(46219);
// EXTERNAL MODULE: ./src/data/utils/index.ts + 2 modules
var data_utils = __webpack_require__(32037);
// EXTERNAL MODULE: ./src/components/utils/index.js + 1 modules
var components_utils = __webpack_require__(25337);
;// CONCATENATED MODULE: ./src/data/certificates/utils.ts
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


function fetchCertificates(names) {
    return __awaiter(this, void 0, void 0, function* () {
        return (0,data_utils/* fetch */.hd)({
            url: `src/certificates.rsd?@json${names ? ("&names=" + encodeURIComponent(names.join(","))) : ""}`,
            method: "GET",
        }).then(({ data }) => {
            const normalizedParters = data.map((certificate) => normalizeCertificate(certificate));
            return normalizedParters;
        });
    });
}
function uploadCertificates(uploaders) {
    return __awaiter(this, void 0, void 0, function* () {
        return (0,data_utils/* fetch */.hd)({
            url: "src/certificates.rsd?@json&style=upload",
            method: "POST",
            data: {
                JsonData: JSON.stringify(uploaders),
            },
        }).then(({ data }) => {
            const changes = [];
            changes.push(...data.map((item) => (item.errorCode ? Object.assign({}, item) : {
                name: item.name,
                data: normalizeCertificate(item),
            })));
            return changes;
        });
    });
}
function createCertificates(creators) {
    return __awaiter(this, void 0, void 0, function* () {
        return (0,data_utils/* fetch */.hd)({
            url: "src/certificates.rsd?@json&style=create",
            method: "POST",
            data: {
                JsonData: JSON.stringify(creators),
            },
        }).then(({ data }) => {
            const changes = [];
            changes.push(...data.map((item) => (item.errorCode ? Object.assign({}, item) : {
                name: item.name,
                data: normalizeCertificate(item),
            })));
            return changes;
        });
    });
}
function deleteCertificates(names) {
    return __awaiter(this, void 0, void 0, function* () {
        return (0,data_utils/* fetch */.hd)({
            url: "src/certificates.rsd?@json",
            method: "DELETE",
            headers: { "content-type": "application/x-www-form-urlencoded" },
            data: {
                names: JSON.stringify(names),
            },
        }).then(({ data }) => {
            const changes = [];
            changes.push(...data.map((item) => (item.errorCode ? Object.assign(Object.assign({}, item), { data: undefined }) : {
                name: item.name,
            })));
            return changes;
        });
    });
}
function fetchCertificatePrivileges() {
    return __awaiter(this, void 0, void 0, function* () {
        const response = yield (0,components_utils/* fetchData */.Fd)(new AbortController(), "src/getCertificatePrivileges.rsb?@json");
        if (response.items) {
            const normalizedParters = response.items.map((privilege) => normalizeCertificatePrivilege(privilege));
            return normalizedParters;
        }
        return [];
    });
}
function normalizeCertificate(certificate) {
    return certificate;
}
function normalizeCertificatePrivilege(privilege) {
    if (Array.isArray(privilege.certificates)) {
        return privilege;
    }
    if (privilege.certificates && privilege.certificates.length > 0) {
        return {
            action: privilege.action,
            certificates: [privilege.certificates]
        };
    }
    else {
        return {
            action: privilege.action,
            certificates: []
        };
    }
}

;// CONCATENATED MODULE: ./src/data/certificates/store.ts
var store_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



function createCertificatesStore() {
    return (0,vanilla/* createStore */.y)()((set) => ({
        ready: false,
        certificates: new utils/* CaseInsensitiveMap */.Y(),
        privileges: new utils/* CaseInsensitiveMap */.Y(),
        fetch: store_fetchCertificates.bind(null, set),
        fetchPrivilege: store_fetchCertificatePrivileges.bind(null, set),
        uploadCertificates: store_uploadCertificates.bind(null, set),
        createCertificates: store_createCertificates.bind(null, set),
        deleteCertificates: store_deleteCertificates.bind(null, set),
    }));
}
function store_fetchCertificates(set, names) {
    return store_awaiter(this, void 0, void 0, function* () {
        const certificates = new utils/* CaseInsensitiveMap */.Y();
        return fetchCertificates(names).then((data) => {
            data.forEach((certificate) => {
                certificates.set(certificate.name, certificate);
            });
            return data;
        }).finally(() => set((state) => {
            if (names != null) {
                state.certificates.forEach((certificate) => !certificates.has(certificate.name) && certificates.set(certificate.name, certificate));
            }
            return {
                ready: true,
                certificates,
            };
        }));
    });
}
function store_uploadCertificates(set, uploaders) {
    return store_awaiter(this, void 0, void 0, function* () {
        return uploadCertificates(uploaders).then((changes) => {
            const newCertificates = changes.filter((item) => !item.errorCode).map((item) => item.data);
            set((state) => ({
                certificates: new utils/* CaseInsensitiveMap */.Y(Array.from(state.certificates.entries()).concat(newCertificates.map((certificate) => [certificate.name, certificate]))),
            }));
            return changes;
        });
    });
}
function store_createCertificates(set, creators) {
    return store_awaiter(this, void 0, void 0, function* () {
        return createCertificates(creators).then((changes) => {
            const newCertificates = changes.filter((item) => !item.errorCode).map((item) => item.data);
            set((state) => ({
                certificates: new utils/* CaseInsensitiveMap */.Y(Array.from(state.certificates.entries()).concat(newCertificates.map((certificate) => [certificate.name, certificate]))),
            }));
            return changes;
        });
    });
}
function store_deleteCertificates(set, names) {
    return store_awaiter(this, void 0, void 0, function* () {
        return deleteCertificates(names).then((changes) => {
            const deletedCertificateIds = new Set();
            changes.forEach((change) => {
                if (change.name && !change.errorCode) {
                    deletedCertificateIds.add(change.name.toLowerCase());
                }
            });
            set((state) => ({
                certificates: new utils/* CaseInsensitiveMap */.Y(Array.from(state.certificates.entries()).filter(([, value]) => !deletedCertificateIds.has(value.name.toLowerCase()))),
            }));
            return changes;
        });
    });
}
function store_fetchCertificatePrivileges(set) {
    return store_awaiter(this, void 0, void 0, function* () {
        const privileges = new utils/* CaseInsensitiveMap */.Y();
        return fetchCertificatePrivileges().then((data) => {
            data.forEach((privilege) => {
                privileges.set(privilege.action, privilege);
            });
            return data;
        }).finally(() => set((state) => {
            state.privileges.forEach((privilege) => !privileges.has(privilege.action) && privileges.set(privilege.action, privilege));
            return {
                ready: true,
                privileges,
            };
        }));
    });
}
const currentStoreRef = {
    store: null,
};
function useCertificatesStore(selector) {
    let needsFetch = false;
    if (currentStoreRef.store == null) {
        currentStoreRef.store = createCertificatesStore();
        needsFetch = true;
    }
    const fetch = (0,esm/* useStore */.Pj)(currentStoreRef.store, (state) => state.fetch);
    if (needsFetch) {
        fetch(null);
    }
    return (0,esm/* useStore */.Pj)(currentStoreRef.store, selector);
}
/* Test */
if (typeof window.beforeEach === "function") {
    window.beforeEach(() => {
        currentStoreRef.store = null;
    });
}

;// CONCATENATED MODULE: ./src/data/certificates/types.ts
var CertificateAction;
(function (CertificateAction) {
    CertificateAction["DownloadPublic"] = "DownloadPublic";
    CertificateAction["DownloadPrivate"] = "DownloadPrivate";
    CertificateAction["RenamePublic"] = "RenamePublic";
    CertificateAction["RenamePrivate"] = "RenamePrivate";
    CertificateAction["ReadPublic"] = "ReadPublic";
    CertificateAction["ReadPrivate"] = "ReadPrivate";
    CertificateAction["CreatePublic"] = "CreatePublic";
    CertificateAction["CreatePrivate"] = "CreatePrivate";
    CertificateAction["DeletePublic"] = "DeletePublic";
    CertificateAction["DeletePrivate"] = "DeletePrivate";
})(CertificateAction || (CertificateAction = {}));

;// CONCATENATED MODULE: ./src/data/certificates/index.ts





/***/ }),

/***/ 22002:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  B: () => (/* reexport */ Setting),
  w: () => (/* reexport */ Settings)
});

// EXTERNAL MODULE: ./src/utils/index.ts
var utils = __webpack_require__(46219);
;// CONCATENATED MODULE: ./src/data/types/settings/types.ts

class Setting {
    constructor(name, value, vaultId) {
        this._name = name;
        this._value = value !== null && value !== void 0 ? value : null;
        this._vaultId = vaultId !== null && vaultId !== void 0 ? vaultId : null;
    }
    get name() { return this._name; }
    get value() { return this._value; }
    set value(value) { this._value = value; }
    get valueAsBool() { var _a; return ((_a = this._value) === null || _a === void 0 ? void 0 : _a.toLowerCase()) === "true"; }
    get valueAsNumber() { return parseFloat(this._value); }
    get valueAsList() { return this._value.split(",").map(value => value.trim()); }
    get vaultId() { return this._vaultId; }
    set vaultId(vaultId) { this._vaultId = vaultId; }
}
function cloneSetting(setting) {
    return new Setting(setting.name, setting.value, setting.vaultId);
}
class Settings extends utils/* CaseInsensitiveMap */.Y {
    constructor(settings) {
        let entries = [];
        if (settings instanceof Settings) {
            entries = Array.from(settings.entries());
        }
        else if (Array.isArray(settings)) {
            entries = settings;
        }
        entries = entries.map(([key, setting]) => [key, cloneSetting(setting)]);
        super(entries);
    }
}

;// CONCATENATED MODULE: ./src/data/types/settings/index.ts


;// CONCATENATED MODULE: ./src/data/types/index.ts



/***/ }),

/***/ 32037:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  hd: () => (/* reexport */ fetch),
  Uc: () => (/* reexport */ fetchSettings),
  Xx: () => (/* reexport */ updateSettings)
});

// UNUSED EXPORTS: buildSetting

// EXTERNAL MODULE: ../../.react-shared/axios/index.jsx
var axios = __webpack_require__(29029);
;// CONCATENATED MODULE: ./src/data/utils/fetch.ts

function parseJsonData(response) {
    var _a;
    if (response.status == 200 || response.status == 304 || response.status == 412 && response.headers["last-modified"]) {
        if (((_a = response.data.items) === null || _a === void 0 ? void 0 : _a.length) > 0) {
            const data = response.data.items[0].jsondata;
            if (data) {
                const dataObj = JSON.parse(data);
                if (dataObj === null || dataObj === void 0 ? void 0 : dataObj.errorMessage) {
                    throw new Error(dataObj.errorMessage);
                }
                return dataObj;
            }
            else if (response.data.items[0]["rsb:emessage"]) {
                throw new Error(response.data.items[0]["rsb:emessage"]);
            }
            else {
                throw new Error("Unknown Result: " + response.data);
            }
        }
        else {
            return {};
        }
    }
    else {
        throw new Error(`${response.status}: ${response.statusText}`);
    }
}
function isAllowed(privileges, action) {
    return privileges.some((privilege) => privilege.action === action && privilege.allowed);
}
function isAccessControl(obj) {
    return typeof obj === "object" && "privileges" in obj;
}
function fetch(options) {
    return new Promise((resolve, reject) => {
        axios/* default */.A.request(Object.assign(Object.assign({}, options), { headers: Object.assign(Object.assign({}, options.headers), { "Cache-Control": "no-cache, no-store, max-age=0" }) })).then((response) => {
            try {
                const data = parseJsonData(response);
                if (isAccessControl(data)) {
                    data.isAllowed = isAllowed.bind(null, data.privileges);
                }
                else if (Array.isArray(data) && data.length > 0) {
                    data.forEach((item) => { isAccessControl(item) && (item.isAllowed = isAllowed.bind(null, item.privileges)); });
                }
                resolve({ data, response });
            }
            catch (error) {
                reject(error);
            }
        }).catch((error) => {
            reject(error);
        });
    });
}

// EXTERNAL MODULE: ./src/data/types/index.ts + 2 modules
var types = __webpack_require__(22002);
// EXTERNAL MODULE: ./src/components/utils/index.js + 1 modules
var utils = __webpack_require__(25337);
;// CONCATENATED MODULE: ./src/data/utils/fetchSettings.ts
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



function fetchSettings(url, settingsKey, parameters) {
    return __awaiter(this, void 0, void 0, function* () {
        const urlObj = new URL(url, "http://placeholder");
        if (parameters) {
            for (const key in parameters) {
                urlObj.searchParams.append(key, parameters[key]);
            }
        }
        return fetch({
            url: urlObj.toString().substring(urlObj.origin.length + 1),
            method: "GET",
        }).then(({ data, response }) => {
            var _a;
            const settings = new types/* Settings */.w();
            for (const key in data.settings) {
                const setting = buildSetting(data.settings[key]);
                settings.set(setting.name, setting);
            }
            (0,utils/* setResourceLastModified */.A3)(settingsKey, (_a = response === null || response === void 0 ? void 0 : response.headers) === null || _a === void 0 ? void 0 : _a["last-modified"]);
            return settings;
        });
    });
}
function updateSettings(url, settings, settingsKey, parameters) {
    return __awaiter(this, void 0, void 0, function* () {
        return fetch({
            url: url,
            method: "PUT",
            data: {
                JsonData: JSON.stringify(Object.assign(Object.assign({}, parameters), { settings: Array.from(settings.entries()).reduce((acc, [name, setting]) => (Object.assign(Object.assign({}, acc), { [name.toLowerCase()]: { name: setting.name, value: setting.value, vaultId: setting.vaultId } })), {}) })),
            },
            headers: { "If-Unmodified-Since": (0,utils/* getResourceLastModified */.G4)(settingsKey) },
        }).then(({ data, response }) => {
            var _a;
            const settings = data.settings ? new types/* Settings */.w() : undefined;
            for (const key in data.settings) {
                const setting = buildSetting(data.settings[key]);
                settings.set(setting.name, setting);
            }
            (0,utils/* setResourceLastModified */.A3)(settingsKey, (_a = response === null || response === void 0 ? void 0 : response.headers) === null || _a === void 0 ? void 0 : _a["last-modified"]);
            const result = {
                userMessage: data.userMessage,
                warning: data.warning,
                settings: settings
            };
            return result;
        });
    });
}
function buildSetting(result) {
    return new types/* Setting */.B(result.name, result.value, result.vaultId);
}

;// CONCATENATED MODULE: ./src/data/utils/index.ts




/***/ }),

/***/ 38318:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Y: () => (/* binding */ CaseInsensitiveMap)
/* harmony export */ });
class CaseInsensitiveMap extends Map {
    constructor(iterable) {
        super();
        this._names = new Map();
        Array.from(iterable !== null && iterable !== void 0 ? iterable : []).forEach(([key, value]) => this.set(key, value));
    }
    get(key) {
        return super.get(this._names.get(key === null || key === void 0 ? void 0 : key.toLowerCase()));
    }
    set(key, value) {
        const lowerKey = key === null || key === void 0 ? void 0 : key.toLowerCase();
        const realKey = this._names.get(lowerKey);
        !realKey && this._names.set(lowerKey, key);
        return super.set(realKey || key, value);
    }
    has(key) {
        return super.has(this._names.get(key === null || key === void 0 ? void 0 : key.toLowerCase()));
    }
    delete(key) {
        return super.delete(this._names.get(key === null || key === void 0 ? void 0 : key.toLowerCase()));
    }
}


/***/ }),

/***/ 46219:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Y: () => (/* reexport safe */ _CaseInsensitiveMap__WEBPACK_IMPORTED_MODULE_0__.Y)
/* harmony export */ });
/* harmony import */ var _CaseInsensitiveMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(38318);



/***/ }),

/***/ 87963:
/***/ ((module) => {

module.exports = {};

/***/ }),

/***/ 18149:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  oS: () => (/* binding */ QueryBuilder),
  PD: () => (/* binding */ QueryBuilderContext),
  W: () => (/* binding */ TestID),
  Pm: () => (/* binding */ ValueEditor),
  AP: () => (/* binding */ convertFromIC),
  vT: () => (/* binding */ convertToIC),
  HI: () => (/* binding */ defaultControlClassnames),
  YM: () => (/* binding */ defaultControlElements),
  Cr: () => (/* binding */ defaultTranslations),
  yJ: () => (/* binding */ defaultValueProcessorByRule),
  OJ: () => (/* binding */ formatQuery),
  ni: () => (/* binding */ generateID),
  D7: () => (/* binding */ getCompatContextProvider),
  _6: () => (/* binding */ getParentPath),
  QX: () => (/* binding */ isAncestor),
  GD: () => (/* binding */ isRuleGroup),
  wS: () => (/* binding */ isRuleGroupType),
  G$: () => (/* binding */ isRuleGroupTypeIC),
  _E: () => (/* binding */ parseSQL),
  P9: () => (/* binding */ pathsAreEqual),
  q4: () => (/* binding */ standardClassnames),
  JZ: () => (/* binding */ useMergedContext),
  $_: () => (/* binding */ usePreferProp)
});

// UNUSED EXPORTS: ActionElement, DragHandle, InlineCombinator, LogType, NotToggle, Rule, RuleComponents, RuleGroup, RuleGroupBodyComponents, RuleGroupHeaderComponents, ValueSelector, add, convertQuery, default, defaultCELValueProcessor, defaultCombinators, defaultCombinatorsExtended, defaultJoinChar, defaultMongoDBValueProcessor, defaultOperatorNegationMap, defaultOperators, defaultPlaceholderFieldGroupLabel, defaultPlaceholderFieldLabel, defaultPlaceholderFieldName, defaultPlaceholderOperatorGroupLabel, defaultPlaceholderOperatorLabel, defaultPlaceholderOperatorName, defaultRuleProcessorCEL, defaultRuleProcessorJsonLogic, defaultRuleProcessorMongoDB, defaultRuleProcessorSQL, defaultRuleProcessorSpEL, defaultSpELValueProcessor, defaultValidator, defaultValueProcessor, defaultValueProcessorCELByRule, defaultValueProcessorMongoDBByRule, defaultValueProcessorSpELByRule, filterFieldsByComparator, findPath, getCommonAncestorPath, getFirstOption, getOption, getValidationClassNames, getValueSourcesUtil, groupInvalidReasons, isOptionGroupArray, isPojo, isRuleOrGroupValid, isValidationResult, joinWith, jsonLogicAdditionalOperators, mergeClassnames, messages, move, nullFreeArray, numericRegex, objectKeys, parseCEL, parseJsonLogic, parseMongoDB, parseNumber, pathIsDisabled, prepareRule, prepareRuleGroup, prepareRuleOrGroup, regenerateID, regenerateIDs, remove, splitBy, toArray, toOptions, transformQuery, trimIfString, uniqByName, uniqOptGroups, update, useControlledOrUncontrolled, useDeprecatedProps, usePrevious, useQueryBuilder, useReactDndWarning, useRule, useRuleGroup, useSelectElementChangeHandler, useValueEditor, useValueSelector

// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(96540);
;// CONCATENATED MODULE: ./node_modules/clsx/dist/clsx.m.js
function r(e){var t,f,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=" "),n+=f);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function clsx(){for(var e,t,f=0,n="";f<arguments.length;)(e=arguments[f++])&&(t=r(e))&&(n&&(n+=" "),n+=t);return n}/* harmony default export */ const clsx_m = (clsx);
;// CONCATENATED MODULE: ./node_modules/immer/dist/immer.mjs
// src/utils/env.ts
var NOTHING = Symbol.for("immer-nothing");
var DRAFTABLE = Symbol.for("immer-draftable");
var DRAFT_STATE = Symbol.for("immer-state");

// src/utils/errors.ts
var errors =  false ? 0 : [];
function die(error, ...args) {
  if (false) {}
  throw new Error(
    `[Immer] minified error nr: ${error}. Full error at: https://bit.ly/3cXEKWf`
  );
}

// src/utils/common.ts
var getPrototypeOf = Object.getPrototypeOf;
function isDraft(value) {
  return !!value && !!value[DRAFT_STATE];
}
function isDraftable(value) {
  if (!value)
    return false;
  return isPlainObject(value) || Array.isArray(value) || !!value[DRAFTABLE] || !!value.constructor?.[DRAFTABLE] || isMap(value) || isSet(value);
}
var objectCtorString = Object.prototype.constructor.toString();
function isPlainObject(value) {
  if (!value || typeof value !== "object")
    return false;
  const proto = getPrototypeOf(value);
  if (proto === null) {
    return true;
  }
  const Ctor = Object.hasOwnProperty.call(proto, "constructor") && proto.constructor;
  if (Ctor === Object)
    return true;
  return typeof Ctor == "function" && Function.toString.call(Ctor) === objectCtorString;
}
function original(value) {
  if (!isDraft(value))
    die(15, value);
  return value[DRAFT_STATE].base_;
}
function each(obj, iter) {
  if (getArchtype(obj) === 0 /* Object */) {
    Reflect.ownKeys(obj).forEach((key) => {
      iter(key, obj[key], obj);
    });
  } else {
    obj.forEach((entry, index) => iter(index, entry, obj));
  }
}
function getArchtype(thing) {
  const state = thing[DRAFT_STATE];
  return state ? state.type_ : Array.isArray(thing) ? 1 /* Array */ : isMap(thing) ? 2 /* Map */ : isSet(thing) ? 3 /* Set */ : 0 /* Object */;
}
function has(thing, prop) {
  return getArchtype(thing) === 2 /* Map */ ? thing.has(prop) : Object.prototype.hasOwnProperty.call(thing, prop);
}
function get(thing, prop) {
  return getArchtype(thing) === 2 /* Map */ ? thing.get(prop) : thing[prop];
}
function set(thing, propOrOldValue, value) {
  const t = getArchtype(thing);
  if (t === 2 /* Map */)
    thing.set(propOrOldValue, value);
  else if (t === 3 /* Set */) {
    thing.add(value);
  } else
    thing[propOrOldValue] = value;
}
function is(x, y) {
  if (x === y) {
    return x !== 0 || 1 / x === 1 / y;
  } else {
    return x !== x && y !== y;
  }
}
function isMap(target) {
  return target instanceof Map;
}
function isSet(target) {
  return target instanceof Set;
}
function latest(state) {
  return state.copy_ || state.base_;
}
function shallowCopy(base, strict) {
  if (isMap(base)) {
    return new Map(base);
  }
  if (isSet(base)) {
    return new Set(base);
  }
  if (Array.isArray(base))
    return Array.prototype.slice.call(base);
  const isPlain = isPlainObject(base);
  if (strict === true || strict === "class_only" && !isPlain) {
    const descriptors = Object.getOwnPropertyDescriptors(base);
    delete descriptors[DRAFT_STATE];
    let keys = Reflect.ownKeys(descriptors);
    for (let i = 0; i < keys.length; i++) {
      const key = keys[i];
      const desc = descriptors[key];
      if (desc.writable === false) {
        desc.writable = true;
        desc.configurable = true;
      }
      if (desc.get || desc.set)
        descriptors[key] = {
          configurable: true,
          writable: true,
          // could live with !!desc.set as well here...
          enumerable: desc.enumerable,
          value: base[key]
        };
    }
    return Object.create(getPrototypeOf(base), descriptors);
  } else {
    const proto = getPrototypeOf(base);
    if (proto !== null && isPlain) {
      return { ...base };
    }
    const obj = Object.create(proto);
    return Object.assign(obj, base);
  }
}
function freeze(obj, deep = false) {
  if (isFrozen(obj) || isDraft(obj) || !isDraftable(obj))
    return obj;
  if (getArchtype(obj) > 1) {
    obj.set = obj.add = obj.clear = obj.delete = dontMutateFrozenCollections;
  }
  Object.freeze(obj);
  if (deep)
    Object.entries(obj).forEach(([key, value]) => freeze(value, true));
  return obj;
}
function dontMutateFrozenCollections() {
  die(2);
}
function isFrozen(obj) {
  return Object.isFrozen(obj);
}

// src/utils/plugins.ts
var plugins = {};
function getPlugin(pluginKey) {
  const plugin = plugins[pluginKey];
  if (!plugin) {
    die(0, pluginKey);
  }
  return plugin;
}
function loadPlugin(pluginKey, implementation) {
  if (!plugins[pluginKey])
    plugins[pluginKey] = implementation;
}

// src/core/scope.ts
var currentScope;
function getCurrentScope() {
  return currentScope;
}
function createScope(parent_, immer_) {
  return {
    drafts_: [],
    parent_,
    immer_,
    // Whenever the modified draft contains a draft from another scope, we
    // need to prevent auto-freezing so the unowned draft can be finalized.
    canAutoFreeze_: true,
    unfinalizedDrafts_: 0
  };
}
function usePatchesInScope(scope, patchListener) {
  if (patchListener) {
    getPlugin("Patches");
    scope.patches_ = [];
    scope.inversePatches_ = [];
    scope.patchListener_ = patchListener;
  }
}
function revokeScope(scope) {
  leaveScope(scope);
  scope.drafts_.forEach(revokeDraft);
  scope.drafts_ = null;
}
function leaveScope(scope) {
  if (scope === currentScope) {
    currentScope = scope.parent_;
  }
}
function enterScope(immer2) {
  return currentScope = createScope(currentScope, immer2);
}
function revokeDraft(draft) {
  const state = draft[DRAFT_STATE];
  if (state.type_ === 0 /* Object */ || state.type_ === 1 /* Array */)
    state.revoke_();
  else
    state.revoked_ = true;
}

// src/core/finalize.ts
function processResult(result, scope) {
  scope.unfinalizedDrafts_ = scope.drafts_.length;
  const baseDraft = scope.drafts_[0];
  const isReplaced = result !== void 0 && result !== baseDraft;
  if (isReplaced) {
    if (baseDraft[DRAFT_STATE].modified_) {
      revokeScope(scope);
      die(4);
    }
    if (isDraftable(result)) {
      result = finalize(scope, result);
      if (!scope.parent_)
        maybeFreeze(scope, result);
    }
    if (scope.patches_) {
      getPlugin("Patches").generateReplacementPatches_(
        baseDraft[DRAFT_STATE].base_,
        result,
        scope.patches_,
        scope.inversePatches_
      );
    }
  } else {
    result = finalize(scope, baseDraft, []);
  }
  revokeScope(scope);
  if (scope.patches_) {
    scope.patchListener_(scope.patches_, scope.inversePatches_);
  }
  return result !== NOTHING ? result : void 0;
}
function finalize(rootScope, value, path) {
  if (isFrozen(value))
    return value;
  const state = value[DRAFT_STATE];
  if (!state) {
    each(
      value,
      (key, childValue) => finalizeProperty(rootScope, state, value, key, childValue, path)
    );
    return value;
  }
  if (state.scope_ !== rootScope)
    return value;
  if (!state.modified_) {
    maybeFreeze(rootScope, state.base_, true);
    return state.base_;
  }
  if (!state.finalized_) {
    state.finalized_ = true;
    state.scope_.unfinalizedDrafts_--;
    const result = state.copy_;
    let resultEach = result;
    let isSet2 = false;
    if (state.type_ === 3 /* Set */) {
      resultEach = new Set(result);
      result.clear();
      isSet2 = true;
    }
    each(
      resultEach,
      (key, childValue) => finalizeProperty(rootScope, state, result, key, childValue, path, isSet2)
    );
    maybeFreeze(rootScope, result, false);
    if (path && rootScope.patches_) {
      getPlugin("Patches").generatePatches_(
        state,
        path,
        rootScope.patches_,
        rootScope.inversePatches_
      );
    }
  }
  return state.copy_;
}
function finalizeProperty(rootScope, parentState, targetObject, prop, childValue, rootPath, targetIsSet) {
  if (false)
    {}
  if (isDraft(childValue)) {
    const path = rootPath && parentState && parentState.type_ !== 3 /* Set */ && // Set objects are atomic since they have no keys.
    !has(parentState.assigned_, prop) ? rootPath.concat(prop) : void 0;
    const res = finalize(rootScope, childValue, path);
    set(targetObject, prop, res);
    if (isDraft(res)) {
      rootScope.canAutoFreeze_ = false;
    } else
      return;
  } else if (targetIsSet) {
    targetObject.add(childValue);
  }
  if (isDraftable(childValue) && !isFrozen(childValue)) {
    if (!rootScope.immer_.autoFreeze_ && rootScope.unfinalizedDrafts_ < 1) {
      return;
    }
    finalize(rootScope, childValue);
    if ((!parentState || !parentState.scope_.parent_) && typeof prop !== "symbol" && Object.prototype.propertyIsEnumerable.call(targetObject, prop))
      maybeFreeze(rootScope, childValue);
  }
}
function maybeFreeze(scope, value, deep = false) {
  if (!scope.parent_ && scope.immer_.autoFreeze_ && scope.canAutoFreeze_) {
    freeze(value, deep);
  }
}

// src/core/proxy.ts
function createProxyProxy(base, parent) {
  const isArray = Array.isArray(base);
  const state = {
    type_: isArray ? 1 /* Array */ : 0 /* Object */,
    // Track which produce call this is associated with.
    scope_: parent ? parent.scope_ : getCurrentScope(),
    // True for both shallow and deep changes.
    modified_: false,
    // Used during finalization.
    finalized_: false,
    // Track which properties have been assigned (true) or deleted (false).
    assigned_: {},
    // The parent draft state.
    parent_: parent,
    // The base state.
    base_: base,
    // The base proxy.
    draft_: null,
    // set below
    // The base copy with any updated values.
    copy_: null,
    // Called by the `produce` function.
    revoke_: null,
    isManual_: false
  };
  let target = state;
  let traps = objectTraps;
  if (isArray) {
    target = [state];
    traps = arrayTraps;
  }
  const { revoke, proxy } = Proxy.revocable(target, traps);
  state.draft_ = proxy;
  state.revoke_ = revoke;
  return proxy;
}
var objectTraps = {
  get(state, prop) {
    if (prop === DRAFT_STATE)
      return state;
    const source = latest(state);
    if (!has(source, prop)) {
      return readPropFromProto(state, source, prop);
    }
    const value = source[prop];
    if (state.finalized_ || !isDraftable(value)) {
      return value;
    }
    if (value === peek(state.base_, prop)) {
      prepareCopy(state);
      return state.copy_[prop] = createProxy(value, state);
    }
    return value;
  },
  has(state, prop) {
    return prop in latest(state);
  },
  ownKeys(state) {
    return Reflect.ownKeys(latest(state));
  },
  set(state, prop, value) {
    const desc = getDescriptorFromProto(latest(state), prop);
    if (desc?.set) {
      desc.set.call(state.draft_, value);
      return true;
    }
    if (!state.modified_) {
      const current2 = peek(latest(state), prop);
      const currentState = current2?.[DRAFT_STATE];
      if (currentState && currentState.base_ === value) {
        state.copy_[prop] = value;
        state.assigned_[prop] = false;
        return true;
      }
      if (is(value, current2) && (value !== void 0 || has(state.base_, prop)))
        return true;
      prepareCopy(state);
      markChanged(state);
    }
    if (state.copy_[prop] === value && // special case: handle new props with value 'undefined'
    (value !== void 0 || prop in state.copy_) || // special case: NaN
    Number.isNaN(value) && Number.isNaN(state.copy_[prop]))
      return true;
    state.copy_[prop] = value;
    state.assigned_[prop] = true;
    return true;
  },
  deleteProperty(state, prop) {
    if (peek(state.base_, prop) !== void 0 || prop in state.base_) {
      state.assigned_[prop] = false;
      prepareCopy(state);
      markChanged(state);
    } else {
      delete state.assigned_[prop];
    }
    if (state.copy_) {
      delete state.copy_[prop];
    }
    return true;
  },
  // Note: We never coerce `desc.value` into an Immer draft, because we can't make
  // the same guarantee in ES5 mode.
  getOwnPropertyDescriptor(state, prop) {
    const owner = latest(state);
    const desc = Reflect.getOwnPropertyDescriptor(owner, prop);
    if (!desc)
      return desc;
    return {
      writable: true,
      configurable: state.type_ !== 1 /* Array */ || prop !== "length",
      enumerable: desc.enumerable,
      value: owner[prop]
    };
  },
  defineProperty() {
    die(11);
  },
  getPrototypeOf(state) {
    return getPrototypeOf(state.base_);
  },
  setPrototypeOf() {
    die(12);
  }
};
var arrayTraps = {};
each(objectTraps, (key, fn) => {
  arrayTraps[key] = function() {
    arguments[0] = arguments[0][0];
    return fn.apply(this, arguments);
  };
});
arrayTraps.deleteProperty = function(state, prop) {
  if (false)
    {}
  return arrayTraps.set.call(this, state, prop, void 0);
};
arrayTraps.set = function(state, prop, value) {
  if (false)
    {}
  return objectTraps.set.call(this, state[0], prop, value, state[0]);
};
function peek(draft, prop) {
  const state = draft[DRAFT_STATE];
  const source = state ? latest(state) : draft;
  return source[prop];
}
function readPropFromProto(state, source, prop) {
  const desc = getDescriptorFromProto(source, prop);
  return desc ? `value` in desc ? desc.value : (
    // This is a very special case, if the prop is a getter defined by the
    // prototype, we should invoke it with the draft as context!
    desc.get?.call(state.draft_)
  ) : void 0;
}
function getDescriptorFromProto(source, prop) {
  if (!(prop in source))
    return void 0;
  let proto = getPrototypeOf(source);
  while (proto) {
    const desc = Object.getOwnPropertyDescriptor(proto, prop);
    if (desc)
      return desc;
    proto = getPrototypeOf(proto);
  }
  return void 0;
}
function markChanged(state) {
  if (!state.modified_) {
    state.modified_ = true;
    if (state.parent_) {
      markChanged(state.parent_);
    }
  }
}
function prepareCopy(state) {
  if (!state.copy_) {
    state.copy_ = shallowCopy(
      state.base_,
      state.scope_.immer_.useStrictShallowCopy_
    );
  }
}

// src/core/immerClass.ts
var Immer2 = class {
  constructor(config) {
    this.autoFreeze_ = true;
    this.useStrictShallowCopy_ = false;
    /**
     * The `produce` function takes a value and a "recipe function" (whose
     * return value often depends on the base state). The recipe function is
     * free to mutate its first argument however it wants. All mutations are
     * only ever applied to a __copy__ of the base state.
     *
     * Pass only a function to create a "curried producer" which relieves you
     * from passing the recipe function every time.
     *
     * Only plain objects and arrays are made mutable. All other objects are
     * considered uncopyable.
     *
     * Note: This function is __bound__ to its `Immer` instance.
     *
     * @param {any} base - the initial state
     * @param {Function} recipe - function that receives a proxy of the base state as first argument and which can be freely modified
     * @param {Function} patchListener - optional function that will be called with all the patches produced here
     * @returns {any} a new state, or the initial state if nothing was modified
     */
    this.produce = (base, recipe, patchListener) => {
      if (typeof base === "function" && typeof recipe !== "function") {
        const defaultBase = recipe;
        recipe = base;
        const self = this;
        return function curriedProduce(base2 = defaultBase, ...args) {
          return self.produce(base2, (draft) => recipe.call(this, draft, ...args));
        };
      }
      if (typeof recipe !== "function")
        die(6);
      if (patchListener !== void 0 && typeof patchListener !== "function")
        die(7);
      let result;
      if (isDraftable(base)) {
        const scope = enterScope(this);
        const proxy = createProxy(base, void 0);
        let hasError = true;
        try {
          result = recipe(proxy);
          hasError = false;
        } finally {
          if (hasError)
            revokeScope(scope);
          else
            leaveScope(scope);
        }
        usePatchesInScope(scope, patchListener);
        return processResult(result, scope);
      } else if (!base || typeof base !== "object") {
        result = recipe(base);
        if (result === void 0)
          result = base;
        if (result === NOTHING)
          result = void 0;
        if (this.autoFreeze_)
          freeze(result, true);
        if (patchListener) {
          const p = [];
          const ip = [];
          getPlugin("Patches").generateReplacementPatches_(base, result, p, ip);
          patchListener(p, ip);
        }
        return result;
      } else
        die(1, base);
    };
    this.produceWithPatches = (base, recipe) => {
      if (typeof base === "function") {
        return (state, ...args) => this.produceWithPatches(state, (draft) => base(draft, ...args));
      }
      let patches, inversePatches;
      const result = this.produce(base, recipe, (p, ip) => {
        patches = p;
        inversePatches = ip;
      });
      return [result, patches, inversePatches];
    };
    if (typeof config?.autoFreeze === "boolean")
      this.setAutoFreeze(config.autoFreeze);
    if (typeof config?.useStrictShallowCopy === "boolean")
      this.setUseStrictShallowCopy(config.useStrictShallowCopy);
  }
  createDraft(base) {
    if (!isDraftable(base))
      die(8);
    if (isDraft(base))
      base = current(base);
    const scope = enterScope(this);
    const proxy = createProxy(base, void 0);
    proxy[DRAFT_STATE].isManual_ = true;
    leaveScope(scope);
    return proxy;
  }
  finishDraft(draft, patchListener) {
    const state = draft && draft[DRAFT_STATE];
    if (!state || !state.isManual_)
      die(9);
    const { scope_: scope } = state;
    usePatchesInScope(scope, patchListener);
    return processResult(void 0, scope);
  }
  /**
   * Pass true to automatically freeze all copies created by Immer.
   *
   * By default, auto-freezing is enabled.
   */
  setAutoFreeze(value) {
    this.autoFreeze_ = value;
  }
  /**
   * Pass true to enable strict shallow copy.
   *
   * By default, immer does not copy the object descriptors such as getter, setter and non-enumrable properties.
   */
  setUseStrictShallowCopy(value) {
    this.useStrictShallowCopy_ = value;
  }
  applyPatches(base, patches) {
    let i;
    for (i = patches.length - 1; i >= 0; i--) {
      const patch = patches[i];
      if (patch.path.length === 0 && patch.op === "replace") {
        base = patch.value;
        break;
      }
    }
    if (i > -1) {
      patches = patches.slice(i + 1);
    }
    const applyPatchesImpl = getPlugin("Patches").applyPatches_;
    if (isDraft(base)) {
      return applyPatchesImpl(base, patches);
    }
    return this.produce(
      base,
      (draft) => applyPatchesImpl(draft, patches)
    );
  }
};
function createProxy(value, parent) {
  const draft = isMap(value) ? getPlugin("MapSet").proxyMap_(value, parent) : isSet(value) ? getPlugin("MapSet").proxySet_(value, parent) : createProxyProxy(value, parent);
  const scope = parent ? parent.scope_ : getCurrentScope();
  scope.drafts_.push(draft);
  return draft;
}

// src/core/current.ts
function current(value) {
  if (!isDraft(value))
    die(10, value);
  return currentImpl(value);
}
function currentImpl(value) {
  if (!isDraftable(value) || isFrozen(value))
    return value;
  const state = value[DRAFT_STATE];
  let copy;
  if (state) {
    if (!state.modified_)
      return state.base_;
    state.finalized_ = true;
    copy = shallowCopy(value, state.scope_.immer_.useStrictShallowCopy_);
  } else {
    copy = shallowCopy(value, true);
  }
  each(copy, (key, childValue) => {
    set(copy, key, currentImpl(childValue));
  });
  if (state) {
    state.finalized_ = false;
  }
  return copy;
}

// src/plugins/patches.ts
function enablePatches() {
  const errorOffset = 16;
  if (false) {}
  const REPLACE = "replace";
  const ADD = "add";
  const REMOVE = "remove";
  function generatePatches_(state, basePath, patches, inversePatches) {
    switch (state.type_) {
      case 0 /* Object */:
      case 2 /* Map */:
        return generatePatchesFromAssigned(
          state,
          basePath,
          patches,
          inversePatches
        );
      case 1 /* Array */:
        return generateArrayPatches(state, basePath, patches, inversePatches);
      case 3 /* Set */:
        return generateSetPatches(
          state,
          basePath,
          patches,
          inversePatches
        );
    }
  }
  function generateArrayPatches(state, basePath, patches, inversePatches) {
    let { base_, assigned_ } = state;
    let copy_ = state.copy_;
    if (copy_.length < base_.length) {
      ;
      [base_, copy_] = [copy_, base_];
      [patches, inversePatches] = [inversePatches, patches];
    }
    for (let i = 0; i < base_.length; i++) {
      if (assigned_[i] && copy_[i] !== base_[i]) {
        const path = basePath.concat([i]);
        patches.push({
          op: REPLACE,
          path,
          // Need to maybe clone it, as it can in fact be the original value
          // due to the base/copy inversion at the start of this function
          value: clonePatchValueIfNeeded(copy_[i])
        });
        inversePatches.push({
          op: REPLACE,
          path,
          value: clonePatchValueIfNeeded(base_[i])
        });
      }
    }
    for (let i = base_.length; i < copy_.length; i++) {
      const path = basePath.concat([i]);
      patches.push({
        op: ADD,
        path,
        // Need to maybe clone it, as it can in fact be the original value
        // due to the base/copy inversion at the start of this function
        value: clonePatchValueIfNeeded(copy_[i])
      });
    }
    for (let i = copy_.length - 1; base_.length <= i; --i) {
      const path = basePath.concat([i]);
      inversePatches.push({
        op: REMOVE,
        path
      });
    }
  }
  function generatePatchesFromAssigned(state, basePath, patches, inversePatches) {
    const { base_, copy_ } = state;
    each(state.assigned_, (key, assignedValue) => {
      const origValue = get(base_, key);
      const value = get(copy_, key);
      const op = !assignedValue ? REMOVE : has(base_, key) ? REPLACE : ADD;
      if (origValue === value && op === REPLACE)
        return;
      const path = basePath.concat(key);
      patches.push(op === REMOVE ? { op, path } : { op, path, value });
      inversePatches.push(
        op === ADD ? { op: REMOVE, path } : op === REMOVE ? { op: ADD, path, value: clonePatchValueIfNeeded(origValue) } : { op: REPLACE, path, value: clonePatchValueIfNeeded(origValue) }
      );
    });
  }
  function generateSetPatches(state, basePath, patches, inversePatches) {
    let { base_, copy_ } = state;
    let i = 0;
    base_.forEach((value) => {
      if (!copy_.has(value)) {
        const path = basePath.concat([i]);
        patches.push({
          op: REMOVE,
          path,
          value
        });
        inversePatches.unshift({
          op: ADD,
          path,
          value
        });
      }
      i++;
    });
    i = 0;
    copy_.forEach((value) => {
      if (!base_.has(value)) {
        const path = basePath.concat([i]);
        patches.push({
          op: ADD,
          path,
          value
        });
        inversePatches.unshift({
          op: REMOVE,
          path,
          value
        });
      }
      i++;
    });
  }
  function generateReplacementPatches_(baseValue, replacement, patches, inversePatches) {
    patches.push({
      op: REPLACE,
      path: [],
      value: replacement === NOTHING ? void 0 : replacement
    });
    inversePatches.push({
      op: REPLACE,
      path: [],
      value: baseValue
    });
  }
  function applyPatches_(draft, patches) {
    patches.forEach((patch) => {
      const { path, op } = patch;
      let base = draft;
      for (let i = 0; i < path.length - 1; i++) {
        const parentType = getArchtype(base);
        let p = path[i];
        if (typeof p !== "string" && typeof p !== "number") {
          p = "" + p;
        }
        if ((parentType === 0 /* Object */ || parentType === 1 /* Array */) && (p === "__proto__" || p === "constructor"))
          die(errorOffset + 3);
        if (typeof base === "function" && p === "prototype")
          die(errorOffset + 3);
        base = get(base, p);
        if (typeof base !== "object")
          die(errorOffset + 2, path.join("/"));
      }
      const type = getArchtype(base);
      const value = deepClonePatchValue(patch.value);
      const key = path[path.length - 1];
      switch (op) {
        case REPLACE:
          switch (type) {
            case 2 /* Map */:
              return base.set(key, value);
            case 3 /* Set */:
              die(errorOffset);
            default:
              return base[key] = value;
          }
        case ADD:
          switch (type) {
            case 1 /* Array */:
              return key === "-" ? base.push(value) : base.splice(key, 0, value);
            case 2 /* Map */:
              return base.set(key, value);
            case 3 /* Set */:
              return base.add(value);
            default:
              return base[key] = value;
          }
        case REMOVE:
          switch (type) {
            case 1 /* Array */:
              return base.splice(key, 1);
            case 2 /* Map */:
              return base.delete(key);
            case 3 /* Set */:
              return base.delete(patch.value);
            default:
              return delete base[key];
          }
        default:
          die(errorOffset + 1, op);
      }
    });
    return draft;
  }
  function deepClonePatchValue(obj) {
    if (!isDraftable(obj))
      return obj;
    if (Array.isArray(obj))
      return obj.map(deepClonePatchValue);
    if (isMap(obj))
      return new Map(
        Array.from(obj.entries()).map(([k, v]) => [k, deepClonePatchValue(v)])
      );
    if (isSet(obj))
      return new Set(Array.from(obj).map(deepClonePatchValue));
    const cloned = Object.create(getPrototypeOf(obj));
    for (const key in obj)
      cloned[key] = deepClonePatchValue(obj[key]);
    if (has(obj, DRAFTABLE))
      cloned[DRAFTABLE] = obj[DRAFTABLE];
    return cloned;
  }
  function clonePatchValueIfNeeded(obj) {
    if (isDraft(obj)) {
      return deepClonePatchValue(obj);
    } else
      return obj;
  }
  loadPlugin("Patches", {
    applyPatches_,
    generatePatches_,
    generateReplacementPatches_
  });
}

// src/plugins/mapset.ts
function enableMapSet() {
  class DraftMap extends Map {
    constructor(target, parent) {
      super();
      this[DRAFT_STATE] = {
        type_: 2 /* Map */,
        parent_: parent,
        scope_: parent ? parent.scope_ : getCurrentScope(),
        modified_: false,
        finalized_: false,
        copy_: void 0,
        assigned_: void 0,
        base_: target,
        draft_: this,
        isManual_: false,
        revoked_: false
      };
    }
    get size() {
      return latest(this[DRAFT_STATE]).size;
    }
    has(key) {
      return latest(this[DRAFT_STATE]).has(key);
    }
    set(key, value) {
      const state = this[DRAFT_STATE];
      assertUnrevoked(state);
      if (!latest(state).has(key) || latest(state).get(key) !== value) {
        prepareMapCopy(state);
        markChanged(state);
        state.assigned_.set(key, true);
        state.copy_.set(key, value);
        state.assigned_.set(key, true);
      }
      return this;
    }
    delete(key) {
      if (!this.has(key)) {
        return false;
      }
      const state = this[DRAFT_STATE];
      assertUnrevoked(state);
      prepareMapCopy(state);
      markChanged(state);
      if (state.base_.has(key)) {
        state.assigned_.set(key, false);
      } else {
        state.assigned_.delete(key);
      }
      state.copy_.delete(key);
      return true;
    }
    clear() {
      const state = this[DRAFT_STATE];
      assertUnrevoked(state);
      if (latest(state).size) {
        prepareMapCopy(state);
        markChanged(state);
        state.assigned_ = /* @__PURE__ */ new Map();
        each(state.base_, (key) => {
          state.assigned_.set(key, false);
        });
        state.copy_.clear();
      }
    }
    forEach(cb, thisArg) {
      const state = this[DRAFT_STATE];
      latest(state).forEach((_value, key, _map) => {
        cb.call(thisArg, this.get(key), key, this);
      });
    }
    get(key) {
      const state = this[DRAFT_STATE];
      assertUnrevoked(state);
      const value = latest(state).get(key);
      if (state.finalized_ || !isDraftable(value)) {
        return value;
      }
      if (value !== state.base_.get(key)) {
        return value;
      }
      const draft = createProxy(value, state);
      prepareMapCopy(state);
      state.copy_.set(key, draft);
      return draft;
    }
    keys() {
      return latest(this[DRAFT_STATE]).keys();
    }
    values() {
      const iterator = this.keys();
      return {
        [Symbol.iterator]: () => this.values(),
        next: () => {
          const r = iterator.next();
          if (r.done)
            return r;
          const value = this.get(r.value);
          return {
            done: false,
            value
          };
        }
      };
    }
    entries() {
      const iterator = this.keys();
      return {
        [Symbol.iterator]: () => this.entries(),
        next: () => {
          const r = iterator.next();
          if (r.done)
            return r;
          const value = this.get(r.value);
          return {
            done: false,
            value: [r.value, value]
          };
        }
      };
    }
    [(DRAFT_STATE, Symbol.iterator)]() {
      return this.entries();
    }
  }
  function proxyMap_(target, parent) {
    return new DraftMap(target, parent);
  }
  function prepareMapCopy(state) {
    if (!state.copy_) {
      state.assigned_ = /* @__PURE__ */ new Map();
      state.copy_ = new Map(state.base_);
    }
  }
  class DraftSet extends Set {
    constructor(target, parent) {
      super();
      this[DRAFT_STATE] = {
        type_: 3 /* Set */,
        parent_: parent,
        scope_: parent ? parent.scope_ : getCurrentScope(),
        modified_: false,
        finalized_: false,
        copy_: void 0,
        base_: target,
        draft_: this,
        drafts_: /* @__PURE__ */ new Map(),
        revoked_: false,
        isManual_: false
      };
    }
    get size() {
      return latest(this[DRAFT_STATE]).size;
    }
    has(value) {
      const state = this[DRAFT_STATE];
      assertUnrevoked(state);
      if (!state.copy_) {
        return state.base_.has(value);
      }
      if (state.copy_.has(value))
        return true;
      if (state.drafts_.has(value) && state.copy_.has(state.drafts_.get(value)))
        return true;
      return false;
    }
    add(value) {
      const state = this[DRAFT_STATE];
      assertUnrevoked(state);
      if (!this.has(value)) {
        prepareSetCopy(state);
        markChanged(state);
        state.copy_.add(value);
      }
      return this;
    }
    delete(value) {
      if (!this.has(value)) {
        return false;
      }
      const state = this[DRAFT_STATE];
      assertUnrevoked(state);
      prepareSetCopy(state);
      markChanged(state);
      return state.copy_.delete(value) || (state.drafts_.has(value) ? state.copy_.delete(state.drafts_.get(value)) : (
        /* istanbul ignore next */
        false
      ));
    }
    clear() {
      const state = this[DRAFT_STATE];
      assertUnrevoked(state);
      if (latest(state).size) {
        prepareSetCopy(state);
        markChanged(state);
        state.copy_.clear();
      }
    }
    values() {
      const state = this[DRAFT_STATE];
      assertUnrevoked(state);
      prepareSetCopy(state);
      return state.copy_.values();
    }
    entries() {
      const state = this[DRAFT_STATE];
      assertUnrevoked(state);
      prepareSetCopy(state);
      return state.copy_.entries();
    }
    keys() {
      return this.values();
    }
    [(DRAFT_STATE, Symbol.iterator)]() {
      return this.values();
    }
    forEach(cb, thisArg) {
      const iterator = this.values();
      let result = iterator.next();
      while (!result.done) {
        cb.call(thisArg, result.value, result.value, this);
        result = iterator.next();
      }
    }
  }
  function proxySet_(target, parent) {
    return new DraftSet(target, parent);
  }
  function prepareSetCopy(state) {
    if (!state.copy_) {
      state.copy_ = /* @__PURE__ */ new Set();
      state.base_.forEach((value) => {
        if (isDraftable(value)) {
          const draft = createProxy(value, state);
          state.drafts_.set(value, draft);
          state.copy_.add(draft);
        } else {
          state.copy_.add(value);
        }
      });
    }
  }
  function assertUnrevoked(state) {
    if (state.revoked_)
      die(3, JSON.stringify(latest(state)));
  }
  loadPlugin("MapSet", { proxyMap_, proxySet_ });
}

// src/immer.ts
var immer = new Immer2();
var produce = immer.produce;
var produceWithPatches = immer.produceWithPatches.bind(
  immer
);
var setAutoFreeze = immer.setAutoFreeze.bind(immer);
var setUseStrictShallowCopy = immer.setUseStrictShallowCopy.bind(immer);
var applyPatches = immer.applyPatches.bind(immer);
var createDraft = immer.createDraft.bind(immer);
var finishDraft = immer.finishDraft.bind(immer);
function castDraft(value) {
  return value;
}
function castImmutable(value) {
  return value;
}

//# sourceMappingURL=immer.mjs.map
;// CONCATENATED MODULE: ./node_modules/react-querybuilder/dist/react-querybuilder.mjs
var __defProp = Object.defineProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};

// src/components/ActionElement.tsx

var ActionElement = ({
  className,
  handleOnClick,
  label,
  title,
  disabled,
  disabledTranslation,
  testID
}) => /* @__PURE__ */ react.createElement(
  "button",
  {
    type: "button",
    "data-testid": testID,
    disabled: disabled && !disabledTranslation,
    className,
    title: disabledTranslation && disabled ? disabledTranslation.title : title,
    onClick: (e) => handleOnClick(e)
  },
  disabledTranslation && disabled ? disabledTranslation.label : label
);
ActionElement.displayName = "ActionElement";

// src/components/DragHandle.tsx


var DragHandle = (0,react.forwardRef)(
  ({ className, label, title, testID }, dragRef) => /* @__PURE__ */ react.createElement("span", { "data-testid": testID, ref: dragRef, className, title }, label)
);
DragHandle.displayName = "DragHandle";

// src/components/InlineCombinator.tsx


// src/defaults.ts
var placeholderName = "~";
var placeholderLabel = "------";
var defaultPlaceholderFieldName = placeholderName;
var defaultPlaceholderFieldLabel = placeholderLabel;
var defaultPlaceholderFieldGroupLabel = placeholderLabel;
var defaultPlaceholderOperatorName = placeholderName;
var defaultPlaceholderOperatorLabel = placeholderLabel;
var defaultPlaceholderOperatorGroupLabel = placeholderLabel;
var defaultJoinChar = ",";
var defaultTranslations = {
  fields: {
    title: "Fields",
    placeholderName: defaultPlaceholderFieldName,
    placeholderLabel: defaultPlaceholderFieldLabel,
    placeholderGroupLabel: defaultPlaceholderFieldGroupLabel
  },
  operators: {
    title: "Operators",
    placeholderName: defaultPlaceholderOperatorName,
    placeholderLabel: defaultPlaceholderOperatorLabel,
    placeholderGroupLabel: defaultPlaceholderOperatorGroupLabel
  },
  value: {
    title: "Value"
  },
  removeRule: {
    label: "x",
    title: "Remove rule"
  },
  removeGroup: {
    label: "x",
    title: "Remove group"
  },
  addRule: {
    label: "+Rule",
    title: "Add rule"
  },
  addGroup: {
    label: "+Group",
    title: "Add group"
  },
  combinators: {
    title: "Combinators"
  },
  notToggle: {
    label: "Not",
    title: "Invert this group"
  },
  cloneRule: {
    label: "\u29C9",
    title: "Clone rule"
  },
  cloneRuleGroup: {
    label: "\u29C9",
    title: "Clone group"
  },
  dragHandle: {
    label: "\u205E\u205E",
    title: "Drag handle"
  },
  lockRule: {
    label: "\u{1F513}",
    title: "Lock rule"
  },
  lockGroup: {
    label: "\u{1F513}",
    title: "Lock group"
  },
  lockRuleDisabled: {
    label: "\u{1F512}",
    title: "Unlock rule"
  },
  lockGroupDisabled: {
    label: "\u{1F512}",
    title: "Unlock group"
  },
  valueSourceSelector: {
    title: "Value source"
  }
};
var defaultOperators = [
  { name: "=", label: "=" },
  { name: "!=", label: "!=" },
  { name: "<", label: "<" },
  { name: ">", label: ">" },
  { name: "<=", label: "<=" },
  { name: ">=", label: ">=" },
  { name: "contains", label: "contains" },
  { name: "beginsWith", label: "begins with" },
  { name: "endsWith", label: "ends with" },
  { name: "doesNotContain", label: "does not contain" },
  { name: "doesNotBeginWith", label: "does not begin with" },
  { name: "doesNotEndWith", label: "does not end with" },
  { name: "null", label: "is null" },
  { name: "notNull", label: "is not null" },
  { name: "in", label: "in" },
  { name: "notIn", label: "not in" },
  { name: "between", label: "between" },
  { name: "notBetween", label: "not between" }
];
var defaultOperatorNegationMap = {
  "=": "!=",
  "!=": "=",
  "<": ">=",
  "<=": ">",
  ">": "<=",
  ">=": "<",
  beginsWith: "doesNotBeginWith",
  doesNotBeginWith: "beginsWith",
  endsWith: "doesNotEndWith",
  doesNotEndWith: "endsWith",
  contains: "doesNotContain",
  doesNotContain: "contains",
  between: "notBetween",
  notBetween: "between",
  in: "notIn",
  notIn: "in",
  notNull: "null",
  null: "notNull"
};
var defaultCombinators = [
  { name: "and", label: "AND" },
  { name: "or", label: "OR" }
];
var defaultCombinatorsExtended = [
  ...defaultCombinators,
  { name: "xor", label: "XOR" }
];
var standardClassnames = {
  queryBuilder: "queryBuilder",
  ruleGroup: "ruleGroup",
  header: "ruleGroup-header",
  body: "ruleGroup-body",
  combinators: "ruleGroup-combinators",
  addRule: "ruleGroup-addRule",
  addGroup: "ruleGroup-addGroup",
  cloneRule: "rule-cloneRule",
  cloneGroup: "ruleGroup-cloneGroup",
  removeGroup: "ruleGroup-remove",
  notToggle: "ruleGroup-notToggle",
  rule: "rule",
  fields: "rule-fields",
  operators: "rule-operators",
  value: "rule-value",
  removeRule: "rule-remove",
  betweenRules: "betweenRules",
  valid: "queryBuilder-valid",
  invalid: "queryBuilder-invalid",
  dndDragging: "dndDragging",
  dndOver: "dndOver",
  dndCopy: "dndCopy",
  dragHandle: "queryBuilder-dragHandle",
  disabled: "queryBuilder-disabled",
  lockRule: "rule-lock",
  lockGroup: "ruleGroup-lock",
  valueSource: "rule-valueSource",
  valueListItem: "rule-value-list-item",
  branches: "queryBuilder-branches"
};
var defaultControlClassnames = {
  queryBuilder: "",
  ruleGroup: "",
  header: "",
  body: "",
  combinators: "",
  addRule: "",
  addGroup: "",
  cloneRule: "",
  cloneGroup: "",
  removeGroup: "",
  notToggle: "",
  rule: "",
  fields: "",
  operators: "",
  value: "",
  removeRule: "",
  dragHandle: "",
  lockRule: "",
  lockGroup: "",
  valueSource: ""
};
var groupInvalidReasons = {
  empty: "empty",
  invalidCombinator: "invalid combinator",
  invalidIndependentCombinators: "invalid independent combinators"
};
var TestID = {
  rule: "rule",
  ruleGroup: "rule-group",
  inlineCombinator: "inline-combinator",
  addGroup: "add-group",
  removeGroup: "remove-group",
  cloneGroup: "clone-group",
  cloneRule: "clone-rule",
  addRule: "add-rule",
  removeRule: "remove-rule",
  combinators: "combinators",
  fields: "fields",
  operators: "operators",
  valueEditor: "value-editor",
  notToggle: "not-toggle",
  dragHandle: "drag-handle",
  lockRule: "lock-rule",
  lockGroup: "lock-group",
  valueSourceSelector: "value-source-selector"
};
var LogType = {
  parentPathDisabled: "action aborted: parent path disabled",
  pathDisabled: "action aborted: path is disabled",
  queryUpdate: "query updated",
  onAddRuleFalse: "onAddRule callback returned false",
  onAddGroupFalse: "onAddGroup callback returned false",
  onRemoveFalse: "onRemove callback returned false",
  add: "rule or group added",
  remove: "rule or group removed",
  update: "rule or group updated",
  move: "rule or group moved"
};

// src/components/InlineCombinator.tsx
var InlineCombinator = ({
  component: CombinatorSelectorComponent,
  independentCombinators: _independentCombinators,
  ...props
}) => /* @__PURE__ */ react.createElement("div", { className: standardClassnames.betweenRules, "data-testid": TestID.inlineCombinator }, /* @__PURE__ */ react.createElement(CombinatorSelectorComponent, { ...props, testID: TestID.combinators }));
InlineCombinator.displayName = "InlineCombinator";

// src/components/NotToggle.tsx

var NotToggle = ({
  className,
  handleOnChange,
  title,
  label,
  checked,
  disabled,
  testID
}) => /* @__PURE__ */ react.createElement("label", { "data-testid": testID, className, title }, /* @__PURE__ */ react.createElement(
  "input",
  {
    type: "checkbox",
    onChange: (e) => handleOnChange(e.target.checked),
    checked: !!checked,
    disabled
  }
), label);
NotToggle.displayName = "NotToggle";

// src/components/Rule.tsx


// src/hooks/useQueryBuilder.ts



// src/utils/arrayUtils.ts
var splitBy = (str, splitChar = defaultJoinChar) => typeof str === "string" ? str.split(`\\${splitChar}`).map((c) => c.split(splitChar)).reduce((prev, curr, idx) => {
  if (idx === 0) {
    return curr;
  }
  return [
    ...prev.slice(0, prev.length - 1),
    `${prev[prev.length - 1]}${splitChar}${curr[0]}`,
    ...curr.slice(1)
  ];
}, []) : [];
var joinWith = (strArr, joinChar = defaultJoinChar) => strArr.map((str) => `${str ?? ""}`.replaceAll(joinChar, `\\${joinChar}`)).join(joinChar);
var trimIfString = (val) => typeof val === "string" ? val.trim() : val;
var toArray = (v) => Array.isArray(v) ? v.map(trimIfString) : typeof v === "string" ? splitBy(v, defaultJoinChar).filter((s) => !/^\s*$/.test(s)).map((s) => s.trim()) : typeof v === "number" ? [v] : [];
var nullFreeArray = (arr) => arr.every(Boolean);

// src/utils/isRuleGroup.ts
var isRuleGroup = (rg) => typeof rg === "object" && "rules" in rg && Array.isArray(rg.rules);
var isRuleGroupType = (rg) => isRuleGroup(rg) && "combinator" in rg;
var isRuleGroupTypeIC = (rg) => isRuleGroup(rg) && !("combinator" in rg);

// src/utils/convertQuery.ts
var processRuleOrStringOrRuleGroupIC = (r) => typeof r === "object" && "rules" in r ? generateRuleGroupICWithConsistentCombinators(r) : r;
var generateRuleGroupICWithConsistentCombinators = (rg) => {
  const returnArray = [];
  const push = (r) => returnArray.push(processRuleOrStringOrRuleGroupIC(r));
  let startIndex = 0;
  for (let i = 0; i < rg.rules.length; i += 2) {
    if (rg.rules.length === 1) {
      push(rg.rules[0]);
    } else if (rg.rules[i + 1] === "and") {
      startIndex = i;
      let j = 1;
      while (rg.rules[startIndex + j] === "and") {
        i += 2;
        j += 2;
      }
      returnArray.push({
        // eslint-disable-next-line @typescript-eslint/ban-ts-comment
        // @ts-expect-error TS can't keep track of odd/even indexes here
        rules: rg.rules.slice(startIndex, i + 1).map(processRuleOrStringOrRuleGroupIC)
      });
      i -= 2;
    } else if (rg.rules[i + 1] === "or") {
      if (i === 0 || i === rg.rules.length - 3) {
        if (i === 0 || rg.rules[i - 1] === "or") {
          push(rg.rules[i]);
        }
        push(rg.rules[i + 1]);
        if (i === rg.rules.length - 3) {
          push(rg.rules[i + 2]);
        }
      } else {
        if (rg.rules[i - 1] === "and") {
          push(rg.rules[i + 1]);
        } else {
          push(rg.rules[i]);
          push(rg.rules[i + 1]);
        }
      }
    }
  }
  if (
    // eslint-disable-next-line @typescript-eslint/ban-ts-comment
    // @ts-expect-error TS still thinks returnArray has length 0
    returnArray.length === 1 && typeof returnArray[0] === "object" && "rules" in returnArray[0]
  ) {
    return { ...rg, ...returnArray[0] };
  }
  return { ...rg, rules: returnArray };
};
var convertFromIC = (rg) => {
  const processedRG = generateRuleGroupICWithConsistentCombinators(rg);
  const rulesAsMixedList = processedRG.rules.map(
    (r) => typeof r === "string" || !("rules" in r) ? r : convertFromIC(r)
  );
  const combinator = rulesAsMixedList.length < 2 ? "and" : rulesAsMixedList[1];
  const rules = rulesAsMixedList.filter((r) => typeof r !== "string");
  return { ...processedRG, combinator, rules };
};
var convertToIC = (rg) => {
  const { combinator, ...queryWithoutCombinator } = rg;
  const rules = [];
  rg.rules.forEach((r, idx, arr) => {
    if ("rules" in r) {
      rules.push(convertToIC(r));
    } else {
      rules.push(r);
    }
    if (idx < arr.length - 1) {
      rules.push(combinator);
    }
  });
  return { ...queryWithoutCombinator, rules };
};
function convertQuery(query) {
  return isRuleGroupTypeIC(query) ? convertFromIC(query) : convertToIC(query);
}

// src/utils/defaultValidator.ts
var defaultValidator = (query) => {
  const result = {};
  const validateRule = (_rule) => {
  };
  const validateGroup = (rg) => {
    const reasons = [];
    if (rg.rules.length === 0) {
      reasons.push(groupInvalidReasons.empty);
    } else if (!("combinator" in rg)) {
      let invalidICs = false;
      for (let i = 0; i < rg.rules.length && !invalidICs; i++) {
        if (i % 2 === 0 && typeof rg.rules[i] === "string" || i % 2 === 1 && typeof rg.rules[i] !== "string" || i % 2 === 1 && typeof rg.rules[i] === "string" && !defaultCombinators.map((c) => c.name).includes(rg.rules[i])) {
          invalidICs = true;
        }
      }
      if (invalidICs) {
        reasons.push(groupInvalidReasons.invalidIndependentCombinators);
      }
    }
    if ("combinator" in rg && !defaultCombinators.map((c) => c.name).includes(rg.combinator) && rg.rules.length > 1) {
      reasons.push(groupInvalidReasons.invalidCombinator);
    }
    if (rg.id) {
      if (reasons.length) {
        result[rg.id] = { valid: false, reasons };
      } else {
        result[rg.id] = true;
      }
    }
    rg.rules.forEach((r) => {
      if (typeof r === "string") {
      } else if ("rules" in r) {
        validateGroup(r);
      } else {
        validateRule(r);
      }
    });
  };
  validateGroup(query);
  return result;
};

// src/utils/optGroupUtils.ts
var isOptionGroupArray = (arr) => Array.isArray(arr) && arr.length > 0 && "options" in arr[0];
var getOption = (arr, name) => (isOptionGroupArray(arr) ? arr.flatMap((og) => og.options) : arr).find((op) => op.name === name);
var getFirstOption = (arr) => !Array.isArray(arr) || arr.length === 0 ? null : isOptionGroupArray(arr) ? arr[0].options[0].name : arr[0].name;

// src/utils/filterFieldsByComparator.ts
var filterFieldsByComparator = (field, fields, operator) => {
  if (!field.comparator) {
    const filterOutSameName = (f) => f.name !== field.name;
    if (isOptionGroupArray(fields)) {
      return fields.map((og) => ({
        ...og,
        options: og.options.filter(filterOutSameName)
      }));
    }
    return fields.filter(filterOutSameName);
  }
  const filterByComparator = (fieldToCompare) => {
    if (field.name === fieldToCompare.name) {
      return false;
    }
    if (typeof field.comparator === "string") {
      return field[field.comparator] === fieldToCompare[field.comparator];
    }
    return field.comparator(fieldToCompare, operator);
  };
  if (isOptionGroupArray(fields)) {
    return fields.map((og) => ({ ...og, options: og.options.filter(filterByComparator) })).filter((og) => og.options.length > 0);
  }
  return fields.filter(filterByComparator);
};

// src/utils/misc.ts
var numericRegex = /^\s*[+-]?(\d+|\d*\.\d+|\d+\.\d*)([Ee][+-]?\d+)?\s*$/;
var isPojo = (obj) => obj === null || typeof obj !== "object" ? false : Object.getPrototypeOf(obj) === Object.prototype;

// src/utils/parseNumber.ts
var parseNumber = (v, { parseNumbers }) => {
  if (typeof v === "bigint" || typeof v === "number") {
    return v;
  }
  return parseNumbers && (parseNumbers === "native" || numericRegex.test(v)) ? parseFloat(v) : v;
};

// src/utils/formatQuery/utils.ts
var mapSQLOperator = (op) => {
  switch (op.toLowerCase()) {
    case "null":
      return "is null";
    case "notnull":
      return "is not null";
    case "notin":
      return "not in";
    case "notbetween":
      return "not between";
    case "contains":
    case "beginswith":
    case "endswith":
      return "like";
    case "doesnotcontain":
    case "doesnotbeginwith":
    case "doesnotendwith":
      return "not like";
    default:
      return op;
  }
};
var mongoOperators = {
  "=": "$eq",
  "!=": "$ne",
  "<": "$lt",
  "<=": "$lte",
  ">": "$gt",
  ">=": "$gte",
  in: "$in",
  notIn: "$nin"
};
var celCombinatorMap = {
  and: "&&",
  or: "||"
};
var jsonLogicAdditionalOperators = {
  startsWith: (a, b) => a.startsWith(b),
  endsWith: (a, b) => a.endsWith(b)
};
var numerifyValues = (rg) => ({
  ...rg,
  // eslint-disable-next-line @typescript-eslint/ban-ts-comment
  // @ts-expect-error TS doesn't keep track of odd/even indexes here
  rules: rg.rules.map((r) => {
    if (typeof r === "string") {
      return r;
    }
    if ("rules" in r) {
      return numerifyValues(r);
    }
    let { value } = r;
    if (typeof value === "string") {
      value = parseNumber(value, { parseNumbers: true });
    }
    return { ...r, value };
  })
});
var isValidValue = (v) => typeof v === "string" && v.length > 0 || typeof v === "number" && !isNaN(v) || typeof v !== "string" && typeof v !== "number";
var shouldRenderAsNumber = (v, parseNumbers) => parseNumbers && (typeof v === "number" || typeof v === "bigint" || typeof v === "string" && numericRegex.test(v));
var isValueProcessorLegacy = (vp) => vp.length >= 3;
var quoteFieldNamesWithArray = (quoteFieldNamesWith = ["", ""]) => Array.isArray(quoteFieldNamesWith) ? quoteFieldNamesWith : typeof quoteFieldNamesWith === "string" ? [quoteFieldNamesWith, quoteFieldNamesWith] : quoteFieldNamesWith ?? ["", ""];

// src/utils/formatQuery/defaultRuleProcessorCEL.ts
var shouldNegate = (op) => /^(does)?not/i.test(op);
var escapeDoubleQuotes = (v, escapeQuotes) => typeof v !== "string" || !escapeQuotes ? v : v.replaceAll(`"`, `\\"`);
var defaultRuleProcessorCEL = ({ field, operator, value, valueSource }, { escapeQuotes, parseNumbers } = {}) => {
  const valueIsField = valueSource === "field";
  const operatorTL = operator.replace(/^=$/, "==");
  const useBareValue = typeof value === "number" || typeof value === "boolean" || typeof value === "bigint" || shouldRenderAsNumber(value, parseNumbers);
  switch (operatorTL) {
    case "<":
    case "<=":
    case "==":
    case "!=":
    case ">":
    case ">=":
      return `${field} ${operatorTL} ${valueIsField || useBareValue ? trimIfString(value) : `"${escapeDoubleQuotes(value, escapeQuotes)}"`}`;
    case "contains":
    case "doesNotContain": {
      const negate = shouldNegate(operatorTL) ? "!" : "";
      return `${negate}${field}.contains(${valueIsField ? trimIfString(value) : `"${escapeDoubleQuotes(value, escapeQuotes)}"`})`;
    }
    case "beginsWith":
    case "doesNotBeginWith": {
      const negate = shouldNegate(operatorTL) ? "!" : "";
      return `${negate}${field}.startsWith(${valueIsField ? trimIfString(value) : `"${escapeDoubleQuotes(value, escapeQuotes)}"`})`;
    }
    case "endsWith":
    case "doesNotEndWith": {
      const negate = shouldNegate(operatorTL) ? "!" : "";
      return `${negate}${field}.endsWith(${valueIsField ? trimIfString(value) : `"${escapeDoubleQuotes(value, escapeQuotes)}"`})`;
    }
    case "null":
      return `${field} == null`;
    case "notNull":
      return `${field} != null`;
    case "in":
    case "notIn": {
      const negate = shouldNegate(operatorTL);
      const valueAsArray = toArray(value);
      if (valueAsArray.length > 0) {
        return `${negate ? "!(" : ""}${field} in [${valueAsArray.map(
          (val) => valueIsField || shouldRenderAsNumber(val, parseNumbers) ? `${trimIfString(val)}` : `"${escapeDoubleQuotes(val, escapeQuotes)}"`
        ).join(", ")}]${negate ? ")" : ""}`;
      } else {
        return "";
      }
    }
    case "between":
    case "notBetween": {
      const valueAsArray = toArray(value);
      if (valueAsArray.length >= 2 && !!valueAsArray[0] && !!valueAsArray[1]) {
        const [first, second] = valueAsArray;
        const firstNum = shouldRenderAsNumber(first, true) ? parseFloat(first) : NaN;
        const secondNum = shouldRenderAsNumber(second, true) ? parseFloat(second) : NaN;
        let firstValue = isNaN(firstNum) ? valueIsField ? `${first}` : `"${escapeDoubleQuotes(first, escapeQuotes)}"` : firstNum;
        let secondValue = isNaN(secondNum) ? valueIsField ? `${second}` : `"${escapeDoubleQuotes(second, escapeQuotes)}"` : secondNum;
        if (firstValue === firstNum && secondValue === secondNum && secondNum < firstNum) {
          const tempNum = secondNum;
          secondValue = firstNum;
          firstValue = tempNum;
        }
        if (operator === "between") {
          return `(${field} >= ${firstValue} && ${field} <= ${secondValue})`;
        } else {
          return `(${field} < ${firstValue} || ${field} > ${secondValue})`;
        }
      } else {
        return "";
      }
    }
  }
  return "";
};

// src/utils/formatQuery/defaultRuleProcessorMongoDB.ts
var escapeDoubleQuotes2 = (v) => typeof v !== "string" ? v : v.replaceAll("\\", "\\\\").replaceAll(`"`, `\\"`);
var defaultRuleProcessorMongoDB = ({ field, operator, value, valueSource }, { parseNumbers } = {}) => {
  const valueIsField = valueSource === "field";
  const useBareValue = typeof value === "number" || typeof value === "boolean" || typeof value === "bigint" || shouldRenderAsNumber(value, parseNumbers);
  if (operator === "=" && !valueIsField) {
    return `{"${field}":${useBareValue ? trimIfString(value) : `"${escapeDoubleQuotes2(value)}"`}}`;
  }
  switch (operator) {
    case "<":
    case "<=":
    case "=":
    case "!=":
    case ">":
    case ">=": {
      const mongoOperator = mongoOperators[operator];
      return valueIsField ? `{"$expr":{"${mongoOperator}":["$${field}","$${value}"]}}` : `{"${field}":{"${mongoOperator}":${useBareValue ? trimIfString(value) : `"${escapeDoubleQuotes2(value)}"`}}}`;
    }
    case "contains":
      return valueIsField ? `{"$where":"this.${field}.includes(this.${value})"}` : `{"${field}":{"$regex":"${escapeDoubleQuotes2(value)}"}}`;
    case "beginsWith":
      return valueIsField ? `{"$where":"this.${field}.startsWith(this.${value})"}` : `{"${field}":{"$regex":"^${escapeDoubleQuotes2(value)}"}}`;
    case "endsWith":
      return valueIsField ? `{"$where":"this.${field}.endsWith(this.${value})"}` : `{"${field}":{"$regex":"${escapeDoubleQuotes2(value)}$"}}`;
    case "doesNotContain":
      return valueIsField ? `{"$where":"!this.${field}.includes(this.${value})"}` : `{"${field}":{"$not":{"$regex":"${escapeDoubleQuotes2(value)}"}}}`;
    case "doesNotBeginWith":
      return valueIsField ? `{"$where":"!this.${field}.startsWith(this.${value})"}` : `{"${field}":{"$not":{"$regex":"^${escapeDoubleQuotes2(value)}"}}}`;
    case "doesNotEndWith":
      return valueIsField ? `{"$where":"!this.${field}.endsWith(this.${value})"}` : `{"${field}":{"$not":{"$regex":"${escapeDoubleQuotes2(value)}$"}}}`;
    case "null":
      return `{"${field}":null}`;
    case "notNull":
      return `{"${field}":{"$ne":null}}`;
    case "in":
    case "notIn": {
      const valueAsArray = toArray(value);
      if (valueAsArray.length > 0) {
        return valueIsField ? `{"$where":"${operator === "notIn" ? "!" : ""}[${valueAsArray.map((val) => `this.${val}`).join(",")}].includes(this.${field})"}` : `{"${field}":{"${mongoOperators[operator]}":[${valueAsArray.map(
          (val) => shouldRenderAsNumber(val, parseNumbers) ? `${trimIfString(val)}` : `"${escapeDoubleQuotes2(val)}"`
        ).join(",")}]}}`;
      } else {
        return "";
      }
    }
    case "between":
    case "notBetween": {
      const valueAsArray = toArray(value);
      if (valueAsArray.length >= 2 && isValidValue(valueAsArray[0]) && isValidValue(valueAsArray[1])) {
        const [first, second] = valueAsArray;
        const firstNum = shouldRenderAsNumber(first, true) ? parseFloat(first) : NaN;
        const secondNum = shouldRenderAsNumber(second, true) ? parseFloat(second) : NaN;
        const firstValue = valueIsField || !isNaN(firstNum) ? `${first}` : `"${escapeDoubleQuotes2(first)}"`;
        const secondValue = valueIsField || !isNaN(secondNum) ? `${second}` : `"${escapeDoubleQuotes2(second)}"`;
        if (operator === "between") {
          return valueIsField ? `{"$and":[{"$expr":{"$gte":["$${field}","$${firstValue}"]}},{"$expr":{"$lte":["$${field}","$${secondValue}"]}}]}` : `{"${field}":{"$gte":${firstValue},"$lte":${secondValue}}}`;
        } else {
          return valueIsField ? `{"$or":[{"$expr":{"$lt":["$${field}","$${firstValue}"]}},{"$expr":{"$gt":["$${field}","$${secondValue}"]}}]}` : `{"$or":[{"${field}":{"$lt":${firstValue}}},{"${field}":{"$gt":${secondValue}}}]}`;
        }
      } else {
        return "";
      }
    }
  }
  return "";
};

// src/utils/formatQuery/defaultRuleProcessorSpEL.ts
var shouldNegate2 = (op) => /^(does)?not/i.test(op);
var wrapInNegation = (clause, negate) => negate ? `!(${clause})` : `${clause}`;
var escapeSingleQuotes = (v, escapeQuotes) => typeof v !== "string" || !escapeQuotes ? v : v.replaceAll(`'`, `\\'`);
var defaultRuleProcessorSpEL = ({ field, operator, value, valueSource }, { escapeQuotes, parseNumbers } = {}) => {
  const valueIsField = valueSource === "field";
  const operatorTL = operator.replace(/^=$/, "==");
  const useBareValue = typeof value === "number" || typeof value === "boolean" || typeof value === "bigint" || shouldRenderAsNumber(value, parseNumbers);
  switch (operatorTL) {
    case "<":
    case "<=":
    case "==":
    case "!=":
    case ">":
    case ">=":
      return `${field} ${operatorTL} ${valueIsField || useBareValue ? trimIfString(value) : `'${escapeSingleQuotes(value, escapeQuotes)}'`}`;
    case "contains":
    case "doesNotContain":
      return wrapInNegation(
        `${field} matches ${valueIsField || useBareValue ? trimIfString(value) : `'${escapeSingleQuotes(value, escapeQuotes)}'`}`,
        shouldNegate2(operatorTL)
      );
    case "beginsWith":
    case "doesNotBeginWith": {
      const valueTL = valueIsField ? `'^'.concat(${trimIfString(value)})` : `'${typeof value === "string" && !value.startsWith("^") || useBareValue ? "^" : ""}${escapeSingleQuotes(value, escapeQuotes)}'`;
      return wrapInNegation(`${field} matches ${valueTL}`, shouldNegate2(operatorTL));
    }
    case "endsWith":
    case "doesNotEndWith": {
      const valueTL = valueIsField ? `${trimIfString(value)}.concat('$')` : `'${escapeSingleQuotes(value, escapeQuotes)}${typeof value === "string" && !value.endsWith("$") || useBareValue ? "$" : ""}'`;
      return wrapInNegation(`${field} matches ${valueTL}`, shouldNegate2(operatorTL));
    }
    case "null":
      return `${field} == null`;
    case "notNull":
      return `${field} != null`;
    case "in":
    case "notIn": {
      const negate = shouldNegate2(operatorTL) ? "!" : "";
      const valueAsArray = toArray(value);
      if (valueAsArray.length > 0) {
        return `${negate}(${valueAsArray.map(
          (val) => `${field} == ${valueIsField || shouldRenderAsNumber(val, parseNumbers) ? `${trimIfString(val)}` : `'${escapeSingleQuotes(val, escapeQuotes)}'`}`
        ).join(" or ")})`;
      } else {
        return "";
      }
    }
    case "between":
    case "notBetween": {
      const valueAsArray = toArray(value);
      if (valueAsArray.length >= 2 && !!valueAsArray[0] && !!valueAsArray[1]) {
        const [first, second] = valueAsArray;
        const firstNum = shouldRenderAsNumber(first, true) ? parseFloat(first) : NaN;
        const secondNum = shouldRenderAsNumber(second, true) ? parseFloat(second) : NaN;
        let firstValue = isNaN(firstNum) ? valueIsField ? `${first}` : `'${escapeSingleQuotes(first, escapeQuotes)}'` : firstNum;
        let secondValue = isNaN(secondNum) ? valueIsField ? `${second}` : `'${escapeSingleQuotes(second, escapeQuotes)}'` : secondNum;
        if (firstValue === firstNum && secondValue === secondNum && secondNum < firstNum) {
          const tempNum = secondNum;
          secondValue = firstNum;
          firstValue = tempNum;
        }
        if (operator === "between") {
          return `(${field} >= ${firstValue} and ${field} <= ${secondValue})`;
        } else {
          return `(${field} < ${firstValue} or ${field} > ${secondValue})`;
        }
      } else {
        return "";
      }
    }
  }
  return "";
};

// src/utils/formatQuery/defaultValueProcessorByRule.ts
var escapeSingleQuotes2 = (v, escapeQuotes) => escapeQuotes && typeof v === "string" ? v.replaceAll(`'`, `''`) : v;
var defaultValueProcessorByRule = ({ operator, value, valueSource }, { escapeQuotes, parseNumbers, quoteFieldNamesWith } = {}) => {
  const valueIsField = valueSource === "field";
  const [qfnwPre, qfnwPost] = quoteFieldNamesWithArray(quoteFieldNamesWith);
  const operatorLowerCase = operator.toLowerCase();
  const wrapFieldName = (f) => `${qfnwPre}${f}${qfnwPost}`;
  switch (operatorLowerCase) {
    case "null":
    case "notnull": {
      return "";
    }
    case "in":
    case "notin": {
      const valueAsArray = toArray(value);
      if (valueAsArray.length > 0) {
        return `(${valueAsArray.map(
          (v) => valueIsField ? wrapFieldName(v) : shouldRenderAsNumber(v, parseNumbers) ? `${trimIfString(v)}` : `'${escapeSingleQuotes2(v, escapeQuotes)}'`
        ).join(", ")})`;
      }
      return "";
    }
    case "between":
    case "notbetween": {
      const valueAsArray = toArray(value);
      if (valueAsArray.length >= 2 && isValidValue(valueAsArray[0]) && isValidValue(valueAsArray[1])) {
        const [first, second] = valueAsArray;
        return valueIsField ? `${wrapFieldName(first)} and ${wrapFieldName(second)}` : shouldRenderAsNumber(first, parseNumbers) && shouldRenderAsNumber(second, parseNumbers) ? `${trimIfString(first)} and ${trimIfString(second)}` : `'${escapeSingleQuotes2(first, escapeQuotes)}' and '${escapeSingleQuotes2(
          second,
          escapeQuotes
        )}'`;
      }
      return "";
    }
    case "contains":
    case "doesnotcontain":
      return valueIsField ? `'%' || ${wrapFieldName(value)} || '%'` : `'%${escapeSingleQuotes2(value, escapeQuotes)}%'`;
    case "beginswith":
    case "doesnotbeginwith":
      return valueIsField ? `${wrapFieldName(value)} || '%'` : `'${escapeSingleQuotes2(value, escapeQuotes)}%'`;
    case "endswith":
    case "doesnotendwith":
      return valueIsField ? `'%' || ${wrapFieldName(value)}` : `'%${escapeSingleQuotes2(value, escapeQuotes)}'`;
  }
  if (typeof value === "boolean") {
    return value ? "TRUE" : "FALSE";
  }
  return valueIsField ? wrapFieldName(value) : shouldRenderAsNumber(value, parseNumbers) ? `${trimIfString(value)}` : `'${escapeSingleQuotes2(value, escapeQuotes)}'`;
};

// src/utils/formatQuery/defaultRuleProcessorJsonLogic.ts
var convertOperator = (op) => op.replace(/^(=)$/, "$1=").replace(/^notNull$/i, "!=").replace(/^null$/i, "==");
var negateIfNotOp = (op, jsonRule) => /^(does)?not/i.test(op) ? { "!": jsonRule } : jsonRule;
var defaultRuleProcessorJsonLogic = ({ field, operator, value, valueSource }, { parseNumbers } = {}) => {
  const valueIsField = valueSource === "field";
  const fieldObject = { var: field };
  const fieldOrNumberRenderer = (v) => valueIsField ? { var: `${v}` } : shouldRenderAsNumber(v, parseNumbers) ? parseFloat(v) : v;
  switch (operator) {
    case "<":
    case "<=":
    case "=":
    case "!=":
    case ">":
    case ">=":
      return {
        [convertOperator(operator)]: [fieldObject, fieldOrNumberRenderer(value)]
      };
    case "null":
    case "notNull": {
      return {
        [`${operator === "notNull" ? "!" : "="}=`]: [fieldObject, null]
      };
    }
    case "in":
    case "notIn": {
      const valueAsArray = toArray(value).map(fieldOrNumberRenderer);
      if (valueAsArray.length > 0) {
        const jsonRule = { in: [fieldObject, valueAsArray] };
        return negateIfNotOp(operator, jsonRule);
      }
      return false;
    }
    case "between":
    case "notBetween": {
      const valueAsArray = toArray(value);
      if (valueAsArray.length >= 2 && isValidValue(valueAsArray[0]) && isValidValue(valueAsArray[1])) {
        let [first, second] = valueAsArray;
        if (!valueIsField && shouldRenderAsNumber(first, true) && shouldRenderAsNumber(second, true)) {
          const firstNum = parseFloat(first);
          const secondNum = parseFloat(second);
          if (secondNum < firstNum) {
            const tempNum = secondNum;
            second = firstNum;
            first = tempNum;
          } else {
            first = firstNum;
            second = secondNum;
          }
        } else if (valueIsField) {
          first = { var: first };
          second = { var: second };
        }
        const jsonRule = { "<=": [first, fieldObject, second] };
        return negateIfNotOp(operator, jsonRule);
      }
      return false;
    }
    case "contains":
    case "doesNotContain": {
      const jsonRule = {
        in: [fieldOrNumberRenderer(value), fieldObject]
      };
      return negateIfNotOp(operator, jsonRule);
    }
    case "beginsWith":
    case "doesNotBeginWith": {
      const jsonRule = {
        startsWith: [fieldObject, fieldOrNumberRenderer(value)]
      };
      return negateIfNotOp(operator, jsonRule);
    }
    case "endsWith":
    case "doesNotEndWith": {
      const jsonRule = {
        endsWith: [fieldObject, fieldOrNumberRenderer(value)]
      };
      return negateIfNotOp(operator, jsonRule);
    }
  }
  return false;
};

// src/utils/formatQuery/defaultRuleProcessorSQL.ts
var defaultRuleProcessorSQL = (rule, {
  parseNumbers,
  escapeQuotes,
  quoteFieldNamesWith = ["", ""],
  valueProcessor = defaultValueProcessorByRule
} = {}) => {
  const value = valueProcessor(rule, { parseNumbers, escapeQuotes, quoteFieldNamesWith });
  const operator = mapSQLOperator(rule.operator);
  const operatorLowerCase = operator.toLowerCase();
  if ((operatorLowerCase === "in" || operatorLowerCase === "not in" || operatorLowerCase === "between" || operatorLowerCase === "not between") && !value) {
    return "";
  }
  const [qFNWpre, qFNWpost] = quoteFieldNamesWithArray(quoteFieldNamesWith);
  return `${qFNWpre}${rule.field}${qFNWpost} ${operator} ${value}`.trim();
};

// src/utils/isRuleOrGroupValid.ts
var isValidationResult = (vr) => isPojo(vr) && typeof vr.valid === "boolean";
var isRuleOrGroupValid = (rg, validationResult, validator) => {
  if (typeof validationResult === "boolean") {
    return validationResult;
  }
  if (isValidationResult(validationResult)) {
    return validationResult.valid;
  }
  if (typeof validator === "function" && !("rules" in rg)) {
    const vr = validator(rg);
    if (typeof vr === "boolean") {
      return vr;
    }
    if (isValidationResult(vr)) {
      return vr.valid;
    }
  }
  return true;
};

// src/utils/uniq.ts
var uniqByName = (originalArray) => {
  const names = /* @__PURE__ */ new Set();
  const newArray = [];
  originalArray.forEach((el) => {
    if (!names.has(el.name)) {
      names.add(el.name);
      newArray.push(el);
    }
  });
  return newArray;
};
var uniqOptGroups = (originalArray) => {
  const labels = /* @__PURE__ */ new Set();
  const names = /* @__PURE__ */ new Set();
  const newArray = [];
  originalArray.forEach((el) => {
    if (!labels.has(el.label)) {
      labels.add(el.label);
      const optionsForThisGroup = [];
      el.options.forEach((opt) => {
        if (!names.has(opt.name)) {
          names.add(opt.name);
          optionsForThisGroup.push(opt);
        }
      });
      newArray.push({ ...el, options: optionsForThisGroup });
    }
  });
  return newArray;
};

// src/utils/formatQuery/formatQuery.ts
function formatQuery(ruleGroup, options = {}) {
  let format = "json";
  let valueProcessorInternal = defaultValueProcessorByRule;
  let ruleProcessorInternal = null;
  let quoteFieldNamesWith = ["", ""];
  let validator = () => true;
  let fields = [];
  let validationMap = {};
  let fallbackExpression = "";
  let paramPrefix = ":";
  let parseNumbers = false;
  let placeholderFieldName = defaultPlaceholderFieldName;
  let placeholderOperatorName = defaultPlaceholderOperatorName;
  if (typeof options === "string") {
    format = options.toLowerCase();
    if (format === "mongodb") {
      ruleProcessorInternal = defaultRuleProcessorMongoDB;
    } else if (format === "cel") {
      ruleProcessorInternal = defaultRuleProcessorCEL;
    } else if (format === "spel") {
      ruleProcessorInternal = defaultRuleProcessorSpEL;
    } else if (format === "jsonlogic") {
      ruleProcessorInternal = defaultRuleProcessorJsonLogic;
    }
  } else {
    format = (options.format ?? "json").toLowerCase();
    const { valueProcessor = null, ruleProcessor = null } = options;
    if (typeof ruleProcessor === "function") {
      ruleProcessorInternal = ruleProcessor;
    }
    valueProcessorInternal = typeof valueProcessor === "function" ? (r, opts) => isValueProcessorLegacy(valueProcessor) ? valueProcessor(r.field, r.operator, r.value, r.valueSource) : valueProcessor(r, opts) : format === "mongodb" ? ruleProcessorInternal ?? defaultRuleProcessorMongoDB : format === "cel" ? ruleProcessorInternal ?? defaultRuleProcessorCEL : format === "spel" ? ruleProcessorInternal ?? defaultRuleProcessorSpEL : format === "jsonlogic" ? ruleProcessorInternal ?? defaultRuleProcessorJsonLogic : defaultValueProcessorByRule;
    quoteFieldNamesWith = quoteFieldNamesWithArray(options.quoteFieldNamesWith);
    validator = options.validator ?? (() => true);
    fields = options.fields ?? [];
    fallbackExpression = options.fallbackExpression ?? "";
    paramPrefix = options.paramPrefix ?? ":";
    parseNumbers = !!options.parseNumbers;
    placeholderFieldName = options.placeholderFieldName ?? defaultPlaceholderFieldName;
    placeholderOperatorName = options.placeholderOperatorName ?? defaultPlaceholderOperatorName;
  }
  if (!fallbackExpression) {
    fallbackExpression = format === "mongodb" ? '"$and":[{"$expr":true}]' : format === "cel" || format === "spel" ? "1 == 1" : "(1 = 1)";
  }
  if (format === "json" || format === "json_without_ids") {
    const rg = parseNumbers ? numerifyValues(ruleGroup) : ruleGroup;
    if (format === "json") {
      return JSON.stringify(rg, null, 2);
    }
    return JSON.stringify(rg, [
      "rules",
      "field",
      "value",
      "operator",
      "combinator",
      "not",
      "valueSource"
    ]);
  }
  if (typeof validator === "function") {
    const validationResult = validator(ruleGroup);
    if (typeof validationResult === "boolean") {
      if (validationResult === false) {
        return format === "parameterized" ? { sql: fallbackExpression, params: [] } : format === "parameterized_named" ? { sql: fallbackExpression, params: {} } : format === "mongodb" ? `{${fallbackExpression}}` : format === "jsonlogic" ? false : fallbackExpression;
      }
    } else {
      validationMap = validationResult;
    }
  }
  const validatorMap = {};
  const uniqueFields = uniqByName(fields);
  uniqueFields.forEach((f) => {
    if (typeof f.validator === "function") {
      validatorMap[f.name] = f.validator;
    }
  });
  const validateRule = (rule) => {
    let validationResult = void 0;
    let fieldValidator = void 0;
    if (rule.id) {
      validationResult = validationMap[rule.id];
    }
    if (fields.length) {
      const fieldArr = fields.filter((f) => f.name === rule.field);
      if (fieldArr.length) {
        const field = fieldArr[0];
        if (typeof field.validator === "function") {
          fieldValidator = field.validator;
        }
      }
    }
    return [validationResult, fieldValidator];
  };
  if (format === "sql") {
    const processRuleGroup = (rg, outermost) => {
      if (!isRuleOrGroupValid(rg, validationMap[rg.id ?? /* istanbul ignore next */
      ""])) {
        return outermost ? fallbackExpression : "";
      }
      const processedRules = rg.rules.map((rule) => {
        if (typeof rule === "string") {
          return rule;
        }
        if ("rules" in rule) {
          return processRuleGroup(rule);
        }
        const [validationResult, fieldValidator] = validateRule(rule);
        if (!isRuleOrGroupValid(rule, validationResult, fieldValidator) || rule.field === placeholderFieldName || rule.operator === placeholderOperatorName) {
          return "";
        }
        const escapeQuotes = (rule.valueSource ?? "value") === "value";
        if (typeof ruleProcessorInternal === "function") {
          return ruleProcessorInternal(rule, { parseNumbers, escapeQuotes, quoteFieldNamesWith });
        }
        return defaultRuleProcessorSQL(rule, {
          parseNumbers,
          escapeQuotes,
          valueProcessor: valueProcessorInternal,
          quoteFieldNamesWith
        });
      });
      if (processedRules.length === 0) {
        return fallbackExpression;
      }
      return `${rg.not ? "NOT " : ""}(${processedRules.filter(Boolean).join("combinator" in rg ? ` ${rg.combinator} ` : " ")})`;
    };
    return processRuleGroup(ruleGroup, true);
  }
  if (format === "parameterized" || format === "parameterized_named") {
    const parameterized = format === "parameterized";
    const params = [];
    const params_named = {};
    const fieldParamIndexes = {};
    const getNextNamedParam = (field) => {
      fieldParamIndexes[field] = (fieldParamIndexes[field] ?? 0) + 1;
      return `${field}_${fieldParamIndexes[field]}`;
    };
    const processRule = (rule) => {
      const [validationResult, fieldValidator] = validateRule(rule);
      if (!isRuleOrGroupValid(rule, validationResult, fieldValidator) || rule.field === placeholderFieldName || rule.operator === placeholderOperatorName) {
        return "";
      }
      const value = valueProcessorInternal(rule, { parseNumbers, quoteFieldNamesWith });
      const operator = mapSQLOperator(rule.operator);
      if ((rule.valueSource ?? "value") === "value") {
        if (operator.toLowerCase() === "is null" || operator.toLowerCase() === "is not null") {
          return `${quoteFieldNamesWith[0]}${rule.field}${quoteFieldNamesWith[1]} ${operator}`;
        } else if (operator.toLowerCase() === "in" || operator.toLowerCase() === "not in") {
          if (value) {
            const splitValue = toArray(rule.value);
            if (parameterized) {
              splitValue.forEach(
                (v) => params.push(shouldRenderAsNumber(v, parseNumbers) ? parseFloat(v) : v)
              );
              return `${quoteFieldNamesWith[0]}${rule.field}${quoteFieldNamesWith[1]} ${operator} (${splitValue.map(() => "?").join(", ")})`;
            }
            const inParams = [];
            splitValue.forEach((v) => {
              const thisParamName = getNextNamedParam(rule.field);
              inParams.push(`${paramPrefix}${thisParamName}`);
              params_named[thisParamName] = shouldRenderAsNumber(v, parseNumbers) ? parseFloat(v) : v;
            });
            return `${quoteFieldNamesWith[0]}${rule.field}${quoteFieldNamesWith[1]} ${operator} (${inParams.join(", ")})`;
          } else {
            return "";
          }
        } else if (operator.toLowerCase() === "between" || operator.toLowerCase() === "not between") {
          if (value) {
            const valueAsArray = toArray(rule.value);
            const [first, second] = valueAsArray.slice(0, 2).map((v) => shouldRenderAsNumber(v, parseNumbers) ? parseFloat(v) : v);
            if (parameterized) {
              params.push(first);
              params.push(second);
              return `${quoteFieldNamesWith[0]}${rule.field}${quoteFieldNamesWith[1]} ${operator} ? and ?`;
            }
            const firstParamName = getNextNamedParam(rule.field);
            const secondParamName = getNextNamedParam(rule.field);
            params_named[firstParamName] = first;
            params_named[secondParamName] = second;
            return `${quoteFieldNamesWith[0]}${rule.field}${quoteFieldNamesWith[1]} ${operator} ${paramPrefix}${firstParamName} and ${paramPrefix}${secondParamName}`;
          } else {
            return "";
          }
        }
        let paramValue = rule.value;
        if (typeof rule.value === "string") {
          if (shouldRenderAsNumber(rule.value, parseNumbers)) {
            paramValue = parseFloat(rule.value);
          } else {
            paramValue = /^'.*'$/g.test(value) ? value.replace(/(^'|'$)/g, "") : (
              /* istanbul ignore next */
              value
            );
          }
        }
        let paramName = "";
        if (parameterized) {
          params.push(paramValue);
        } else {
          paramName = getNextNamedParam(rule.field);
          params_named[paramName] = paramValue;
        }
        return `${quoteFieldNamesWith[0]}${rule.field}${quoteFieldNamesWith[1]} ${operator} ${parameterized ? "?" : `${paramPrefix}${paramName}`}`.trim();
      } else {
        const operatorLowerCase = operator.toLowerCase();
        if ((operatorLowerCase === "in" || operatorLowerCase === "not in" || operatorLowerCase === "between" || operatorLowerCase === "not between") && !value) {
          return "";
        }
      }
      return `${quoteFieldNamesWith[0]}${rule.field}${quoteFieldNamesWith[1]} ${operator} ${value}`.trim();
    };
    const processRuleGroup = (rg, outermost) => {
      if (!isRuleOrGroupValid(rg, validationMap[rg.id ?? /* istanbul ignore next */
      ""])) {
        return outermost ? fallbackExpression : "";
      }
      const processedRules = rg.rules.map((rule) => {
        if (typeof rule === "string") {
          return rule;
        }
        if ("rules" in rule) {
          return processRuleGroup(rule);
        }
        return processRule(rule);
      });
      if (processedRules.length === 0) {
        return fallbackExpression;
      }
      return `${rg.not ? "NOT " : ""}(${processedRules.filter(Boolean).join("combinator" in rg ? ` ${rg.combinator} ` : " ")})`;
    };
    if (parameterized) {
      return { sql: processRuleGroup(ruleGroup, true), params };
    }
    return { sql: processRuleGroup(ruleGroup, true), params: params_named };
  }
  if (format === "mongodb") {
    const processRuleGroup = (rg, outermost) => {
      if (!isRuleOrGroupValid(rg, validationMap[rg.id ?? /* istanbul ignore next */
      ""])) {
        return outermost ? fallbackExpression : "";
      }
      const combinator = `"$${rg.combinator.toLowerCase()}"`;
      let hasChildRules = false;
      const expressions = rg.rules.map((rule) => {
        if ("rules" in rule) {
          const processedRuleGroup = processRuleGroup(rule);
          if (processedRuleGroup) {
            hasChildRules = true;
            return /^\{.+\}$/.test(processedRuleGroup) ? processedRuleGroup : `{${processedRuleGroup}}`;
          }
          return "";
        }
        const [validationResult, fieldValidator] = validateRule(rule);
        if (!isRuleOrGroupValid(rule, validationResult, fieldValidator) || rule.field === placeholderFieldName || rule.operator === placeholderOperatorName) {
          return "";
        }
        return (ruleProcessorInternal ?? valueProcessorInternal)(rule, { parseNumbers });
      }).filter(Boolean);
      return expressions.length > 0 ? expressions.length === 1 && !hasChildRules ? expressions[0] : `${combinator}:[${expressions.join(",")}]` : fallbackExpression;
    };
    const rgStandard = "combinator" in ruleGroup ? ruleGroup : convertFromIC(ruleGroup);
    const processedQuery = processRuleGroup(rgStandard, true);
    return /^\{.+\}$/.test(processedQuery) ? processedQuery : `{${processedQuery}}`;
  }
  if (format === "cel") {
    const processRuleGroup = (rg, outermost) => {
      if (!isRuleOrGroupValid(rg, validationMap[rg.id ?? /* istanbul ignore next */
      ""])) {
        return outermost ? fallbackExpression : "";
      }
      const expression = rg.rules.map((rule) => {
        if (typeof rule === "string") {
          return celCombinatorMap[rule];
        }
        if ("rules" in rule) {
          return processRuleGroup(rule);
        }
        const [validationResult, fieldValidator] = validateRule(rule);
        if (!isRuleOrGroupValid(rule, validationResult, fieldValidator) || rule.field === placeholderFieldName || rule.operator === placeholderOperatorName) {
          return "";
        }
        return (ruleProcessorInternal ?? valueProcessorInternal)(rule, {
          parseNumbers,
          escapeQuotes: (rule.valueSource ?? "value") === "value"
        });
      }).filter(Boolean).join(
        "combinator" in rg ? ` ${celCombinatorMap[rg.combinator]} ` : " "
      );
      const [prefix, suffix] = rg.not || !outermost ? [`${rg.not ? "!" : ""}(`, ")"] : ["", ""];
      return expression ? `${prefix}${expression}${suffix}` : fallbackExpression;
    };
    return processRuleGroup(ruleGroup, true);
  }
  if (format === "spel") {
    const processRuleGroup = (rg, outermost) => {
      if (!isRuleOrGroupValid(rg, validationMap[rg.id ?? /* istanbul ignore next */
      ""])) {
        return outermost ? fallbackExpression : "";
      }
      const expression = rg.rules.map((rule) => {
        if (typeof rule === "string") {
          return rule;
        }
        if ("rules" in rule) {
          return processRuleGroup(rule);
        }
        const [validationResult, fieldValidator] = validateRule(rule);
        if (!isRuleOrGroupValid(rule, validationResult, fieldValidator) || rule.field === placeholderFieldName || rule.operator === placeholderOperatorName) {
          return "";
        }
        return (ruleProcessorInternal ?? valueProcessorInternal)(rule, {
          parseNumbers,
          escapeQuotes: (rule.valueSource ?? "value") === "value"
        });
      }).filter(Boolean).join("combinator" in rg ? ` ${rg.combinator} ` : " ");
      const [prefix, suffix] = rg.not || !outermost ? [`${rg.not ? "!" : ""}(`, ")"] : ["", ""];
      return expression ? `${prefix}${expression}${suffix}` : fallbackExpression;
    };
    return processRuleGroup(ruleGroup, true);
  }
  if (format === "jsonlogic") {
    const query = "combinator" in ruleGroup ? ruleGroup : convertFromIC(ruleGroup);
    const processRuleGroup = (rg) => {
      if (!isRuleOrGroupValid(rg, validationMap[rg.id ?? /* istanbul ignore next */
      ""])) {
        return false;
      }
      const processedRules = rg.rules.map((rule) => {
        if ("rules" in rule) {
          return processRuleGroup(rule);
        }
        const [validationResult, fieldValidator] = validateRule(rule);
        if (!isRuleOrGroupValid(rule, validationResult, fieldValidator) || rule.field === placeholderFieldName || rule.operator === placeholderOperatorName) {
          return false;
        }
        return (ruleProcessorInternal ?? valueProcessorInternal)(rule, { parseNumbers });
      }).filter(Boolean);
      if (processedRules.length === 0) {
        return false;
      }
      const jsonRuleGroup = processedRules.length === 1 ? processedRules[0] : {
        [rg.combinator]: processedRules
      };
      return rg.not ? { "!": jsonRuleGroup } : jsonRuleGroup;
    };
    return processRuleGroup(query);
  }
  return "";
}

// src/utils/formatQuery/index.ts
var internalValueProcessors = {
  default: defaultValueProcessorByRule,
  mongodb: defaultRuleProcessorMongoDB,
  cel: defaultRuleProcessorCEL,
  spel: defaultRuleProcessorSpEL
};
var generateValueProcessor = (format) => (field, operator, value, valueSource) => internalValueProcessors[format](
  { field, operator, value, valueSource },
  { parseNumbers: false }
);
var defaultValueProcessor = generateValueProcessor("default");
var defaultMongoDBValueProcessor = generateValueProcessor("mongodb");
var defaultCELValueProcessor = generateValueProcessor("cel");
var defaultSpELValueProcessor = generateValueProcessor("spel");
var defaultValueProcessorCELByRule = (/* unused pure expression or super */ null && (defaultRuleProcessorCEL));
var defaultValueProcessorMongoDBByRule = (/* unused pure expression or super */ null && (defaultRuleProcessorMongoDB));
var defaultValueProcessorSpELByRule = (/* unused pure expression or super */ null && (defaultRuleProcessorSpEL));

// src/utils/generateID.ts
var cryptoModule = globalThis.crypto;
var generateID = () => "00-0-4-2-000".replace(
  /[^-]/g,
  (s) => ((Math.random() + ~~s) * 65536 >> s).toString(16).padStart(4, "0")
);
if (cryptoModule) {
  if (typeof cryptoModule.randomUUID === "function") {
    generateID = () => cryptoModule.randomUUID();
  } else if (typeof cryptoModule.getRandomValues === "function") {
    const template = [
      "".padEnd(8, "x"),
      "".padEnd(4, "x"),
      // third section starts with the UUID version
      "4".padEnd(4, "x"),
      // First character of fourth section is limited to four specific characters
      "y".padEnd(4, "x"),
      "".padEnd(12, "x")
    ].join("-");
    const position19vals = ["8", "9", "a", "b"];
    const re = /[xy]/g;
    const container = new Uint32Array(32);
    generateID = () => {
      cryptoModule.getRandomValues(container);
      let i = -1;
      return template.replaceAll(re, (char) => {
        i++;
        return char === "y" ? position19vals[container[i] % 4] : (container[i] % 16).toString(16);
      });
    };
  }
}

// src/utils/getCompatContextProvider.tsx



// src/utils/mergeClassnames.ts

var mergeClassnames = (...args) => {
  const joinClassnamesByName = (name) => clsx_m(args.filter(Boolean).map((c) => clsx_m(c[name])));
  return {
    queryBuilder: joinClassnamesByName("queryBuilder"),
    ruleGroup: joinClassnamesByName("ruleGroup"),
    header: joinClassnamesByName("header"),
    body: joinClassnamesByName("body"),
    combinators: joinClassnamesByName("combinators"),
    addRule: joinClassnamesByName("addRule"),
    addGroup: joinClassnamesByName("addGroup"),
    cloneRule: joinClassnamesByName("cloneRule"),
    cloneGroup: joinClassnamesByName("cloneGroup"),
    removeGroup: joinClassnamesByName("removeGroup"),
    rule: joinClassnamesByName("rule"),
    fields: joinClassnamesByName("fields"),
    operators: joinClassnamesByName("operators"),
    value: joinClassnamesByName("value"),
    removeRule: joinClassnamesByName("removeRule"),
    notToggle: joinClassnamesByName("notToggle"),
    dragHandle: joinClassnamesByName("dragHandle"),
    lockRule: joinClassnamesByName("lockRule"),
    lockGroup: joinClassnamesByName("lockGroup"),
    valueSource: joinClassnamesByName("valueSource")
  };
};

// src/utils/getCompatContextProvider.tsx
var getCompatContextProvider = ({
  key,
  controlClassnames: compatClassnames,
  controlElements: compatElements
}) => (props) => {
  const rqbContext = (0,react.useContext)(QueryBuilderContext);
  const classnamesObject = (0,react.useMemo)(
    () => compatClassnames ? {
      controlClassnames: mergeClassnames(
        rqbContext.controlClassnames,
        props.controlClassnames,
        compatClassnames
      )
    } : {},
    [props.controlClassnames, rqbContext.controlClassnames]
  );
  const newContextProps = (0,react.useMemo)(
    () => ({
      ...rqbContext,
      ...classnamesObject,
      controlElements: {
        ...rqbContext.controlElements,
        ...compatElements,
        ...props.controlElements
      }
    }),
    [classnamesObject, props.controlElements, rqbContext]
  );
  return /* @__PURE__ */ react.createElement(QueryBuilderContext.Provider, { value: newContextProps, key }, props.children);
};

// src/utils/getValidationClassNames.ts
var getValidationClassNames = (validationResult) => {
  const valid = typeof validationResult === "boolean" ? validationResult : typeof validationResult === "object" && validationResult !== null ? validationResult.valid : null;
  return typeof valid === "boolean" ? valid ? standardClassnames.valid : standardClassnames.invalid : "";
};

// src/utils/getValueSourcesUtil.ts
var getValueSourcesUtil = (fieldData, operator, getValueSources) => {
  const fd = fieldData ?? /* istanbul ignore else */
  {};
  if (fd.valueSources) {
    if (typeof fd.valueSources === "function") {
      return fd.valueSources(operator);
    }
    return fd.valueSources;
  }
  if (getValueSources) {
    const vals = getValueSources(fd.name, operator);
    if (vals)
      return vals;
  }
  return ["value"];
};

// src/utils/hooks/useControlledOrUncontrolled.ts


// src/messages.ts
var messages_exports = {};
__export(messages_exports, {
  errorBothQueryDefaultQuery: () => errorBothQueryDefaultQuery,
  errorControlledToUncontrolled: () => errorControlledToUncontrolled,
  errorDeprecatedRuleGroupProps: () => errorDeprecatedRuleGroupProps,
  errorDeprecatedRuleProps: () => errorDeprecatedRuleProps,
  errorEnabledDndWithoutReactDnD: () => errorEnabledDndWithoutReactDnD,
  errorUncontrolledToControlled: () => errorUncontrolledToControlled
});
var errorDeprecatedRuleGroupProps = "A custom RuleGroup component has rendered a standard RuleGroup component with deprecated props. The combinator, not, and rules props should not be used. Instead, the full group object should be passed as the ruleGroup prop.";
var errorDeprecatedRuleProps = "A custom RuleGroup component has rendered a standard Rule component with deprecated props. The field, operator, value, and valueSource props should not be used. Instead, the full rule object should be passed as the rule prop.";
var errorBothQueryDefaultQuery = "QueryBuilder was rendered with both query and defaultQuery props. QueryBuilder must be either controlled or uncontrolled (specify either the query prop, or the defaultQuery prop, but not both). Decide between using a controlled or uncontrolled query builder and remove one of these props. More info: https://reactjs.org/link/controlled-components";
var errorUncontrolledToControlled = "QueryBuilder is changing from an uncontrolled component to be controlled. This is likely caused by the query changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled query builder for the lifetime of the component. More info: https://reactjs.org/link/controlled-components";
var errorControlledToUncontrolled = "QueryBuilder is changing from a controlled component to be uncontrolled. This is likely caused by the query changing from defined to undefined, which should not happen. Decide between using a controlled or uncontrolled query builder for the lifetime of the component. More info: https://reactjs.org/link/controlled-components";
var errorEnabledDndWithoutReactDnD = "QueryBuilder was rendered with the enableDragAndDrop prop set to true, but either react-dnd or react-dnd-html5-backend (or both) was not installed. To enable drag-and-drop functionality, install both packages and wrap QueryBuilder in QueryBuilderDnD from @react-querybuilder/dnd.";

// src/utils/hooks/usePrevious.ts

var usePrevious = (value) => {
  const ref = (0,react.useRef)(null);
  (0,react.useEffect)(() => {
    ref.current = value;
  }, [value]);
  return ref.current;
};

// src/utils/hooks/useControlledOrUncontrolled.ts
var didWarnBothQueryDefaultQuery = false;
var didWarnUncontrolledToControlled = false;
var didWarnControlledToUncontrolled = false;
var useControlledOrUncontrolled = ({
  defaultQuery,
  queryProp,
  isFirstRender
}) => {
  const prevQueryPresent = usePrevious(!!queryProp);
  (0,react.useEffect)(() => {
    if (false) {}
  }, [defaultQuery, prevQueryPresent, queryProp, isFirstRender]);
};

// src/utils/hooks/useDeprecatedProps.ts

var didWarnUsingDeprecatedRuleProps = false;
var didWarnUsingDeprecatedRuleGroupProps = false;
var useDeprecatedProps = (type, newPropPresent) => {
  (0,react.useEffect)(() => {
    if (false) {}
    if (false) {}
  }, [newPropPresent, type]);
};

// src/utils/hooks/useMergedContext.ts


// src/utils/objectKeys.ts
var objectKeys = (obj) => Object.keys(obj);

// src/utils/hooks/usePreferProp.ts

var preferPropDefaultTrue = (prop, context) => prop === false ? false : prop ? true : context === false ? false : true;
var preferPropDefaultFalse = (prop, context) => prop ? true : prop === false ? false : context ? true : false;
var preferProp = (def, prop, context) => def ? preferPropDefaultTrue(prop, context) : preferPropDefaultFalse(prop, context);
var usePreferProp = (def, prop, context) => (0,react.useMemo)(() => preferProp(def, prop, context), [context, def, prop]);

// src/utils/hooks/useMergedContext.ts
var useMergedContext = (props) => {
  const rqbContext = (0,react.useContext)(QueryBuilderContext);
  const enableMountQueryChange = usePreferProp(
    true,
    props.enableMountQueryChange,
    rqbContext.enableMountQueryChange
  );
  const enableDragAndDrop = usePreferProp(false, props.enableDragAndDrop, rqbContext.enableDragAndDrop) && rqbContext.enableDragAndDrop !== false;
  const debugMode = usePreferProp(false, props.debugMode, rqbContext.debugMode);
  const controlClassnames = (0,react.useMemo)(
    () => mergeClassnames(
      defaultControlClassnames,
      rqbContext.controlClassnames,
      props.controlClassnames
    ),
    [rqbContext.controlClassnames, props.controlClassnames]
  );
  const controlElements = (0,react.useMemo)(
    () => ({
      ...defaultControlElements,
      ...rqbContext.controlElements,
      ...props.controlElements
    }),
    [props.controlElements, rqbContext.controlElements]
  );
  const translations = (0,react.useMemo)(() => {
    const translationsTemp = {};
    objectKeys(props.translations).forEach((t) => {
      const contextTranslations = rqbContext.translations;
      translationsTemp[t] = {
        ...defaultTranslations[t],
        ...contextTranslations,
        ...props.translations[t]
      };
    });
    return { ...defaultTranslations, ...translationsTemp };
  }, [rqbContext.translations, props.translations]);
  const {
    controlClassnames: _controlClassnames,
    controlElements: _controlElements,
    debugMode: _debugMode,
    enableDragAndDrop: _enableDragAndDrop,
    enableMountQueryChange: _enableMountQueryChange,
    translations: _translations,
    ...otherContext
  } = rqbContext;
  return {
    controlClassnames,
    controlElements,
    debugMode,
    enableDragAndDrop,
    enableMountQueryChange,
    translations,
    ...otherContext
  };
};

// src/utils/hooks/useReactDndWarning.ts

var didWarnEnabledDndWithoutReactDnD = false;
var useReactDndWarning = (enableDragAndDrop, dndRefs) => {
  (0,react.useEffect)(() => {
    if (false) {}
  }, []);
};

// src/utils/parserUtils.ts
var getFieldsArray = (fields) => {
  let fieldsFlat = [];
  const fieldsArray = !fields ? [] : Array.isArray(fields) ? fields : Object.keys(fields).map((fld) => ({ ...fields[fld], name: fld })).sort((a, b) => a.label.localeCompare(b.label));
  if (isOptionGroupArray(fieldsArray)) {
    fieldsFlat = uniqByName(fieldsFlat.concat(...fieldsArray.map((opt) => opt.options)));
  } else {
    fieldsFlat = uniqByName(fieldsArray);
  }
  return fieldsFlat;
};
function fieldIsValidUtil({
  fieldsFlat,
  fieldName,
  operator,
  subordinateFieldName,
  getValueSources
}) {
  if (fieldsFlat.length === 0)
    return true;
  let valid = false;
  const primaryField = fieldsFlat.find((ff) => ff.name === fieldName);
  if (primaryField) {
    if (!subordinateFieldName && operator !== "notNull" && operator !== "null" && !getValueSourcesUtil(primaryField, operator, getValueSources).some((vs) => vs === "value")) {
      valid = false;
    } else {
      valid = true;
    }
    if (valid && !!subordinateFieldName) {
      if (getValueSourcesUtil(primaryField, operator, getValueSources).some((vs) => vs === "field") && fieldName !== subordinateFieldName) {
        const validSubordinateFields = filterFieldsByComparator(
          primaryField,
          fieldsFlat,
          operator
        );
        if (!validSubordinateFields.find((vsf) => vsf.name === subordinateFieldName)) {
          valid = false;
        }
      } else {
        valid = false;
      }
    }
  }
  return valid;
}

// src/utils/parseCEL/celParser.js
var celParser = function() {
  var o = function(k, v, o2, l) {
    for (o2 = o2 || {}, l = k.length; l--; o2[k[l]] = v)
      ;
    return o2;
  }, $V0 = [1, 27], $V1 = [1, 31], $V2 = [1, 32], $V3 = [1, 28], $V4 = [1, 29], $V5 = [1, 30], $V6 = [1, 33], $V7 = [1, 34], $V8 = [1, 18], $V9 = [1, 26], $Va = [1, 12], $Vb = [1, 13], $Vc = [1, 19], $Vd = [1, 20], $Ve = [1, 40], $Vf = [1, 39], $Vg = [1, 41], $Vh = [1, 42], $Vi = [1, 43], $Vj = [1, 36], $Vk = [1, 37], $Vl = [1, 38], $Vm = [5, 37, 43, 45, 49, 50, 53, 54, 55, 56, 60, 61, 62, 63], $Vn = [1, 44], $Vo = [1, 45], $Vp = [1, 46], $Vq = [5, 23, 24, 25, 26, 27, 28, 31, 37, 40, 43, 44, 45, 46, 49, 50, 53, 54, 55, 56, 60, 61, 62, 63], $Vr = [7, 9, 10, 12, 13, 14, 16, 18, 21, 35, 40, 41, 44, 46], $Vs = [2, 36], $Vt = [1, 85], $Vu = [43, 45, 50], $Vv = [5, 37, 43, 45, 49, 50, 53, 61, 62, 63], $Vw = [5, 37, 43, 45, 49, 50, 53, 54, 55, 56, 61, 62, 63], $Vx = [2, 37], $Vy = [49, 50];
  var parser = {
    trace: function trace() {
    },
    yy: {},
    symbols_: { "error": 2, "main": 3, "expr": 4, "EOF": 5, "string_literal": 6, "STRING_LIT": 7, "bytes_literal": 8, "b": 9, "B": 10, "number_literal": 11, "INT_LIT": 12, "UINT_LIT": 13, "FLOAT_LIT": 14, "boolean_literal": 15, "BOOL_LIT": 16, "null_literal": 17, "NULL_LIT": 18, "literal": 19, "ident": 20, "IDENT": 21, "relop": 22, "==": 23, ">=": 24, ">": 25, "<=": 26, "<": 27, "!=": 28, "relation": 29, "member": 30, "in": 31, "list": 32, "map": 33, "negation": 34, "!": 35, "negative": 36, "-": 37, "unary": 38, "primary": 39, "DOT": 40, "(": 41, "expr_list": 42, ")": 43, "[": 44, "]": 45, "{": 46, "field_inits": 47, "trailing_comma": 48, "}": 49, ",": 50, "map_inits": 51, "math_operation": 52, "+": 53, "*": 54, "/": 55, "%": 56, "conditional_expr": 57, "conditional_and": 58, "conditional_or": 59, "?": 60, ":": 61, "&&": 62, "||": 63, "$accept": 0, "$end": 1 },
    terminals_: { 2: "error", 5: "EOF", 7: "STRING_LIT", 9: "b", 10: "B", 12: "INT_LIT", 13: "UINT_LIT", 14: "FLOAT_LIT", 16: "BOOL_LIT", 18: "NULL_LIT", 21: "IDENT", 23: "==", 24: ">=", 25: ">", 26: "<=", 27: "<", 28: "!=", 31: "in", 35: "!", 37: "-", 40: "DOT", 41: "(", 43: ")", 44: "[", 45: "]", 46: "{", 49: "}", 50: ",", 53: "+", 54: "*", 55: "/", 56: "%", 60: "?", 61: ":", 62: "&&", 63: "||" },
    productions_: [0, [3, 2], [6, 1], [8, 2], [8, 2], [11, 1], [11, 1], [11, 1], [15, 1], [17, 1], [19, 1], [19, 1], [19, 1], [19, 1], [19, 1], [20, 1], [22, 1], [22, 1], [22, 1], [22, 1], [22, 1], [22, 1], [29, 3], [29, 3], [29, 3], [34, 1], [34, 2], [36, 1], [36, 2], [38, 2], [30, 1], [30, 1], [30, 3], [30, 6], [30, 4], [30, 5], [48, 0], [48, 1], [39, 1], [39, 2], [39, 5], [39, 6], [39, 3], [39, 1], [39, 1], [39, 1], [32, 4], [33, 4], [52, 3], [52, 3], [52, 3], [52, 3], [52, 3], [4, 1], [4, 1], [4, 1], [4, 1], [4, 1], [4, 1], [57, 5], [58, 3], [59, 3], [42, 1], [42, 3], [47, 3], [47, 5], [51, 3], [51, 5]],
    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$) {
      var $0 = $$.length - 1;
      switch (yystate) {
        case 1:
          return { nodeType: "Main", value: $$[$0 - 1] };
          break;
        case 2:
          this.$ = { type: "StringLiteral", value: $$[$0] };
          break;
        case 3:
        case 4:
          this.$ = { type: "BytesLiteral", value: $$[$0] };
          break;
        case 5:
          this.$ = { type: "IntegerLiteral", value: parseInt($$[$0], /x/.test($$[$0]) ? 16 : 10) };
          break;
        case 6:
          this.$ = { type: "UnsignedIntegerLiteral", value: parseInt($$[$0].replace(/u$/i, ""), /^0x/.test($$[$0]) ? 16 : 10) };
          break;
        case 7:
          this.$ = { type: "FloatLiteral", value: parseFloat($$[$0]) };
          break;
        case 8:
          this.$ = { type: "BooleanLiteral", value: $$[$0] === "true" };
          break;
        case 9:
          this.$ = { type: "NullLiteral", value: null };
          break;
        case 10:
        case 11:
        case 12:
        case 13:
        case 14:
        case 16:
        case 17:
        case 18:
        case 19:
        case 20:
        case 21:
        case 38:
        case 43:
        case 44:
        case 45:
        case 53:
        case 54:
        case 55:
        case 56:
        case 57:
        case 58:
          this.$ = $$[$0];
          break;
        case 15:
          this.$ = { type: "Identifier", value: $$[$0] };
          break;
        case 22:
        case 23:
        case 24:
          this.$ = { type: "Relation", left: $$[$0 - 2], operator: $$[$0 - 1], right: $$[$0] };
          break;
        case 25:
        case 27:
          this.$ = 1;
          break;
        case 26:
        case 28:
          this.$ = this.$ += 1;
          ;
          break;
        case 29:
          this.$ = { type: "Negation", negations: $$[$0 - 1], value: $$[$0] };
          break;
        case 30:
        case 31:
          this.$ = $$[$0];
          break;
        case 32:
          this.$ = { type: "Member", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 33:
          this.$ = { type: "Member", left: $$[$0 - 5], right: $$[$0 - 3], list: $$[$0 - 1] };
          break;
        case 34:
          this.$ = { type: "DynamicPropertyAccessor", left: $$[$0 - 3], right: $$[$0 - 1] };
          break;
        case 35:
          this.$ = { type: "FieldsObject", left: $$[$0 - 4], list: $$[$0 - 2], trailingComma: $$[$0 - 1] };
          break;
        case 36:
          this.$ = false;
          break;
        case 37:
          this.$ = true;
          break;
        case 39:
          this.$ = { type: "Property", value: $$[$0] };
          break;
        case 40:
          this.$ = { type: "FunctionCall", name: $$[$0 - 4], args: $$[$0 - 2], trailingComma: $$[$0 - 1] };
          break;
        case 41:
          this.$ = { type: "Property", value: $$[$0 - 4], args: $$[$0 - 2], trailingComma: $$[$0 - 1] };
          break;
        case 42:
          this.$ = { type: "ExpressionGroup", value: $$[$0 - 1] };
          break;
        case 46:
          this.$ = { type: "List", value: $$[$0 - 2], trailingComma: $$[$0 - 1] };
          break;
        case 47:
          this.$ = { type: "Map", value: $$[$0 - 2], trailingComma: $$[$0 - 1] };
          break;
        case 48:
          this.$ = { type: "Addition", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 49:
          this.$ = { type: "Subtraction", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 50:
          this.$ = { type: "Multiplication", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 51:
          this.$ = { type: "Division", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 52:
          this.$ = { type: "Modulo", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 59:
          this.$ = { type: "ConditionalExpr", condition: $$[$0 - 4], valueIfTrue: $$[$0 - 2], valueIfFalse: $$[$0] };
          break;
        case 60:
          this.$ = { type: "ConditionalAnd", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 61:
          this.$ = { type: "ConditionalOr", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 62:
          this.$ = { type: "ExpressionList", value: [$$[$0]] };
          break;
        case 63:
          this.$ = $$[$0 - 2];
          this.$.value.push($$[$0]);
          ;
          break;
        case 64:
          this.$ = { type: "FieldInits", value: [{ type: "FieldInit", left: $$[$0 - 2], right: $$[$0] }] };
          break;
        case 65:
          this.$ = $$[$0 - 4];
          this.$.value.push({ type: "FieldInit", left: $$[$0 - 2], right: $$[$0] });
          ;
          break;
        case 66:
          this.$ = { type: "MapInits", value: [{ type: "MapInit", left: $$[$0 - 2], right: $$[$0] }] };
          break;
        case 67:
          this.$ = $$[$0 - 4];
          this.$.value.push({ type: "MapInit", left: $$[$0 - 2], right: $$[$0] });
          ;
          break;
      }
    },
    table: [{ 3: 1, 4: 2, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, { 1: [3] }, { 5: [1, 35], 37: $Ve, 53: $Vf, 54: $Vg, 55: $Vh, 56: $Vi, 60: $Vj, 62: $Vk, 63: $Vl }, o($Vm, [2, 53], { 22: 47, 23: [1, 49], 24: [1, 50], 25: [1, 51], 26: [1, 52], 27: [1, 53], 28: [1, 54], 31: [1, 48], 40: $Vn, 44: $Vo, 46: $Vp }), o($Vm, [2, 54]), o($Vm, [2, 55]), o($Vm, [2, 56]), o($Vm, [2, 57]), o($Vm, [2, 58]), o($Vq, [2, 30]), o($Vq, [2, 31]), o($Vq, [2, 38], { 41: [1, 55] }), { 20: 56, 21: $V8 }, { 4: 57, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, o($Vq, [2, 43]), o($Vq, [2, 44]), o($Vq, [2, 45]), { 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 32: 14, 33: 15, 35: [1, 59], 39: 58, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd }, o([5, 23, 24, 25, 26, 27, 28, 31, 37, 40, 41, 43, 44, 45, 46, 49, 50, 53, 54, 55, 56, 60, 61, 62, 63], [2, 15]), { 4: 61, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 42: 60, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, { 4: 63, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 51: 62, 52: 8, 57: 4, 58: 5, 59: 6 }, o($Vq, [2, 10]), o($Vq, [2, 11]), o($Vq, [2, 12]), o($Vq, [2, 13]), o($Vq, [2, 14]), o($Vr, [2, 25]), o($Vq, [2, 2]), o($Vq, [2, 5]), o($Vq, [2, 6]), o($Vq, [2, 7]), { 6: 64, 7: $V0 }, { 6: 65, 7: $V0 }, o($Vq, [2, 8]), o($Vq, [2, 9]), { 1: [2, 1] }, { 4: 66, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, { 4: 67, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, { 4: 68, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, { 4: 69, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, { 4: 70, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, { 4: 71, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, { 4: 72, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, { 4: 73, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, { 20: 74, 21: $V8 }, { 4: 75, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, { 20: 77, 21: $V8, 47: 76 }, { 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 30: 78, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd }, { 32: 79, 33: 80, 44: $Vc, 46: $Vd }, o($Vr, [2, 16]), o($Vr, [2, 17]), o($Vr, [2, 18]), o($Vr, [2, 19]), o($Vr, [2, 20]), o($Vr, [2, 21]), { 4: 61, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 42: 81, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, o($Vq, [2, 39], { 41: [1, 82] }), { 37: $Ve, 43: [1, 83], 53: $Vf, 54: $Vg, 55: $Vh, 56: $Vi, 60: $Vj, 62: $Vk, 63: $Vl }, o($Vq, [2, 29]), o($Vr, [2, 26]), { 45: $Vs, 48: 84, 50: $Vt }, o($Vu, [2, 62], { 37: $Ve, 53: $Vf, 54: $Vg, 55: $Vh, 56: $Vi, 60: $Vj, 62: $Vk, 63: $Vl }), { 48: 86, 49: $Vs, 50: [1, 87] }, { 37: $Ve, 53: $Vf, 54: $Vg, 55: $Vh, 56: $Vi, 60: $Vj, 61: [1, 88], 62: $Vk, 63: $Vl }, o($Vq, [2, 3]), o($Vq, [2, 4]), { 37: $Ve, 53: $Vf, 54: $Vg, 55: $Vh, 56: $Vi, 60: $Vj, 61: [1, 89], 62: $Vk, 63: $Vl }, o([5, 43, 45, 49, 50, 61, 62, 63], [2, 60], { 37: $Ve, 53: $Vf, 54: $Vg, 55: $Vh, 56: $Vi, 60: $Vj }), o([5, 43, 45, 49, 50, 61, 63], [2, 61], { 37: $Ve, 53: $Vf, 54: $Vg, 55: $Vh, 56: $Vi, 60: $Vj, 62: $Vk }), o($Vv, [2, 48], { 54: $Vg, 55: $Vh, 56: $Vi, 60: $Vj }), o($Vv, [2, 49], { 54: $Vg, 55: $Vh, 56: $Vi, 60: $Vj }), o($Vw, [2, 50], { 60: $Vj }), o($Vw, [2, 51], { 60: $Vj }), o($Vw, [2, 52], { 60: $Vj }), o($Vq, [2, 32], { 41: [1, 90] }), { 37: $Ve, 45: [1, 91], 53: $Vf, 54: $Vg, 55: $Vh, 56: $Vi, 60: $Vj, 62: $Vk, 63: $Vl }, { 48: 92, 49: $Vs, 50: [1, 93] }, { 61: [1, 94] }, o($Vm, [2, 22], { 40: $Vn, 44: $Vo, 46: $Vp }), o($Vm, [2, 23]), o($Vm, [2, 24]), { 43: $Vs, 48: 95, 50: $Vt }, { 4: 61, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 42: 96, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, o($Vq, [2, 42]), { 45: [1, 97] }, o([43, 45], $Vx, { 30: 3, 57: 4, 58: 5, 59: 6, 29: 7, 52: 8, 39: 9, 38: 10, 20: 11, 32: 14, 33: 15, 19: 16, 34: 17, 6: 21, 11: 22, 8: 23, 15: 24, 17: 25, 4: 98, 7: $V0, 9: $V1, 10: $V2, 12: $V3, 13: $V4, 14: $V5, 16: $V6, 18: $V7, 21: $V8, 35: $V9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd }), { 49: [1, 99] }, { 4: 100, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 49: $Vx, 52: 8, 57: 4, 58: 5, 59: 6 }, { 4: 101, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, { 4: 102, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, { 4: 61, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 42: 103, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, o($Vq, [2, 34]), { 49: [1, 104] }, { 20: 105, 21: $V8, 49: $Vx }, { 4: 106, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, { 43: [1, 107] }, { 43: $Vs, 48: 108, 50: $Vt }, o($Vq, [2, 46]), o($Vu, [2, 63], { 37: $Ve, 53: $Vf, 54: $Vg, 55: $Vh, 56: $Vi, 60: $Vj, 62: $Vk, 63: $Vl }), o($Vq, [2, 47]), { 37: $Ve, 53: $Vf, 54: $Vg, 55: $Vh, 56: $Vi, 60: $Vj, 61: [1, 109], 62: $Vk, 63: $Vl }, o($Vy, [2, 66], { 37: $Ve, 53: $Vf, 54: $Vg, 55: $Vh, 56: $Vi, 60: $Vj, 62: $Vk, 63: $Vl }), o($Vm, [2, 59]), { 43: [1, 110], 50: [1, 111] }, o($Vq, [2, 35]), { 61: [1, 112] }, o($Vy, [2, 64], { 37: $Ve, 53: $Vf, 54: $Vg, 55: $Vh, 56: $Vi, 60: $Vj, 62: $Vk, 63: $Vl }), o($Vq, [2, 40]), { 43: [1, 113] }, { 4: 114, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, o($Vq, [2, 33]), { 4: 98, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, { 4: 115, 6: 21, 7: $V0, 8: 23, 9: $V1, 10: $V2, 11: 22, 12: $V3, 13: $V4, 14: $V5, 15: 24, 16: $V6, 17: 25, 18: $V7, 19: 16, 20: 11, 21: $V8, 29: 7, 30: 3, 32: 14, 33: 15, 34: 17, 35: $V9, 38: 10, 39: 9, 40: $Va, 41: $Vb, 44: $Vc, 46: $Vd, 52: 8, 57: 4, 58: 5, 59: 6 }, o($Vq, [2, 41]), o($Vy, [2, 67], { 37: $Ve, 53: $Vf, 54: $Vg, 55: $Vh, 56: $Vi, 60: $Vj, 62: $Vk, 63: $Vl }), o($Vy, [2, 65], { 37: $Ve, 53: $Vf, 54: $Vg, 55: $Vh, 56: $Vi, 60: $Vj, 62: $Vk, 63: $Vl })],
    defaultActions: { 35: [2, 1] },
    parseError: function parseError(str, hash) {
      if (hash.recoverable) {
        this.trace(str);
      } else {
        var error = new Error(str);
        error.hash = hash;
        throw error;
      }
    },
    parse: function parse(input) {
      var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = "", yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;
      var args = lstack.slice.call(arguments, 1);
      var lexer2 = Object.create(this.lexer);
      var sharedState = { yy: {} };
      for (var k in this.yy) {
        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {
          sharedState.yy[k] = this.yy[k];
        }
      }
      lexer2.setInput(input, sharedState.yy);
      sharedState.yy.lexer = lexer2;
      sharedState.yy.parser = this;
      if (typeof lexer2.yylloc == "undefined") {
        lexer2.yylloc = {};
      }
      var yyloc = lexer2.yylloc;
      lstack.push(yyloc);
      var ranges = lexer2.options && lexer2.options.ranges;
      if (typeof sharedState.yy.parseError === "function") {
        this.parseError = sharedState.yy.parseError;
      } else {
        this.parseError = Object.getPrototypeOf(this).parseError;
      }
      function popStack(n) {
        stack.length = stack.length - 2 * n;
        vstack.length = vstack.length - n;
        lstack.length = lstack.length - n;
      }
      var lex = function() {
        var token;
        token = lexer2.lex() || EOF;
        if (typeof token !== "number") {
          token = self.symbols_[token] || token;
        }
        return token;
      };
      var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;
      while (true) {
        state = stack[stack.length - 1];
        if (this.defaultActions[state]) {
          action = this.defaultActions[state];
        } else {
          if (symbol === null || typeof symbol == "undefined") {
            symbol = lex();
          }
          action = table[state] && table[state][symbol];
        }
        if (typeof action === "undefined" || !action.length || !action[0]) {
          var errStr = "";
          expected = [];
          for (p in table[state]) {
            if (this.terminals_[p] && p > TERROR) {
              expected.push("'" + this.terminals_[p] + "'");
            }
          }
          if (lexer2.showPosition) {
            errStr = "Parse error on line " + (yylineno + 1) + ":\n" + lexer2.showPosition() + "\nExpecting " + expected.join(", ") + ", got '" + (this.terminals_[symbol] || symbol) + "'";
          } else {
            errStr = "Parse error on line " + (yylineno + 1) + ": Unexpected " + (symbol == EOF ? "end of input" : "'" + (this.terminals_[symbol] || symbol) + "'");
          }
          this.parseError(errStr, {
            text: lexer2.match,
            token: this.terminals_[symbol] || symbol,
            line: lexer2.yylineno,
            loc: yyloc,
            expected
          });
        }
        if (action[0] instanceof Array && action.length > 1) {
          throw new Error("Parse Error: multiple actions possible at state: " + state + ", token: " + symbol);
        }
        switch (action[0]) {
          case 1:
            stack.push(symbol);
            vstack.push(lexer2.yytext);
            lstack.push(lexer2.yylloc);
            stack.push(action[1]);
            symbol = null;
            if (!preErrorSymbol) {
              yyleng = lexer2.yyleng;
              yytext = lexer2.yytext;
              yylineno = lexer2.yylineno;
              yyloc = lexer2.yylloc;
              if (recovering > 0) {
                recovering--;
              }
            } else {
              symbol = preErrorSymbol;
              preErrorSymbol = null;
            }
            break;
          case 2:
            len = this.productions_[action[1]][1];
            yyval.$ = vstack[vstack.length - len];
            yyval._$ = {
              first_line: lstack[lstack.length - (len || 1)].first_line,
              last_line: lstack[lstack.length - 1].last_line,
              first_column: lstack[lstack.length - (len || 1)].first_column,
              last_column: lstack[lstack.length - 1].last_column
            };
            if (ranges) {
              yyval._$.range = [
                lstack[lstack.length - (len || 1)].range[0],
                lstack[lstack.length - 1].range[1]
              ];
            }
            r = this.performAction.apply(yyval, [
              yytext,
              yyleng,
              yylineno,
              sharedState.yy,
              action[1],
              vstack,
              lstack
            ].concat(args));
            if (typeof r !== "undefined") {
              return r;
            }
            if (len) {
              stack = stack.slice(0, -1 * len * 2);
              vstack = vstack.slice(0, -1 * len);
              lstack = lstack.slice(0, -1 * len);
            }
            stack.push(this.productions_[action[1]][0]);
            vstack.push(yyval.$);
            lstack.push(yyval._$);
            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];
            stack.push(newState);
            break;
          case 3:
            return true;
        }
      }
      return true;
    }
  };
  var lexer = function() {
    var lexer2 = {
      EOF: 1,
      parseError: function parseError(str, hash) {
        if (this.yy.parser) {
          this.yy.parser.parseError(str, hash);
        } else {
          throw new Error(str);
        }
      },
      // resets the lexer, sets new input
      setInput: function(input, yy) {
        this.yy = yy || this.yy || {};
        this._input = input;
        this._more = this._backtrack = this.done = false;
        this.yylineno = this.yyleng = 0;
        this.yytext = this.matched = this.match = "";
        this.conditionStack = ["INITIAL"];
        this.yylloc = {
          first_line: 1,
          first_column: 0,
          last_line: 1,
          last_column: 0
        };
        if (this.options.ranges) {
          this.yylloc.range = [0, 0];
        }
        this.offset = 0;
        return this;
      },
      // consumes and returns one char from the input
      input: function() {
        var ch = this._input[0];
        this.yytext += ch;
        this.yyleng++;
        this.offset++;
        this.match += ch;
        this.matched += ch;
        var lines = ch.match(/(?:\r\n?|\n).*/g);
        if (lines) {
          this.yylineno++;
          this.yylloc.last_line++;
        } else {
          this.yylloc.last_column++;
        }
        if (this.options.ranges) {
          this.yylloc.range[1]++;
        }
        this._input = this._input.slice(1);
        return ch;
      },
      // unshifts one char (or a string) into the input
      unput: function(ch) {
        var len = ch.length;
        var lines = ch.split(/(?:\r\n?|\n)/g);
        this._input = ch + this._input;
        this.yytext = this.yytext.substr(0, this.yytext.length - len);
        this.offset -= len;
        var oldLines = this.match.split(/(?:\r\n?|\n)/g);
        this.match = this.match.substr(0, this.match.length - 1);
        this.matched = this.matched.substr(0, this.matched.length - 1);
        if (lines.length - 1) {
          this.yylineno -= lines.length - 1;
        }
        var r = this.yylloc.range;
        this.yylloc = {
          first_line: this.yylloc.first_line,
          last_line: this.yylineno + 1,
          first_column: this.yylloc.first_column,
          last_column: lines ? (lines.length === oldLines.length ? this.yylloc.first_column : 0) + oldLines[oldLines.length - lines.length].length - lines[0].length : this.yylloc.first_column - len
        };
        if (this.options.ranges) {
          this.yylloc.range = [r[0], r[0] + this.yyleng - len];
        }
        this.yyleng = this.yytext.length;
        return this;
      },
      // When called from action, caches matched text and appends it on next action
      more: function() {
        this._more = true;
        return this;
      },
      // When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.
      reject: function() {
        if (this.options.backtrack_lexer) {
          this._backtrack = true;
        } else {
          return this.parseError("Lexical error on line " + (this.yylineno + 1) + ". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n" + this.showPosition(), {
            text: "",
            token: null,
            line: this.yylineno
          });
        }
        return this;
      },
      // retain first n characters of the match
      less: function(n) {
        this.unput(this.match.slice(n));
      },
      // displays already matched input, i.e. for error messages
      pastInput: function() {
        var past = this.matched.substr(0, this.matched.length - this.match.length);
        return (past.length > 20 ? "..." : "") + past.substr(-20).replace(/\n/g, "");
      },
      // displays upcoming input, i.e. for error messages
      upcomingInput: function() {
        var next = this.match;
        if (next.length < 20) {
          next += this._input.substr(0, 20 - next.length);
        }
        return (next.substr(0, 20) + (next.length > 20 ? "..." : "")).replace(/\n/g, "");
      },
      // displays the character position where the lexing error occurred, i.e. for error messages
      showPosition: function() {
        var pre = this.pastInput();
        var c = new Array(pre.length + 1).join("-");
        return pre + this.upcomingInput() + "\n" + c + "^";
      },
      // test the lexed token: return FALSE when not a match, otherwise return token
      test_match: function(match, indexed_rule) {
        var token, lines, backup;
        if (this.options.backtrack_lexer) {
          backup = {
            yylineno: this.yylineno,
            yylloc: {
              first_line: this.yylloc.first_line,
              last_line: this.last_line,
              first_column: this.yylloc.first_column,
              last_column: this.yylloc.last_column
            },
            yytext: this.yytext,
            match: this.match,
            matches: this.matches,
            matched: this.matched,
            yyleng: this.yyleng,
            offset: this.offset,
            _more: this._more,
            _input: this._input,
            yy: this.yy,
            conditionStack: this.conditionStack.slice(0),
            done: this.done
          };
          if (this.options.ranges) {
            backup.yylloc.range = this.yylloc.range.slice(0);
          }
        }
        lines = match[0].match(/(?:\r\n?|\n).*/g);
        if (lines) {
          this.yylineno += lines.length;
        }
        this.yylloc = {
          first_line: this.yylloc.last_line,
          last_line: this.yylineno + 1,
          first_column: this.yylloc.last_column,
          last_column: lines ? lines[lines.length - 1].length - lines[lines.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + match[0].length
        };
        this.yytext += match[0];
        this.match += match[0];
        this.matches = match;
        this.yyleng = this.yytext.length;
        if (this.options.ranges) {
          this.yylloc.range = [this.offset, this.offset += this.yyleng];
        }
        this._more = false;
        this._backtrack = false;
        this._input = this._input.slice(match[0].length);
        this.matched += match[0];
        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);
        if (this.done && this._input) {
          this.done = false;
        }
        if (token) {
          return token;
        } else if (this._backtrack) {
          for (var k in backup) {
            this[k] = backup[k];
          }
          return false;
        }
        return false;
      },
      // return next match in input
      next: function() {
        if (this.done) {
          return this.EOF;
        }
        if (!this._input) {
          this.done = true;
        }
        var token, match, tempMatch, index;
        if (!this._more) {
          this.yytext = "";
          this.match = "";
        }
        var rules = this._currentRules();
        for (var i = 0; i < rules.length; i++) {
          tempMatch = this._input.match(this.rules[rules[i]]);
          if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {
            match = tempMatch;
            index = i;
            if (this.options.backtrack_lexer) {
              token = this.test_match(tempMatch, rules[i]);
              if (token !== false) {
                return token;
              } else if (this._backtrack) {
                match = false;
                continue;
              } else {
                return false;
              }
            } else if (!this.options.flex) {
              break;
            }
          }
        }
        if (match) {
          token = this.test_match(match, rules[index]);
          if (token !== false) {
            return token;
          }
          return false;
        }
        if (this._input === "") {
          return this.EOF;
        } else {
          return this.parseError("Lexical error on line " + (this.yylineno + 1) + ". Unrecognized text.\n" + this.showPosition(), {
            text: "",
            token: null,
            line: this.yylineno
          });
        }
      },
      // return next match that has a token
      lex: function lex() {
        var r = this.next();
        if (r) {
          return r;
        } else {
          return this.lex();
        }
      },
      // activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)
      begin: function begin(condition) {
        this.conditionStack.push(condition);
      },
      // pop the previously active lexer condition state off the condition stack
      popState: function popState() {
        var n = this.conditionStack.length - 1;
        if (n > 0) {
          return this.conditionStack.pop();
        } else {
          return this.conditionStack[0];
        }
      },
      // produce the lexer rule set which is active for the currently active lexer condition state
      _currentRules: function _currentRules() {
        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {
          return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;
        } else {
          return this.conditions["INITIAL"].rules;
        }
      },
      // return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available
      topState: function topState(n) {
        n = this.conditionStack.length - 1 - Math.abs(n || 0);
        if (n >= 0) {
          return this.conditionStack[n];
        } else {
          return "INITIAL";
        }
      },
      // alias for begin(condition)
      pushState: function pushState(condition) {
        this.begin(condition);
      },
      // return the number of states currently on the stack
      stateStackSize: function stateStackSize() {
        return this.conditionStack.length;
      },
      options: { "flex": true },
      performAction: function anonymous(yy, yy_, $avoiding_name_collisions, YY_START) {
        var YYSTATE = YY_START;
        switch ($avoiding_name_collisions) {
          case 0:
            break;
          case 1:
            break;
          case 2:
            return 31;
            break;
          case 3:
            return "as";
            break;
          case 4:
            return "break";
            break;
          case 5:
            return "const";
            break;
          case 6:
            return "continue";
            break;
          case 7:
            return "else";
            break;
          case 8:
            return "for";
            break;
          case 9:
            return "function";
            break;
          case 10:
            return "if";
            break;
          case 11:
            return "import";
            break;
          case 12:
            return "let";
            break;
          case 13:
            return "loop";
            break;
          case 14:
            return "package";
            break;
          case 15:
            return "namespace";
            break;
          case 16:
            return "return";
            break;
          case 17:
            return "var";
            break;
          case 18:
            return "void";
            break;
          case 19:
            return "while";
            break;
          case 20:
            return 18;
            break;
          case 21:
            return 16;
            break;
          case 22:
            return 16;
            break;
          case 23:
            return 40;
            break;
          case 24:
            return 60;
            break;
          case 25:
            return 61;
            break;
          case 26:
            return 50;
            break;
          case 27:
            return 44;
            break;
          case 28:
            return 45;
            break;
          case 29:
            return 41;
            break;
          case 30:
            return 43;
            break;
          case 31:
            return 28;
            break;
          case 32:
            return 35;
            break;
          case 33:
            return 53;
            break;
          case 34:
            return 37;
            break;
          case 35:
            return 54;
            break;
          case 36:
            return 55;
            break;
          case 37:
            return 56;
            break;
          case 38:
            return 23;
            break;
          case 39:
            return 24;
            break;
          case 40:
            return 25;
            break;
          case 41:
            return 26;
            break;
          case 42:
            return 27;
            break;
          case 43:
            return 46;
            break;
          case 44:
            return 49;
            break;
          case 45:
            return 62;
            break;
          case 46:
            return 63;
            break;
          case 47:
            return 21;
            break;
          case 48:
            return 7;
            break;
          case 49:
            return 7;
            break;
          case 50:
            return 7;
            break;
          case 51:
            return 7;
            break;
          case 52:
            return 12;
            break;
          case 53:
            return 13;
            break;
          case 54:
            return 14;
            break;
          case 55:
            return 5;
            break;
          case 56:
            return "INVALID";
            break;
          case 57:
            console.log(yy_.yytext);
            break;
        }
      },
      rules: [/^(?:[/][/]\s.*\n)/, /^(?:\s+)/, /^(?:in)/, /^(?:as)/, /^(?:break)/, /^(?:const)/, /^(?:continue)/, /^(?:else)/, /^(?:for)/, /^(?:function)/, /^(?:if)/, /^(?:import)/, /^(?:let)/, /^(?:loop)/, /^(?:package)/, /^(?:namespace)/, /^(?:return)/, /^(?:var)/, /^(?:void)/, /^(?:while)/, /^(?:null)/, /^(?:true)/, /^(?:false)/, /^(?:\.)/, /^(?:\?)/, /^(?::)/, /^(?:,)/, /^(?:\[)/, /^(?:\])/, /^(?:\()/, /^(?:\))/, /^(?:!=)/, /^(?:!)/, /^(?:\+)/, /^(?:-)/, /^(?:\*)/, /^(?:\/)/, /^(?:%)/, /^(?:==)/, /^(?:>=)/, /^(?:>)/, /^(?:<=)/, /^(?:<)/, /^(?:\{)/, /^(?:\})/, /^(?:&&)/, /^(?:\|\|)/, /^(?:[_a-zA-Z][_a-zA-Z0-9]*)/, /^(?:[rR]?['][']['](\.|[^'])*['][']['])/, /^(?:[rR]?["]["]["](\.|[^"])*["]["]["])/, /^(?:[rR]?['](\.|[^'\n\r])*['])/, /^(?:[rR]?["](\.|[^"\n\r])*["])/, /^(?:[-]?([0-9]+|0x[0-9a-fA-F]+))/, /^(?:([0-9]+|0x[0-9a-fA-F]+)[uU])/, /^(?:[-]?[0-9]+(\.[0-9]+)?([eE][+-]?[0-9]+(\.[0-9]+)?)?)/, /^(?:$)/, /^(?:.)/, /^(?:.)/],
      conditions: { "INITIAL": { "rules": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57], "inclusive": true } }
    };
    return lexer2;
  }();
  parser.lexer = lexer;
  function Parser() {
    this.yy = {};
  }
  Parser.prototype = parser;
  parser.Parser = Parser;
  return new Parser();
}();

// src/utils/parseCEL/utils.ts
var isCELExpressionGroup = (expr) => expr.type === "ExpressionGroup";
var isCELConditionalAnd = (expr) => expr.type === "ConditionalAnd";
var isCELConditionalOr = (expr) => expr.type === "ConditionalOr";
var isCELStringLiteral = (expr) => expr.type === "StringLiteral";
var isCELLiteral = (expr) => isCELNumericLiteral(expr) || isCELStringLiteral(expr) || expr.type === "BooleanLiteral" || expr.type === "NullLiteral" || expr.type === "BytesLiteral";
var isCELNumericLiteral = (expr) => expr.type === "FloatLiteral" || expr.type === "IntegerLiteral" || expr.type === "UnsignedIntegerLiteral";
var isCELRelation = (expr) => expr.type === "Relation";
var isCELList = (expr) => expr.type === "List";
var isCELMap = (expr) => expr.type === "Map";
var isCELIdentifier = (expr) => expr.type === "Identifier";
var isCELNegation = (expr) => expr.type === "Negation";
var isCELMember = (expr) => expr.type === "Member";
var isCELIdentifierOrChain = (expr) => isCELIdentifier(expr) || isCELMember(expr) && !!expr.left && !!expr.right && !expr.list && !expr.value && isCELIdentifierOrChain(expr.left) && isCELIdentifier(expr.right);
var isCELLikeExpression = (expr) => isCELMember(expr) && !!expr.left && !!expr.right && !!expr.list && isCELIdentifierOrChain(expr.left) && isCELIdentifier(expr.right) && (expr.right.value === "contains" || expr.right.value === "startsWith" || expr.right.value === "endsWith") && expr.list.value.length === 1 && (isCELStringLiteral(expr.list.value[0]) || isCELIdentifier(expr.list.value[0]));
var getIdentifierFromChain = (expr) => {
  if (isCELIdentifier(expr)) {
    return expr.value;
  }
  return `${getIdentifierFromChain(expr.left)}.${expr.right.value}`;
};
function evalCELLiteralValue(literal) {
  if (literal.type === "StringLiteral") {
    return literal.value.replace(/^((?:'''|"""|'|")?)([\s\S]*?)\1$/gm, "$2");
  } else if (literal.type === "BooleanLiteral") {
    return literal.value;
  } else if (literal.type === "NullLiteral" || literal.type === "BytesLiteral") {
    return null;
  }
  return literal.value;
}
var normalizeCombinator = (c) => c === "||" ? "or" : "and";
var normalizeOperator = (op, flip) => {
  if (flip) {
    if (op === "<")
      return ">";
    if (op === "<=")
      return ">=";
    if (op === ">")
      return "<";
    if (op === ">=")
      return "<=";
  }
  if (op === "==")
    return "=";
  return op;
};
var generateFlatAndOrList = (expr) => {
  const combinator = normalizeCombinator(expr.type === "ConditionalAnd" ? "&&" : "||");
  const { left, right } = expr;
  if (isCELConditionalAnd(left) || isCELConditionalOr(left)) {
    return [...generateFlatAndOrList(left), combinator, right];
  }
  return [left, combinator, right];
};
var generateMixedAndOrList = (expr) => {
  const arr = generateFlatAndOrList(expr);
  const returnArray = [];
  let startIndex = 0;
  for (let i = 0; i < arr.length; i += 2) {
    if (arr[i + 1] === "and") {
      startIndex = i;
      let j = 1;
      while (arr[startIndex + j] === "and") {
        i += 2;
        j += 2;
      }
      const tempAndArray = arr.slice(startIndex, i + 1);
      returnArray.push(tempAndArray);
      i -= 2;
    } else if (arr[i + 1] === "or") {
      if (i === 0 || i === arr.length - 3) {
        if (i === 0 || arr[i - 1] === "or") {
          returnArray.push(arr[i]);
        }
        returnArray.push(arr[i + 1]);
        if (i === arr.length - 3) {
          returnArray.push(arr[i + 2]);
        }
      } else {
        if (arr[i - 1] === "and") {
          returnArray.push(arr[i + 1]);
        } else {
          returnArray.push(arr[i]);
          returnArray.push(arr[i + 1]);
        }
      }
    }
  }
  if (returnArray.length === 1 && Array.isArray(returnArray[0])) {
    return returnArray[0];
  }
  return returnArray;
};

// src/utils/parseCEL/parseCEL.ts
function parseCEL(cel, options = {}) {
  const { fields, independentCombinators, listsAsArrays } = options;
  const ic = !!independentCombinators;
  const fieldsFlat = getFieldsArray(fields);
  const fieldIsValid = (fieldName, operator, subordinateFieldName) => fieldIsValidUtil({
    fieldName,
    fieldsFlat,
    operator,
    subordinateFieldName,
    getValueSources: options?.getValueSources
  });
  const emptyQuery = {
    rules: [],
    ...ic ? {} : { combinator: "and" }
  };
  const processCELExpression = (expr, processOpts = {}) => {
    const { forwardNegation: forwardedNegation, groupOnlyIfNecessary } = processOpts;
    if (isCELNegation(expr)) {
      const negate = expr.negations % 2 === 1;
      const negatedExpr = isCELExpressionGroup(expr.value) && isCELLikeExpression(expr.value.value) ? processCELExpression(expr.value.value, { forwardNegation: negate }) : processCELExpression(expr.value, {
        groupOnlyIfNecessary: true,
        forwardNegation: negate
      });
      if (negatedExpr) {
        if (!negate || negate && !("rules" in negatedExpr) && negatedExpr.operator.startsWith("doesNot")) {
          return ic ? { rules: [negatedExpr] } : {
            combinator: "and",
            rules: [negatedExpr]
          };
        }
        return ic ? { rules: [negatedExpr], not: true } : {
          combinator: "and",
          rules: [negatedExpr],
          not: true
        };
      }
    } else if (isCELExpressionGroup(expr)) {
      const rule = processCELExpression(expr.value, {
        groupOnlyIfNecessary: true
      });
      if (rule) {
        if ("rules" in rule || groupOnlyIfNecessary && isCELExpressionGroup(expr.value)) {
          return rule;
        }
        return ic ? { rules: [rule] } : { combinator: "and", rules: [rule] };
      }
    } else if (isCELConditionalAnd(expr) || isCELConditionalOr(expr)) {
      if (ic) {
        const andOrList2 = generateFlatAndOrList(expr);
        const rules2 = andOrList2.map((v) => {
          if (typeof v === "string") {
            return v;
          }
          return processCELExpression(v);
        });
        if (!rules2.every(Boolean)) {
          return null;
        }
        return {
          rules: rules2
        };
      }
      const andOrList = generateMixedAndOrList(expr);
      const combinator = andOrList[1];
      const filteredList = andOrList.filter((v) => Array.isArray(v) || !!v && typeof v !== "string" && "type" in v).map(
        (v) => Array.isArray(v) ? v.filter((vf) => !!v && typeof vf !== "string" && "type" in vf) : v
      );
      const rules = filteredList.map((exp) => {
        if (Array.isArray(exp)) {
          return {
            combinator: "and",
            rules: exp.map((e) => processCELExpression(e)).filter((r) => !!r)
          };
        }
        return processCELExpression(exp);
      }).filter((r) => !!r);
      if (rules.length > 0) {
        return { combinator, rules };
      }
    } else if (isCELLikeExpression(expr)) {
      const field = getIdentifierFromChain(expr.left);
      const func = expr.right.value;
      const operatorPre = func === "startsWith" ? "beginsWith" : func;
      const operator = forwardedNegation ? `doesNot${operatorPre[0].toUpperCase()}${operatorPre.slice(1).replace("s", "")}` : operatorPre;
      const valueObj = expr.list.value[0];
      const value = isCELStringLiteral(valueObj) ? evalCELLiteralValue(valueObj) : valueObj.value;
      const valueSource = expr.list.value[0].type === "Identifier" ? "field" : void 0;
      if (fieldIsValid(field, operator, valueSource === "field" ? value : void 0)) {
        return valueSource ? { field, operator, value, valueSource } : { field, operator, value };
      }
    } else if (isCELRelation(expr)) {
      let field = null;
      let value = void 0;
      let valueSource = void 0;
      let flip = false;
      const { left, right } = expr;
      if (isCELIdentifierOrChain(left)) {
        field = getIdentifierFromChain(left);
        if (isCELIdentifierOrChain(right)) {
          value = getIdentifierFromChain(right);
          valueSource = "field";
        } else if (isCELLiteral(right)) {
          value = evalCELLiteralValue(right);
        }
      } else {
        if (isCELIdentifierOrChain(right) && isCELLiteral(left) && expr.operator !== "in") {
          flip = true;
          field = getIdentifierFromChain(right);
          value = evalCELLiteralValue(left);
        }
      }
      let operator = normalizeOperator(expr.operator, flip);
      if (value === null && (operator === "=" || operator === "!=")) {
        operator = operator === "=" ? "null" : "notNull";
      } else if (operator === "in" && isCELList(right)) {
        if (right.value.value.every(isCELLiteral)) {
          value = right.value.value.map(evalCELLiteralValue);
        } else {
          if (right.value.value.every(isCELIdentifierOrChain)) {
            valueSource = "field";
            value = right.value.value.map((id) => getIdentifierFromChain(id));
          }
        }
        if (value && !listsAsArrays) {
          value = value.map((v) => `${v}`).join(",");
        }
      } else if (operator === "in" && isCELMap(right)) {
        const keys = right.value.value.map((v) => v.left);
        if (keys.every((k) => isCELLiteral(k) || isCELIdentifierOrChain(k))) {
          value = keys.map(
            (k) => isCELLiteral(k) ? evalCELLiteralValue(k) : getIdentifierFromChain(k)
          );
        }
        if (value && !listsAsArrays) {
          value = value.map((v) => `${v}`).join(",");
        }
      }
      if (field && fieldIsValid(field, operator, valueSource === "field" ? value : void 0) && typeof value !== "undefined") {
        return valueSource ? { field, operator, value, valueSource } : { field, operator, value };
      }
    }
    return null;
  };
  let processedCEL;
  try {
    processedCEL = celParser.parse(cel).value;
  } catch (err) {
    return emptyQuery;
  }
  const result = processCELExpression(processedCEL);
  if (result) {
    if ("rules" in result) {
      return result;
    }
    return { rules: [result], ...ic ? {} : { combinator: "and" } };
  }
  return emptyQuery;
}

// src/utils/parseJsonLogic/utils.ts
var isJsonLogicVar = (logic) => isPojo(logic) && "var" in logic;
var isRQBJsonLogicVar = (logic) => isJsonLogicVar(logic) && typeof logic.var === "string";
var isJsonLogicEqual = (logic) => isPojo(logic) && "==" in logic;
var isJsonLogicStrictEqual = (logic) => isPojo(logic) && "===" in logic;
var isJsonLogicNotEqual = (logic) => isPojo(logic) && "!=" in logic;
var isJsonLogicStrictNotEqual = (logic) => isPojo(logic) && "!==" in logic;
var isJsonLogicNegation = (logic) => isPojo(logic) && "!" in logic;
var isJsonLogicDoubleNegation = (logic) => isPojo(logic) && "!!" in logic;
var isJsonLogicOr = (logic) => isPojo(logic) && "or" in logic;
var isJsonLogicAnd = (logic) => isPojo(logic) && "and" in logic;
var isJsonLogicGreaterThan = (logic) => isPojo(logic) && ">" in logic;
var isJsonLogicGreaterThanOrEqual = (logic) => isPojo(logic) && ">=" in logic;
var isJsonLogicLessThan = (logic) => isPojo(logic) && "<" in logic && logic["<"].length === 2;
var isJsonLogicLessThanOrEqual = (logic) => isPojo(logic) && "<=" in logic && logic["<="].length === 2;
var isJsonLogicInArray = (logic) => isPojo(logic) && "in" in logic && Array.isArray(logic.in[1]);
var isJsonLogicInString = (logic) => isPojo(logic) && "in" in logic && !Array.isArray(logic.in[1]);
var isJsonLogicBetweenExclusive = (logic) => isPojo(logic) && "<" in logic && Array.isArray(logic["<"]) && logic["<"].length === 3;
var isJsonLogicBetweenInclusive = (logic) => isPojo(logic) && "<=" in logic && Array.isArray(logic["<="]) && logic["<="].length === 3;
var isRQBJsonLogicStartsWith = (logic) => isPojo(logic) && "startsWith" in logic;
var isRQBJsonLogicEndsWith = (logic) => isPojo(logic) && "endsWith" in logic;

// src/utils/parseJsonLogic/parseJsonLogic.ts
var emptyRuleGroup = { combinator: "and", rules: [] };
function parseJsonLogic(rqbJsonLogic, options = {}) {
  const fieldsFlat = getFieldsArray(options.fields);
  const { getValueSources, listsAsArrays, jsonLogicOperations } = options;
  const fieldIsValid = (fieldName, operator, subordinateFieldName) => fieldIsValidUtil({
    fieldName,
    fieldsFlat,
    operator,
    subordinateFieldName,
    getValueSources
  });
  function processLogic(logic, outermost) {
    if (outermost && !isPojo(logic)) {
      return false;
    }
    const key = Object.keys(logic)[0];
    const keyValue = logic[key];
    if (isJsonLogicAnd(logic)) {
      return {
        combinator: "and",
        rules: logic.and.map((l) => processLogic(l)).filter(Boolean)
      };
    } else if (isJsonLogicOr(logic)) {
      return {
        combinator: "or",
        rules: logic.or.map((l) => processLogic(l)).filter(Boolean)
      };
    } else if (isJsonLogicNegation(logic)) {
      const rule2 = processLogic(logic["!"]);
      if (rule2) {
        if (!isRuleGroupType(rule2) && (rule2.operator === "between" || rule2.operator === "in" || rule2.operator === "contains" || rule2.operator === "beginsWith" || rule2.operator === "endsWith")) {
          const newRule = { ...rule2, operator: defaultOperatorNegationMap[rule2.operator] };
          if (outermost) {
            return { combinator: "and", rules: [newRule] };
          }
          return newRule;
        } else if (isJsonLogicBetweenExclusive(logic["!"]) && isRuleGroupType(rule2)) {
          return { ...rule2, not: true };
        }
        return { combinator: "and", rules: [rule2], not: true };
      }
      return false;
    } else if (isJsonLogicDoubleNegation(logic)) {
      const rule2 = processLogic(logic["!!"]);
      return rule2 || false;
    }
    let rule = false;
    let field = "";
    let operator = "=";
    let value = "";
    let valueSource = void 0;
    if (jsonLogicOperations && objectKeys(jsonLogicOperations).includes(key)) {
      rule = jsonLogicOperations[key](keyValue);
    } else if (
      // Basic boolean operations
      isJsonLogicEqual(logic) || isJsonLogicStrictEqual(logic) || isJsonLogicNotEqual(logic) || isJsonLogicStrictNotEqual(logic) || isJsonLogicGreaterThan(logic) || isJsonLogicGreaterThanOrEqual(logic) || isJsonLogicLessThan(logic) || isJsonLogicLessThanOrEqual(logic) || isJsonLogicInString(logic) || isRQBJsonLogicStartsWith(logic) || isRQBJsonLogicEndsWith(logic)
    ) {
      const [first, second] = keyValue;
      if (isRQBJsonLogicVar(first) && !isPojo(second)) {
        field = first.var;
        value = second;
      } else if (!isPojo(first) && isRQBJsonLogicVar(second)) {
        field = second.var;
        value = first;
      } else if (isRQBJsonLogicVar(first) && isRQBJsonLogicVar(second)) {
        field = first.var;
        value = second.var;
        valueSource = "field";
      } else {
        return false;
      }
      if (isJsonLogicEqual(logic) || isJsonLogicStrictEqual(logic)) {
        operator = value === null ? "null" : "=";
      } else if (isJsonLogicNotEqual(logic) || isJsonLogicStrictNotEqual(logic)) {
        operator = value === null ? "notNull" : "!=";
      } else if (isJsonLogicInString(logic)) {
        operator = "contains";
      } else if (isRQBJsonLogicStartsWith(logic)) {
        operator = "beginsWith";
      } else if (isRQBJsonLogicEndsWith(logic)) {
        operator = "endsWith";
      } else {
        operator = key;
      }
      if (fieldIsValid(field, operator, valueSource === "field" ? value : void 0)) {
        rule = { field, operator, value, valueSource };
      }
    } else if (isJsonLogicBetweenExclusive(logic) && isRQBJsonLogicVar(logic["<"][1])) {
      field = logic["<"][1].var;
      const values = [logic["<"][0], logic["<"][2]];
      if (values.every(isRQBJsonLogicVar) || values.every((el) => typeof el === "string") || values.every((el) => typeof el === "number") || values.every((el) => typeof el === "boolean")) {
        return processLogic({
          and: [{ ">": [{ var: field }, values[0]] }, { "<": [{ var: field }, values[1]] }]
        }) || /* istanbul ignore next */
        false;
      }
    } else if (isJsonLogicBetweenInclusive(logic) && isRQBJsonLogicVar(logic["<="][1])) {
      field = logic["<="][1].var;
      operator = "between";
      const values = [logic["<="][0], logic["<="][2]];
      if (logic["<="].every(isRQBJsonLogicVar)) {
        const vars = values;
        valueSource = "field";
        const fieldList = vars.map((el) => el.var).filter((sf) => fieldIsValid(field, operator, sf));
        value = listsAsArrays ? fieldList : fieldList.join(",");
      } else {
        if (values.every((el) => typeof el === "string") || values.every((el) => typeof el === "number") || values.every((el) => typeof el === "boolean")) {
          value = listsAsArrays ? values : values.map((el) => `${el}`).join(",");
        }
      }
      if (fieldIsValid(field, operator) && value.length >= 2) {
        rule = { field, operator, value, valueSource };
      }
    } else if (isJsonLogicInArray(logic) && isRQBJsonLogicVar(keyValue[0])) {
      field = keyValue[0].var;
      operator = "in";
      if (logic.in[1].every(isRQBJsonLogicVar)) {
        valueSource = "field";
        const fieldList = logic.in[1].map((el) => el.var).filter((sf) => fieldIsValid(field, operator, sf));
        value = listsAsArrays ? fieldList : fieldList.join(",");
      } else {
        if (logic.in[1].every((el) => typeof el === "string") || logic.in[1].every((el) => typeof el === "number") || logic.in[1].every((el) => typeof el === "boolean")) {
          value = listsAsArrays ? logic.in[1] : logic.in[1].map((el) => `${el}`).join(",");
        }
      }
      if (value.length > 0) {
        rule = { field, operator, value, valueSource };
      }
    }
    return !rule ? false : outermost ? { combinator: "and", rules: [rule] } : rule;
  }
  let logicRoot = rqbJsonLogic;
  if (typeof rqbJsonLogic === "string") {
    try {
      logicRoot = JSON.parse(rqbJsonLogic);
    } catch (err) {
      return emptyRuleGroup;
    }
  }
  const result = processLogic(logicRoot, true);
  const finalQuery = !result ? emptyRuleGroup : result;
  return options.independentCombinators ? convertToIC(finalQuery) : finalQuery;
}

// src/utils/parseMongoDB/utils.ts
var getRegExStr = (re) => typeof re === "string" ? re : re.source;
var isPrimitive = (v) => typeof v === "string" || typeof v === "number" || typeof v === "boolean";
var mongoDbToRqbOperatorMap = {
  $eq: "=",
  $ne: "!=",
  $gt: ">",
  $gte: ">=",
  $lt: "<",
  $lte: "<="
};

// src/utils/parseMongoDB/parseMongoDB.ts
var emptyRuleGroup2 = { combinator: "and", rules: [] };
function parseMongoDB(mongoDbRules, options = {}) {
  const listsAsArrays = !!options.listsAsArrays;
  const fieldsFlat = getFieldsArray(options.fields);
  const getValueSources = options.getValueSources;
  const fieldIsValid = (fieldName, operator, subordinateFieldName) => fieldIsValidUtil({
    fieldName,
    fieldsFlat,
    operator,
    subordinateFieldName,
    getValueSources
  });
  function processMongoDbQueryBooleanOperator(field, mdbOperator, keyValue) {
    let operator = "=";
    let value = "";
    if (mdbOperator === "$eq" || mdbOperator === "$ne" || mdbOperator === "$gt" || mdbOperator === "$gte" || mdbOperator === "$lt" || mdbOperator === "$lte") {
      if (mdbOperator === "$ne" && keyValue === null) {
        if (fieldIsValid(field, "notNull")) {
          return { field, operator: "notNull", value: null };
        }
      } else {
        operator = mongoDbToRqbOperatorMap[mdbOperator];
        if (fieldIsValid(field, operator)) {
          return { field, operator, value: keyValue };
        }
      }
    } else if (mdbOperator === "$regex" && /^[^^].*[^$]$/.test(getRegExStr(keyValue))) {
      if (fieldIsValid(field, "contains")) {
        return {
          field,
          operator: "contains",
          value: getRegExStr(keyValue)
        };
      }
    } else if (mdbOperator === "$regex" && /^\^.*[^$]/.test(getRegExStr(keyValue))) {
      if (fieldIsValid(field, "beginsWith")) {
        return {
          field,
          operator: "beginsWith",
          value: getRegExStr(keyValue).replace(/^\^/, "")
        };
      }
    } else if (mdbOperator === "$regex" && /[^^].*\$/.test(getRegExStr(keyValue))) {
      if (fieldIsValid(field, "endsWith")) {
        return {
          field,
          operator: "endsWith",
          value: getRegExStr(keyValue).replace(/\$$/, "")
        };
      }
    } else if (mdbOperator === "$in" && Array.isArray(keyValue)) {
      if (fieldIsValid(field, "in")) {
        if (listsAsArrays) {
          value = keyValue;
        } else {
          value = keyValue.map((v) => `${v}`).join(",");
        }
        return { field, operator: "in", value };
      }
    } else if (mdbOperator === "$nin" && Array.isArray(keyValue)) {
      if (fieldIsValid(field, "notIn")) {
        if (listsAsArrays) {
          value = keyValue;
        } else {
          value = keyValue.map((v) => `${v}`).join(",");
        }
        return { field, operator: "notIn", value };
      }
    }
    return false;
  }
  function processMongoDbQueryObjectKey(key, keyValue) {
    let field = "";
    if (key === "$and") {
      if (!Array.isArray(keyValue) || keyValue.length === 0 || !keyValue.every(isPojo)) {
        return false;
      }
      if (keyValue.length === 2 && keyValue.every((kv) => objectKeys(kv).length === 1)) {
        const [rule1, rule2] = keyValue;
        const [ruleKey1, ruleKey2] = keyValue.map((kv) => objectKeys(kv)[0]);
        if (ruleKey1 === ruleKey2 && isPojo(rule1[ruleKey1]) && objectKeys(rule1[ruleKey1]).length === 1 && isPojo(rule2[ruleKey2]) && objectKeys(rule2[ruleKey2]).length === 1 && ("$gte" in rule1[ruleKey1] && "$lte" in rule2[ruleKey2] && rule2[ruleKey2].$lte >= rule1[ruleKey1].$gte || "$lte" in rule1[ruleKey1] && "$gte" in rule2[ruleKey2] && rule1[ruleKey1].$lte >= rule2[ruleKey2].$gte)) {
          const [val1, val2] = [
            rule1[ruleKey1].$gte ?? rule1[ruleKey1].$lte,
            rule2[ruleKey2].$lte ?? rule2[ruleKey2].$gte
          ];
          let value = listsAsArrays ? [val1, val2] : `${val1},${val2}`;
          if (val1 > val2) {
            value = listsAsArrays ? [val2, val1] : `${val2},${val1}`;
          }
          return { field: ruleKey1, operator: "between", value };
        }
      }
      const rules = keyValue.map((l) => processMongoDbQueryObject(l)).filter(Boolean);
      return rules.length > 0 ? { combinator: "and", rules } : false;
    } else if (key === "$or") {
      if (!Array.isArray(keyValue) || keyValue.length === 0 || !keyValue.every(isPojo)) {
        return false;
      }
      if (keyValue.length === 2 && keyValue.every((kv) => objectKeys(kv).length === 1)) {
        const [rule1, rule2] = keyValue;
        const [ruleKey1, ruleKey2] = keyValue.map((kv) => objectKeys(kv)[0]);
        if (ruleKey1 === ruleKey2 && isPojo(rule1[ruleKey1]) && objectKeys(rule1[ruleKey1]).length === 1 && isPojo(rule2[ruleKey2]) && objectKeys(rule2[ruleKey2]).length === 1 && ("$gt" in rule1[ruleKey1] && "$lt" in rule2[ruleKey2] && rule1[ruleKey1].$gt >= rule2[ruleKey2].$lt || "$lt" in rule1[ruleKey1] && "$gt" in rule2[ruleKey2] && rule2[ruleKey2].$gt >= rule1[ruleKey1].$lt)) {
          const [val1, val2] = [
            rule1[ruleKey1].$gt ?? rule1[ruleKey1].$lt,
            rule2[ruleKey2].$lt ?? rule2[ruleKey2].$gt
          ];
          let value = listsAsArrays ? [val1, val2] : `${val1},${val2}`;
          if (val1 > val2) {
            value = listsAsArrays ? [val2, val1] : `${val2},${val1}`;
          }
          return { field: ruleKey1, operator: "notBetween", value };
        }
      }
      const rules = keyValue.map((l) => processMongoDbQueryObject(l)).filter(Boolean);
      return rules.length > 0 ? { combinator: "or", rules } : false;
    } else if (key === "$not" && isPojo(keyValue)) {
      const rule = processMongoDbQueryObject(keyValue);
      if (rule) {
        if (!isRuleGroupType(rule) && (rule.operator === "between" || rule.operator === "in" || rule.operator === "contains" || rule.operator === "beginsWith" || rule.operator === "endsWith")) {
          return { ...rule, operator: defaultOperatorNegationMap[rule.operator] };
        }
        return { combinator: "and", rules: [rule], not: true };
      }
      return false;
    } else if (key === "$expr") {
      const op = objectKeys(keyValue)[0];
      if (/^\$(eq|gte?|lte?|n?in)$/.test(op)) {
        if (Array.isArray(keyValue[op]) && keyValue[op].length === 2 && typeof keyValue[op][0] === "string" && /^\$/.test(keyValue[op][0])) {
          field = keyValue[op][0].replace(/^\$/, "");
          const val = keyValue[op][1];
          if (typeof val === "string" && /^\$/.test(val) || Array.isArray(val) && val.every((v) => typeof v === "string") && val.every((v) => /^\$/.test(v))) {
            const valForProcessing = Array.isArray(val) ? val.map((v) => v.replace(/^\$/, "")) : val.replace(/^\$/, "");
            const tempRule = processMongoDbQueryBooleanOperator(field, op, valForProcessing);
            if (tempRule) {
              if (typeof tempRule.value === "string" && !fieldIsValid(field, tempRule.operator, tempRule.value)) {
                return false;
              }
              return { ...tempRule, valueSource: "field" };
            }
          }
          return processMongoDbQueryBooleanOperator(field, op, keyValue[op][1]);
        }
      }
    } else if (/^[^$]/.test(key)) {
      field = key;
      if (isPrimitive(keyValue)) {
        if (fieldIsValid(field, "=")) {
          return { field, operator: "=", value: keyValue };
        }
      } else if (keyValue === null) {
        if (fieldIsValid(field, "null")) {
          return { field, operator: "null", value: keyValue };
        }
      } else if (isPojo(keyValue)) {
        let betweenRule = false;
        const operators = objectKeys(keyValue).filter((o) => /^\$(eq|ne|gte?|lte?|n?in|regex)$/.test(o)).sort();
        if (operators.length === 0) {
          return false;
        }
        if ("$gte" in keyValue && "$lte" in keyValue) {
          betweenRule = {
            field,
            operator: "between",
            value: listsAsArrays ? [keyValue.$gte, keyValue.$lte] : `${keyValue.$gte},${keyValue.$lte}`
          };
        }
        const rules = operators.filter((op) => !(betweenRule && (op === "$gte" || op === "$lte"))).map((op) => processMongoDbQueryBooleanOperator(field, op, keyValue[op])).filter(Boolean);
        if (betweenRule) {
          rules.unshift(betweenRule);
        }
        if (rules.length === 0) {
          return false;
        }
        if (rules.length === 1) {
          return rules[0];
        }
        return { combinator: "and", rules };
      }
    }
    return false;
  }
  function processMongoDbQueryObject(mongoDbQueryObject) {
    const rules = objectKeys(mongoDbQueryObject).map((k) => processMongoDbQueryObjectKey(k, mongoDbQueryObject[k])).filter(Boolean);
    return rules.length === 1 ? rules[0] : rules.length > 1 ? { combinator: "and", rules } : false;
  }
  let mongoDbPOJO = mongoDbRules;
  if (typeof mongoDbRules === "string") {
    try {
      mongoDbPOJO = JSON.parse(mongoDbRules);
    } catch (err) {
      return emptyRuleGroup2;
    }
  }
  if (!isPojo(mongoDbPOJO)) {
    return emptyRuleGroup2;
  }
  const result = processMongoDbQueryObject(mongoDbPOJO);
  const finalQuery = result ? isRuleGroupType(result) ? result : { combinator: "and", rules: [result] } : emptyRuleGroup2;
  return options.independentCombinators ? convertToIC(finalQuery) : finalQuery;
}

// src/utils/parseSQL/sqlParser.js
var sqlParser = function() {
  var o = function(k, v, o2, l) {
    for (o2 = o2 || {}, l = k.length; l--; o2[k[l]] = v)
      ;
    return o2;
  }, $V0 = [1, 8], $V1 = [1, 4], $V2 = [2, 4], $V3 = [1, 11], $V4 = [1, 10], $V5 = [2, 16], $V6 = [1, 14], $V7 = [1, 15], $V8 = [1, 16], $V9 = [6, 8], $Va = [2, 148], $Vb = [1, 19], $Vc = [1, 20], $Vd = [16, 33, 35, 36, 37, 38, 39, 40, 41, 42, 45, 52, 53, 56, 57, 59, 60, 62, 76, 79, 81, 82, 83, 84, 86, 87, 88, 91, 103, 195], $Ve = [16, 18, 32, 33, 35, 36, 37, 38, 39, 40, 41, 42, 45, 52, 53, 56, 57, 59, 60, 62, 76, 79, 81, 82, 83, 84, 86, 87, 88, 91, 103, 195], $Vf = [2, 162], $Vg = [1, 29], $Vh = [6, 8, 14, 17, 146, 150, 152, 154], $Vi = [1, 42], $Vj = [1, 61], $Vk = [1, 53], $Vl = [1, 60], $Vm = [1, 62], $Vn = [1, 63], $Vo = [1, 64], $Vp = [1, 65], $Vq = [1, 66], $Vr = [1, 59], $Vs = [1, 54], $Vt = [1, 55], $Vu = [1, 56], $Vv = [1, 57], $Vw = [1, 58], $Vx = [1, 43], $Vy = [1, 44], $Vz = [1, 45], $VA = [1, 47], $VB = [1, 34], $VC = [1, 67], $VD = [16, 35, 36, 37, 38, 39, 40, 41, 42, 45, 52, 53, 56, 57, 59, 60, 62, 76, 79, 81, 82, 83, 84, 86, 87, 88, 91, 103, 195], $VE = [6, 8, 14, 17, 150, 152, 154], $VF = [2, 145], $VG = [1, 76], $VH = [1, 77], $VI = [6, 8, 14, 17, 43, 133, 138, 144, 146, 150, 152, 154], $VJ = [1, 80], $VK = [1, 79], $VL = [1, 81], $VM = [6, 8, 14, 17, 36, 43, 51, 52, 53, 71, 72, 74, 77, 89, 109, 126, 127, 129, 133, 135, 138, 141, 142, 144, 146, 150, 152, 154, 157, 164, 165, 167, 168, 173, 177, 179, 180, 182], $VN = [6, 8, 14, 17, 34, 36, 43, 51, 52, 53, 71, 72, 74, 77, 89, 109, 114, 115, 116, 117, 118, 119, 123, 126, 127, 129, 133, 135, 138, 141, 142, 144, 146, 150, 152, 154, 157, 164, 165, 167, 168, 173, 177, 179, 180, 182], $VO = [1, 102], $VP = [1, 100], $VQ = [1, 101], $VR = [1, 96], $VS = [1, 97], $VT = [1, 98], $VU = [1, 99], $VV = [1, 103], $VW = [1, 104], $VX = [1, 105], $VY = [1, 106], $VZ = [1, 107], $V_ = [1, 108], $V$ = [2, 107], $V01 = [6, 8, 14, 17, 34, 36, 43, 45, 51, 52, 53, 71, 72, 74, 77, 79, 81, 89, 93, 94, 95, 96, 97, 98, 99, 100, 101, 103, 107, 108, 109, 110, 111, 112, 114, 115, 116, 117, 118, 119, 123, 126, 127, 129, 133, 135, 138, 141, 142, 144, 146, 150, 152, 154, 157, 164, 165, 167, 168, 173, 177, 179, 180, 182], $V11 = [6, 8, 14, 17, 34, 36, 43, 45, 51, 52, 53, 71, 72, 74, 77, 79, 81, 89, 93, 94, 95, 96, 97, 98, 99, 100, 101, 103, 105, 107, 108, 109, 110, 111, 112, 114, 115, 116, 117, 118, 119, 123, 126, 127, 129, 133, 135, 138, 141, 142, 144, 146, 150, 152, 154, 157, 164, 165, 167, 168, 173, 177, 179, 180, 182], $V21 = [2, 82], $V31 = [1, 110], $V41 = [1, 109], $V51 = [1, 117], $V61 = [2, 65], $V71 = [1, 119], $V81 = [16, 35, 37, 38, 39, 40, 41, 42, 45, 52, 53, 56, 57, 59, 60, 62, 76, 79, 81, 82, 83, 84, 86, 87, 88, 91, 103, 195], $V91 = [16, 29, 35, 52, 53, 56, 57, 59, 60, 62, 76, 79, 81, 82, 83, 84, 86, 87, 88, 91, 121, 195], $Va1 = [1, 162], $Vb1 = [1, 164], $Vc1 = [17, 43], $Vd1 = [6, 8, 14, 16, 17, 34, 35, 36, 43, 45, 50, 51, 52, 53, 56, 57, 59, 60, 62, 71, 72, 74, 76, 77, 79, 81, 82, 83, 84, 86, 87, 88, 89, 90, 91, 93, 94, 95, 96, 97, 98, 99, 100, 101, 103, 105, 107, 108, 109, 110, 111, 112, 114, 115, 116, 117, 118, 119, 123, 126, 127, 129, 133, 135, 138, 141, 142, 144, 146, 150, 152, 154, 157, 164, 165, 167, 168, 173, 177, 179, 180, 182, 192, 193, 194, 195], $Ve1 = [2, 60], $Vf1 = [1, 174], $Vg1 = [1, 172], $Vh1 = [6, 8, 138, 146], $Vi1 = [16, 35, 38, 39, 40, 41, 42, 45, 52, 53, 56, 57, 59, 60, 62, 76, 79, 81, 82, 83, 84, 86, 87, 88, 91, 103, 195], $Vj1 = [6, 8, 14, 17, 138, 144, 146, 150, 152, 154], $Vk1 = [6, 8, 14, 17, 36, 43, 51, 52, 53, 71, 72, 74, 77, 89, 126, 127, 129, 133, 135, 138, 141, 142, 144, 146, 150, 152, 154, 157, 164, 165, 167, 168, 173, 177, 179, 180, 182], $Vl1 = [6, 8, 14, 17, 34, 36, 43, 51, 52, 53, 71, 72, 74, 77, 89, 93, 94, 95, 96, 101, 103, 107, 108, 109, 110, 111, 112, 114, 115, 116, 117, 118, 119, 123, 126, 127, 129, 133, 135, 138, 141, 142, 144, 146, 150, 152, 154, 157, 164, 165, 167, 168, 173, 177, 179, 180, 182], $Vm1 = [6, 8, 14, 17, 34, 36, 43, 51, 52, 53, 71, 72, 74, 77, 79, 81, 89, 93, 94, 95, 96, 101, 103, 107, 108, 109, 110, 111, 112, 114, 115, 116, 117, 118, 119, 123, 126, 127, 129, 133, 135, 138, 141, 142, 144, 146, 150, 152, 154, 157, 164, 165, 167, 168, 173, 177, 179, 180, 182], $Vn1 = [16, 35, 39, 40, 41, 42, 45, 52, 53, 56, 57, 59, 60, 62, 76, 79, 81, 82, 83, 84, 86, 87, 88, 91, 103, 195], $Vo1 = [16, 35, 40, 41, 42, 45, 52, 53, 56, 57, 59, 60, 62, 76, 79, 81, 82, 83, 84, 86, 87, 88, 91, 103, 195], $Vp1 = [6, 8, 14, 17, 43, 157], $Vq1 = [16, 35, 42, 45, 52, 53, 56, 57, 59, 60, 62, 76, 79, 81, 82, 83, 84, 86, 87, 88, 91, 103, 195], $Vr1 = [71, 74, 77], $Vs1 = [16, 35, 45, 52, 53, 56, 57, 59, 60, 62, 76, 79, 81, 82, 83, 84, 86, 87, 88, 91, 103, 195], $Vt1 = [1, 239], $Vu1 = [6, 8, 14, 17], $Vv1 = [1, 257], $Vw1 = [1, 253], $Vx1 = [2, 199], $Vy1 = [1, 261], $Vz1 = [1, 262], $VA1 = [6, 8, 14, 17, 43, 129, 135, 138, 144, 146, 150, 152, 154, 182], $VB1 = [1, 264], $VC1 = [1, 267], $VD1 = [1, 268], $VE1 = [1, 269], $VF1 = [1, 270], $VG1 = [2, 176], $VH1 = [1, 266], $VI1 = [6, 8, 14, 17, 36, 43, 89, 129, 135, 138, 144, 146, 150, 152, 154, 164, 165, 167, 168, 173, 177, 179, 180, 182], $VJ1 = [6, 8, 14, 17, 135, 138, 144, 146, 150, 152, 154], $VK1 = [1, 282], $VL1 = [2, 181], $VM1 = [170, 173], $VN1 = [6, 8, 14, 17, 36, 43, 89, 129, 135, 138, 144, 146, 150, 152, 154, 164, 165, 167, 168, 173, 177, 179, 180, 182, 192, 193, 194], $VO1 = [2, 201], $VP1 = [1, 287], $VQ1 = [1, 299], $VR1 = [1, 307], $VS1 = [1, 308], $VT1 = [1, 309], $VU1 = [6, 8, 14, 17, 138, 146, 150, 152, 154], $VV1 = [1, 319], $VW1 = [1, 325], $VX1 = [1, 326], $VY1 = [2, 206], $VZ1 = [1, 337], $V_1 = [16, 152], $V$1 = [6, 8, 14, 17, 152, 154], $V02 = [1, 353];
  var parser = {
    trace: function trace() {
    },
    yy: {},
    symbols_: { "error": 2, "main": 3, "selectClause": 4, "semicolonOpt": 5, "EOF": 6, "unionClause": 7, ";": 8, "unionClauseNotParenthesized": 9, "unionClauseParenthesized": 10, "order_by_opt": 11, "limit_opt": 12, "selectClauseParenthesized": 13, "UNION": 14, "distinctOpt": 15, "(": 16, ")": 17, "SELECT": 18, "highPriorityOpt": 19, "maxStateMentTimeOpt": 20, "straightJoinOpt": 21, "sqlSmallResultOpt": 22, "sqlBigResultOpt": 23, "sqlBufferResultOpt": 24, "sqlCacheOpt": 25, "sqlCalcFoundRowsOpt": 26, "selectExprList": 27, "selectDataSetOpt": 28, "ALL": 29, "DISTINCT": 30, "DISTINCTROW": 31, "HIGH_PRIORITY": 32, "MAX_STATEMENT_TIME": 33, "=": 34, "NUMERIC": 35, "STRAIGHT_JOIN": 36, "SQL_SMALL_RESULT": 37, "SQL_BIG_RESULT": 38, "SQL_BUFFER_RESULT": 39, "SQL_CACHE": 40, "SQL_NO_CACHE": 41, "SQL_CALC_FOUND_ROWS": 42, ",": 43, "selectExpr": 44, "*": 45, "selectExprStar": 46, "expr": 47, "selectExprAliasOpt": 48, "identifier": 49, "DOT": 50, "AS": 51, "IDENTIFIER": 52, "STRING": 53, "string": 54, "number": 55, "EXPONENT_NUMERIC": 56, "HEX_NUMERIC": 57, "boolean": 58, "TRUE": 59, "FALSE": 60, "null": 61, "NULL": 62, "literal": 63, "place_holder": 64, "function_call": 65, "function_call_param_list": 66, "function_call_param": 67, "identifier_list": 68, "case_expr_opt": 69, "when_then_list": 70, "WHEN": 71, "THEN": 72, "case_when_else": 73, "ELSE": 74, "case_when": 75, "CASE": 76, "END": 77, "simple_expr_prefix": 78, "+": 79, "simple_expr": 80, "-": 81, "~": 82, "!": 83, "BINARY": 84, "expr_list": 85, "ROW": 86, "EXISTS": 87, "{": 88, "}": 89, "||": 90, "WILDCARD": 91, "bit_expr": 92, "|": 93, "&": 94, "<<": 95, ">>": 96, "/": 97, "DIV": 98, "MOD": 99, "%": 100, "^": 101, "not_opt": 102, "NOT": 103, "escape_opt": 104, "ESCAPE": 105, "predicate": 106, "IN": 107, "BETWEEN": 108, "AND": 109, "SOUNDS": 110, "LIKE": 111, "REGEXP": 112, "comparison_operator": 113, ">=": 114, ">": 115, "<=": 116, "<": 117, "<>": 118, "!=": 119, "sub_query_data_set_opt": 120, "ANY": 121, "boolean_primary": 122, "IS": 123, "boolean_extra": 124, "UNKNOWN": 125, "OR": 126, "XOR": 127, "where_opt": 128, "WHERE": 129, "group_by_opt": 130, "group_by": 131, "roll_up_opt": 132, "WITH": 133, "ROLLUP": 134, "GROUP_BY": 135, "group_by_order_by_item_list": 136, "order_by": 137, "ORDER_BY": 138, "group_by_order_by_item": 139, "sort_opt": 140, "ASC": 141, "DESC": 142, "having_opt": 143, "HAVING": 144, "limit": 145, "LIMIT": 146, "OFFSET": 147, "procedure_opt": 148, "procedure": 149, "PROCEDURE": 150, "for_update_lock_in_share_mode_opt": 151, "FOR": 152, "UPDATE": 153, "LOCK": 154, "SHARE": 155, "MODE": 156, "FROM": 157, "table_references": 158, "partitionOpt": 159, "escaped_table_reference": 160, "table_reference": 161, "OJ": 162, "join_inner_cross": 163, "INNER": 164, "CROSS": 165, "left_right": 166, "LEFT": 167, "RIGHT": 168, "out_opt": 169, "OUTER": 170, "left_right_out_opt": 171, "join_table": 172, "JOIN": 173, "table_factor": 174, "join_condition": 175, "on_join_condition": 176, "NATURAL": 177, "join_condition_opt": 178, "ON": 179, "USING": 180, "partition_names": 181, "PARTITION": 182, "aliasOpt": 183, "index_or_key": 184, "INDEX": 185, "KEY": 186, "for_opt": 187, "identifier_list_opt": 188, "index_hint_list_opt": 189, "index_hint_list": 190, "index_hint": 191, "USE": 192, "IGNORE": 193, "FORCE": 194, "PLACE_HOLDER": 195, "$accept": 0, "$end": 1 },
    terminals_: { 2: "error", 6: "EOF", 8: ";", 14: "UNION", 16: "(", 17: ")", 18: "SELECT", 29: "ALL", 30: "DISTINCT", 31: "DISTINCTROW", 32: "HIGH_PRIORITY", 33: "MAX_STATEMENT_TIME", 34: "=", 35: "NUMERIC", 36: "STRAIGHT_JOIN", 37: "SQL_SMALL_RESULT", 38: "SQL_BIG_RESULT", 39: "SQL_BUFFER_RESULT", 40: "SQL_CACHE", 41: "SQL_NO_CACHE", 42: "SQL_CALC_FOUND_ROWS", 43: ",", 45: "*", 50: "DOT", 51: "AS", 52: "IDENTIFIER", 53: "STRING", 56: "EXPONENT_NUMERIC", 57: "HEX_NUMERIC", 59: "TRUE", 60: "FALSE", 62: "NULL", 71: "WHEN", 72: "THEN", 74: "ELSE", 76: "CASE", 77: "END", 79: "+", 81: "-", 82: "~", 83: "!", 84: "BINARY", 86: "ROW", 87: "EXISTS", 88: "{", 89: "}", 90: "||", 91: "WILDCARD", 93: "|", 94: "&", 95: "<<", 96: ">>", 97: "/", 98: "DIV", 99: "MOD", 100: "%", 101: "^", 103: "NOT", 105: "ESCAPE", 107: "IN", 108: "BETWEEN", 109: "AND", 110: "SOUNDS", 111: "LIKE", 112: "REGEXP", 114: ">=", 115: ">", 116: "<=", 117: "<", 118: "<>", 119: "!=", 121: "ANY", 123: "IS", 125: "UNKNOWN", 126: "OR", 127: "XOR", 129: "WHERE", 133: "WITH", 134: "ROLLUP", 135: "GROUP_BY", 138: "ORDER_BY", 141: "ASC", 142: "DESC", 144: "HAVING", 146: "LIMIT", 147: "OFFSET", 150: "PROCEDURE", 152: "FOR", 153: "UPDATE", 154: "LOCK", 155: "SHARE", 156: "MODE", 157: "FROM", 162: "OJ", 164: "INNER", 165: "CROSS", 167: "LEFT", 168: "RIGHT", 170: "OUTER", 173: "JOIN", 177: "NATURAL", 179: "ON", 180: "USING", 182: "PARTITION", 185: "INDEX", 186: "KEY", 192: "USE", 193: "IGNORE", 194: "FORCE", 195: "PLACE_HOLDER" },
    productions_: [0, [3, 3], [3, 3], [5, 1], [5, 0], [7, 1], [7, 3], [10, 4], [10, 4], [13, 3], [9, 4], [9, 4], [4, 12], [15, 1], [15, 1], [15, 1], [15, 0], [19, 1], [19, 0], [20, 3], [20, 0], [21, 1], [21, 0], [22, 1], [22, 0], [23, 1], [23, 0], [24, 1], [24, 0], [25, 0], [25, 1], [25, 1], [26, 1], [26, 0], [27, 3], [27, 1], [44, 1], [44, 1], [44, 2], [46, 3], [48, 0], [48, 2], [48, 1], [48, 2], [48, 1], [54, 1], [55, 1], [55, 1], [55, 1], [58, 1], [58, 1], [61, 1], [63, 1], [63, 1], [63, 1], [63, 1], [63, 1], [65, 4], [66, 3], [66, 1], [67, 0], [67, 1], [67, 1], [67, 2], [67, 1], [49, 1], [49, 3], [68, 1], [68, 3], [69, 0], [69, 1], [70, 4], [70, 5], [73, 0], [73, 2], [75, 5], [78, 2], [78, 2], [78, 2], [78, 2], [78, 2], [80, 1], [80, 1], [80, 1], [80, 1], [80, 3], [80, 4], [80, 3], [80, 4], [80, 4], [80, 1], [80, 3], [80, 3], [80, 5], [92, 1], [92, 3], [92, 3], [92, 3], [92, 3], [92, 3], [92, 3], [92, 3], [92, 3], [92, 3], [92, 3], [92, 3], [92, 3], [102, 0], [102, 1], [104, 0], [104, 2], [106, 1], [106, 6], [106, 6], [106, 6], [106, 4], [106, 5], [106, 4], [113, 1], [113, 1], [113, 1], [113, 1], [113, 1], [113, 1], [113, 1], [120, 1], [120, 1], [122, 1], [122, 4], [122, 3], [122, 6], [124, 1], [124, 1], [47, 1], [47, 4], [47, 2], [47, 3], [47, 3], [47, 3], [85, 1], [85, 3], [128, 0], [128, 2], [130, 0], [130, 1], [132, 0], [132, 2], [131, 3], [11, 0], [11, 1], [137, 3], [136, 1], [136, 3], [139, 2], [140, 0], [140, 1], [140, 1], [143, 0], [143, 2], [145, 2], [145, 4], [145, 4], [12, 0], [12, 1], [148, 0], [148, 1], [149, 2], [151, 0], [151, 2], [151, 4], [28, 0], [28, 10], [158, 1], [158, 3], [160, 1], [160, 4], [163, 0], [163, 1], [163, 1], [166, 1], [166, 1], [169, 0], [169, 1], [171, 0], [171, 2], [172, 4], [172, 5], [172, 4], [172, 6], [172, 5], [178, 0], [178, 1], [176, 2], [175, 1], [175, 4], [161, 1], [161, 1], [181, 1], [181, 3], [159, 0], [159, 4], [183, 0], [183, 2], [183, 1], [184, 1], [184, 1], [187, 0], [187, 2], [187, 2], [187, 2], [188, 0], [188, 1], [189, 0], [189, 1], [190, 1], [190, 3], [191, 6], [191, 6], [191, 6], [174, 4], [174, 4], [174, 3], [64, 1]],
    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$) {
      var $0 = $$.length - 1;
      switch (yystate) {
        case 1:
        case 2:
          return { nodeType: "Main", value: $$[$0 - 2], hasSemicolon: $$[$0 - 1] };
          break;
        case 3:
        case 146:
          this.$ = true;
          break;
        case 4:
          this.$ = false;
          break;
        case 5:
        case 13:
        case 14:
        case 15:
        case 17:
        case 19:
        case 21:
        case 23:
        case 25:
        case 27:
        case 30:
        case 31:
        case 32:
        case 37:
        case 52:
        case 53:
        case 54:
        case 55:
        case 56:
        case 61:
        case 62:
        case 64:
        case 70:
        case 74:
        case 81:
        case 82:
        case 83:
        case 84:
        case 90:
        case 94:
        case 108:
        case 110:
        case 111:
        case 118:
        case 119:
        case 120:
        case 121:
        case 122:
        case 123:
        case 124:
        case 125:
        case 126:
        case 127:
        case 131:
        case 133:
        case 142:
        case 144:
        case 149:
        case 155:
        case 156:
        case 158:
        case 163:
        case 165:
        case 166:
        case 177:
        case 178:
        case 179:
        case 180:
        case 182:
        case 191:
        case 193:
        case 195:
        case 196:
        case 204:
        case 205:
        case 211:
        case 213:
          this.$ = $$[$0];
          break;
        case 6:
          this.$ = $$[$0 - 2], this.$.orderBy = $$[$0 - 1], this.$.limit = $$[$0];
          ;
          break;
        case 7:
        case 8:
          this.$ = { type: "Union", left: $$[$0 - 3], distinctOpt: $$[$0 - 1], right: $$[$0] };
          ;
          break;
        case 9:
          this.$ = { type: "SelectParenthesized", value: $$[$0 - 1] };
          ;
          break;
        case 10:
        case 11:
          this.$ = { type: "Union", left: $$[$0 - 3], distinctOpt: $$[$0 - 1], right: $$[$0] };
          break;
        case 12:
          this.$ = {
            type: "Select",
            distinctOpt: $$[$0 - 10],
            highPriorityOpt: $$[$0 - 9],
            maxStateMentTimeOpt: $$[$0 - 8],
            straightJoinOpt: $$[$0 - 7],
            sqlSmallResultOpt: $$[$0 - 6],
            sqlBigResultOpt: $$[$0 - 5],
            sqlBufferResultOpt: $$[$0 - 4],
            sqlCacheOpt: $$[$0 - 3],
            sqlCalcFoundRowsOpt: $$[$0 - 2],
            selectItems: $$[$0 - 1],
            from: $$[$0].from,
            partition: $$[$0].partition,
            where: $$[$0].where,
            groupBy: $$[$0].groupBy,
            having: $$[$0].having,
            orderBy: $$[$0].orderBy,
            limit: $$[$0].limit,
            procedure: $$[$0].procedure,
            updateLockMode: $$[$0].updateLockMode
          };
          break;
        case 16:
        case 18:
        case 20:
        case 22:
        case 24:
        case 26:
        case 28:
        case 29:
        case 33:
        case 60:
        case 69:
        case 73:
        case 107:
        case 109:
        case 141:
        case 143:
        case 145:
        case 148:
        case 154:
        case 157:
        case 162:
        case 164:
        case 167:
        case 176:
        case 181:
        case 190:
        case 199:
        case 206:
        case 210:
        case 212:
          this.$ = null;
          break;
        case 34:
          $$[$0 - 2].value.push($$[$0]);
          break;
        case 35:
          this.$ = { type: "SelectExpr", value: [$$[$0]] };
          break;
        case 36:
        case 65:
          this.$ = { type: "Identifier", value: $$[$0] };
          break;
        case 38:
          this.$ = $$[$0 - 1];
          this.$.alias = $$[$0].alias;
          this.$.hasAs = $$[$0].hasAs;
          ;
          break;
        case 39:
        case 66:
          this.$ = $$[$0 - 2];
          $$[$0 - 2].value += "." + $$[$0];
          break;
        case 40:
        case 201:
          this.$ = { alias: null, hasAs: null };
          break;
        case 41:
        case 43:
          this.$ = { alias: $$[$0], hasAs: true };
          break;
        case 42:
          this.$ = { alias: $$[$0], hasAs: false };
          break;
        case 44:
          this.$ = { alias: $$[$01], hasAs: false };
          break;
        case 45:
          this.$ = { type: "String", value: $$[$0] };
          break;
        case 46:
        case 47:
        case 48:
          this.$ = { type: "Number", value: $$[$0] };
          break;
        case 49:
          this.$ = { type: "Boolean", value: "TRUE" };
          break;
        case 50:
          this.$ = { type: "Boolean", value: "FALSE" };
          break;
        case 51:
          this.$ = { type: "Null", value: "null" };
          break;
        case 57:
          this.$ = { type: "FunctionCall", name: $$[$0 - 3], params: $$[$0 - 1] };
          break;
        case 58:
          $$[$0 - 2].push($$[$0]);
          this.$ = $$[$0 - 2];
          break;
        case 59:
          this.$ = [$$[$0]];
          ;
          break;
        case 63:
          this.$ = { type: "FunctionCallParam", distinctOpt: $$[$0 - 1], value: $$[$0] };
          break;
        case 67:
          this.$ = { type: "IdentifierList", value: [$$[$0]] };
          break;
        case 68:
        case 173:
          this.$ = $$[$0 - 2];
          $$[$0 - 2].value.push($$[$0]);
          ;
          break;
        case 71:
          this.$ = { type: "WhenThenList", value: [{ when: $$[$0 - 2], then: $$[$0] }] };
          ;
          break;
        case 72:
          this.$ = $$[$0 - 4];
          this.$.value.push({ when: $$[$0 - 2], then: $$[$0] });
          ;
          break;
        case 75:
          this.$ = { type: "CaseWhen", caseExprOpt: $$[$0 - 3], whenThenList: $$[$0 - 2], else: $$[$0 - 1] };
          break;
        case 76:
        case 77:
        case 78:
        case 79:
        case 80:
          this.$ = { type: "Prefix", prefix: $$[$0 - 1], value: $$[$0] };
          break;
        case 85:
          this.$ = { type: "SimpleExprParentheses", value: $$[$0 - 1] };
          break;
        case 86:
          this.$ = { type: "SimpleExprParentheses", value: $$[$0 - 2], hasRow: true };
          break;
        case 87:
          this.$ = { type: "SubQuery", value: $$[$0 - 1] };
          break;
        case 88:
          this.$ = { type: "SubQuery", value: $$[$0 - 1], hasExists: true };
          break;
        case 89:
          this.$ = { type: "IdentifierExpr", identifier: $$[$0 - 2], value: $$[$0 - 1] };
          break;
        case 91:
          this.$ = { type: "StartsWithExpr", value: $$[$0 - 2] };
          break;
        case 92:
          this.$ = { type: "EndsWithExpr", value: $$[$0] };
          break;
        case 93:
          this.$ = { type: "ContainsExpr", value: $$[$0 - 2] };
          break;
        case 95:
          this.$ = { type: "BitExpression", operator: "|", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 96:
          this.$ = { type: "BitExpression", operator: "&", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 97:
          this.$ = { type: "BitExpression", operator: "<<", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 98:
          this.$ = { type: "BitExpression", operator: ">>", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 99:
          this.$ = { type: "BitExpression", operator: "+", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 100:
          this.$ = { type: "BitExpression", operator: "-", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 101:
          this.$ = { type: "BitExpression", operator: "*", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 102:
          this.$ = { type: "BitExpression", operator: "/", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 103:
          this.$ = { type: "BitExpression", operator: "DIV", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 104:
          this.$ = { type: "BitExpression", operator: "MOD", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 105:
          this.$ = { type: "BitExpression", operator: "%", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 106:
          this.$ = { type: "BitExpression", operator: "^", left: $$[$0 - 2], right: $$[$0] };
          break;
        case 112:
          this.$ = { type: "InSubQueryPredicate", hasNot: $$[$0 - 4], left: $$[$0 - 5], right: $$[$0 - 1] };
          break;
        case 113:
          this.$ = { type: "InExpressionListPredicate", hasNot: $$[$0 - 4], left: $$[$0 - 5], right: $$[$0 - 1] };
          break;
        case 114:
          this.$ = { type: "BetweenPredicate", hasNot: $$[$0 - 4], left: $$[$0 - 5], right: { left: $$[$0 - 2], right: $$[$0] } };
          break;
        case 115:
          this.$ = { type: "SoundsLikePredicate", hasNot: false, left: $$[$0 - 3], right: $$[$0] };
          break;
        case 116:
          this.$ = { type: "LikePredicate", hasNot: $$[$0 - 3], left: $$[$0 - 4], right: $$[$0 - 1], escape: $$[$0] };
          break;
        case 117:
          this.$ = { type: "RegexpPredicate", hasNot: $$[$0 - 2], left: $$[$0 - 3], right: $$[$0] };
          break;
        case 128:
          this.$ = { type: "IsNullBooleanPrimary", hasNot: $$[$0 - 1], value: $$[$0 - 3] };
          break;
        case 129:
          this.$ = { type: "ComparisonBooleanPrimary", left: $$[$0 - 2], operator: $$[$0 - 1], right: $$[$0] };
          break;
        case 130:
          this.$ = { type: "ComparisonSubQueryBooleanPrimary", operator: $$[$0 - 4], subQueryOpt: $$[$0 - 3], left: $$[$0 - 5], right: $$[$0 - 1] };
          break;
        case 132:
          this.$ = { type: "BooleanExtra", value: $$[$0] };
          break;
        case 134:
          this.$ = { type: "IsExpression", hasNot: $$[$0 - 1], left: $$[$0 - 3], right: $$[$0] };
          break;
        case 135:
          this.$ = { type: "NotExpression", value: $$[$0] };
          break;
        case 136:
          this.$ = { type: "OrExpression", operator: $$[$0 - 1], left: $$[$0 - 2], right: $$[$0] };
          break;
        case 137:
          this.$ = { type: "AndExpression", operator: $$[$0 - 1], left: $$[$0 - 2], right: $$[$0] };
          break;
        case 138:
          this.$ = { type: "XorExpression", operator: $$[$0 - 1], left: $$[$0 - 2], right: $$[$0] };
          break;
        case 139:
          this.$ = { type: "ExpressionList", value: [$$[$0]] };
          break;
        case 140:
        case 215:
          this.$ = $$[$0 - 2];
          this.$.value.push($$[$0]);
          ;
          break;
        case 147:
          this.$ = { type: "GroupBy", value: $$[$0 - 1], rollUp: $$[$0] };
          break;
        case 150:
          this.$ = { type: "OrderBy", value: $$[$0 - 1], rollUp: $$[$0] };
          break;
        case 151:
        case 197:
          this.$ = [$$[$0]];
          break;
        case 152:
          this.$ = $$[$0 - 2];
          $$[$0 - 2].push($$[$0]);
          ;
          break;
        case 153:
          this.$ = { type: "GroupByOrderByItem", value: $$[$0 - 1], sortOpt: $$[$0] };
          break;
        case 159:
          this.$ = { type: "Limit", value: [$$[$0]] };
          break;
        case 160:
          this.$ = { type: "Limit", value: [$$[$0 - 2], $$[$0]] };
          break;
        case 161:
          this.$ = { type: "Limit", value: [$$[$0], $$[$0 - 2]], offsetMode: true };
          break;
        case 168:
          this.$ = $$[$0 - 1] + " " + $$[$0];
          break;
        case 169:
          this.$ = $$[$0 - 3] + " " + $$[$0 - 2] + " " + $$[$0 - 1] + " " + $$[$0];
          break;
        case 170:
          this.$ = {};
          break;
        case 171:
          this.$ = { from: $$[$0 - 8], partition: $$[$0 - 7], where: $$[$0 - 6], groupBy: $$[$0 - 5], having: $$[$0 - 4], orderBy: $$[$0 - 3], limit: $$[$0 - 2], procedure: $$[$0 - 1], updateLockMode: $$[$0] };
          break;
        case 172:
          this.$ = { type: "TableReferences", value: [$$[$0]] };
          break;
        case 174:
          this.$ = { type: "TableReference", value: $$[$0] };
          break;
        case 175:
          this.$ = { type: "TableReference", hasOj: true, value: $$[$0 - 1] };
          break;
        case 183:
          this.$ = { leftRight: null, outOpt: null };
          break;
        case 184:
          this.$ = { leftRight: $$[$0 - 1], outOpt: $$[$0] };
          break;
        case 185:
          this.$ = { type: "InnerCrossJoinTable", innerCrossOpt: $$[$0 - 2], left: $$[$0 - 3], right: $$[$0], condition: null };
          break;
        case 186:
          this.$ = { type: "InnerCrossJoinTable", innerCrossOpt: $$[$0 - 3], left: $$[$0 - 4], right: $$[$0 - 1], condition: $$[$0] };
          break;
        case 187:
          this.$ = { type: "StraightJoinTable", left: $$[$0 - 3], right: $$[$0 - 1], condition: $$[$0] };
          break;
        case 188:
          this.$ = { type: "LeftRightJoinTable", leftRight: $$[$0 - 4], outOpt: $$[$0 - 3], left: $$[$0 - 5], right: $$[$0 - 1], condition: $$[$0] };
          break;
        case 189:
          this.$ = { type: "NaturalJoinTable", leftRight: $$[$0 - 2].leftRight, outOpt: $$[$0 - 2].outOpt, left: $$[$0 - 4], right: $$[$0] };
          break;
        case 192:
          this.$ = { type: "OnJoinCondition", value: $$[$0] };
          break;
        case 194:
          this.$ = { type: "UsingJoinCondition", value: $$[$0 - 1] };
          break;
        case 198:
          this.$ = $$[$0 - 2];
          $$[$0 - 2].push($$[$0]);
          break;
        case 200:
          this.$ = { type: "Partitions", value: $$[$0 - 1] };
          break;
        case 202:
          this.$ = { hasAs: true, alias: $$[$0] };
          break;
        case 203:
          this.$ = { hasAs: false, alias: $$[$0] };
          break;
        case 207:
        case 208:
        case 209:
          this.$ = { type: "ForOptIndexHint", value: $$[$0] };
          break;
        case 214:
          this.$ = { type: "IndexHintList", value: [$$[$0]] };
          break;
        case 216:
          this.$ = { type: "UseIndexHint", value: $$[$0 - 1], forOpt: $$[$0 - 3], indexOrKey: $$[$0 - 4] };
          break;
        case 217:
          this.$ = { type: "IgnoreIndexHint", value: $$[$0 - 1], forOpt: $$[$0 - 3], indexOrKey: $$[$0 - 4] };
          break;
        case 218:
          this.$ = { type: "ForceIndexHint", value: $$[$0 - 1], forOpt: $$[$0 - 3], indexOrKey: $$[$0 - 4] };
          break;
        case 219:
          this.$ = { type: "TableFactor", value: $$[$0 - 3], partition: $$[$0 - 2], alias: $$[$0 - 1].alias, hasAs: $$[$0 - 1].hasAs, indexHintOpt: $$[$0] };
          break;
        case 220:
          this.$ = { type: "TableFactor", value: { type: "SubQuery", value: $$[$0 - 2] }, alias: $$[$0].alias, hasAs: $$[$0].hasAs };
          break;
        case 221:
          this.$ = $$[$0 - 1];
          this.$.hasParentheses = true;
          break;
        case 222:
          this.$ = { type: "PlaceHolder", value: $$[$0], param: $$[$0].slice(2, -1) };
          break;
      }
    },
    table: [{ 3: 1, 4: 2, 7: 3, 9: 5, 10: 6, 13: 7, 16: $V0, 18: $V1 }, { 1: [3] }, { 5: 9, 6: $V2, 8: $V3, 14: $V4 }, { 5: 12, 6: $V2, 8: $V3 }, o([16, 32, 33, 35, 36, 37, 38, 39, 40, 41, 42, 45, 52, 53, 56, 57, 59, 60, 62, 76, 79, 81, 82, 83, 84, 86, 87, 88, 91, 103, 195], $V5, { 15: 13, 29: $V6, 30: $V7, 31: $V8 }), o($V9, [2, 5]), o([6, 8, 146], $Va, { 11: 17, 137: 18, 138: $Vb }), { 14: $Vc }, { 4: 21, 18: $V1 }, { 6: [1, 22] }, { 15: 23, 18: $V5, 29: $V6, 30: $V7, 31: $V8 }, { 6: [2, 3] }, { 6: [1, 24] }, o($Vd, [2, 18], { 19: 25, 32: [1, 26] }), o($Ve, [2, 13]), o($Ve, [2, 14]), o($Ve, [2, 15]), o($V9, $Vf, { 12: 27, 145: 28, 146: $Vg }), o($Vh, [2, 149]), { 16: $Vi, 35: $Vj, 47: 32, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 136: 30, 139: 31, 195: $VC }, { 15: 68, 16: $V5, 29: $V6, 30: $V7, 31: $V8 }, { 17: [1, 69] }, { 1: [2, 1] }, { 4: 70, 9: 71, 18: $V1 }, { 1: [2, 2] }, o($VD, [2, 20], { 20: 72, 33: [1, 73] }), o($Vd, [2, 17]), o($V9, [2, 6]), o($VE, [2, 163]), { 35: [1, 74] }, o($Vh, $VF, { 132: 75, 43: $VG, 133: $VH }), o($VI, [2, 151]), o($VI, [2, 154], { 140: 78, 109: $VJ, 126: $VK, 127: $VL, 141: [1, 82], 142: [1, 83] }), o($VM, [2, 133], { 113: 85, 34: [1, 86], 114: [1, 87], 115: [1, 88], 116: [1, 89], 117: [1, 90], 118: [1, 91], 119: [1, 92], 123: [1, 84] }), { 16: $Vi, 35: $Vj, 47: 93, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, o($VN, [2, 127]), o($VN, [2, 111], { 102: 94, 45: $VO, 79: $VP, 81: $VQ, 93: $VR, 94: $VS, 95: $VT, 96: $VU, 97: $VV, 98: $VW, 99: $VX, 100: $VY, 101: $VZ, 103: $V_, 107: $V$, 108: $V$, 111: $V$, 112: $V$, 110: [1, 95] }), o($V01, [2, 94]), o($V11, [2, 81]), o($V11, $V21, { 50: $V31, 90: $V41 }), o($V11, [2, 83]), o($V11, [2, 84]), { 4: 112, 16: $Vi, 18: $V1, 35: $Vj, 47: 113, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 85: 111, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, { 16: [1, 114] }, { 16: [1, 115] }, { 49: 116, 52: $V51 }, o($V11, [2, 90]), { 90: [1, 118] }, o($V11, [2, 52]), o($V11, [2, 53]), o($V11, [2, 54]), o($V11, [2, 55]), o($V11, [2, 56]), o([6, 8, 14, 17, 34, 36, 43, 45, 50, 51, 52, 53, 71, 72, 74, 77, 79, 81, 89, 90, 93, 94, 95, 96, 97, 98, 99, 100, 101, 103, 105, 107, 108, 109, 110, 111, 112, 114, 115, 116, 117, 118, 119, 123, 126, 127, 129, 133, 135, 138, 141, 142, 144, 146, 150, 152, 154, 157, 164, 165, 167, 168, 173, 177, 179, 180, 182], $V61, { 16: $V71 }), { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 120, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 121, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 122, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 123, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 124, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 195: $VC }, { 16: $Vi, 35: $Vj, 47: 126, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 69: 125, 71: [2, 69], 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, o($V11, [2, 45]), o($V11, [2, 46]), o($V11, [2, 47]), o($V11, [2, 48]), o($V11, [2, 49]), o($V11, [2, 50]), o($V11, [2, 51]), o($V11, [2, 222]), { 10: 128, 13: 127, 16: $V0 }, o([6, 8, 14, 138, 146], [2, 9]), o($V9, [2, 10], { 14: $V4 }), o($V9, [2, 11]), o($V81, [2, 22], { 21: 129, 36: [1, 130] }), { 34: [1, 131] }, o($VE, [2, 159], { 43: [1, 132], 147: [1, 133] }), o($Vh, [2, 150]), { 16: $Vi, 35: $Vj, 47: 32, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 139: 134, 195: $VC }, { 134: [1, 135] }, o($VI, [2, 153]), { 16: $Vi, 35: $Vj, 47: 136, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, { 16: $Vi, 35: $Vj, 47: 137, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, { 16: $Vi, 35: $Vj, 47: 138, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, o($VI, [2, 155]), o($VI, [2, 156]), o([59, 60, 62, 125], $V$, { 102: 139, 103: $V_ }), { 16: $Vi, 29: [1, 142], 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 106: 140, 120: 141, 121: [1, 143], 195: $VC }, o($V91, [2, 118]), o($V91, [2, 119]), o($V91, [2, 120]), o($V91, [2, 121]), o($V91, [2, 122]), o($V91, [2, 123]), o($V91, [2, 124]), o($VM, [2, 135]), { 107: [1, 144], 108: [1, 145], 111: [1, 146], 112: [1, 147] }, { 111: [1, 148] }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 149, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 150, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 151, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 152, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 153, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 154, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 155, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 156, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 157, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 158, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 159, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 160, 195: $VC }, o([59, 60, 62, 107, 108, 111, 112, 125], [2, 108]), { 91: [1, 161] }, { 52: $Va1 }, { 17: [1, 163], 43: $Vb1 }, { 17: [1, 165] }, o($Vc1, [2, 139], { 109: $VJ, 126: $VK, 127: $VL }), { 16: $Vi, 35: $Vj, 47: 113, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 85: 166, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, { 4: 167, 18: $V1 }, { 16: $Vi, 35: $Vj, 47: 168, 49: 39, 50: $V31, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, o($Vd1, $V61), { 49: 169, 52: $V51 }, o($Vc1, $Ve1, { 122: 33, 106: 35, 92: 36, 80: 37, 63: 38, 65: 40, 78: 41, 75: 46, 54: 48, 55: 49, 58: 50, 61: 51, 64: 52, 66: 170, 67: 171, 46: 173, 47: 175, 49: 176, 16: $Vi, 30: $Vf1, 35: $Vj, 45: $Vg1, 52: $Vk, 53: $Vl, 56: $Vm, 57: $Vn, 59: $Vo, 60: $Vp, 62: $Vq, 76: $Vr, 79: $Vs, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 103: $VB, 195: $VC }), o($V11, [2, 76]), o($V11, [2, 77]), o($V11, [2, 78]), o($V11, [2, 79]), o($V11, [2, 80]), { 70: 177, 71: [1, 178] }, { 71: [2, 70], 109: $VJ, 126: $VK, 127: $VL }, o($Vh1, [2, 7], { 14: $Vc }), o($Vh1, [2, 8]), o($Vi1, [2, 24], { 22: 179, 37: [1, 180] }), o($V81, [2, 21]), { 35: [1, 181] }, { 35: [1, 182] }, { 35: [1, 183] }, o($VI, [2, 152]), o($Vj1, [2, 146]), o($Vk1, [2, 136], { 109: $VJ }), o($VM, [2, 137]), o($Vk1, [2, 138], { 109: $VJ }), { 58: 186, 59: $Vo, 60: $Vp, 62: [1, 185], 124: 184, 125: [1, 187] }, o($VN, [2, 129]), { 16: [1, 188] }, { 16: [2, 125] }, { 16: [2, 126] }, { 16: [1, 189] }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 190, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 191, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 192, 195: $VC }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 193, 195: $VC }, o([6, 8, 14, 17, 34, 36, 43, 51, 52, 53, 71, 72, 74, 77, 89, 93, 103, 107, 108, 109, 110, 111, 112, 114, 115, 116, 117, 118, 119, 123, 126, 127, 129, 133, 135, 138, 141, 142, 144, 146, 150, 152, 154, 157, 164, 165, 167, 168, 173, 177, 179, 180, 182], [2, 95], { 45: $VO, 79: $VP, 81: $VQ, 94: $VS, 95: $VT, 96: $VU, 97: $VV, 98: $VW, 99: $VX, 100: $VY, 101: $VZ }), o([6, 8, 14, 17, 34, 36, 43, 51, 52, 53, 71, 72, 74, 77, 89, 93, 94, 101, 103, 107, 108, 109, 110, 111, 112, 114, 115, 116, 117, 118, 119, 123, 126, 127, 129, 133, 135, 138, 141, 142, 144, 146, 150, 152, 154, 157, 164, 165, 167, 168, 173, 177, 179, 180, 182], [2, 96], { 45: $VO, 79: $VP, 81: $VQ, 95: $VT, 96: $VU, 97: $VV, 98: $VW, 99: $VX, 100: $VY }), o($Vl1, [2, 97], { 45: $VO, 79: $VP, 81: $VQ, 97: $VV, 98: $VW, 99: $VX, 100: $VY }), o($Vl1, [2, 98], { 45: $VO, 79: $VP, 81: $VQ, 97: $VV, 98: $VW, 99: $VX, 100: $VY }), o($Vm1, [2, 99], { 45: $VO, 97: $VV, 98: $VW, 99: $VX, 100: $VY }), o($Vm1, [2, 100], { 45: $VO, 97: $VV, 98: $VW, 99: $VX, 100: $VY }), o($V01, [2, 101]), o($V01, [2, 102]), o($V01, [2, 103]), o($V01, [2, 104]), o($V01, [2, 105]), o([6, 8, 14, 17, 34, 36, 43, 51, 52, 53, 71, 72, 74, 77, 89, 93, 101, 103, 107, 108, 109, 110, 111, 112, 114, 115, 116, 117, 118, 119, 123, 126, 127, 129, 133, 135, 138, 141, 142, 144, 146, 150, 152, 154, 157, 164, 165, 167, 168, 173, 177, 179, 180, 182], [2, 106], { 45: $VO, 79: $VP, 81: $VQ, 94: $VS, 95: $VT, 96: $VU, 97: $VV, 98: $VW, 99: $VX, 100: $VY }), o($V11, [2, 91]), o($Vd1, [2, 66]), o($V11, [2, 85]), { 16: $Vi, 35: $Vj, 47: 194, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, o($V11, [2, 87]), { 17: [1, 195], 43: $Vb1 }, { 17: [1, 196] }, { 89: [1, 197], 109: $VJ, 126: $VK, 127: $VL }, o($V11, [2, 92], { 50: $V31, 90: [1, 198] }), { 17: [1, 199], 43: [1, 200] }, o($Vc1, [2, 59]), o($Vc1, [2, 61]), o($Vc1, [2, 62]), { 16: $Vi, 35: $Vj, 47: 201, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, o($Vc1, [2, 64], { 109: $VJ, 126: $VK, 127: $VL }), o([6, 8, 14, 17, 34, 43, 45, 51, 52, 53, 79, 81, 93, 94, 95, 96, 97, 98, 99, 100, 101, 103, 107, 108, 109, 110, 111, 112, 114, 115, 116, 117, 118, 119, 123, 126, 127, 157], $V21, { 50: [1, 202], 90: $V41 }), { 71: [1, 204], 73: 203, 74: [1, 205], 77: [2, 73] }, { 16: $Vi, 35: $Vj, 47: 206, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, o($Vn1, [2, 26], { 23: 207, 38: [1, 208] }), o($Vi1, [2, 23]), o($VD, [2, 19]), o($VE, [2, 160]), o($VE, [2, 161]), o($VM, [2, 134]), o($VN, [2, 128]), o($VM, [2, 131]), o($VM, [2, 132]), { 4: 209, 18: $V1 }, { 4: 210, 16: $Vi, 18: $V1, 35: $Vj, 47: 113, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 85: 211, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, { 45: $VO, 79: $VP, 81: $VQ, 93: $VR, 94: $VS, 95: $VT, 96: $VU, 97: $VV, 98: $VW, 99: $VX, 100: $VY, 101: $VZ, 109: [1, 212] }, o($VN, [2, 109], { 104: 213, 105: [1, 214] }), o($VN, [2, 117], { 45: $VO, 79: $VP, 81: $VQ, 93: $VR, 94: $VS, 95: $VT, 96: $VU, 97: $VV, 98: $VW, 99: $VX, 100: $VY, 101: $VZ }), o($VN, [2, 115], { 45: $VO, 79: $VP, 81: $VQ, 93: $VR, 94: $VS, 95: $VT, 96: $VU, 97: $VV, 98: $VW, 99: $VX, 100: $VY, 101: $VZ }), o($Vc1, [2, 140], { 109: $VJ, 126: $VK, 127: $VL }), o($V11, [2, 86]), o($V11, [2, 88]), o($V11, [2, 89]), { 91: [1, 215] }, o($V11, [2, 57]), o($Vc1, $Ve1, { 122: 33, 106: 35, 92: 36, 80: 37, 63: 38, 65: 40, 78: 41, 75: 46, 54: 48, 55: 49, 58: 50, 61: 51, 64: 52, 46: 173, 47: 175, 49: 176, 67: 216, 16: $Vi, 30: $Vf1, 35: $Vj, 45: $Vg1, 52: $Vk, 53: $Vl, 56: $Vm, 57: $Vn, 59: $Vo, 60: $Vp, 62: $Vq, 76: $Vr, 79: $Vs, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 103: $VB, 195: $VC }), o($Vc1, [2, 63], { 109: $VJ, 126: $VK, 127: $VL }), { 45: [1, 217], 52: $Va1 }, { 77: [1, 218] }, { 16: $Vi, 35: $Vj, 47: 219, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, { 16: $Vi, 35: $Vj, 47: 220, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, { 72: [1, 221], 109: $VJ, 126: $VK, 127: $VL }, o($Vo1, [2, 28], { 24: 222, 39: [1, 223] }), o($Vn1, [2, 25]), { 17: [1, 224] }, { 17: [1, 225] }, { 17: [1, 226], 43: $Vb1 }, { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 106: 227, 195: $VC }, o($VN, [2, 116]), { 16: $Vi, 35: $Vj, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 228, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 195: $VC }, o($V11, [2, 93]), o($Vc1, [2, 58]), o($Vp1, [2, 39]), o($V11, [2, 75]), { 72: [1, 229], 109: $VJ, 126: $VK, 127: $VL }, { 77: [2, 74], 109: $VJ, 126: $VK, 127: $VL }, { 16: $Vi, 35: $Vj, 47: 230, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, o($Vq1, [2, 29], { 25: 231, 40: [1, 232], 41: [1, 233] }), o($Vo1, [2, 27]), o($VN, [2, 130]), o($VN, [2, 112]), o($VN, [2, 113]), o($VN, [2, 114]), o($VN, [2, 110]), { 16: $Vi, 35: $Vj, 47: 234, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, o($Vr1, [2, 71], { 109: $VJ, 126: $VK, 127: $VL }), o($Vs1, [2, 33], { 26: 235, 42: [1, 236] }), o($Vq1, [2, 30]), o($Vq1, [2, 31]), o($Vr1, [2, 72], { 109: $VJ, 126: $VK, 127: $VL }), { 16: $Vi, 27: 237, 35: $Vj, 44: 238, 45: $Vt1, 46: 240, 47: 241, 49: 176, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, o($Vs1, [2, 32]), o($Vu1, [2, 170], { 28: 242, 43: [1, 243], 157: [1, 244] }), o($Vp1, [2, 35]), o($Vp1, [2, 36]), o($Vp1, [2, 37]), o($Vp1, [2, 40], { 48: 245, 51: [1, 246], 52: [1, 247], 53: [1, 248], 109: $VJ, 126: $VK, 127: $VL }), o($Vu1, [2, 12]), { 16: $Vi, 35: $Vj, 44: 249, 45: $Vt1, 46: 240, 47: 241, 49: 176, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, { 16: $Vv1, 49: 256, 52: $V51, 88: $Vw1, 158: 250, 160: 251, 161: 252, 172: 255, 174: 254 }, o($Vp1, [2, 38]), { 52: [1, 258], 53: [1, 259] }, o($Vp1, [2, 42]), o($Vp1, [2, 44]), o($Vp1, [2, 34]), o([6, 8, 14, 17, 129, 135, 138, 144, 146, 150, 152, 154], $Vx1, { 159: 260, 43: $Vy1, 182: $Vz1 }), o($VA1, [2, 172]), o($VA1, [2, 174], { 163: 263, 166: 265, 36: $VB1, 164: $VC1, 165: $VD1, 167: $VE1, 168: $VF1, 173: $VG1, 177: $VH1 }), { 162: [1, 271] }, o($VI1, [2, 195]), o($VI1, [2, 196]), o([6, 8, 14, 17, 36, 43, 51, 52, 89, 129, 135, 138, 144, 146, 150, 152, 154, 164, 165, 167, 168, 173, 177, 179, 180, 192, 193, 194], $Vx1, { 159: 272, 50: $V31, 182: $Vz1 }), { 4: 273, 16: $Vv1, 18: $V1, 49: 256, 52: $V51, 88: $Vw1, 158: 274, 160: 251, 161: 252, 172: 255, 174: 254 }, o($Vp1, [2, 41]), o($Vp1, [2, 43]), o($VJ1, [2, 141], { 128: 275, 129: [1, 276] }), { 16: $Vv1, 49: 256, 52: $V51, 88: $Vw1, 160: 277, 161: 252, 172: 255, 174: 254 }, { 16: [1, 278] }, { 173: [1, 279] }, { 16: $Vv1, 49: 256, 52: $V51, 174: 280 }, { 169: 281, 170: $VK1, 173: $VL1 }, { 166: 284, 167: $VE1, 168: $VF1, 171: 283, 173: [2, 183] }, { 173: [2, 177] }, { 173: [2, 178] }, o($VM1, [2, 179]), o($VM1, [2, 180]), { 16: $Vv1, 49: 256, 52: $V51, 161: 285, 172: 255, 174: 254 }, o($VN1, $VO1, { 183: 286, 49: 288, 51: $VP1, 52: $V51 }), { 17: [1, 289] }, { 17: [1, 290], 43: $Vy1 }, o($Vj1, [2, 143], { 130: 291, 131: 292, 135: [1, 293] }), { 16: $Vi, 35: $Vj, 47: 294, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, o($VA1, [2, 173]), { 49: 296, 52: $V51, 181: 295 }, { 16: $Vv1, 49: 256, 52: $V51, 174: 297 }, { 176: 298, 179: $VQ1 }, { 173: [1, 300] }, { 173: [2, 182] }, { 173: [1, 301] }, { 169: 302, 170: $VK1, 173: $VL1 }, { 36: $VB1, 89: [1, 303], 163: 263, 164: $VC1, 165: $VD1, 166: 265, 167: $VE1, 168: $VF1, 173: $VG1, 177: $VH1 }, o($VI1, [2, 212], { 189: 304, 190: 305, 191: 306, 192: $VR1, 193: $VS1, 194: $VT1 }), { 49: 310, 52: $V51 }, o($VN1, [2, 203], { 50: $V31 }), o($VI1, $VO1, { 49: 288, 183: 311, 51: $VP1, 52: $V51 }), o($VI1, [2, 221]), o($VU1, [2, 157], { 143: 312, 144: [1, 313] }), o($Vj1, [2, 144]), { 16: $Vi, 35: $Vj, 47: 32, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 136: 314, 139: 31, 195: $VC }, o($VJ1, [2, 142], { 109: $VJ, 126: $VK, 127: $VL }), { 17: [1, 315], 43: [1, 316] }, o($Vc1, [2, 197], { 50: $V31 }), o([6, 8, 14, 17, 36, 43, 89, 129, 135, 138, 144, 146, 150, 152, 154, 164, 165, 167, 168, 173, 177, 182], [2, 185], { 175: 317, 176: 318, 179: $VQ1, 180: $VV1 }), o($VI1, [2, 187]), { 16: $Vi, 35: $Vj, 47: 320, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, { 16: $Vv1, 49: 256, 52: $V51, 161: 321, 172: 255, 174: 254 }, { 16: $Vv1, 49: 256, 52: $V51, 174: 322 }, { 173: [2, 184] }, o($VA1, [2, 175]), o($VI1, [2, 219]), o($VI1, [2, 213]), o($VI1, [2, 214]), { 184: 324, 185: $VW1, 186: $VX1 }, { 184: 327, 185: $VW1, 186: $VX1 }, { 184: 328, 185: $VW1, 186: $VX1 }, o($VN1, [2, 202], { 50: $V31 }), o($VI1, [2, 220]), o($Vh, $Va, { 137: 18, 11: 329, 138: $Vb }), { 16: $Vi, 35: $Vj, 47: 330, 49: 39, 52: $Vk, 53: $Vl, 54: 48, 55: 49, 56: $Vm, 57: $Vn, 58: 50, 59: $Vo, 60: $Vp, 61: 51, 62: $Vq, 63: 38, 64: 52, 65: 40, 75: 46, 76: $Vr, 78: 41, 79: $Vs, 80: 37, 81: $Vt, 82: $Vu, 83: $Vv, 84: $Vw, 86: $Vx, 87: $Vy, 88: $Vz, 91: $VA, 92: 36, 103: $VB, 106: 35, 122: 33, 195: $VC }, o($Vj1, $VF, { 132: 331, 43: $VG, 133: $VH }), o([6, 8, 14, 17, 36, 43, 51, 52, 89, 129, 135, 138, 144, 146, 150, 152, 154, 164, 165, 167, 168, 173, 177, 179, 180, 182, 192, 193, 194], [2, 200]), { 49: 332, 52: $V51 }, o($VI1, [2, 186]), o($VI1, [2, 193]), { 16: [1, 333] }, o($VI1, [2, 192], { 109: $VJ, 126: $VK, 127: $VL }), { 36: $VB1, 163: 263, 164: $VC1, 165: $VD1, 166: 265, 167: $VE1, 168: $VF1, 173: $VG1, 175: 334, 176: 318, 177: $VH1, 179: $VQ1, 180: $VV1 }, o($VI1, [2, 189]), { 191: 335, 192: $VR1, 193: $VS1, 194: $VT1 }, { 16: $VY1, 152: $VZ1, 187: 336 }, o($V_1, [2, 204]), o($V_1, [2, 205]), { 16: $VY1, 152: $VZ1, 187: 338 }, { 16: $VY1, 152: $VZ1, 187: 339 }, o($VE, $Vf, { 145: 28, 12: 340, 146: $Vg }), o($VU1, [2, 158], { 109: $VJ, 126: $VK, 127: $VL }), o($Vj1, [2, 147]), o($Vc1, [2, 198], { 50: $V31 }), { 49: 342, 52: $V51, 68: 341 }, o($VI1, [2, 188]), o($VI1, [2, 215]), { 16: [1, 343] }, { 135: [1, 346], 138: [1, 345], 173: [1, 344] }, { 16: [1, 347] }, { 16: [1, 348] }, o($V$1, [2, 164], { 148: 349, 149: 350, 150: [1, 351] }), { 17: [1, 352], 43: $V02 }, o($Vc1, [2, 67], { 50: $V31 }), { 17: [2, 210], 49: 342, 52: $V51, 68: 355, 188: 354 }, { 16: [2, 207] }, { 16: [2, 208] }, { 16: [2, 209] }, { 49: 342, 52: $V51, 68: 356 }, { 49: 342, 52: $V51, 68: 357 }, o($Vu1, [2, 167], { 151: 358, 152: [1, 359], 154: [1, 360] }), o($V$1, [2, 165]), { 52: [1, 362], 65: 361 }, o($VI1, [2, 194]), { 49: 363, 52: $V51 }, { 17: [1, 364] }, { 17: [2, 211], 43: $V02 }, { 17: [1, 365], 43: $V02 }, { 17: [1, 366], 43: $V02 }, o($Vu1, [2, 171]), { 153: [1, 367] }, { 107: [1, 368] }, o($V$1, [2, 166]), { 16: $V71 }, o($Vc1, [2, 68], { 50: $V31 }), o($VI1, [2, 216]), o($VI1, [2, 217]), o($VI1, [2, 218]), o($Vu1, [2, 168]), { 155: [1, 369] }, { 156: [1, 370] }, o($Vu1, [2, 169])],
    defaultActions: { 11: [2, 3], 22: [2, 1], 24: [2, 2], 142: [2, 125], 143: [2, 126], 267: [2, 177], 268: [2, 178], 282: [2, 182], 302: [2, 184], 344: [2, 207], 345: [2, 208], 346: [2, 209] },
    parseError: function parseError(str, hash) {
      if (hash.recoverable) {
        this.trace(str);
      } else {
        var error = new Error(str);
        error.hash = hash;
        throw error;
      }
    },
    parse: function parse(input) {
      var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = "", yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;
      var args = lstack.slice.call(arguments, 1);
      var lexer2 = Object.create(this.lexer);
      var sharedState = { yy: {} };
      for (var k in this.yy) {
        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {
          sharedState.yy[k] = this.yy[k];
        }
      }
      lexer2.setInput(input, sharedState.yy);
      sharedState.yy.lexer = lexer2;
      sharedState.yy.parser = this;
      if (typeof lexer2.yylloc == "undefined") {
        lexer2.yylloc = {};
      }
      var yyloc = lexer2.yylloc;
      lstack.push(yyloc);
      var ranges = lexer2.options && lexer2.options.ranges;
      if (typeof sharedState.yy.parseError === "function") {
        this.parseError = sharedState.yy.parseError;
      } else {
        this.parseError = Object.getPrototypeOf(this).parseError;
      }
      function popStack(n) {
        stack.length = stack.length - 2 * n;
        vstack.length = vstack.length - n;
        lstack.length = lstack.length - n;
      }
      var lex = function() {
        var token;
        token = lexer2.lex() || EOF;
        if (typeof token !== "number") {
          token = self.symbols_[token] || token;
        }
        return token;
      };
      var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;
      while (true) {
        state = stack[stack.length - 1];
        if (this.defaultActions[state]) {
          action = this.defaultActions[state];
        } else {
          if (symbol === null || typeof symbol == "undefined") {
            symbol = lex();
          }
          action = table[state] && table[state][symbol];
        }
        if (typeof action === "undefined" || !action.length || !action[0]) {
          var errStr = "";
          expected = [];
          for (p in table[state]) {
            if (this.terminals_[p] && p > TERROR) {
              expected.push("'" + this.terminals_[p] + "'");
            }
          }
          if (lexer2.showPosition) {
            errStr = "Parse error on line " + (yylineno + 1) + ":\n" + lexer2.showPosition() + "\nExpecting " + expected.join(", ") + ", got '" + (this.terminals_[symbol] || symbol) + "'";
          } else {
            errStr = "Parse error on line " + (yylineno + 1) + ": Unexpected " + (symbol == EOF ? "end of input" : "'" + (this.terminals_[symbol] || symbol) + "'");
          }
          this.parseError(errStr, {
            text: lexer2.match,
            token: this.terminals_[symbol] || symbol,
            line: lexer2.yylineno,
            loc: yyloc,
            expected
          });
        }
        if (action[0] instanceof Array && action.length > 1) {
          throw new Error("Parse Error: multiple actions possible at state: " + state + ", token: " + symbol);
        }
        switch (action[0]) {
          case 1:
            stack.push(symbol);
            vstack.push(lexer2.yytext);
            lstack.push(lexer2.yylloc);
            stack.push(action[1]);
            symbol = null;
            if (!preErrorSymbol) {
              yyleng = lexer2.yyleng;
              yytext = lexer2.yytext;
              yylineno = lexer2.yylineno;
              yyloc = lexer2.yylloc;
              if (recovering > 0) {
                recovering--;
              }
            } else {
              symbol = preErrorSymbol;
              preErrorSymbol = null;
            }
            break;
          case 2:
            len = this.productions_[action[1]][1];
            yyval.$ = vstack[vstack.length - len];
            yyval._$ = {
              first_line: lstack[lstack.length - (len || 1)].first_line,
              last_line: lstack[lstack.length - 1].last_line,
              first_column: lstack[lstack.length - (len || 1)].first_column,
              last_column: lstack[lstack.length - 1].last_column
            };
            if (ranges) {
              yyval._$.range = [
                lstack[lstack.length - (len || 1)].range[0],
                lstack[lstack.length - 1].range[1]
              ];
            }
            r = this.performAction.apply(yyval, [
              yytext,
              yyleng,
              yylineno,
              sharedState.yy,
              action[1],
              vstack,
              lstack
            ].concat(args));
            if (typeof r !== "undefined") {
              return r;
            }
            if (len) {
              stack = stack.slice(0, -1 * len * 2);
              vstack = vstack.slice(0, -1 * len);
              lstack = lstack.slice(0, -1 * len);
            }
            stack.push(this.productions_[action[1]][0]);
            vstack.push(yyval.$);
            lstack.push(yyval._$);
            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];
            stack.push(newState);
            break;
          case 3:
            return true;
        }
      }
      return true;
    }
  };
  var lexer = function() {
    var lexer2 = {
      EOF: 1,
      parseError: function parseError(str, hash) {
        if (this.yy.parser) {
          this.yy.parser.parseError(str, hash);
        } else {
          throw new Error(str);
        }
      },
      // resets the lexer, sets new input
      setInput: function(input, yy) {
        this.yy = yy || this.yy || {};
        this._input = input;
        this._more = this._backtrack = this.done = false;
        this.yylineno = this.yyleng = 0;
        this.yytext = this.matched = this.match = "";
        this.conditionStack = ["INITIAL"];
        this.yylloc = {
          first_line: 1,
          first_column: 0,
          last_line: 1,
          last_column: 0
        };
        if (this.options.ranges) {
          this.yylloc.range = [0, 0];
        }
        this.offset = 0;
        return this;
      },
      // consumes and returns one char from the input
      input: function() {
        var ch = this._input[0];
        this.yytext += ch;
        this.yyleng++;
        this.offset++;
        this.match += ch;
        this.matched += ch;
        var lines = ch.match(/(?:\r\n?|\n).*/g);
        if (lines) {
          this.yylineno++;
          this.yylloc.last_line++;
        } else {
          this.yylloc.last_column++;
        }
        if (this.options.ranges) {
          this.yylloc.range[1]++;
        }
        this._input = this._input.slice(1);
        return ch;
      },
      // unshifts one char (or a string) into the input
      unput: function(ch) {
        var len = ch.length;
        var lines = ch.split(/(?:\r\n?|\n)/g);
        this._input = ch + this._input;
        this.yytext = this.yytext.substr(0, this.yytext.length - len);
        this.offset -= len;
        var oldLines = this.match.split(/(?:\r\n?|\n)/g);
        this.match = this.match.substr(0, this.match.length - 1);
        this.matched = this.matched.substr(0, this.matched.length - 1);
        if (lines.length - 1) {
          this.yylineno -= lines.length - 1;
        }
        var r = this.yylloc.range;
        this.yylloc = {
          first_line: this.yylloc.first_line,
          last_line: this.yylineno + 1,
          first_column: this.yylloc.first_column,
          last_column: lines ? (lines.length === oldLines.length ? this.yylloc.first_column : 0) + oldLines[oldLines.length - lines.length].length - lines[0].length : this.yylloc.first_column - len
        };
        if (this.options.ranges) {
          this.yylloc.range = [r[0], r[0] + this.yyleng - len];
        }
        this.yyleng = this.yytext.length;
        return this;
      },
      // When called from action, caches matched text and appends it on next action
      more: function() {
        this._more = true;
        return this;
      },
      // When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.
      reject: function() {
        if (this.options.backtrack_lexer) {
          this._backtrack = true;
        } else {
          return this.parseError("Lexical error on line " + (this.yylineno + 1) + ". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n" + this.showPosition(), {
            text: "",
            token: null,
            line: this.yylineno
          });
        }
        return this;
      },
      // retain first n characters of the match
      less: function(n) {
        this.unput(this.match.slice(n));
      },
      // displays already matched input, i.e. for error messages
      pastInput: function() {
        var past = this.matched.substr(0, this.matched.length - this.match.length);
        return (past.length > 20 ? "..." : "") + past.substr(-20).replace(/\n/g, "");
      },
      // displays upcoming input, i.e. for error messages
      upcomingInput: function() {
        var next = this.match;
        if (next.length < 20) {
          next += this._input.substr(0, 20 - next.length);
        }
        return (next.substr(0, 20) + (next.length > 20 ? "..." : "")).replace(/\n/g, "");
      },
      // displays the character position where the lexing error occurred, i.e. for error messages
      showPosition: function() {
        var pre = this.pastInput();
        var c = new Array(pre.length + 1).join("-");
        return pre + this.upcomingInput() + "\n" + c + "^";
      },
      // test the lexed token: return FALSE when not a match, otherwise return token
      test_match: function(match, indexed_rule) {
        var token, lines, backup;
        if (this.options.backtrack_lexer) {
          backup = {
            yylineno: this.yylineno,
            yylloc: {
              first_line: this.yylloc.first_line,
              last_line: this.last_line,
              first_column: this.yylloc.first_column,
              last_column: this.yylloc.last_column
            },
            yytext: this.yytext,
            match: this.match,
            matches: this.matches,
            matched: this.matched,
            yyleng: this.yyleng,
            offset: this.offset,
            _more: this._more,
            _input: this._input,
            yy: this.yy,
            conditionStack: this.conditionStack.slice(0),
            done: this.done
          };
          if (this.options.ranges) {
            backup.yylloc.range = this.yylloc.range.slice(0);
          }
        }
        lines = match[0].match(/(?:\r\n?|\n).*/g);
        if (lines) {
          this.yylineno += lines.length;
        }
        this.yylloc = {
          first_line: this.yylloc.last_line,
          last_line: this.yylineno + 1,
          first_column: this.yylloc.last_column,
          last_column: lines ? lines[lines.length - 1].length - lines[lines.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + match[0].length
        };
        this.yytext += match[0];
        this.match += match[0];
        this.matches = match;
        this.yyleng = this.yytext.length;
        if (this.options.ranges) {
          this.yylloc.range = [this.offset, this.offset += this.yyleng];
        }
        this._more = false;
        this._backtrack = false;
        this._input = this._input.slice(match[0].length);
        this.matched += match[0];
        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);
        if (this.done && this._input) {
          this.done = false;
        }
        if (token) {
          return token;
        } else if (this._backtrack) {
          for (var k in backup) {
            this[k] = backup[k];
          }
          return false;
        }
        return false;
      },
      // return next match in input
      next: function() {
        if (this.done) {
          return this.EOF;
        }
        if (!this._input) {
          this.done = true;
        }
        var token, match, tempMatch, index;
        if (!this._more) {
          this.yytext = "";
          this.match = "";
        }
        var rules = this._currentRules();
        for (var i = 0; i < rules.length; i++) {
          tempMatch = this._input.match(this.rules[rules[i]]);
          if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {
            match = tempMatch;
            index = i;
            if (this.options.backtrack_lexer) {
              token = this.test_match(tempMatch, rules[i]);
              if (token !== false) {
                return token;
              } else if (this._backtrack) {
                match = false;
                continue;
              } else {
                return false;
              }
            } else if (!this.options.flex) {
              break;
            }
          }
        }
        if (match) {
          token = this.test_match(match, rules[index]);
          if (token !== false) {
            return token;
          }
          return false;
        }
        if (this._input === "") {
          return this.EOF;
        } else {
          return this.parseError("Lexical error on line " + (this.yylineno + 1) + ". Unrecognized text.\n" + this.showPosition(), {
            text: "",
            token: null,
            line: this.yylineno
          });
        }
      },
      // return next match that has a token
      lex: function lex() {
        var r = this.next();
        if (r) {
          return r;
        } else {
          return this.lex();
        }
      },
      // activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)
      begin: function begin(condition) {
        this.conditionStack.push(condition);
      },
      // pop the previously active lexer condition state off the condition stack
      popState: function popState() {
        var n = this.conditionStack.length - 1;
        if (n > 0) {
          return this.conditionStack.pop();
        } else {
          return this.conditionStack[0];
        }
      },
      // produce the lexer rule set which is active for the currently active lexer condition state
      _currentRules: function _currentRules() {
        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {
          return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;
        } else {
          return this.conditions["INITIAL"].rules;
        }
      },
      // return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available
      topState: function topState(n) {
        n = this.conditionStack.length - 1 - Math.abs(n || 0);
        if (n >= 0) {
          return this.conditionStack[n];
        } else {
          return "INITIAL";
        }
      },
      // alias for begin(condition)
      pushState: function pushState(condition) {
        this.begin(condition);
      },
      // return the number of states currently on the stack
      stateStackSize: function stateStackSize() {
        return this.conditionStack.length;
      },
      options: { "case-insensitive": true },
      performAction: function anonymous(yy, yy_, $avoiding_name_collisions, YY_START) {
        var YYSTATE = YY_START;
        switch ($avoiding_name_collisions) {
          case 0:
            break;
          case 1:
            break;
          case 2:
            break;
          case 3:
            break;
          case 4:
            return 195;
            break;
          case 5:
            return 52;
            break;
          case 6:
            return 52;
            break;
          case 7:
            return 52;
            break;
          case 8:
            return 18;
            break;
          case 9:
            return 29;
            break;
          case 10:
            return 121;
            break;
          case 11:
            return 30;
            break;
          case 12:
            return 31;
            break;
          case 13:
            return 32;
            break;
          case 14:
            return 33;
            break;
          case 15:
            return 36;
            break;
          case 16:
            return 37;
            break;
          case 17:
            return 38;
            break;
          case 18:
            return 39;
            break;
          case 19:
            return 40;
            break;
          case 20:
            return 41;
            break;
          case 21:
            return 42;
            break;
          case 22:
            return 51;
            break;
          case 23:
            return 59;
            break;
          case 24:
            return 60;
            break;
          case 25:
            return 62;
            break;
          case 26:
            return "COLLATE";
            break;
          case 27:
            return 84;
            break;
          case 28:
            return 86;
            break;
          case 29:
            return 87;
            break;
          case 30:
            return 76;
            break;
          case 31:
            return 71;
            break;
          case 32:
            return 72;
            break;
          case 33:
            return 74;
            break;
          case 34:
            return 77;
            break;
          case 35:
            return 98;
            break;
          case 36:
            return 99;
            break;
          case 37:
            return 103;
            break;
          case 38:
            return 108;
            break;
          case 39:
            return 107;
            break;
          case 40:
            return 110;
            break;
          case 41:
            return 111;
            break;
          case 42:
            return 105;
            break;
          case 43:
            return 112;
            break;
          case 44:
            return 123;
            break;
          case 45:
            return 125;
            break;
          case 46:
            return 109;
            break;
          case 47:
            return 126;
            break;
          case 48:
            return 127;
            break;
          case 49:
            return 157;
            break;
          case 50:
            return 182;
            break;
          case 51:
            return 192;
            break;
          case 52:
            return 185;
            break;
          case 53:
            return 186;
            break;
          case 54:
            return 152;
            break;
          case 55:
            return 173;
            break;
          case 56:
            return 138;
            break;
          case 57:
            return 135;
            break;
          case 58:
            return 193;
            break;
          case 59:
            return 194;
            break;
          case 60:
            return 164;
            break;
          case 61:
            return 165;
            break;
          case 62:
            return 179;
            break;
          case 63:
            return 180;
            break;
          case 64:
            return 167;
            break;
          case 65:
            return 168;
            break;
          case 66:
            return 170;
            break;
          case 67:
            return 177;
            break;
          case 68:
            return 129;
            break;
          case 69:
            return 141;
            break;
          case 70:
            return 142;
            break;
          case 71:
            return 133;
            break;
          case 72:
            return 134;
            break;
          case 73:
            return 144;
            break;
          case 74:
            return 147;
            break;
          case 75:
            return 150;
            break;
          case 76:
            return 153;
            break;
          case 77:
            return 154;
            break;
          case 78:
            return 155;
            break;
          case 79:
            return 156;
            break;
          case 80:
            return 162;
            break;
          case 81:
            return 146;
            break;
          case 82:
            return 14;
            break;
          case 83:
            return 43;
            break;
          case 84:
            return 34;
            break;
          case 85:
            return 16;
            break;
          case 86:
            return 17;
            break;
          case 87:
            return 82;
            break;
          case 88:
            return 119;
            break;
          case 89:
            return 83;
            break;
          case 90:
            return 90;
            break;
          case 91:
            return 93;
            break;
          case 92:
            return 94;
            break;
          case 93:
            return 79;
            break;
          case 94:
            return 81;
            break;
          case 95:
            return 45;
            break;
          case 96:
            return 97;
            break;
          case 97:
            return 100;
            break;
          case 98:
            return 101;
            break;
          case 99:
            return 96;
            break;
          case 100:
            return 114;
            break;
          case 101:
            return 115;
            break;
          case 102:
            return 95;
            break;
          case 103:
            return "<=>";
            break;
          case 104:
            return 116;
            break;
          case 105:
            return 118;
            break;
          case 106:
            return 117;
            break;
          case 107:
            return 88;
            break;
          case 108:
            return 89;
            break;
          case 109:
            return 8;
            break;
          case 110:
            return 91;
            break;
          case 111:
            return 53;
            break;
          case 112:
            return 57;
            break;
          case 113:
            return 35;
            break;
          case 114:
            return 56;
            break;
          case 115:
            return 52;
            break;
          case 116:
            return 50;
            break;
          case 117:
            return 52;
            break;
          case 118:
            return 6;
            break;
          case 119:
            return "INVALID";
            break;
        }
      },
      rules: [/^(?:[/][*](.|\n)*?[*][/])/i, /^(?:[-][-]\s.*\n)/i, /^(?:[#]\s.*\n)/i, /^(?:\s+)/i, /^(?:[$][{](.*?)[}])/i, /^(?:([`][^`]+[`])+)/i, /^(?:(["][^"]+["])+)/i, /^(?:[\[]([^\]]|\]\])+[\]])/i, /^(?:SELECT\b)/i, /^(?:ALL\b)/i, /^(?:ANY\b)/i, /^(?:DISTINCT\b)/i, /^(?:DISTINCTROW\b)/i, /^(?:HIGH_PRIORITY\b)/i, /^(?:MAX_STATEMENT_TIME\b)/i, /^(?:STRAIGHT_JOIN\b)/i, /^(?:SQL_SMALL_RESULT\b)/i, /^(?:SQL_BIG_RESULT\b)/i, /^(?:SQL_BUFFER_RESULT\b)/i, /^(?:SQL_CACHE\b)/i, /^(?:SQL_NO_CACHE\b)/i, /^(?:SQL_CALC_FOUND_ROWS\b)/i, /^(?:AS\b)/i, /^(?:TRUE\b)/i, /^(?:FALSE\b)/i, /^(?:NULL\b)/i, /^(?:COLLATE\b)/i, /^(?:BINARY\b)/i, /^(?:ROW\b)/i, /^(?:EXISTS\b)/i, /^(?:CASE\b)/i, /^(?:WHEN\b)/i, /^(?:THEN\b)/i, /^(?:ELSE\b)/i, /^(?:END\b)/i, /^(?:DIV\b)/i, /^(?:MOD\b)/i, /^(?:NOT\b)/i, /^(?:BETWEEN\b)/i, /^(?:IN\b)/i, /^(?:SOUNDS\b)/i, /^(?:LIKE\b)/i, /^(?:ESCAPE\b)/i, /^(?:REGEXP\b)/i, /^(?:IS\b)/i, /^(?:UNKNOWN\b)/i, /^(?:AND\b)/i, /^(?:OR\b)/i, /^(?:XOR\b)/i, /^(?:FROM\b)/i, /^(?:PARTITION\b)/i, /^(?:USE\b)/i, /^(?:INDEX\b)/i, /^(?:KEY\b)/i, /^(?:FOR\b)/i, /^(?:JOIN\b)/i, /^(?:ORDER\s+BY\b)/i, /^(?:GROUP\s+BY\b)/i, /^(?:IGNORE\b)/i, /^(?:FORCE\b)/i, /^(?:INNER\b)/i, /^(?:CROSS\b)/i, /^(?:ON\b)/i, /^(?:USING\b)/i, /^(?:LEFT\b)/i, /^(?:RIGHT\b)/i, /^(?:OUTER\b)/i, /^(?:NATURAL\b)/i, /^(?:WHERE\b)/i, /^(?:ASC\b)/i, /^(?:DESC\b)/i, /^(?:WITH\b)/i, /^(?:ROLLUP\b)/i, /^(?:HAVING\b)/i, /^(?:OFFSET\b)/i, /^(?:PROCEDURE\b)/i, /^(?:UPDATE\b)/i, /^(?:LOCK\b)/i, /^(?:SHARE\b)/i, /^(?:MODE\b)/i, /^(?:OJ\b)/i, /^(?:LIMIT\b)/i, /^(?:UNION\b)/i, /^(?:,)/i, /^(?:=)/i, /^(?:\()/i, /^(?:\))/i, /^(?:~)/i, /^(?:!=)/i, /^(?:!)/i, /^(?:\|\|)/i, /^(?:\|)/i, /^(?:&)/i, /^(?:\+)/i, /^(?:-)/i, /^(?:\*)/i, /^(?:\/)/i, /^(?:%)/i, /^(?:\^)/i, /^(?:>>)/i, /^(?:>=)/i, /^(?:>)/i, /^(?:<<)/i, /^(?:<=>)/i, /^(?:<=)/i, /^(?:<>)/i, /^(?:<)/i, /^(?:\{)/i, /^(?:\})/i, /^(?:;)/i, /^(?:['](%)+['])/i, /^(?:(['][^']*['])+)/i, /^(?:[0][x][0-9a-fA-F]+)/i, /^(?:[-]?[0-9]+(\.[0-9]+)?)/i, /^(?:[-]?[0-9]+(\.[0-9]+)?[eE][-+]?[0-9]+(\.[0-9]+)?)/i, /^(?:[a-zA-Z_@#\uff3f\u4e00-\u9fa5][a-zA-Z0-9_$@#\uff3f\u4e00-\u9fa5]*)/i, /^(?:\.)/i, /^(?:([`])(?:(?=(\\?))\2.)*?\1)/i, /^(?:$)/i, /^(?:.)/i],
      conditions: { "INITIAL": { "rules": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119], "inclusive": true } }
    };
    return lexer2;
  }();
  parser.lexer = lexer;
  function Parser() {
    this.yy = {};
  }
  Parser.prototype = parser;
  parser.Parser = Parser;
  return new Parser();
}();

// src/utils/parseSQL/utils.ts
var isSQLLiteralValue = (v) => !!v && (v.type === "String" || v.type === "Number" || v.type === "Boolean");
var isSQLIdentifier = (v) => !!v && v.type === "Identifier";
var getParamString = (param) => {
  switch (typeof param) {
    case "number":
      return `${param}`;
    case "boolean":
      return param ? "TRUE" : "FALSE";
    default:
      return `'${param}'`;
  }
};
var getFieldName = (f) => {
  const fieldName = typeof f === "string" ? f : f.value;
  if (fieldName.startsWith("`") && fieldName.endsWith("`")) {
    return fieldName.replaceAll(/(^`|`$)/g, "").replaceAll("``", "`");
  } else if (fieldName.startsWith('"') && fieldName.endsWith('"')) {
    return fieldName.replaceAll(/(^"|"$)/g, "").replaceAll('""', '"');
  } else if (fieldName.startsWith("[") && fieldName.endsWith("]")) {
    return fieldName.replaceAll(/(^\[|\]$)/g, "").replaceAll("]]", "]");
  }
  return fieldName;
};
var normalizeCombinator2 = (c) => c.replace("&&", "and").replace("||", "or").toLowerCase();
var normalizeOperator2 = (op, flip) => {
  if (flip) {
    if (op === "<")
      return ">";
    if (op === "<=")
      return ">=";
    if (op === ">")
      return "<";
    if (op === ">=")
      return "<=";
  }
  if (op === "<>")
    return "!=";
  return op;
};
var evalSQLLiteralValue = (valueObj) => {
  if (valueObj.type === "String") {
    const valueString = valueObj.value;
    if (valueString.startsWith(`'`) && valueString.endsWith(`'`) || valueString.startsWith(`"`) && valueString.endsWith(`"`)) {
      const innerString = valueString.substring(1, valueString.length - 1);
      return innerString.replaceAll(/''/gm, "'");
    }
    return valueString;
  } else if (valueObj.type === "Boolean") {
    return valueObj.value.toLowerCase() === "true";
  }
  return parseFloat(valueObj.value);
};
var generateFlatAndOrList2 = (expr) => {
  const combinator = normalizeCombinator2(expr.operator);
  if (expr.left.type === "AndExpression" || expr.left.type === "OrExpression" || expr.left.type === "XorExpression") {
    return [...generateFlatAndOrList2(expr.left), combinator, expr.right];
  }
  return [expr.left, combinator, expr.right];
};
var generateMixedAndXorOrList = (expr) => {
  const arr = generateFlatAndOrList2(expr);
  let currentLevel = 0;
  const orArray = { combinator: "or", expressions: [] };
  let xorArray = { combinator: "xor", expressions: [] };
  let andArray = { combinator: "and", expressions: [] };
  for (let i = 0; i < arr.length - 2; i += 2) {
    let levelDelta = 0;
    if (arr[i + 1] === "and") {
      levelDelta = 2 - currentLevel;
    } else if (arr[i + 1] === "xor") {
      levelDelta = 1 - currentLevel;
    } else if (arr[i + 1] === "or") {
      levelDelta = 0 - currentLevel;
    }
    if (levelDelta > 0) {
      for (let d = 0; d < levelDelta; d++) {
        currentLevel += 1;
        if (currentLevel === 1) {
          xorArray = { combinator: "xor", expressions: [] };
          if (levelDelta === 1) {
            xorArray.expressions.push(arr[i]);
            if (i >= arr.length - 3 || arr[i + 3] === "xor") {
              xorArray.expressions.push(arr[i + 2]);
            }
          }
        } else if (currentLevel === 2) {
          andArray = { combinator: "and", expressions: [] };
          andArray.expressions.push(arr[i], arr[i + 2]);
        }
      }
    } else if (levelDelta < 0) {
      for (let d = 0; d > levelDelta; d--) {
        currentLevel -= 1;
        if (currentLevel === 1) {
          xorArray.expressions.push(andArray);
          if (levelDelta === -1) {
            xorArray.expressions.push(arr[i + 2]);
          }
        } else if (currentLevel === 0) {
          orArray.expressions.push(xorArray);
          if (i >= arr.length - 3) {
            orArray.expressions.push(arr[i + 2]);
          }
        }
      }
    } else {
      if (currentLevel === 0) {
        if (i === 0 || i > 3 && arr[i - 3] !== "or") {
          orArray.expressions.push(arr[i]);
        }
        if (i >= arr.length - 3 || arr[i + 3] === "or") {
          orArray.expressions.push(arr[i + 2]);
        }
      } else if (currentLevel === 1) {
        xorArray.expressions.push(arr[i + 2]);
      } else if (currentLevel === 2) {
        andArray.expressions.push(arr[i + 2]);
      }
    }
  }
  if (currentLevel === 2) {
    xorArray.expressions.push(andArray);
    currentLevel -= 1;
  }
  if (currentLevel === 1) {
    orArray.expressions.push(xorArray);
    currentLevel -= 1;
  }
  if (orArray.expressions.length === 1 && "combinator" in orArray.expressions[0]) {
    if (orArray.expressions[0].expressions.length === 1 && "combinator" in orArray.expressions[0].expressions[0]) {
      return orArray.expressions[0].expressions[0];
    } else {
      return orArray.expressions[0];
    }
  }
  const returnArray = { combinator: "or", expressions: [] };
  for (const o of orArray.expressions) {
    if ("combinator" in o) {
      if ("combinator" in o.expressions[0] && o.expressions.length === 1) {
        returnArray.expressions.push(o.expressions[0]);
      } else {
        returnArray.expressions.push(o);
      }
    } else {
      returnArray.expressions.push(o);
    }
  }
  return returnArray;
};

// src/utils/parseSQL/parseSQL.ts
function parseSQL(sql, options = {}) {
  const { params, paramPrefix, independentCombinators, fields, getValueSources } = options;
  let sqlString = /^[ \t\n\r\s]*SELECT\b/i.test(sql) ? sql : /^[ \t\n\r\s]*WHERE\b/i.test(sql) ? `SELECT * FROM t ${sql}` : `SELECT * FROM t WHERE ${sql}`;
  let ic = false;
  const fieldsFlat = getFieldsArray(fields);
  ic = !!independentCombinators;
  if (params) {
    if (Array.isArray(params)) {
      let i = 0;
      sqlString = sqlString.replace(/\?/g, () => {
        const paramString = getParamString(params[i]);
        i++;
        return paramString;
      });
    } else {
      const keys = Object.keys(params);
      const prefix = paramPrefix ?? ":";
      keys.forEach((p) => {
        sqlString = sqlString.replace(
          new RegExp(`\\${prefix}${p}\\b`, "ig"),
          getParamString(params[p])
        );
      });
    }
  }
  const fieldIsValid = (fieldName, operator, subordinateFieldName) => fieldIsValidUtil({
    fieldName,
    fieldsFlat,
    operator,
    subordinateFieldName,
    getValueSources
  });
  const processSQLExpression = (expr) => {
    if (expr.type === "NotExpression") {
      const val = expr.value.type === "SimpleExprParentheses" ? expr.value.value.value[0] : expr.value;
      const rule = processSQLExpression(val);
      if (rule) {
        if ("rules" in rule) {
          return { ...rule, not: true };
        }
        return {
          rules: [rule],
          not: true,
          ...!ic && { combinator: "and" }
        };
      }
    } else if (expr.type === "SimpleExprParentheses") {
      const ex = expr.value.value[0];
      if (ex.type === "AndExpression" || ex.type === "OrExpression" || ex.type === "XorExpression") {
        return processSQLExpression(ex);
      }
      const rule = processSQLExpression(ex);
      return rule ? { rules: [rule], ...ic ? {} : { combinator: "and" } } : null;
    } else if (expr.type === "AndExpression" || expr.type === "OrExpression" || expr.type === "XorExpression") {
      if (ic) {
        const andOrList = generateFlatAndOrList2(expr);
        const rules2 = andOrList.map((v) => {
          if (typeof v === "string") {
            return v;
          }
          return processSQLExpression(v);
        });
        if (rules2.includes(null)) {
          return null;
        }
        return {
          rules: rules2
        };
      }
      const andXorOrList = generateMixedAndXorOrList(expr);
      const { combinator } = andXorOrList;
      const rules = andXorOrList.expressions.map((obj) => {
        if ("combinator" in obj) {
          return {
            combinator: obj.combinator,
            rules: obj.expressions.map((o) => {
              if ("combinator" in o) {
                return {
                  combinator: o.combinator,
                  rules: o.expressions.map((oa) => processSQLExpression(oa)).filter(Boolean)
                };
              } else {
                return processSQLExpression(o);
              }
            }).filter(Boolean)
          };
        }
        return processSQLExpression(obj);
      }).filter(Boolean);
      if (rules.length > 0) {
        return { combinator, rules };
      }
    } else if (expr.type === "IsNullBooleanPrimary") {
      if (isSQLIdentifier(expr.value)) {
        const f = getFieldName(expr.value);
        const operator = expr.hasNot ? "notNull" : "null";
        if (fieldIsValid(f, operator)) {
          return {
            field: f,
            operator,
            value: null
          };
        }
      }
    } else if (expr.type === "ComparisonBooleanPrimary") {
      if (isSQLIdentifier(expr.left) && !isSQLIdentifier(expr.right) || !isSQLIdentifier(expr.left) && isSQLIdentifier(expr.right)) {
        const identifier = isSQLIdentifier(expr.left) ? expr.left.value : expr.right.value;
        const valueObj = [expr.left, expr.right].find((t) => !isSQLIdentifier(t));
        if (isSQLLiteralValue(valueObj)) {
          const f = getFieldName(identifier);
          const operator = normalizeOperator2(expr.operator, isSQLIdentifier(expr.right));
          if (fieldIsValid(f, operator)) {
            return {
              field: f,
              operator,
              value: evalSQLLiteralValue(valueObj)
            };
          }
        }
      } else if (isSQLIdentifier(expr.left) && isSQLIdentifier(expr.right)) {
        const f = getFieldName(expr.left);
        const sf = getFieldName(expr.right);
        const operator = normalizeOperator2(expr.operator);
        if (fieldIsValid(f, operator, sf)) {
          return {
            field: f,
            operator,
            value: sf,
            valueSource: "field"
          };
        }
      }
    } else if (expr.type === "InExpressionListPredicate") {
      if (isSQLIdentifier(expr.left)) {
        const f = getFieldName(expr.left);
        const valueArray = expr.right.value.filter(isSQLLiteralValue).map(evalSQLLiteralValue);
        const operator = expr.hasNot ? "notIn" : "in";
        const fieldArray = expr.right.value.filter(isSQLIdentifier).filter((sf) => fieldIsValid(f, operator, sf.value)).map(getFieldName);
        if (valueArray.length > 0) {
          const value = options?.listsAsArrays ? valueArray : valueArray.join(", ");
          return { field: getFieldName(expr.left), operator, value };
        } else if (fieldArray.length > 0) {
          const value = options?.listsAsArrays ? fieldArray : fieldArray.join(", ");
          return {
            field: getFieldName(expr.left),
            operator,
            value,
            valueSource: "field"
          };
        }
      }
    } else if (expr.type === "BetweenPredicate") {
      if (isSQLIdentifier(expr.left) && isSQLLiteralValue(expr.right.left) && isSQLLiteralValue(expr.right.right)) {
        const valueArray = [expr.right.left, expr.right.right].map(evalSQLLiteralValue);
        const value = options?.listsAsArrays ? valueArray : valueArray.join(", ");
        const operator = expr.hasNot ? "notBetween" : "between";
        return { field: getFieldName(expr.left), operator, value };
      } else if (isSQLIdentifier(expr.left) && isSQLIdentifier(expr.right.left) && isSQLIdentifier(expr.right.right)) {
        const f = getFieldName(expr.left);
        const valueArray = [expr.right.left, expr.right.right].map(getFieldName);
        const operator = expr.hasNot ? "notBetween" : "between";
        if (valueArray.every((sf) => fieldIsValid(f, operator, sf))) {
          const value = options?.listsAsArrays ? valueArray : valueArray.join(", ");
          return { field: f, operator, value, valueSource: "field" };
        }
      }
    } else if (expr.type === "LikePredicate") {
      if (isSQLIdentifier(expr.left) && expr.right.type === "String") {
        const valueWithWildcards = evalSQLLiteralValue(expr.right);
        const valueWithoutWildcards = valueWithWildcards.replace(/(^%)|(%$)/g, "");
        let operator = "=";
        if (/^%.*%$/.test(valueWithWildcards) || valueWithWildcards === "%") {
          operator = expr.hasNot ? "doesNotContain" : "contains";
        } else if (/%$/.test(valueWithWildcards)) {
          operator = expr.hasNot ? "doesNotBeginWith" : "beginsWith";
        } else if (/^%/.test(valueWithWildcards)) {
          operator = expr.hasNot ? "doesNotEndWith" : "endsWith";
        }
        const f = getFieldName(expr.left);
        if (fieldIsValid(f, operator)) {
          return { field: f, operator, value: valueWithoutWildcards };
        }
      } else if (isSQLIdentifier(expr.left) && (expr.right.type === "StartsWithExpr" || expr.right.type === "EndsWithExpr" || expr.right.type === "ContainsExpr")) {
        let subordinateFieldName = "";
        let operator = "=";
        if (isSQLIdentifier(expr.right.value)) {
          subordinateFieldName = getFieldName(expr.right.value);
        }
        if (expr.right.type === "EndsWithExpr") {
          operator = expr.hasNot ? "doesNotEndWith" : "endsWith";
        } else if (expr.right.type === "StartsWithExpr") {
          operator = expr.hasNot ? "doesNotBeginWith" : "beginsWith";
        } else if (expr.right.type === "ContainsExpr") {
          operator = expr.hasNot ? "doesNotContain" : "contains";
        }
        const baseFieldName = getFieldName(expr.left);
        if (operator !== "=" && fieldIsValid(baseFieldName, operator, subordinateFieldName)) {
          return {
            field: baseFieldName,
            operator,
            value: subordinateFieldName,
            valueSource: "field"
          };
        }
      } else if (isSQLIdentifier(expr.left) && isSQLIdentifier(expr.right)) {
        const baseFieldName = getFieldName(expr.left);
        const subordinateFieldName = getFieldName(expr.right);
        const operator = "=";
        if (fieldIsValid(baseFieldName, operator, subordinateFieldName)) {
          return {
            field: baseFieldName,
            operator,
            value: subordinateFieldName,
            valueSource: "field"
          };
        }
      }
    }
    return null;
  };
  const { where } = sqlParser.parse(sqlString).value;
  if (where) {
    const result = processSQLExpression(where);
    if (result) {
      if ("rules" in result) {
        return result;
      }
      return { rules: [result], ...ic ? {} : { combinator: "and" } };
    }
  }
  return { rules: [], ...ic ? {} : { combinator: "and" } };
}

// src/utils/pathUtils.ts
var findPath = (path, query) => {
  let target = query;
  let level = 0;
  while (level < path.length && target && "rules" in target) {
    const t = target.rules[path[level]];
    if (typeof t !== "string") {
      target = t;
    } else {
      target = null;
    }
    level++;
  }
  return target;
};
var getParentPath = (path) => path.slice(0, path.length - 1);
var pathsAreEqual = (path1, path2) => path1.length === path2.length && path1.every((val, idx) => val === path2[idx]);
var isAncestor = (maybeAncestor, path) => maybeAncestor.length < path.length && RegExp(`^${maybeAncestor.join("-")}`).test(path.join("-"));
var getCommonAncestorPath = (path1, path2) => {
  const commonAncestorPath = [];
  const parentPath1 = getParentPath(path1);
  const parentPath2 = getParentPath(path2);
  let i = 0;
  while (i < parentPath1.length && i < parentPath2.length && parentPath1[i] === parentPath2[i]) {
    commonAncestorPath.push(parentPath2[i]);
    i++;
  }
  return commonAncestorPath;
};
var pathIsDisabled = (path, query) => {
  let disabled = !!query.disabled;
  let target = query;
  let level = 0;
  while (level < path.length && !disabled && "rules" in target) {
    const t = target.rules[path[level]];
    if (isPojo(t) && ("rules" in t || "field" in t)) {
      disabled = !!t.disabled;
      target = t;
    }
    level++;
  }
  return disabled;
};

// src/utils/prepareQueryObjects.ts

var prepareRule = (rule, { idGenerator = generateID } = {}) => produce(rule, (draft) => {
  if (!draft.id) {
    draft.id = idGenerator();
  }
});
var prepareRuleGroup = (queryObject, { idGenerator = generateID } = {}) => produce(queryObject, (draft) => {
  if (!draft.id) {
    draft.id = idGenerator();
  }
  draft.rules = draft.rules.map(
    (r) => typeof r === "string" ? r : "rules" in r ? prepareRuleGroup(r, { idGenerator }) : prepareRule(r, { idGenerator })
  );
});
var prepareRuleOrGroup = (rg, { idGenerator = generateID } = {}) => "rules" in rg ? prepareRuleGroup(rg, { idGenerator }) : prepareRule(rg, { idGenerator });

// src/utils/queryTools.ts


// src/utils/regenerateIDs.ts
var regenerateID = (rule, { idGenerator = generateID } = {}) => JSON.parse(JSON.stringify({ ...rule, id: idGenerator() }));
var regenerateIDs = (ruleOrGroup, { idGenerator = generateID } = {}) => {
  if (!isPojo(ruleOrGroup))
    return ruleOrGroup;
  if (!("rules" in ruleOrGroup)) {
    return JSON.parse(JSON.stringify({ ...ruleOrGroup, id: idGenerator() }));
  }
  if ("combinator" in ruleOrGroup) {
    const rules2 = ruleOrGroup.rules.map(
      (r) => isPojo(r) && "rules" in r ? regenerateIDs(r, { idGenerator }) : regenerateID(r, { idGenerator })
    );
    return { ...ruleOrGroup, id: idGenerator(), rules: rules2 };
  }
  const rules = ruleOrGroup.rules.map(
    (r) => typeof r === "string" ? r : isPojo(r) && "rules" in r ? regenerateIDs(r, { idGenerator }) : regenerateID(r, { idGenerator })
  );
  return { ...ruleOrGroup, id: idGenerator(), rules };
};

// src/utils/queryTools.ts
var add = (query, ruleOrGroup, parentPath, {
  combinators = defaultCombinators,
  combinatorPreceding,
  idGenerator = generateID
} = {}) => produce(query, (draft) => {
  const parent = findPath(parentPath, draft);
  if (!parent || !("rules" in parent))
    return;
  if (!("combinator" in parent) && parent.rules.length > 0) {
    const prevCombinator = parent.rules[parent.rules.length - 2];
    parent.rules.push(
      // @ts-expect-error This is technically a type violation until the next push
      // to the rules array, but that happens immediately and unconditionally so
      // there's no significant risk.
      combinatorPreceding ?? (typeof prevCombinator === "string" ? prevCombinator : getFirstOption(combinators))
    );
  }
  parent.rules.push(prepareRuleOrGroup(ruleOrGroup, { idGenerator }));
});
var update = (query, prop, value, path, {
  resetOnFieldChange = true,
  resetOnOperatorChange = false,
  getRuleDefaultOperator = () => "=",
  getValueSources = () => ["value"],
  getRuleDefaultValue = () => ""
} = {}) => produce(query, (draft) => {
  if (prop === "combinator" && !("combinator" in draft)) {
    const parentRules = findPath(getParentPath(path), draft).rules;
    if (path[path.length - 1] % 2 === 1) {
      parentRules[path[path.length - 1]] = value;
    }
    return;
  }
  const ruleOrGroup = findPath(path, draft);
  if (!ruleOrGroup)
    return;
  const isGroup = "rules" in ruleOrGroup;
  if (ruleOrGroup[prop] === value)
    return;
  if (prop !== "valueSource") {
    ruleOrGroup[prop] = value;
  }
  if (isGroup)
    return;
  let resetValueSource = false;
  let resetValue = false;
  if (resetOnFieldChange && prop === "field") {
    ruleOrGroup.operator = getRuleDefaultOperator(value);
    resetValueSource = true;
    resetValue = true;
  }
  if (resetOnOperatorChange && prop === "operator") {
    resetValueSource = true;
    resetValue = true;
  }
  const defaultValueSource = getValueSources(ruleOrGroup.field, ruleOrGroup.operator)[0];
  if (resetValueSource && ruleOrGroup.valueSource && defaultValueSource !== ruleOrGroup.valueSource || prop === "valueSource" && value !== ruleOrGroup.valueSource) {
    resetValue = !!ruleOrGroup.valueSource || !ruleOrGroup.valueSource && value !== defaultValueSource;
    ruleOrGroup.valueSource = resetValueSource ? defaultValueSource : value;
  }
  if (resetValue) {
    ruleOrGroup.value = getRuleDefaultValue(ruleOrGroup);
  }
});
var remove = (query, path) => {
  if (
    // Can't remove the root group
    path.length === 0 || // Can't independently remove independent combinators
    !("combinator" in query) && !findPath(path, query)
  ) {
    return query;
  }
  return produce(query, (draft) => {
    const index = path[path.length - 1];
    const parent = findPath(getParentPath(path), draft);
    if (parent && "rules" in parent) {
      if (!("combinator" in parent) && parent.rules.length > 1) {
        const idxStartDelete = index === 0 ? 0 : index - 1;
        parent.rules.splice(idxStartDelete, 2);
      } else {
        parent.rules.splice(index, 1);
      }
    }
  });
};
var move = (query, oldPath, newPath, { clone = false, combinators = defaultCombinators, idGenerator = generateID } = {}) => {
  if (pathsAreEqual(oldPath, newPath) || !findPath(getParentPath(newPath), query)) {
    return query;
  }
  const ruleOrGroupOriginal = findPath(oldPath, query);
  if (!ruleOrGroupOriginal) {
    return query;
  }
  const ruleOrGroup = clone ? "rules" in ruleOrGroupOriginal ? regenerateIDs(ruleOrGroupOriginal, { idGenerator }) : regenerateID(ruleOrGroupOriginal, { idGenerator }) : ruleOrGroupOriginal;
  return produce(query, (draft) => {
    const independentCombinators = !("combinator" in draft);
    const parentOfRuleToRemove = findPath(getParentPath(oldPath), draft);
    const ruleToRemoveIndex = oldPath[oldPath.length - 1];
    const oldPrevCombinator = independentCombinators && ruleToRemoveIndex > 0 ? parentOfRuleToRemove.rules[ruleToRemoveIndex - 1] : null;
    const oldNextCombinator = independentCombinators && ruleToRemoveIndex < parentOfRuleToRemove.rules.length - 1 ? parentOfRuleToRemove.rules[ruleToRemoveIndex + 1] : null;
    if (!clone) {
      const idxStartDelete = independentCombinators ? Math.max(0, ruleToRemoveIndex - 1) : ruleToRemoveIndex;
      const deleteLength = independentCombinators ? 2 : 1;
      parentOfRuleToRemove.rules.splice(idxStartDelete, deleteLength);
    }
    const newNewPath = [...newPath];
    const commonAncestorPath = getCommonAncestorPath(oldPath, newPath);
    if (!clone && oldPath.length === commonAncestorPath.length + 1 && newPath[commonAncestorPath.length] > oldPath[commonAncestorPath.length]) {
      newNewPath[commonAncestorPath.length] -= independentCombinators ? 2 : 1;
    }
    const newNewParentPath = getParentPath(newNewPath);
    const parentToInsertInto = findPath(newNewParentPath, draft);
    const newIndex = newNewPath[newNewPath.length - 1];
    const insertRuleOrGroup = (...args) => parentToInsertInto.rules.splice(newIndex, 0, ...args);
    if (parentToInsertInto.rules.length === 0 || !independentCombinators) {
      insertRuleOrGroup(ruleOrGroup);
    } else {
      if (newIndex === 0) {
        if (ruleToRemoveIndex === 0 && oldNextCombinator) {
          insertRuleOrGroup(ruleOrGroup, oldNextCombinator);
        } else {
          const newNextCombinator = parentToInsertInto.rules[1] || oldPrevCombinator || getFirstOption(combinators);
          insertRuleOrGroup(ruleOrGroup, newNextCombinator);
        }
      } else {
        if (oldPrevCombinator) {
          insertRuleOrGroup(oldPrevCombinator, ruleOrGroup);
        } else {
          const newPrevCombinator = parentToInsertInto.rules[newIndex - 2] || oldNextCombinator || getFirstOption(combinators);
          insertRuleOrGroup(newPrevCombinator, ruleOrGroup);
        }
      }
    }
  });
};

// src/utils/toOptions.tsx

var toOptions = (arr) => isOptionGroupArray(arr) ? arr.map((og) => /* @__PURE__ */ react.createElement("optgroup", { key: og.label, label: og.label }, og.options.map((opt) => /* @__PURE__ */ react.createElement("option", { key: opt.name, value: opt.name }, opt.label)))) : Array.isArray(arr) ? arr.map((opt) => /* @__PURE__ */ react.createElement("option", { key: opt.name, value: opt.name }, opt.label)) : null;

// src/utils/transformQuery.ts

var remapProperties = (obj, propertyMap, deleteRemappedProperties) => produce3(obj, (draft) => {
  for (const [k, v] of Object.entries(propertyMap)) {
    if (k !== v) {
      draft[v] = draft[k];
      if (deleteRemappedProperties && Object.hasOwn(draft, k)) {
        delete draft[k];
      }
    }
  }
});
function transformQuery(query, options = {}) {
  const {
    ruleProcessor = (r) => r,
    ruleGroupProcessor = (rg) => rg,
    propertyMap = {},
    combinatorMap = {},
    operatorMap = {},
    deleteRemappedProperties = true
  } = options;
  const processGroup = (rg) => ({
    ...ruleGroupProcessor(
      remapProperties(
        {
          ...rg,
          ..."combinator" in rg ? { combinator: combinatorMap[rg.combinator] ?? rg.combinator } : {}
        },
        propertyMap,
        deleteRemappedProperties
      )
    ),
    rules: rg.rules.map((r, idx) => {
      if (typeof r === "string") {
        return combinatorMap[r] ?? r;
      } else if ("rules" in r) {
        return processGroup({ ...r, path: [...rg.path, idx] });
      }
      return ruleProcessor(
        remapProperties(
          {
            ...{ ...r, path: [...rg.path, idx] },
            operator: operatorMap[r.operator] ?? r.operator
          },
          propertyMap,
          deleteRemappedProperties
        )
      );
    })
  });
  return processGroup({ ...query, path: [] });
}

// src/hooks/useQueryBuilder.ts
var noop = () => {
};
var useQueryBuilder = (props) => {
  const {
    defaultQuery,
    query: queryProp,
    fields: fieldsPropOriginal,
    operators = defaultOperators,
    combinators = defaultCombinators,
    translations: translationsProp = defaultTranslations,
    enableMountQueryChange: enableMountQueryChangeProp = true,
    controlClassnames: controlClassnamesProp,
    controlElements: controlElementsProp,
    getDefaultField,
    getDefaultOperator,
    getDefaultValue,
    getOperators,
    getValueEditorType,
    getValueEditorSeparator = () => null,
    getValueSources,
    getInputType,
    getValues,
    getRuleClassname = () => "",
    getRuleGroupClassname = () => "",
    onAddRule = (r) => r,
    onAddGroup = (rg) => rg,
    onRemove = () => true,
    onQueryChange = noop,
    showCombinatorsBetweenRules = false,
    showNotToggle = false,
    showCloneButtons = false,
    showLockButtons = false,
    resetOnFieldChange = true,
    resetOnOperatorChange = false,
    autoSelectField = true,
    autoSelectOperator = true,
    addRuleToNewGroups = false,
    enableDragAndDrop: enableDragAndDropProp,
    independentCombinators,
    listsAsArrays = false,
    parseNumbers = false,
    disabled = false,
    validator,
    debugMode: debugModeProp = false,
    onLog = console.log,
    idGenerator = generateID
  } = props;
  const rqbContext = useMergedContext({
    controlClassnames: controlClassnamesProp,
    controlElements: controlElementsProp,
    debugMode: debugModeProp,
    enableDragAndDrop: enableDragAndDropProp,
    enableMountQueryChange: enableMountQueryChangeProp,
    translations: translationsProp
  });
  const {
    controlClassnames,
    controlElements,
    debugMode,
    enableDragAndDrop,
    enableMountQueryChange,
    translations
  } = rqbContext;
  const defaultField = (0,react.useMemo)(
    () => ({
      id: translations.fields.placeholderName,
      name: translations.fields.placeholderName,
      label: translations.fields.placeholderLabel
    }),
    [translations.fields.placeholderLabel, translations.fields.placeholderName]
  );
  const fieldsProp = (0,react.useMemo)(
    () => fieldsPropOriginal ?? [defaultField],
    [defaultField, fieldsPropOriginal]
  );
  const fields = (0,react.useMemo)(() => {
    const f = Array.isArray(fieldsProp) ? fieldsProp : objectKeys(fieldsProp).map((fld) => ({ ...fieldsProp[fld], name: fld })).sort((a, b) => a.label.localeCompare(b.label));
    if (isOptionGroupArray(f)) {
      if (autoSelectField) {
        return uniqOptGroups(f);
      } else {
        return uniqOptGroups([
          {
            label: translations.fields.placeholderGroupLabel,
            options: [defaultField]
          },
          ...f
        ]);
      }
    } else {
      if (autoSelectField) {
        return uniqByName(f);
      } else {
        return uniqByName([defaultField, ...f]);
      }
    }
  }, [autoSelectField, defaultField, fieldsProp, translations.fields.placeholderGroupLabel]);
  const fieldMap = (0,react.useMemo)(() => {
    if (!Array.isArray(fieldsProp)) {
      const fp = {};
      objectKeys(fieldsProp).forEach((f) => fp[f] = { ...fieldsProp[f], name: f });
      if (autoSelectField) {
        return fp;
      } else {
        return { ...fp, [translations.fields.placeholderName]: defaultField };
      }
    }
    const fm = {};
    if (isOptionGroupArray(fields)) {
      fields.forEach((f) => f.options.forEach((opt) => fm[opt.name] = opt));
    } else {
      fields.forEach((f) => fm[f.name] = f);
    }
    return fm;
  }, [autoSelectField, defaultField, fields, fieldsProp, translations.fields.placeholderName]);
  const defaultOperator = (0,react.useMemo)(
    () => ({
      id: translations.operators.placeholderName,
      name: translations.operators.placeholderName,
      label: translations.operators.placeholderLabel
    }),
    [translations.operators.placeholderLabel, translations.operators.placeholderName]
  );
  const getOperatorsMain = (0,react.useCallback)(
    (field) => {
      const fieldData = fieldMap[field];
      let opsFinal = operators;
      if (fieldData?.operators) {
        opsFinal = fieldData.operators;
      } else if (getOperators) {
        const ops = getOperators(field);
        if (ops) {
          opsFinal = ops;
        }
      }
      if (!autoSelectOperator) {
        if (isOptionGroupArray(opsFinal)) {
          opsFinal = [
            {
              label: translations.operators.placeholderGroupLabel,
              options: [defaultOperator]
            },
            ...opsFinal
          ];
        } else {
          opsFinal = [defaultOperator, ...opsFinal];
        }
      }
      return isOptionGroupArray(opsFinal) ? uniqOptGroups(opsFinal) : uniqByName(opsFinal);
    },
    [
      autoSelectOperator,
      defaultOperator,
      fieldMap,
      getOperators,
      operators,
      translations.operators.placeholderGroupLabel
    ]
  );
  const getRuleDefaultOperator = (0,react.useCallback)(
    (field) => {
      const fieldData = fieldMap[field];
      if (fieldData?.defaultOperator) {
        return fieldData.defaultOperator;
      }
      if (getDefaultOperator) {
        if (typeof getDefaultOperator === "function") {
          return getDefaultOperator(field);
        } else {
          return getDefaultOperator;
        }
      }
      const ops = getOperatorsMain(field) ?? /* istanbul ignore next */
      [];
      return ops.length ? getFirstOption(ops) ?? /* istanbul ignore next */
      "" : (
        /* istanbul ignore next */
        ""
      );
    },
    [fieldMap, getDefaultOperator, getOperatorsMain]
  );
  const getValueEditorTypeMain = (0,react.useCallback)(
    (field, operator) => {
      if (getValueEditorType) {
        const vet = getValueEditorType(field, operator);
        if (vet)
          return vet;
      }
      return "text";
    },
    [getValueEditorType]
  );
  const getValueSourcesMain = (0,react.useCallback)(
    (field, operator) => getValueSourcesUtil(fieldMap[field], operator, getValueSources),
    [fieldMap, getValueSources]
  );
  const getValuesMain = (0,react.useCallback)(
    (field, operator) => {
      const fieldData = fieldMap[field];
      if (fieldData?.values) {
        return fieldData.values;
      }
      if (getValues) {
        const vals = getValues(field, operator);
        if (vals)
          return vals;
      }
      return [];
    },
    [fieldMap, getValues]
  );
  const getRuleDefaultValue = (0,react.useCallback)(
    (rule) => {
      const fieldData = fieldMap[rule.field];
      if (fieldData?.defaultValue !== void 0 && fieldData.defaultValue !== null) {
        return fieldData.defaultValue;
      } else if (getDefaultValue) {
        return getDefaultValue(rule);
      }
      let value = "";
      const values = getValuesMain(rule.field, rule.operator);
      const getFirstOptionsFrom = (opts) => {
        const firstOption = getFirstOption(opts);
        if (rule.operator === "between" || rule.operator === "notBetween") {
          const valueAsArray = [firstOption, firstOption];
          return listsAsArrays ? valueAsArray : joinWith(
            valueAsArray.map((v) => v ?? /* istanbul ignore next */
            ""),
            ","
          );
        } else {
          return firstOption;
        }
      };
      if (rule.valueSource === "field") {
        const filteredFields = filterFieldsByComparator(fieldData, fields, rule.operator);
        if (filteredFields.length > 0) {
          value = getFirstOptionsFrom(filteredFields);
        } else {
          value = "";
        }
      } else if (values.length) {
        value = getFirstOptionsFrom(values);
      } else {
        const editorType = getValueEditorTypeMain(rule.field, rule.operator);
        if (editorType === "checkbox") {
          value = false;
        }
      }
      return value;
    },
    [fieldMap, fields, getDefaultValue, getValueEditorTypeMain, getValuesMain, listsAsArrays]
  );
  const getInputTypeMain = (0,react.useCallback)(
    (field, operator) => {
      if (getInputType) {
        const inputType = getInputType(field, operator);
        if (inputType)
          return inputType;
      }
      return "text";
    },
    [getInputType]
  );
  const createRule = (0,react.useCallback)(() => {
    let field = "";
    if (fields?.length > 0 && fields[0]) {
      field = getFirstOption(fields) ?? /* istanbul ignore next */
      "";
    }
    if (getDefaultField) {
      if (typeof getDefaultField === "function") {
        field = getDefaultField(fields);
      } else {
        field = getDefaultField;
      }
    }
    const operator = getRuleDefaultOperator(field);
    const valueSource = getValueSourcesMain(field, operator)[0] ?? "value";
    const newRule = {
      id: idGenerator(),
      field,
      operator,
      valueSource,
      value: ""
    };
    const value = getRuleDefaultValue(newRule);
    return { ...newRule, value };
  }, [
    fields,
    getDefaultField,
    getRuleDefaultOperator,
    getRuleDefaultValue,
    getValueSourcesMain,
    idGenerator
  ]);
  const createRuleGroup = (0,react.useCallback)(() => {
    if (independentCombinators) {
      return {
        id: idGenerator(),
        rules: addRuleToNewGroups ? [createRule()] : [],
        not: false
      };
    }
    return {
      id: idGenerator(),
      rules: addRuleToNewGroups ? [createRule()] : [],
      combinator: getFirstOption(combinators) ?? /* istanbul ignore next */
      "",
      not: false
    };
  }, [addRuleToNewGroups, combinators, createRule, idGenerator, independentCombinators]);
  const isFirstRender = (0,react.useRef)(true);
  const [queryState, setQueryState] = (0,react.useState)(
    defaultQuery ? prepareRuleGroup(defaultQuery, { idGenerator }) : createRuleGroup()
  );
  const query = queryProp ? isFirstRender.current ? prepareRuleGroup(queryProp, { idGenerator }) : queryProp : queryState;
  useControlledOrUncontrolled({
    defaultQuery,
    queryProp,
    isFirstRender: isFirstRender.current
  });
  isFirstRender.current = false;
  (0,react.useEffect)(() => {
    if (enableMountQueryChange) {
      onQueryChange(query);
    }
  }, []);
  const uncontrolled = !queryProp;
  const dispatch = (0,react.useCallback)(
    (newQuery) => {
      if (uncontrolled) {
        setQueryState(newQuery);
      }
      onQueryChange(newQuery);
    },
    [onQueryChange, uncontrolled]
  );
  const queryDisabled = (0,react.useMemo)(
    () => disabled === true || Array.isArray(disabled) && disabled.some((p) => p.length === 0),
    [disabled]
  );
  const disabledPaths = (0,react.useMemo)(() => Array.isArray(disabled) && disabled || [], [disabled]);
  const onRuleAdd = (rule, parentPath, context) => {
    if (pathIsDisabled(parentPath, query) || queryDisabled) {
      if (debugMode) {
        onLog({ type: LogType.parentPathDisabled, rule, parentPath, query });
      }
      return;
    }
    const newRule = onAddRule(rule, parentPath, query, context);
    if (!newRule) {
      if (debugMode) {
        onLog({ type: LogType.onAddRuleFalse, rule, parentPath, query });
      }
      return;
    }
    const newQuery = add(query, newRule, parentPath, {
      combinators,
      combinatorPreceding: newRule.combinatorPreceding ?? void 0
    });
    if (debugMode) {
      onLog({ type: LogType.add, query, newQuery, newRule, parentPath });
    }
    dispatch(newQuery);
  };
  const onGroupAdd = (ruleGroup, parentPath, context) => {
    if (pathIsDisabled(parentPath, query) || queryDisabled) {
      if (debugMode) {
        onLog({
          type: LogType.parentPathDisabled,
          ruleGroup,
          parentPath,
          query
        });
      }
      return;
    }
    const newGroup = onAddGroup(ruleGroup, parentPath, query, context);
    if (!newGroup) {
      if (debugMode) {
        onLog({ type: LogType.onAddGroupFalse, ruleGroup, parentPath, query });
      }
      return;
    }
    const newQuery = add(query, newGroup, parentPath, {
      combinators,
      combinatorPreceding: newGroup.combinatorPreceding ?? void 0
    });
    if (debugMode) {
      onLog({ type: LogType.add, query, newQuery, newGroup, parentPath });
    }
    dispatch(newQuery);
  };
  const onPropChange = (prop, value, path) => {
    if (pathIsDisabled(path, query) && prop !== "disabled" || queryDisabled) {
      if (debugMode) {
        onLog({ type: LogType.pathDisabled, path, prop, value, query });
      }
      return;
    }
    const newQuery = update(query, prop, value, path, {
      resetOnFieldChange,
      resetOnOperatorChange,
      getRuleDefaultOperator,
      getValueSources: getValueSourcesMain,
      getRuleDefaultValue
    });
    if (debugMode) {
      onLog({ type: LogType.update, query, newQuery, prop, value, path });
    }
    dispatch(newQuery);
  };
  const onRuleOrGroupRemove = (path, context) => {
    if (pathIsDisabled(path, query) || queryDisabled) {
      if (debugMode) {
        onLog({ type: LogType.pathDisabled, path, query });
      }
      return;
    }
    const ruleOrGroup = findPath(path, query);
    if (ruleOrGroup) {
      if (onRemove(ruleOrGroup, path, query, context)) {
        const newQuery = remove(query, path);
        if (debugMode) {
          onLog({ type: LogType.remove, query, newQuery, path, ruleOrGroup });
        }
        dispatch(newQuery);
      } else {
        if (debugMode) {
          onLog({ type: LogType.onRemoveFalse, ruleOrGroup, path, query });
        }
      }
    }
  };
  const moveRule = (oldPath, newPath, clone) => {
    if (pathIsDisabled(oldPath, query) || queryDisabled) {
      if (debugMode) {
        onLog({ type: LogType.pathDisabled, oldPath, newPath, query });
      }
      return;
    }
    const newQuery = move(query, oldPath, newPath, { clone, combinators });
    if (debugMode) {
      onLog({ type: LogType.move, query, newQuery, oldPath, newPath, clone });
    }
    dispatch(newQuery);
  };
  const { validationResult, validationMap } = (0,react.useMemo)(() => {
    const validationResult2 = typeof validator === "function" ? validator(query) : {};
    const validationMap2 = typeof validationResult2 === "object" ? validationResult2 : {};
    return { validationResult: validationResult2, validationMap: validationMap2 };
  }, [query, validator]);
  const schema = (0,react.useMemo)(
    () => ({
      fields,
      fieldMap,
      combinators,
      classNames: controlClassnames,
      createRule,
      createRuleGroup,
      controls: controlElements,
      getOperators: getOperatorsMain,
      getValueEditorType: getValueEditorTypeMain,
      getValueSources: getValueSourcesMain,
      getInputType: getInputTypeMain,
      getValues: getValuesMain,
      getValueEditorSeparator,
      getRuleClassname,
      getRuleGroupClassname,
      showCombinatorsBetweenRules,
      showNotToggle,
      showCloneButtons,
      showLockButtons,
      autoSelectField,
      autoSelectOperator,
      addRuleToNewGroups,
      enableDragAndDrop,
      independentCombinators: !!independentCombinators,
      listsAsArrays,
      parseNumbers,
      validationMap,
      disabledPaths
    }),
    [
      addRuleToNewGroups,
      autoSelectField,
      autoSelectOperator,
      combinators,
      controlClassnames,
      controlElements,
      createRule,
      createRuleGroup,
      disabledPaths,
      enableDragAndDrop,
      fieldMap,
      fields,
      getInputTypeMain,
      getOperatorsMain,
      getRuleClassname,
      getRuleGroupClassname,
      getValueEditorTypeMain,
      getValuesMain,
      getValueSourcesMain,
      getValueEditorSeparator,
      independentCombinators,
      listsAsArrays,
      parseNumbers,
      showCloneButtons,
      showCombinatorsBetweenRules,
      showLockButtons,
      showNotToggle,
      validationMap
    ]
  );
  const actions = {
    onRuleAdd,
    onGroupAdd,
    onRuleRemove: onRuleOrGroupRemove,
    onGroupRemove: onRuleOrGroupRemove,
    onPropChange,
    moveRule
  };
  const wrapperClassName = (0,react.useMemo)(
    () => clsx(standardClassnames.queryBuilder, clsx(controlClassnames.queryBuilder), {
      [standardClassnames.disabled]: query.disabled || queryDisabled,
      [standardClassnames.valid]: typeof validationResult === "boolean" && validationResult,
      [standardClassnames.invalid]: typeof validationResult === "boolean" && !validationResult
    }),
    [controlClassnames.queryBuilder, queryDisabled, query.disabled, validationResult]
  );
  return {
    actions,
    query,
    queryDisabled,
    rqbContext,
    schema,
    translations,
    wrapperClassName
  };
};

// src/hooks/useRule.ts


var useRule = (props) => {
  const {
    id,
    path,
    rule: ruleProp,
    schema,
    actions,
    disabled: disabledProp,
    parentDisabled,
    field: fieldProp,
    operator: operatorProp,
    value: valueProp,
    valueSource: valueSourceProp,
    dragMonitorId = "",
    dropMonitorId = "",
    dndRef = null,
    dragRef = null,
    isDragging = false,
    isOver = false
  } = props;
  const {
    classNames: classNamesProp,
    fields,
    fieldMap,
    getInputType,
    getOperators,
    getValueEditorType,
    getValueEditorSeparator,
    getValueSources,
    getValues,
    validationMap,
    enableDragAndDrop,
    getRuleClassname
  } = schema;
  const { moveRule, onPropChange, onRuleRemove } = actions;
  const disabled = !!parentDisabled || !!disabledProp;
  const rule = ruleProp ? ruleProp : {
    field: fieldProp,
    operator: operatorProp,
    value: valueProp,
    valueSource: valueSourceProp
  };
  const { field, operator, value, valueSource } = rule;
  useDeprecatedProps("rule", !!ruleProp);
  useReactDndWarning(enableDragAndDrop, !!(dragMonitorId || dropMonitorId || dndRef || dragRef));
  const classNames = (0,react.useMemo)(
    () => ({
      dragHandle: clsx(standardClassnames.dragHandle, classNamesProp.dragHandle),
      fields: clsx(standardClassnames.fields, classNamesProp.fields),
      operators: clsx(standardClassnames.operators, classNamesProp.operators),
      valueSource: clsx(standardClassnames.valueSource, classNamesProp.valueSource),
      value: clsx(standardClassnames.value, classNamesProp.value),
      cloneRule: clsx(standardClassnames.cloneRule, classNamesProp.cloneRule),
      lockRule: clsx(standardClassnames.lockRule, classNamesProp.lockRule),
      removeRule: clsx(standardClassnames.removeRule, classNamesProp.removeRule)
    }),
    [
      classNamesProp.dragHandle,
      classNamesProp.fields,
      classNamesProp.operators,
      classNamesProp.valueSource,
      classNamesProp.value,
      classNamesProp.cloneRule,
      classNamesProp.lockRule,
      classNamesProp.removeRule
    ]
  );
  const generateOnChangeHandler = (prop) => (value2) => {
    if (!disabled) {
      onPropChange(prop, value2, path);
    }
  };
  const cloneRule = (_event) => {
    if (!disabled) {
      const newPath = [...getParentPath(path), path[path.length - 1] + 1];
      moveRule(path, newPath, true);
    }
  };
  const toggleLockRule = (_event) => {
    onPropChange("disabled", !disabled, path);
  };
  const removeRule = (_event) => {
    if (!disabled) {
      onRuleRemove(path);
    }
  };
  const fieldData = fieldMap?.[field] ?? { name: field, label: field };
  const inputType = fieldData.inputType ?? getInputType(field, operator);
  const operators = getOperators(field);
  const operatorObject = getOption(operators, operator);
  const arity = operatorObject?.arity;
  const hideValueControls = typeof arity === "string" && arity === "unary" || typeof arity === "number" && arity < 2;
  const valueSources = typeof fieldData.valueSources === "function" ? fieldData.valueSources(operator) : fieldData.valueSources ?? getValueSources(field, operator);
  const valueEditorType = valueSource === "field" ? "select" : (typeof fieldData.valueEditorType === "function" ? fieldData.valueEditorType(operator) : fieldData.valueEditorType) ?? getValueEditorType(field, operator);
  const valueEditorSeparator = getValueEditorSeparator(field, operator);
  const values = valueSource === "field" ? filterFieldsByComparator(fieldData, fields, operator) : fieldData.values ?? getValues(field, operator);
  const valueSourceOptions = valueSources.map((vs) => ({ name: vs, label: vs }));
  const validationResult = validationMap[id ?? /* istanbul ignore next */
  ""] ?? (typeof fieldData.validator === "function" ? fieldData.validator({ id, field, operator, value }) : null);
  const validationClassName = getValidationClassNames(validationResult);
  const fieldBasedClassName = (0,react.useMemo)(() => fieldData?.className ?? "", [fieldData?.className]);
  const operatorBasedClassName = (0,react.useMemo)(
    () => operatorObject?.className ?? "",
    [operatorObject?.className]
  );
  const outerClassName = clsx(
    getRuleClassname(rule),
    fieldBasedClassName,
    operatorBasedClassName,
    standardClassnames.rule,
    classNamesProp.rule,
    {
      [standardClassnames.disabled]: disabled,
      [standardClassnames.dndDragging]: isDragging,
      [standardClassnames.dndOver]: isOver
    },
    validationClassName
  );
  return {
    classNames,
    cloneRule,
    disabled,
    dndRef,
    dragMonitorId,
    dragRef,
    dropMonitorId,
    fieldData,
    generateOnChangeHandler,
    hideValueControls,
    inputType,
    operators,
    outerClassName,
    removeRule,
    rule,
    toggleLockRule,
    validationResult,
    valueEditorSeparator,
    valueEditorType,
    values,
    valueSourceOptions,
    valueSources
  };
};

// src/hooks/useRuleGroup.ts


var useRuleGroup = (props) => {
  const {
    id,
    path,
    ruleGroup: ruleGroupProp,
    schema,
    actions,
    disabled: disabledProp,
    parentDisabled,
    combinator: combinatorProp,
    rules: rulesProp,
    not: notProp,
    // Drag-and-drop
    dragMonitorId = "",
    dropMonitorId = "",
    previewRef = null,
    dragRef = null,
    dropRef = null,
    isDragging = false,
    isOver = false
  } = props;
  const {
    classNames: classNamesProp,
    combinators,
    createRule,
    createRuleGroup,
    independentCombinators,
    validationMap,
    enableDragAndDrop,
    getRuleGroupClassname
  } = schema;
  const { onGroupAdd, onGroupRemove, onPropChange, onRuleAdd, moveRule } = actions;
  const disabled = !!parentDisabled || !!disabledProp;
  const ruleGroup = ruleGroupProp ? { ...ruleGroupProp } : { rules: rulesProp, not: notProp };
  const firstCombinator = getFirstOption(combinators);
  const combinator = ruleGroupProp && "combinator" in ruleGroupProp ? ruleGroupProp.combinator : !ruleGroupProp ? combinatorProp ?? firstCombinator : firstCombinator;
  if (!independentCombinators) {
    ruleGroup.combinator = combinator;
  }
  useDeprecatedProps("ruleGroup", !!ruleGroupProp);
  const classNames = (0,react.useMemo)(
    () => ({
      header: clsx(standardClassnames.header, classNamesProp.header, {
        [standardClassnames.dndOver]: isOver
      }),
      dragHandle: clsx(standardClassnames.dragHandle, classNamesProp.dragHandle),
      combinators: clsx(standardClassnames.combinators, classNamesProp.combinators),
      notToggle: clsx(standardClassnames.notToggle, classNamesProp.notToggle),
      addRule: clsx(standardClassnames.addRule, classNamesProp.addRule),
      addGroup: clsx(standardClassnames.addGroup, classNamesProp.addGroup),
      cloneGroup: clsx(standardClassnames.cloneGroup, classNamesProp.cloneGroup),
      lockGroup: clsx(standardClassnames.lockGroup, classNamesProp.lockGroup),
      removeGroup: clsx(standardClassnames.removeGroup, classNamesProp.removeGroup),
      body: clsx(standardClassnames.body, classNamesProp.body)
    }),
    [
      classNamesProp.addGroup,
      classNamesProp.addRule,
      classNamesProp.body,
      classNamesProp.cloneGroup,
      classNamesProp.combinators,
      classNamesProp.dragHandle,
      classNamesProp.header,
      classNamesProp.lockGroup,
      classNamesProp.notToggle,
      classNamesProp.removeGroup,
      isOver
    ]
  );
  useReactDndWarning(
    enableDragAndDrop,
    !!(dragMonitorId || dropMonitorId || previewRef || dragRef || dropRef)
  );
  const onCombinatorChange = (value) => {
    if (!disabled) {
      onPropChange("combinator", value, path);
    }
  };
  const onIndependentCombinatorChange = (value, index) => {
    if (!disabled) {
      onPropChange("combinator", value, path.concat([index]));
    }
  };
  const onNotToggleChange = (checked) => {
    if (!disabled) {
      onPropChange("not", checked, path);
    }
  };
  const addRule = (_event, context) => {
    if (!disabled) {
      const newRule = createRule();
      onRuleAdd(newRule, path, context);
    }
  };
  const addGroup = (_event, context) => {
    if (!disabled) {
      const newGroup = createRuleGroup();
      onGroupAdd(newGroup, path, context);
    }
  };
  const cloneGroup = (_event) => {
    if (!disabled) {
      const newPath = [...getParentPath(path), path[path.length - 1] + 1];
      moveRule(path, newPath, true);
    }
  };
  const toggleLockGroup = (_event) => {
    onPropChange("disabled", !disabled, path);
  };
  const removeGroup = (_event) => {
    if (!disabled) {
      onGroupRemove(path);
    }
  };
  const validationResult = validationMap[id ?? /* istanbul ignore next */
  ""];
  const validationClassName = getValidationClassNames(validationResult);
  const combinatorBasedClassName = (0,react.useMemo)(
    () => independentCombinators ? null : getOption(combinators, combinator)?.className ?? "",
    [combinator, combinators, independentCombinators]
  );
  const outerClassName = clsx(
    getRuleGroupClassname(ruleGroup),
    combinatorBasedClassName,
    standardClassnames.ruleGroup,
    classNamesProp.ruleGroup,
    {
      [standardClassnames.disabled]: disabled,
      [standardClassnames.dndDragging]: isDragging
    },
    validationClassName
  );
  return {
    addGroup,
    addRule,
    classNames,
    cloneGroup,
    combinator,
    disabled,
    dragMonitorId,
    dragRef,
    dropMonitorId,
    dropRef,
    isDragging,
    isOver,
    onCombinatorChange,
    onGroupAdd,
    onIndependentCombinatorChange,
    onNotToggleChange,
    outerClassName,
    parentDisabled,
    previewRef,
    removeGroup,
    ruleGroup,
    toggleLockGroup,
    validationClassName,
    validationResult
  };
};

// src/hooks/useSelectElementChangeHandler.ts

var useSelectElementChangeHandler = ({
  multiple,
  onChange
}) => {
  const selectElementChangeHandler = (0,react.useMemo)(
    () => multiple ? (e) => onChange(Array.from(e.target.selectedOptions).map((o) => o.value)) : (e) => onChange(e.target.value),
    [multiple, onChange]
  );
  return selectElementChangeHandler;
};

// src/hooks/useValueEditor.ts


var useValueEditor = ({
  handleOnChange,
  inputType,
  operator,
  value,
  listsAsArrays,
  parseNumbers,
  values,
  skipHook
}) => {
  (0,react.useEffect)(() => {
    if (skipHook)
      return;
    if (inputType === "number" && !["between", "notBetween", "in", "notIn"].includes(operator) && (typeof value === "string" && value.includes(",") || Array.isArray(value))) {
      handleOnChange(toArray(value)[0] ?? "");
    }
  }, [handleOnChange, inputType, operator, skipHook, value]);
  const valueAsArray = (0,react.useMemo)(() => toArray(value), [value]);
  const multiValueHandler = (0,react.useCallback)(
    (v, i) => {
      const val = produce(valueAsArray, (va) => {
        va[i] = parseNumber(v, { parseNumbers });
        if (i === 0 && (operator === "between" || operator === "notBetween") && !va[1]) {
          va[1] = getFirstOption(values);
        }
      });
      handleOnChange(listsAsArrays ? val : joinWith(val, ","));
    },
    [handleOnChange, listsAsArrays, operator, parseNumbers, valueAsArray, values]
  );
  return {
    /**
     * Array of values for when the main value represents a list, e.g. when operator
     * is "between" or "in".
     */
    valueAsArray,
    /**
     * A handler for a series of editors, e.g. when operator is "between".
     * @param {string} val The new value for the editor
     * @param {number} idx The index of the editor
     */
    multiValueHandler
  };
};

// src/hooks/useValueSelector.ts

var useValueSelector = ({
  handleOnChange,
  listsAsArrays = false,
  multiple = false,
  value
}) => {
  const onChange = (0,react.useCallback)(
    (v) => {
      if (multiple) {
        const valueAsArray = toArray(v);
        handleOnChange(listsAsArrays ? valueAsArray : joinWith(valueAsArray, ","));
      } else {
        handleOnChange(v);
      }
    },
    [handleOnChange, listsAsArrays, multiple]
  );
  const val = (0,react.useMemo)(() => multiple ? toArray(value) : value, [multiple, value]);
  return {
    /**
     * Memoized change handler for value selectors
     */
    onChange,
    /**
     * The value as provided or, if appropriate, as an array
     */
    val
  };
};

// src/components/Rule.tsx
var Rule = (props) => {
  const r = { ...props, ...useRule(props) };
  const [cloneRule, toggleLockRule, removeRule] = [r.cloneRule, r.toggleLockRule, r.removeRule].map(
    (f) => (event) => {
      event.preventDefault();
      event.stopPropagation();
      f();
    }
  );
  return /* @__PURE__ */ react.createElement(
    "div",
    {
      ref: r.dndRef,
      "data-testid": TestID.rule,
      "data-dragmonitorid": r.dragMonitorId,
      "data-dropmonitorid": r.dropMonitorId,
      className: r.outerClassName,
      "data-rule-id": r.id,
      "data-level": r.path.length,
      "data-path": JSON.stringify(r.path)
    },
    /* @__PURE__ */ react.createElement(RuleComponents, { ...r, ...{ cloneRule, toggleLockRule, removeRule } })
  );
};
Rule.displayName = "Rule";
var RuleComponents = (r) => {
  const {
    schema: {
      controls: {
        dragHandle: DragHandleControlElement,
        fieldSelector: FieldSelectorControlElement,
        operatorSelector: OperatorSelectorControlElement,
        valueSourceSelector: ValueSourceSelectorControlElement,
        valueEditor: ValueEditorControlElement,
        cloneRuleAction: CloneRuleActionControlElement,
        lockRuleAction: LockRuleActionControlElement,
        removeRuleAction: RemoveRuleActionControlElement
      }
    }
  } = r;
  return /* @__PURE__ */ react.createElement(react.Fragment, null, /* @__PURE__ */ react.createElement(
    DragHandleControlElement,
    {
      testID: TestID.dragHandle,
      ref: r.dragRef,
      level: r.path.length,
      path: r.path,
      title: r.translations.dragHandle.title,
      label: r.translations.dragHandle.label,
      className: r.classNames.dragHandle,
      disabled: r.disabled,
      context: r.context,
      validation: r.validationResult,
      schema: r.schema
    }
  ), /* @__PURE__ */ react.createElement(
    FieldSelectorControlElement,
    {
      testID: TestID.fields,
      options: r.schema.fields,
      title: r.translations.fields.title,
      value: r.rule.field,
      operator: r.rule.operator,
      className: r.classNames.fields,
      handleOnChange: r.generateOnChangeHandler("field"),
      level: r.path.length,
      path: r.path,
      disabled: r.disabled,
      context: r.context,
      validation: r.validationResult,
      schema: r.schema
    }
  ), (r.schema.autoSelectField || r.rule.field !== r.translations.fields.placeholderName) && /* @__PURE__ */ react.createElement(react.Fragment, null, /* @__PURE__ */ react.createElement(
    OperatorSelectorControlElement,
    {
      testID: TestID.operators,
      field: r.rule.field,
      fieldData: r.fieldData,
      title: r.translations.operators.title,
      options: r.operators,
      value: r.rule.operator,
      className: r.classNames.operators,
      handleOnChange: r.generateOnChangeHandler("operator"),
      level: r.path.length,
      path: r.path,
      disabled: r.disabled,
      context: r.context,
      validation: r.validationResult,
      schema: r.schema
    }
  ), (r.schema.autoSelectOperator || r.rule.operator !== r.translations.operators.placeholderName) && !r.hideValueControls && /* @__PURE__ */ react.createElement(react.Fragment, null, !["null", "notNull"].includes(r.rule.operator) && r.valueSources.length > 1 && /* @__PURE__ */ react.createElement(
    ValueSourceSelectorControlElement,
    {
      testID: TestID.valueSourceSelector,
      field: r.rule.field,
      fieldData: r.fieldData,
      title: r.translations.valueSourceSelector.title,
      options: r.valueSourceOptions,
      value: r.rule.valueSource ?? "value",
      className: r.classNames.valueSource,
      handleOnChange: r.generateOnChangeHandler("valueSource"),
      level: r.path.length,
      path: r.path,
      disabled: r.disabled,
      context: r.context,
      validation: r.validationResult,
      schema: r.schema
    }
  ), /* @__PURE__ */ react.createElement(
    ValueEditorControlElement,
    {
      testID: TestID.valueEditor,
      field: r.rule.field,
      fieldData: r.fieldData,
      title: r.translations.value.title,
      operator: r.rule.operator,
      value: r.rule.value,
      valueSource: r.rule.valueSource ?? "value",
      type: r.valueEditorType,
      inputType: r.inputType,
      values: r.values,
      listsAsArrays: r.schema.listsAsArrays,
      parseNumbers: r.schema.parseNumbers,
      separator: r.valueEditorSeparator,
      className: r.classNames.value,
      handleOnChange: r.generateOnChangeHandler("value"),
      level: r.path.length,
      path: r.path,
      disabled: r.disabled,
      context: r.context,
      validation: r.validationResult,
      schema: r.schema
    }
  ))), r.schema.showCloneButtons && /* @__PURE__ */ react.createElement(
    CloneRuleActionControlElement,
    {
      testID: TestID.cloneRule,
      label: r.translations.cloneRule.label,
      title: r.translations.cloneRule.title,
      className: r.classNames.cloneRule,
      handleOnClick: r.cloneRule,
      level: r.path.length,
      path: r.path,
      disabled: r.disabled,
      context: r.context,
      validation: r.validationResult,
      ruleOrGroup: r.rule,
      schema: r.schema
    }
  ), r.schema.showLockButtons && /* @__PURE__ */ react.createElement(
    LockRuleActionControlElement,
    {
      testID: TestID.lockRule,
      label: r.translations.lockRule.label,
      title: r.translations.lockRule.title,
      className: r.classNames.lockRule,
      handleOnClick: r.toggleLockRule,
      level: r.path.length,
      path: r.path,
      disabled: r.disabled,
      disabledTranslation: r.parentDisabled ? void 0 : r.translations.lockRuleDisabled,
      context: r.context,
      validation: r.validationResult,
      ruleOrGroup: r.rule,
      schema: r.schema
    }
  ), /* @__PURE__ */ react.createElement(
    RemoveRuleActionControlElement,
    {
      testID: TestID.removeRule,
      label: r.translations.removeRule.label,
      title: r.translations.removeRule.title,
      className: r.classNames.removeRule,
      handleOnClick: r.removeRule,
      level: r.path.length,
      path: r.path,
      disabled: r.disabled,
      context: r.context,
      validation: r.validationResult,
      ruleOrGroup: r.rule,
      schema: r.schema
    }
  ));
};

// src/components/RuleGroup.tsx


var RuleGroup = (props) => {
  const rg = { ...props, ...useRuleGroup(props) };
  const [addRule, addGroup, cloneGroup, toggleLockGroup, removeGroup] = [
    rg.addRule,
    rg.addGroup,
    rg.cloneGroup,
    rg.toggleLockGroup,
    rg.removeGroup
  ].map((f) => (event, context) => {
    event.preventDefault();
    event.stopPropagation();
    f(event, context);
  });
  const subComponentProps = { ...rg, addRule, addGroup, cloneGroup, toggleLockGroup, removeGroup };
  return /* @__PURE__ */ react.createElement(
    "div",
    {
      ref: rg.previewRef,
      className: rg.outerClassName,
      "data-testid": TestID.ruleGroup,
      "data-dragmonitorid": rg.dragMonitorId,
      "data-dropmonitorid": rg.dropMonitorId,
      "data-rule-group-id": rg.id,
      "data-level": rg.path.length,
      "data-path": JSON.stringify(rg.path)
    },
    /* @__PURE__ */ react.createElement("div", { ref: rg.dropRef, className: rg.classNames.header }, /* @__PURE__ */ react.createElement(RuleGroupHeaderComponents, { ...subComponentProps })),
    /* @__PURE__ */ react.createElement("div", { className: rg.classNames.body }, /* @__PURE__ */ react.createElement(RuleGroupBodyComponents, { ...subComponentProps }))
  );
};
RuleGroup.displayName = "RuleGroup";
var RuleGroupHeaderComponents = (rg) => {
  const {
    schema: {
      controls: {
        dragHandle: DragHandleControlElement,
        combinatorSelector: CombinatorSelectorControlElement,
        notToggle: NotToggleControlElement,
        addRuleAction: AddRuleActionControlElement,
        addGroupAction: AddGroupActionControlElement,
        cloneGroupAction: CloneGroupActionControlElement,
        lockGroupAction: LockGroupActionControlElement,
        removeGroupAction: RemoveGroupActionControlElement
      }
    }
  } = rg;
  return /* @__PURE__ */ react.createElement(react.Fragment, null, rg.path.length > 0 && /* @__PURE__ */ react.createElement(
    DragHandleControlElement,
    {
      testID: TestID.dragHandle,
      ref: rg.dragRef,
      level: rg.path.length,
      path: rg.path,
      title: rg.translations.dragHandle.title,
      label: rg.translations.dragHandle.label,
      className: rg.classNames.dragHandle,
      disabled: rg.disabled,
      context: rg.context,
      validation: rg.validationResult,
      schema: rg.schema
    }
  ), !rg.schema.showCombinatorsBetweenRules && !rg.schema.independentCombinators && /* @__PURE__ */ react.createElement(
    CombinatorSelectorControlElement,
    {
      testID: TestID.combinators,
      options: rg.schema.combinators,
      value: rg.combinator,
      title: rg.translations.combinators.title,
      className: rg.classNames.combinators,
      handleOnChange: rg.onCombinatorChange,
      rules: rg.ruleGroup.rules,
      level: rg.path.length,
      path: rg.path,
      disabled: rg.disabled,
      context: rg.context,
      validation: rg.validationResult,
      schema: rg.schema
    }
  ), rg.schema.showNotToggle && /* @__PURE__ */ react.createElement(
    NotToggleControlElement,
    {
      testID: TestID.notToggle,
      className: rg.classNames.notToggle,
      title: rg.translations.notToggle.title,
      label: rg.translations.notToggle.label,
      checked: rg.ruleGroup.not,
      handleOnChange: rg.onNotToggleChange,
      level: rg.path.length,
      disabled: rg.disabled,
      path: rg.path,
      context: rg.context,
      validation: rg.validationResult,
      schema: rg.schema
    }
  ), /* @__PURE__ */ react.createElement(
    AddRuleActionControlElement,
    {
      testID: TestID.addRule,
      label: rg.translations.addRule.label,
      title: rg.translations.addRule.title,
      className: rg.classNames.addRule,
      handleOnClick: rg.addRule,
      rules: rg.ruleGroup.rules,
      level: rg.path.length,
      path: rg.path,
      disabled: rg.disabled,
      context: rg.context,
      validation: rg.validationResult,
      ruleOrGroup: rg.ruleGroup,
      schema: rg.schema
    }
  ), /* @__PURE__ */ react.createElement(
    AddGroupActionControlElement,
    {
      testID: TestID.addGroup,
      label: rg.translations.addGroup.label,
      title: rg.translations.addGroup.title,
      className: rg.classNames.addGroup,
      handleOnClick: rg.addGroup,
      rules: rg.ruleGroup.rules,
      level: rg.path.length,
      path: rg.path,
      disabled: rg.disabled,
      context: rg.context,
      validation: rg.validationResult,
      ruleOrGroup: rg.ruleGroup,
      schema: rg.schema
    }
  ), rg.schema.showCloneButtons && rg.path.length >= 1 && /* @__PURE__ */ react.createElement(
    CloneGroupActionControlElement,
    {
      testID: TestID.cloneGroup,
      label: rg.translations.cloneRuleGroup.label,
      title: rg.translations.cloneRuleGroup.title,
      className: rg.classNames.cloneGroup,
      handleOnClick: rg.cloneGroup,
      rules: rg.ruleGroup.rules,
      level: rg.path.length,
      path: rg.path,
      disabled: rg.disabled,
      context: rg.context,
      validation: rg.validationResult,
      ruleOrGroup: rg.ruleGroup,
      schema: rg.schema
    }
  ), rg.schema.showLockButtons && /* @__PURE__ */ react.createElement(
    LockGroupActionControlElement,
    {
      testID: TestID.lockGroup,
      label: rg.translations.lockGroup.label,
      title: rg.translations.lockGroup.title,
      className: rg.classNames.lockGroup,
      handleOnClick: rg.toggleLockGroup,
      rules: rg.ruleGroup.rules,
      level: rg.path.length,
      path: rg.path,
      disabled: rg.disabled,
      disabledTranslation: rg.parentDisabled ? void 0 : rg.translations.lockGroupDisabled,
      context: rg.context,
      validation: rg.validationResult,
      ruleOrGroup: rg.ruleGroup,
      schema: rg.schema
    }
  ), rg.path.length >= 1 && /* @__PURE__ */ react.createElement(
    RemoveGroupActionControlElement,
    {
      testID: TestID.removeGroup,
      label: rg.translations.removeGroup.label,
      title: rg.translations.removeGroup.title,
      className: rg.classNames.removeGroup,
      handleOnClick: rg.removeGroup,
      rules: rg.ruleGroup.rules,
      level: rg.path.length,
      path: rg.path,
      disabled: rg.disabled,
      context: rg.context,
      validation: rg.validationResult,
      ruleOrGroup: rg.ruleGroup,
      schema: rg.schema
    }
  ));
};
var RuleGroupBodyComponents = (rg) => {
  const {
    schema: {
      controls: {
        combinatorSelector: CombinatorSelectorControlElement,
        inlineCombinator: InlineCombinatorControlElement,
        ruleGroup: RuleGroupControlElement,
        rule: RuleControlElement
      }
    }
  } = rg;
  return /* @__PURE__ */ react.createElement(react.Fragment, null, rg.ruleGroup.rules.map((r, idx) => {
    const thisPath = [...rg.path, idx];
    const thisPathDisabled = rg.disabled || typeof r !== "string" && r.disabled || rg.schema.disabledPaths.some((p) => pathsAreEqual(thisPath, p));
    const key = typeof r === "string" ? [...thisPath, r].join("-") : r.id;
    return /* @__PURE__ */ react.createElement(react.Fragment, { key }, idx > 0 && !rg.schema.independentCombinators && rg.schema.showCombinatorsBetweenRules && /* @__PURE__ */ react.createElement(
      InlineCombinatorControlElement,
      {
        options: rg.schema.combinators,
        value: rg.combinator,
        title: rg.translations.combinators.title,
        className: rg.classNames.combinators,
        handleOnChange: rg.onCombinatorChange,
        rules: rg.ruleGroup.rules,
        level: rg.path.length,
        context: rg.context,
        validation: rg.validationResult,
        component: CombinatorSelectorControlElement,
        path: thisPath,
        disabled: rg.disabled,
        independentCombinators: rg.schema.independentCombinators,
        schema: rg.schema
      }
    ), typeof r === "string" ? /* @__PURE__ */ react.createElement(
      InlineCombinatorControlElement,
      {
        options: rg.schema.combinators,
        value: r,
        title: rg.translations.combinators.title,
        className: rg.classNames.combinators,
        handleOnChange: (val) => rg.onIndependentCombinatorChange(val, idx),
        rules: rg.ruleGroup.rules,
        level: rg.path.length,
        context: rg.context,
        validation: rg.validationResult,
        component: CombinatorSelectorControlElement,
        path: thisPath,
        disabled: thisPathDisabled,
        independentCombinators: rg.schema.independentCombinators,
        schema: rg.schema
      }
    ) : "rules" in r ? /* @__PURE__ */ react.createElement(
      RuleGroupControlElement,
      {
        id: r.id,
        schema: rg.schema,
        actions: rg.actions,
        path: thisPath,
        translations: rg.translations,
        ruleGroup: r,
        rules: r.rules,
        combinator: "combinator" in r ? r.combinator : void 0,
        not: !!r.not,
        disabled: thisPathDisabled,
        parentDisabled: rg.parentDisabled || rg.disabled,
        context: rg.context
      }
    ) : /* @__PURE__ */ react.createElement(
      RuleControlElement,
      {
        id: r.id,
        rule: r,
        field: r.field,
        operator: r.operator,
        value: r.value,
        valueSource: r.valueSource,
        schema: rg.schema,
        actions: rg.actions,
        path: thisPath,
        disabled: thisPathDisabled,
        parentDisabled: rg.parentDisabled || rg.disabled,
        translations: rg.translations,
        context: rg.context
      }
    ));
  }));
};

// src/components/ValueEditor.tsx


// src/components/ValueSelector.tsx

var ValueSelector = ({
  className,
  handleOnChange,
  options,
  title,
  value,
  multiple,
  listsAsArrays,
  disabled,
  testID
}) => {
  const { onChange, val } = useValueSelector({ handleOnChange, listsAsArrays, multiple, value });
  const selectElementChangeHandler = useSelectElementChangeHandler({ multiple, onChange });
  return /* @__PURE__ */ react.createElement(
    "select",
    {
      "data-testid": testID,
      className,
      value: val,
      title,
      disabled,
      multiple: !!multiple,
      onChange: selectElementChangeHandler
    },
    toOptions(options)
  );
};
ValueSelector.displayName = "ValueSelector";

// src/components/ValueEditor.tsx
var ValueEditor = ({
  operator,
  value,
  handleOnChange,
  title,
  className,
  type = "text",
  inputType = "text",
  values = [],
  listsAsArrays,
  parseNumbers,
  fieldData,
  disabled,
  separator = null,
  skipHook = false,
  testID,
  selectorComponent: SelectorComponent = ValueSelector,
  ...props
}) => {
  const { valueAsArray, multiValueHandler } = useValueEditor({
    skipHook,
    handleOnChange,
    inputType,
    operator,
    value,
    type,
    listsAsArrays,
    parseNumbers,
    values
  });
  if (operator === "null" || operator === "notNull") {
    return null;
  }
  const placeHolderText = fieldData?.placeholder ?? "";
  const inputTypeCoerced = ["in", "notIn"].includes(operator) ? "text" : inputType || "text";
  if ((operator === "between" || operator === "notBetween") && (type === "select" || type === "text")) {
    const editors = ["from", "to"].map((key, i) => {
      if (type === "text") {
        return /* @__PURE__ */ react.createElement(
          "input",
          {
            key,
            type: inputTypeCoerced,
            placeholder: placeHolderText,
            value: valueAsArray[i] ?? "",
            className: standardClassnames.valueListItem,
            disabled,
            onChange: (e) => multiValueHandler(e.target.value, i)
          }
        );
      }
      return /* @__PURE__ */ react.createElement(
        SelectorComponent,
        {
          ...props,
          key,
          className: standardClassnames.valueListItem,
          handleOnChange: (v) => multiValueHandler(v, i),
          disabled,
          value: valueAsArray[i] ?? getFirstOption(values),
          options: values,
          listsAsArrays
        }
      );
    });
    return /* @__PURE__ */ react.createElement("span", { "data-testid": testID, className, title }, editors[0], separator, editors[1]);
  }
  switch (type) {
    case "select":
    case "multiselect":
      return /* @__PURE__ */ react.createElement(
        SelectorComponent,
        {
          ...props,
          testID,
          className,
          title,
          handleOnChange,
          disabled,
          value,
          options: values,
          multiple: type === "multiselect",
          listsAsArrays
        }
      );
    case "textarea":
      return /* @__PURE__ */ react.createElement(
        "textarea",
        {
          "data-testid": testID,
          placeholder: placeHolderText,
          value,
          title,
          className,
          disabled,
          onChange: (e) => handleOnChange(e.target.value)
        }
      );
    case "switch":
    case "checkbox":
      return /* @__PURE__ */ react.createElement(
        "input",
        {
          "data-testid": testID,
          type: "checkbox",
          className,
          title,
          onChange: (e) => handleOnChange(e.target.checked),
          checked: !!value,
          disabled
        }
      );
    case "radio":
      return /* @__PURE__ */ react.createElement("span", { "data-testid": testID, className, title }, values.map((v) => /* @__PURE__ */ react.createElement("label", { key: v.name }, /* @__PURE__ */ react.createElement(
        "input",
        {
          type: "radio",
          value: v.name,
          disabled,
          checked: value === v.name,
          onChange: (e) => handleOnChange(e.target.value)
        }
      ), v.label)));
  }
  return /* @__PURE__ */ react.createElement(
    "input",
    {
      "data-testid": testID,
      type: inputTypeCoerced,
      placeholder: placeHolderText,
      value,
      title,
      className,
      disabled,
      onChange: (e) => handleOnChange(parseNumber(e.target.value, { parseNumbers }))
    }
  );
};
ValueEditor.displayName = "ValueEditor";

// src/components/defaults.ts
var defaultControlElements = {
  addGroupAction: ActionElement,
  removeGroupAction: ActionElement,
  cloneGroupAction: ActionElement,
  cloneRuleAction: ActionElement,
  addRuleAction: ActionElement,
  removeRuleAction: ActionElement,
  combinatorSelector: ValueSelector,
  inlineCombinator: InlineCombinator,
  fieldSelector: ValueSelector,
  operatorSelector: ValueSelector,
  valueEditor: ValueEditor,
  notToggle: NotToggle,
  ruleGroup: RuleGroup,
  rule: Rule,
  dragHandle: DragHandle,
  lockRuleAction: ActionElement,
  lockGroupAction: ActionElement,
  valueSourceSelector: ValueSelector
};

// src/components/QueryBuilder.tsx


// src/components/QueryBuilderContext.ts

var QueryBuilderContext = (0,react.createContext)({});
QueryBuilderContext.displayName = "QueryBuilderContext";

// src/components/QueryBuilder.tsx
var QueryBuilder = (props) => {
  const qb = { ...props, ...useQueryBuilder(props) };
  const { ruleGroup: RuleGroupControlElement } = qb.schema.controls;
  return /* @__PURE__ */ react.createElement(
    QueryBuilderContext.Provider,
    {
      key: qb.schema.enableDragAndDrop ? "dnd" : "no-dnd",
      value: qb.rqbContext
    },
    /* @__PURE__ */ react.createElement(
      "div",
      {
        className: qb.wrapperClassName,
        "data-dnd": qb.schema.enableDragAndDrop ? "enabled" : "disabled",
        "data-inlinecombinators": qb.schema.independentCombinators || qb.schema.showCombinatorsBetweenRules ? "enabled" : "disabled"
      },
      /* @__PURE__ */ react.createElement(
        RuleGroupControlElement,
        {
          translations: qb.translations,
          ruleGroup: qb.query,
          rules: qb.query.rules,
          combinator: "combinator" in qb.query ? qb.query.combinator : void 0,
          not: !!qb.query.not,
          schema: qb.schema,
          actions: qb.actions,
          id: qb.query.id,
          path: [],
          disabled: !!qb.query.disabled || qb.queryDisabled,
          parentDisabled: qb.queryDisabled,
          context: qb.context
        }
      )
    )
  );
};
QueryBuilder.displayName = "QueryBuilder";

// src/index.ts
var src_default = (/* unused pure expression or super */ null && (QueryBuilder));

//# sourceMappingURL=react-querybuilder.mjs.map

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["react","vendors"], () => (__webpack_exec__(34854)));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);