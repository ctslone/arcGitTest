rsb.reports = rsb.reports || {};rsb.reports.sidebar = rsb.reports.sidebar || {};rsb.reports.sidebar.filterItem = function($item) {$($item).data("instance", this);var _ui = $($item);_ui.checkbox = _ui.find("input");_ui.span = _ui.find("span");var name = _ui.span.text();var value = _ui.span.attr("value");this.getName = function() {return name}
this.getValue = function() {return value}
this.getChecked = function() {return _ui.checkbox.prop("checked")}
this.matched = function($filter) {if ($filter) {return name.toLowerCase().indexOf($filter.toLowerCase()) > -1} else {return true}}
this.getAffectValue = function($key) {if ($key) {return _ui.span.attr($key)} else {return ""}}
this.hide = function() {_ui.addClass("hidden")}
this.show = function() {_ui.removeClass("hidden")}
this.affectHide = function($classKey) {_ui.addClass($classKey);if (_ui.checkbox.prop("checked")) {_ui.checkbox.click()}}
this.affectShow = function($classKey) {_ui.removeClass($classKey)}
this.getSpan = function() {return _ui.span}
this.getCheckBox = function() {return _ui.checkbox}};rsb.reports.sidebar.filter = function($filter, $title, $affectFilter, $affectKey) {var MAX_SHOWING_COUNT = 5
$filter.data("instance", this);var _ui = $filter;_ui.ul = _ui.find("ul");_ui.filterInput = _ui.find(".report-nav-filter-input");_ui.view = _ui.find(".report-nav-filter-content-view");_ui.showingViews = _ui.find(".report-nav-filter-showingviews");_ui.showAllSpan = _ui.find(".report-nav-filter-show");_ui.clearSpan = _ui.find(".report-nav-filter-clear");_ui.clearAll = _ui.clearSpan.find(".report-nav-filter-clear-span");_ui.seeAll = _ui.clearSpan.find(".report-nav-filter-see-span");_ui.seeAllCount = _ui.seeAll.find(".report-nav-filter-see-span-count");var showingCount = 0;var showingList = [];var modalTitle = $title;var affectFilter = $affectFilter;var affectKey = $affectKey;var viewList = [];for (var i = 0; i < _ui.view.find(".item").length; i++) {var filterItem = new rsb.reports.sidebar.filterItem(_ui.view.find(".item")[i]);viewList.push(filterItem)}
var doSearch = function($searchText) {if ($searchText) {for (var i in viewList) {if (viewList[i].matched($searchText)) {viewList[i].show()} else {viewList[i].hide()}}} else {for (var i in viewList) {viewList[i].show()}}}
var findViewItem = function($value) {for (var i in viewList) {if (viewList[i].getValue() == $value) {return viewList[i]}}}
var showTitle = function() {var $txt = $(this).get(0);if ($txt.clientWidth < $txt.scrollWidth) {if (!$(this).attr('title')) {$(this).attr('title', $(this).text())}} else {$(this).attr('title', '')}}
var appendShowingItem = function(name, value) {var html = '<div><label class="report-nav-filter-showing-label"><span class="report-nav-filter-showing-label-span text-truncate" value="' + value + '">' + name + '</span>';if (!rsb.reports.readonly) {html += '<i class="fa fa-remove"></i>'}
html += '</label></div>';var obj = $(html);if (!rsb.reports.readonly) {obj.find("i").click(onRemoveItem)}
obj.find("span").on("mouseenter", showTitle);_ui.showingViews.append(obj)}
var onRemoveItem = function() {var value = $(this).closest("div").find("label span").attr("value");for (var i in showingList) {if (value == showingList[i].getValue()) {showingList[i].getCheckBox().click();showingList.splice(i, 1);break}}
updateFilter(showingList)}
var doAffect = function() {if (affectFilter) {var affectValues = [];if (showingList.length > 0) {for (var i in showingList) {affectValues.push(showingList[i].getValue())}
affectFilter.affect(affectKey, affectValues)} else {affectFilter.affect(affectKey)}}}
var updateFilter = function($items) {for (var i in viewList) {viewList[i].getCheckBox().prop("checked", false)}
showingCount = 0;showingList = [];_ui.showingViews.html("");_ui.seeAll.addClass("hidden");_ui.clearSpan.addClass("hidden");_ui.showAllSpan.removeClass("hidden");if ($items && $items.length > 0) {for (var i in $items) {showingCount++;var showingItem = $items[i];showingList.push(showingItem);showingItem.getCheckBox().prop("checked", true);_ui.clearSpan.removeClass("hidden");_ui.showAllSpan.addClass("hidden");if (showingCount <= MAX_SHOWING_COUNT) {appendShowingItem(showingItem.getName(), showingItem.getValue())} else {_ui.seeAllCount.text(showingCount - MAX_SHOWING_COUNT);_ui.seeAll.removeClass("hidden");if (_ui.showingViews.find(".report-nav-filter-showing-label").length > MAX_SHOWING_COUNT) {for (var i = MAX_SHOWING_COUNT; i < _ui.showingViews.find(".report-nav-filter-showing-label").length;) {var showingSpan = $(_ui.showingViews.find(".report-nav-filter-showing-label span")[i]);showingSpan.closest("div").remove()}}}}}
doAffect()}
var onClearAll = function() {updateFilter()}
var appendItemInModal = function(name, value, checked) {var html = '<label class="report-filter-modal-item"><input type="checkbox" class="form-check-input" ' + (checked ? "checked" : '') + '><span value="' + value + '">' + name + '</span></label>';var obj = $(html);obj.find("span").on("mouseenter", showTitle);rsb.filterListModal.modalContent.append(obj)}
var onSeeAll = function() {rsb.filterListModal.title.text(modalTitle);rsb.filterListModal.filter.val("");rsb.filterListModal.filter.attr("placeholder", _ui.filterInput.attr("placeholder"));rsb.filterListModal.modalContent.html("");for (var i in viewList) {appendItemInModal(viewList[i].getName(), viewList[i].getValue(), showingList.includes(viewList[i]))}
rsb.filterListModal.update.off("click");rsb.filterListModal.update.click(function() {var showingList = [];for (var i = 0; i < rsb.filterListModal.modalContent.find("label").length; i++) {var obj = rsb.filterListModal.modalContent.find("label")[i];if ($(obj).find("input").prop("checked")) {var value = $(obj).find("span").attr("value");var viewItem = findViewItem(value);if (viewItem) {showingList.push(viewItem)}}}
updateFilter(showingList);rsb.filterListModal.modal.modal("hide")});if (rsb.reports.readonly) {rsb.filterListModal.modalContent.find("input").prop("disabled", true).off("mousedown").on("mousedown", function() { return false; });rsb.filterListModal.modalContent.find("input").parent("label").off("mousedown").on("mousedown", function() { return false; });rsb.filterListModal.modalFooter.addClass("hidden")}
rsb.filterListModal.modal.modal("show")}
this.getData = function() {var result = "";for (var i in showingList) {if (i < 1) {result += showingList[i].getValue()} else {result += "," + showingList[i].getValue()}}
return result}
this.getClearSpan = function() {return _ui.clearAll}
this.clear = function() {onClearAll()}
this.affect = function($key, $values) {for (var i in viewList) {if ($values && !$values.includes(viewList[i].getAffectValue($key))) {viewList[i].affectHide($key);if (showingList.includes(viewList[i])) {showingList.splice(showingList.indexOf(viewList[i]), 1)}} else {viewList[i].affectShow($key)}}
updateFilter(showingList)}
this.init = function() {_ui.ul.width(_ui.filterInput.outerWidth());_ui.view.on("click", function(e) {e.stopPropagation()});_ui.on("hidden.bs.dropdown", function() {var showingItems = [];for (var i in viewList) {if (viewList[i].getCheckBox().prop("checked")) {showingItems.push(viewList[i])}}
updateFilter(showingItems)});for (var i in viewList) {var filterItem = viewList[i];filterItem.getSpan().on("click", function() {$(this).closest("li").data("instance").getCheckBox().click()});filterItem.getSpan().on("mouseenter", showTitle)}
_ui.filterInput.on("keyup", function() {doSearch($.trim($(this).val()))}).on("keydown", function(event) {var keyCode = event.keyCode;if (keyCode == 27) {_ui.filterInput.val("")}}).on("focusout", function(e) {$(this).val("")}).on("focus", function(e) {doSearch($.trim($(this).val()))});if (!rsb.reports.readonly) {_ui.clearAll.on("click", onClearAll)}
_ui.seeAll.on("click", onSeeAll)}
this.loadData = function($data) {if (!$data) return;onClearAll();var values = $data.split(",");var showingItems = [];for (var i in values) {if (values[i]) {var viewItem = findViewItem(values[i].trim());if (viewItem) {showingItems.push(viewItem)}}}
updateFilter(showingItems)}};rsb.reports.sidebar.recipients = function($recipients) {var ITEM_HEIGHT = 30;var _ui = $recipients;_ui.input = _ui.find("#recipients_input");var height = ITEM_HEIGHT;var emailList = [];var updateHeight = function() {if (emailList.length < 1) {_ui.input.removeClass("hidden");height = ITEM_HEIGHT} else if (_ui.input.hasClass("hidden")) {height = ITEM_HEIGHT * emailList.length} else {height = ITEM_HEIGHT * (emailList.length + 1)}
_ui.height(height)}
var showTitle = function() {var $txt = $(this).get(0);if ($txt.clientWidth < $txt.scrollWidth) {if (!$(this).attr('title')) {$(this).attr('title', $(this).text())}} else {$(this).attr('title', '')}}
var appendItem = function($value) {if ($value) {emailList.push($value);var html = '<div><label class="report-nav-recipients-showing-label"><span class="report-nav-recipients-showing-label-span" title="">' + $value + '</span>';if (!rsb.reports.readonly) {html += '<i class="fa fa-remove"></i>'}
html += '</label></div>';var obj = $(html);obj.find("i").click(function($event) {$event.stopPropagation();var value = $(this).closest("div").find("label").text();var index = emailList.indexOf(value);if (index > -1) {emailList.splice(index, 1);$(this).closest("div").remove()}
updateHeight()});obj.find("span").on("mouseenter", showTitle);_ui.input.before(obj)}}
this.getValue = function() {return emailList.join(";")}
this.load = function($data) {if ($data) {emailList = [];_ui.find("div").remove();var values = $data.split(";");for (var i in values) {appendItem(values[i])}}
updateHeight()}
this.init = function() {if (!rsb.reports.readonly) {_ui.click(function() {_ui.input.removeClass("hidden");updateHeight();_ui.input.focus()});_ui.input.on("focusout", function() {var value = $(this).val();if (value) {appendItem(value);$(this).val("")}
$(this).addClass("hidden");updateHeight()}).on("keyup", function(event) {var keyCode = event.keyCode;if (keyCode == 13) {$(this).focusout();_ui.click()} else if (keyCode == 188 || keyCode == 186) {var value = $(this).val();if (value && value.length > 1) {value = value.substring(0, value.length - 1);$(this).val(value);$(this).focusout();_ui.click()} else {$(this).val("");$(this).addClass("hidden");updateHeight()}} else if (keyCode == 27) {$(this).val("");$(this).addClass("hidden");updateHeight()}})}}}
rsb.reports.sidebar.nav = function() {var DATE_FORMAT = {dateFormat: 'yy-mm-dd',disableFocus: true}
var TIME_FORMAT = {showInputs: false,disableFocus: true,showMeridian: false};var COLUMNS_WORKSPACE = "WorkspaceId";var COLUMNS_CONNECTOR_ID = "ConnectorId";var COLUMNS_CONNECTOR_TYPE = "ConnectorType";var COLUMNS_SENDER_ID = "SenderISAId";var COLUMNS_RECEIVER_ID = "ReceiverISAId";var COLUMNS_TRANSACTION_SET = "TransactionSet";var COLUMNS_TRANSACTION_ALL = "TransactionsAll";var COLUMNS_TRANSACTION_SENT = "TransactionsSent";var COLUMNS_TRANSACTION_RECEIVED = "TransactionsReceived";var COLUMNS_PROCESSING_TIME = "TotalProcessingTime";var COLUMNS_FILE_SIZE = "TotalFileSize";var COLUMNS_TRANSACTION_SUCCESS = "TransactionsSuccess";var COLUMNS_TRANSACTION_ERROR = "TransactionsError";var COLUMNS_TRANSACTION_WARNING = "TransactionsWarning";var GROUP_COLUMNS_YEAR = "Year";var GROUP_COLUMNS_QUARTER = "Quarter";var GROUP_COLUMNS_MONTH = "Month";var GROUP_COLUMNS_WEEK = "Week";var GROUP_COLUMNS_WORKSPACE = "WorkspaceId";var GROUP_COLUMNS_CONNECTOR_TYPE = "ConnectorType";var GROUP_COLUMNS_SENDER_ID = "SenderISAId";var GROUP_COLUMNS_RECEIVER_ID = "ReceiverISAId";var GROUP_COLUMNS_TRANSACTION_SET = "TransactionSet";var SUMMARY_TOTAL = "Total";var SUMMARY_AVERAGE = "Average";var SUMMARY_MINIMUM = "Minimum";var SUMMARY_MAXIMUM = "Maximum";var _ui = {};_ui.nav =  $("#nav");let isReady = false;const readyCallback = [];_ui.build = _ui.nav.find(".report-nav-tab-builder");_ui.reportName = _ui.build.find("#reportname");_ui.timePeriod = _ui.build.find("#timeperiod");_ui.timePeriodCustomeDate = _ui.build.find(".custom-date");_ui.timePeriodDateStart = _ui.timePeriodCustomeDate.find("#timeperiodstart");_ui.timePeriodDateStartIcon = _ui.timePeriodDateStart.next("span");_ui.timePeriodDateEnd = _ui.timePeriodCustomeDate.find("#timeperiodend");_ui.timePeriodDateEndIcon = _ui.timePeriodDateEnd.next("span");_ui.columns_workspace = _ui.build.find("#reportcolumnsworkspace");_ui.columns_connectorid = _ui.build.find("#reportcolumnsconnectorid");_ui.columns_connectortype = _ui.build.find("#reportcolumnsconnectortype");_ui.columns_senderisaids = _ui.build.find("#reportcolumnssenderisaids");_ui.columns_receiverisaids = _ui.build.find("#reportcolumnsreceiverisaids");_ui.columns_transactionset = _ui.build.find("#reportcolumnstransactionset");_ui.columns_transactionsall = _ui.build.find("#reportcolumnstransactionsall");_ui.columns_transactionssent = _ui.build.find("#reportcolumnstransactionssent");_ui.columns_transactionsreceived = _ui.build.find("#reportcolumnstransactionsreceived");_ui.columns_processingtime = _ui.build.find("#reportcolumnsprocessingtime");_ui.columns_filesize = _ui.build.find("#reportcolumnsfilesize");_ui.columns_successful = _ui.build.find("#reportcolumnssuccessful");_ui.columns_error = _ui.build.find("#reportcolumnserror");_ui.columns_warning = _ui.build.find("#reportcolumnswarning");_ui.grouprows_year = _ui.build.find("#reportgroupyear");_ui.grouprows_quarter = _ui.build.find("#reportgroupquarter");_ui.grouprows_month = _ui.build.find("#reportgroupmonth");_ui.grouprows_week = _ui.build.find("#reportgroupweek");_ui.grouprows_workspace = _ui.build.find("#reportgroupworkspace");_ui.grouprows_connectortype = _ui.build.find("#reportgroupconnectortype");_ui.grouprows_dimension = _ui.build.find(".report-nav-group-dimension");_ui.grouprows_transactionset = _ui.grouprows_dimension.find("#groupbytransactionsets");_ui.grouprows_showAfterISA = _ui.grouprows_dimension.find(".report-nav-group-down");_ui.grouprows_showBeforeISA = _ui.grouprows_dimension.find(".report-nav-group-up");_ui.grouprows_transactionsets = _ui.grouprows_dimension.find("#reportgrouptransactionsets");_ui.grouprows_isagroup = _ui.grouprows_dimension.find("#groupbyisa");_ui.grouprows_isaids = _ui.grouprows_dimension.find("#reportgroupisaids");_ui.grouprows_senderisaids_radio = _ui.grouprows_dimension.find("#reportgroupsenderisaidsradio");_ui.grouprows_receiverisaids_radio = _ui.grouprows_dimension.find("#reportgroupreceiverisaidsradio");_ui.grouprows_isasender = _ui.grouprows_dimension.find("#reportgroupisasender");_ui.grouprows_isareceiver = _ui.grouprows_dimension.find("#reportgroupisareceiver");_ui.connectorIDFilter = new rsb.reports.sidebar.filter(_ui.build.find(".report-nav-filter-connectorid"), 'ConnectorID');_ui.workspaceFilter = new rsb.reports.sidebar.filter(_ui.build.find(".report-nav-filter-workspace"), 'Workspace', _ui.connectorIDFilter, "report-affect-workspace");_ui.connectorTypeFilter = new rsb.reports.sidebar.filter(_ui.build.find(".report-nav-filter-connectortype"), 'ConnectorTypes', _ui.connectorIDFilter, "report-affect-type");_ui.statusFilter = new rsb.reports.sidebar.filter(_ui.build.find(".report-nav-filter-status"), 'Status');_ui.isaSenderFilter = new rsb.reports.sidebar.filter(_ui.build.find(".report-nav-filter-isa-sender"), 'SenderIDs');_ui.isaReceiverFilter = new rsb.reports.sidebar.filter(_ui.build.find(".report-nav-filter-isa-receiver"), 'ReceiverIDs');_ui.transactionSetFilter = new rsb.reports.sidebar.filter(_ui.build.find(".report-nav-filter-transaction-set"), 'TransactionSets');_ui.datasummary_total = _ui.build.find("#reportgroupdatesummarytotal");_ui.datasummary_average = _ui.build.find("#reportdatesummaryaverage");_ui.datasummary_minimum = _ui.build.find("#reportdatesummaryminimum");_ui.datasummary_maximum = _ui.build.find("#reportdatesummarymaximum");_ui.navfooter = _ui.build.find(".report-nav-tab-footer");_ui.resetBtn = _ui.navfooter.find("#report_reset_btn");_ui.resetContentReset = _ui.navfooter.find("#report_reset_btn .report-nav-content-reset");_ui.resetContentUndoReset = _ui.navfooter.find("#report_reset_btn .report-nav-content-undoreset");_ui.runReportBtn = _ui.navfooter.find("#report_run_report_btn");_ui.schedule = _ui.nav.find(".report-nav-tab-scheduler");_ui.frequency = _ui.schedule.find("#frequency");_ui.frequency_monthly = _ui.schedule.find(".report-frequency-monthly");_ui.monthly_interval = _ui.frequency_monthly.find("#frequency_monthly");_ui.monthly_calendarday_radio = _ui.frequency_monthly.find("#calendarday");_ui.monthly_dayofweek_radio = _ui.frequency_monthly.find("#dayofweek");_ui.monthly_calendarday = _ui.frequency_monthly.find(".report-frequency-monthly-calendarday");_ui.monthly_calendarday_day = _ui.frequency_monthly.find("#frequency_monthly_calendar_index");_ui.monthly_calendarday_time = _ui.frequency_monthly.find("#frequency_monthly_calendar_time");_ui.monthly_dayofweek = _ui.frequency_monthly.find(".report-frequency-monthly-dayofweek");_ui.monthly_dayofweek_weekindex = _ui.monthly_dayofweek.find("#frequency_monthly_dayofweek_index");_ui.monthly_dayofweek_week = _ui.monthly_dayofweek.find("#frequency_monthly_dayofweek_week");_ui.monthly_dayofweek_time = _ui.monthly_dayofweek.find("#frequency_monthly_dayofweek_time");_ui.frequency_weekly = _ui.schedule.find(".report-frequency-weekly");_ui.weekly_interval = _ui.frequency_weekly.find("#frequency_weekly");_ui.weekly_sun = _ui.frequency_weekly.find("#report-frequency-weekly-sun");_ui.weekly_mon = _ui.frequency_weekly.find("#report-frequency-weekly-mon");_ui.weekly_tue = _ui.frequency_weekly.find("#report-frequency-weekly-tue");_ui.weekly_wed = _ui.frequency_weekly.find("#report-frequency-weekly-wed");_ui.weekly_thur = _ui.frequency_weekly.find("#report-frequency-weekly-thur");_ui.weekly_fri = _ui.frequency_weekly.find("#report-frequency-weekly-fri");_ui.weekly_sat = _ui.frequency_weekly.find("#report-frequency-weekly-sat");_ui.weekly_time = _ui.frequency_weekly.find("#frequency_weekly_time");_ui.frequency_daily = _ui.schedule.find(".report-frequency-daily");_ui.daily_include_weekends = _ui.frequency_daily.find("#report-frequency-daily-includeweekends");_ui.daily_time = _ui.frequency_daily.find("#frequency_daily_time");_ui.run_dates = _ui.schedule.find(".report-run-dates");_ui.frequency_startDate = _ui.run_dates.find("#frequencystartdate");_ui.frequency_endDate = _ui.run_dates.find("#frequencyenddate");_ui.frequency_endDate_clear = _ui.run_dates.find("#frequencyEndDateClear");_ui.emailreport_checkbox = _ui.schedule.find("#report-email-report");_ui.configalert = _ui.schedule.find(".report-nav-alert");_ui.email_report = _ui.schedule.find(".report-email-report");_ui.format_csv = _ui.email_report.find("#reportemailcsv");_ui.format_pdf = _ui.email_report.find("#reportemailpdf");_ui.subject = _ui.email_report.find("#subject");_ui.recipients = new rsb.reports.sidebar.recipients(_ui.schedule.find("#recipients"));_ui.timeZoneLabel = _ui.schedule.find(".label-time-zone");_ui.schedulefooter = _ui.schedule.find(".report-nav-tab-footer");_ui.scheduleResetBtn = _ui.schedulefooter.find("#report_reset_btn");_ui.scheduleContentReset = _ui.schedulefooter.find("#report_reset_btn .report-nav-content-reset");_ui.scheduleResetContentUndoReset = _ui.schedulefooter.find("#report_reset_btn .report-nav-content-undoreset");_ui.applyBtn = _ui.schedulefooter.find("#report_apply_btn");var columnNameMap = {};columnNameMap[COLUMNS_WORKSPACE.toLowerCase()] = 'Workspace';columnNameMap[COLUMNS_CONNECTOR_ID.toLowerCase()] = 'Connector Id';columnNameMap[COLUMNS_CONNECTOR_TYPE.toLowerCase()] = 'Connector Type';columnNameMap[COLUMNS_SENDER_ID.toLowerCase()] = 'Sender ISA Ids';columnNameMap[COLUMNS_RECEIVER_ID.toLowerCase()] = 'Receiver ISA Ids';columnNameMap[COLUMNS_TRANSACTION_SET.toLowerCase()] = 'Transaction Set';columnNameMap[COLUMNS_TRANSACTION_ALL.toLowerCase()] = 'All Transactions';columnNameMap[COLUMNS_TRANSACTION_SENT.toLowerCase()] = 'Transactions Sent';columnNameMap[COLUMNS_TRANSACTION_RECEIVED.toLowerCase()] = 'Transactions Received';columnNameMap[COLUMNS_PROCESSING_TIME.toLowerCase()] = 'Total Processing Time';columnNameMap[COLUMNS_FILE_SIZE.toLowerCase()] = 'Total File Size';columnNameMap[COLUMNS_TRANSACTION_SUCCESS.toLowerCase()] = 'Successful';columnNameMap[COLUMNS_TRANSACTION_ERROR.toLowerCase()] = 'Error';columnNameMap[COLUMNS_TRANSACTION_WARNING.toLowerCase()] = 'Warning';columnNameMap[GROUP_COLUMNS_YEAR.toLowerCase()] = 'Year';columnNameMap[GROUP_COLUMNS_QUARTER.toLowerCase()] = 'Quarter';columnNameMap[GROUP_COLUMNS_MONTH.toLowerCase()] = 'Month';columnNameMap[GROUP_COLUMNS_WEEK.toLowerCase()] = 'Week';var columnOrderList = [];columnOrderList.push(GROUP_COLUMNS_YEAR.toLowerCase());columnOrderList.push(GROUP_COLUMNS_QUARTER.toLowerCase());columnOrderList.push(GROUP_COLUMNS_MONTH.toLowerCase());columnOrderList.push(GROUP_COLUMNS_WEEK.toLowerCase());columnOrderList.push(COLUMNS_SENDER_ID.toLowerCase());columnOrderList.push(COLUMNS_RECEIVER_ID.toLowerCase());columnOrderList.push(COLUMNS_TRANSACTION_SET.toLowerCase());columnOrderList.push(COLUMNS_WORKSPACE.toLowerCase());columnOrderList.push(COLUMNS_CONNECTOR_ID.toLowerCase());columnOrderList.push(COLUMNS_CONNECTOR_TYPE.toLowerCase());columnOrderList.push(COLUMNS_TRANSACTION_ALL.toLowerCase());columnOrderList.push(COLUMNS_TRANSACTION_SENT.toLowerCase());columnOrderList.push(COLUMNS_TRANSACTION_RECEIVED.toLowerCase());columnOrderList.push(COLUMNS_PROCESSING_TIME.toLowerCase());columnOrderList.push(COLUMNS_FILE_SIZE.toLowerCase());columnOrderList.push(COLUMNS_TRANSACTION_SUCCESS.toLowerCase());columnOrderList.push(COLUMNS_TRANSACTION_ERROR.toLowerCase());columnOrderList.push(COLUMNS_TRANSACTION_WARNING.toLowerCase());var originalInfo = null;var currentInfo = null;var tempReportName = null;var readReportStartTime = null;var isEDIType = false;var transactionSetStart = true;var hasISASenderCol = false;var hasISAReceiverCol = false;var hasTransactionSetCol = false;var scheduleContent = "";var nextRunTime = null;var switchTwoObj = function($obj1, $obj2) {var tobj1 = $obj1.clone();var tobj2 = $obj2.clone();if(!$obj2.is(':empty')){$obj1.replaceWith(tobj2);$obj2.replaceWith(tobj1)}}
var setTime = function($min, $hour, $timer) {if ($timer) {$min = $min == "0" ? "00" : $min;$timer.val($hour + ":" + $min)}}
var initGroupByDimension = function() {_ui.grouprows_transactionset = _ui.grouprows_dimension.find("#groupbytransactionsets");_ui.grouprows_showAfterISA = _ui.grouprows_dimension.find(".report-nav-group-down");_ui.grouprows_showBeforeISA = _ui.grouprows_dimension.find(".report-nav-group-up");_ui.grouprows_transactionsets = _ui.grouprows_dimension.find("#reportgrouptransactionsets");_ui.grouprows_isagroup = _ui.grouprows_dimension.find("#groupbyisa");_ui.grouprows_isaids = _ui.grouprows_dimension.find("#reportgroupisaids");_ui.grouprows_senderisaids_radio = _ui.grouprows_dimension.find("#reportgroupsenderisaidsradio");_ui.grouprows_receiverisaids_radio = _ui.grouprows_dimension.find("#reportgroupreceiverisaidsradio");_ui.grouprows_isasender = _ui.grouprows_dimension.find("#reportgroupisasender");_ui.grouprows_isareceiver = _ui.grouprows_dimension.find("#reportgroupisareceiver");_ui.columns_senderisaids.click(function(){hasISASenderCol = $(this).prop("checked");updateGroupByDimension()});_ui.columns_receiverisaids.click(function() {hasISAReceiverCol = $(this).prop("checked");updateGroupByDimension()});_ui.columns_transactionset.click(function() {hasTransactionSetCol = $(this).prop("checked");updateGroupByDimension()});_ui.grouprows_isaids.click(function() {if ($(this).prop("checked")) {_ui.grouprows_senderisaids_radio.closest(".report-nav-checkbox-radiogroup").removeClass("hidden")} else {_ui.grouprows_senderisaids_radio.closest(".report-nav-checkbox-radiogroup").addClass("hidden")}});_ui.grouprows_showAfterISA.click(function() {switchTwoObj(_ui.grouprows_transactionset, _ui.grouprows_isagroup);initGroupByDimension();_ui.grouprows_showAfterISA.addClass("hidden");_ui.grouprows_showBeforeISA.removeClass("hidden");transactionSetStart = false});_ui.grouprows_showBeforeISA.click(function() {switchTwoObj(_ui.grouprows_transactionset, _ui.grouprows_isagroup);initGroupByDimension();_ui.grouprows_showAfterISA.removeClass("hidden");_ui.grouprows_showBeforeISA.addClass("hidden");transactionSetStart = true})}
var getFilter = function($filter) {if (!$filter) return "";return $filter.getData()}
var getFilters = function() {if (isEDIType) {return "SenderISAId=" + getFilter(_ui.isaSenderFilter) + ";ReceiverISAId=" + getFilter(_ui.isaReceiverFilter) + ";TransactionSet=" + getFilter(_ui.transactionSetFilter)} else {if (getFilter(_ui.connectorIDFilter) == "" && getFilter(_ui.workspaceFilter) != "") {var workspaces = getFilter(_ui.workspaceFilter).split(",");for (var i in workspaces) {workspaces[i] = workspaces[i] + ":*"}
return "ConnectorId=" + workspaces.join(",") + ";ConnectorType=" + getFilter(_ui.connectorTypeFilter) + ";Status=" + getFilter(_ui.statusFilter)} else {return "ConnectorId=" + getFilter(_ui.connectorIDFilter) + ";ConnectorType=" + getFilter(_ui.connectorTypeFilter) + ";Status=" + getFilter(_ui.statusFilter)}}}
var getColumns = function() {var values = [];if (_ui.columns_workspace.prop("checked")) values.push(COLUMNS_WORKSPACE);if (_ui.columns_connectorid.prop("checked")) values.push(COLUMNS_CONNECTOR_ID);if (_ui.columns_connectortype.prop("checked")) values.push(COLUMNS_CONNECTOR_TYPE);if (_ui.columns_senderisaids.prop("checked")) values.push(COLUMNS_SENDER_ID);if (_ui.columns_receiverisaids.prop("checked")) values.push(COLUMNS_RECEIVER_ID);if (_ui.columns_transactionset.prop("checked")) values.push(COLUMNS_TRANSACTION_SET);if (_ui.columns_transactionsall.prop("checked")) values.push(COLUMNS_TRANSACTION_ALL);if (_ui.columns_transactionssent.prop("checked")) values.push(COLUMNS_TRANSACTION_SENT);if (_ui.columns_transactionsreceived.prop("checked")) values.push(COLUMNS_TRANSACTION_RECEIVED);if (_ui.columns_processingtime.prop("checked")) values.push(COLUMNS_PROCESSING_TIME);if (_ui.columns_filesize.prop("checked")) values.push(COLUMNS_FILE_SIZE);if (_ui.columns_successful.prop("checked")) values.push(COLUMNS_TRANSACTION_SUCCESS);if (_ui.columns_error.prop("checked")) values.push(COLUMNS_TRANSACTION_ERROR);if (_ui.columns_warning.prop("checked")) values.push(COLUMNS_TRANSACTION_WARNING);return values.join(",")}
var getGroupRows = function() {var values = [];if (_ui.grouprows_year.prop("checked")) values.push(GROUP_COLUMNS_YEAR);if (_ui.grouprows_quarter.prop("checked")) values.push(GROUP_COLUMNS_QUARTER);if (_ui.grouprows_month.prop("checked")) values.push(GROUP_COLUMNS_MONTH);if (_ui.grouprows_week.prop("checked")) values.push(GROUP_COLUMNS_WEEK);if (_ui.grouprows_workspace.prop("checked")) values.push(GROUP_COLUMNS_WORKSPACE);if (_ui.grouprows_connectortype.prop("checked")) values.push(GROUP_COLUMNS_CONNECTOR_TYPE);if (transactionSetStart) {if (_ui.grouprows_transactionsets.prop("checked")) values.push(GROUP_COLUMNS_TRANSACTION_SET)}
if (_ui.grouprows_isaids.prop("checked")) {if (_ui.grouprows_senderisaids_radio.prop("checked")) values.push(GROUP_COLUMNS_SENDER_ID);else values.push(GROUP_COLUMNS_RECEIVER_ID)}
if (_ui.grouprows_isasender.prop("checked"))  values.push(GROUP_COLUMNS_SENDER_ID);if (_ui.grouprows_isareceiver.prop("checked"))  values.push(GROUP_COLUMNS_RECEIVER_ID);if (!transactionSetStart) {if (_ui.grouprows_transactionsets.prop("checked")) values.push(GROUP_COLUMNS_TRANSACTION_SET)}
return values.join(",")}
var getDataSummary = function() {var values = [];if (_ui.datasummary_total.prop("checked")) values.push(SUMMARY_TOTAL);if (_ui.datasummary_average.prop("checked")) values.push(SUMMARY_AVERAGE);if (_ui.datasummary_minimum.prop("checked")) values.push(SUMMARY_MINIMUM);if (_ui.datasummary_maximum.prop("checked")) values.push(SUMMARY_MAXIMUM);return values.join(",")}
var updateGroupByDimension = function() {if (!hasTransactionSetCol && !hasISASenderCol && !hasISAReceiverCol) {_ui.grouprows_dimension.addClass("hidden");_ui.grouprows_transactionsets.prop("checked", false);_ui.grouprows_isaids.prop("checked", false);_ui.grouprows_isareceiver.prop("checked", false);_ui.grouprows_isasender.prop("checked", false);return} else {_ui.grouprows_dimension.removeClass("hidden")}
if (hasTransactionSetCol) {_ui.grouprows_transactionset.removeClass("hidden");if (hasISASenderCol || hasISAReceiverCol) {if (transactionSetStart) {_ui.grouprows_showAfterISA.removeClass("hidden");_ui.grouprows_showBeforeISA.addClass("hidden")} else {_ui.grouprows_showAfterISA.addClass("hidden");_ui.grouprows_showBeforeISA.removeClass("hidden")}} else {_ui.grouprows_showAfterISA.addClass("hidden");_ui.grouprows_showBeforeISA.addClass("hidden")}} else {_ui.grouprows_transactionsets.prop("checked", false);_ui.grouprows_transactionset.addClass("hidden")}
if (hasISASenderCol || hasISAReceiverCol) {_ui.grouprows_isagroup.removeClass("hidden");if (hasISASenderCol && hasISAReceiverCol) {_ui.grouprows_isaids.closest(".report-nav-checkbox").removeClass("hidden");_ui.grouprows_isasender.prop("checked", false);_ui.grouprows_isasender.closest(".report-nav-checkbox").addClass("hidden");_ui.grouprows_isareceiver.prop("checked", false);_ui.grouprows_isareceiver.closest(".report-nav-checkbox").addClass("hidden");if (_ui.grouprows_isaids.prop("checked")) {_ui.grouprows_senderisaids_radio.closest(".report-nav-checkbox-radiogroup").removeClass("hidden")} else {_ui.grouprows_senderisaids_radio.closest(".report-nav-checkbox-radiogroup").addClass("hidden")}} else {_ui.grouprows_isaids.prop("checked", false);_ui.grouprows_isaids.closest(".report-nav-checkbox").addClass("hidden");if (hasISASenderCol) {_ui.grouprows_isasender.closest(".report-nav-checkbox").removeClass("hidden");_ui.grouprows_isareceiver.prop("checked", false);_ui.grouprows_isareceiver.closest(".report-nav-checkbox").addClass("hidden")}
if (hasISAReceiverCol) {_ui.grouprows_isasender.prop("checked", false);_ui.grouprows_isasender.closest(".report-nav-checkbox").addClass("hidden");_ui.grouprows_isareceiver.closest(".report-nav-checkbox").removeClass("hidden")}}} else {_ui.grouprows_isaids.prop("checked", false);_ui.grouprows_isareceiver.prop("checked", false);_ui.grouprows_isasender.prop("checked", false);_ui.grouprows_isagroup.addClass("hidden")}}
var getSchedule = function() {scheduleContent = "";var frequency = _ui.frequency.val();if (frequency == "None") return "";var TEMP_DATE = "2000-01-01";var crons = ["*", "*", "*", "*", "*"];var timepicker = null;if (frequency == "Monthly") {var interval = _ui.monthly_interval.val();if (interval != "1") {crons.push(interval + "M")}
if (_ui.monthly_calendarday_radio.prop("checked")) {crons[2] = _ui.monthly_calendarday_day.val();timepicker = _ui.monthly_calendarday_time;for (var optionIndex in _ui.monthly_calendarday_day.find("option")) {if (_ui.monthly_calendarday_day.find("option")[optionIndex].value == crons[2]) {scheduleContent += _ui.monthly_calendarday_day.find("option")[optionIndex].text;break}}} else if (_ui.monthly_dayofweek_radio.prop("checked")) {var weekIndex = _ui.monthly_dayofweek_weekindex.val();crons[4] = _ui.monthly_dayofweek_week.val() + "#" + weekIndex;timepicker = _ui.monthly_dayofweek_time;for (var optionIndex in _ui.monthly_dayofweek_weekindex.find("option")) {if (_ui.monthly_dayofweek_weekindex.find("option")[optionIndex].value == weekIndex) {scheduleContent += _ui.monthly_dayofweek_weekindex.find("option")[optionIndex].text;break}}
for (var optionIndex in _ui.monthly_dayofweek_week.find("option")) {if (_ui.monthly_dayofweek_week.find("option")[optionIndex].value == _ui.monthly_dayofweek_week.val()) {scheduleContent += " " + _ui.monthly_dayofweek_week.find("option")[optionIndex].text;break}}}
scheduleContent += " of every ";if (interval != "1") {scheduleContent += interval + " months"} else {scheduleContent += "month"}} else if (frequency == "Weekly") {var interval = _ui.weekly_interval.val();if (interval != "1") {crons.push(interval + "W")}
var dayofweeks = [];var weekDays = [];if (_ui.weekly_sun.prop("checked")) {dayofweeks.push("0");weekDays.push(_ui.weekly_sun.next("span").text())}
if (_ui.weekly_mon.prop("checked")) {dayofweeks.push("1");weekDays.push(_ui.weekly_mon.next("span").text())}
if (_ui.weekly_tue.prop("checked")) {dayofweeks.push("2");weekDays.push(_ui.weekly_tue.next("span").text())}
if (_ui.weekly_wed.prop("checked")) {dayofweeks.push("3");weekDays.push(_ui.weekly_wed.next("span").text())}
if (_ui.weekly_thur.prop("checked")) {dayofweeks.push("4");weekDays.push(_ui.weekly_thur.next("span").text())}
if (_ui.weekly_fri.prop("checked")) {dayofweeks.push("5");weekDays.push(_ui.weekly_fri.next("span").text())}
if (_ui.weekly_sat.prop("checked")) {dayofweeks.push("6");weekDays.push(_ui.weekly_sat.next("span").text())}
if (dayofweeks.length < 1) {scheduleContent = "";return ""}
for (var i in weekDays) {if (i == 0) {scheduleContent += weekDays[0]} else if (i < weekDays.length - 1) {scheduleContent += ", " + weekDays[i]} else {scheduleContent += " and " + weekDays[i]}}
crons[4] = dayofweeks.join(",");timepicker = _ui.weekly_time;if (interval != "1") {scheduleContent += " every " + interval + " weeks"} else {scheduleContent += " every week"}} else if (frequency == "Daily") {crons[4] = _ui.daily_include_weekends.prop("checked") ? "*" : "1,2,3,4,5";timepicker = _ui.daily_time;scheduleContent += _ui.daily_include_weekends.prop("checked") ? "Daily" : "Weekdays"}
var time = timepicker.val();if (time.length < 5) {time = "0" + time}
var tempDate = new Date(TEMP_DATE + "T" + time);crons[1] = tempDate.getHours() || 0;crons[0] = tempDate.getMinutes() || 0;const timeZone = rsb.connect.getTimeZoneDisplayName(window.arc.hooks.timeZoneId);scheduleContent += " at " + crons[1] + ":" + crons[0] + "(" + timeZone + ")";return crons.join(" ")}
var loadInfo = function($info) {if (!$info) return;if ($info.name) _ui.reportName.val($info.name);if ($info.timeperiod) {_ui.timePeriod.val($info.timeperiod);if ($info.timeperiod.toLowerCase() == "custom") {if ($info.timeperiodstart) {var startTime = new Date($info.timeperiodstart);_ui.timePeriodDateStart.val(startTime.getFullYear() + "-" + (startTime.getMonth() + 1) + "-" + startTime.getDate())} else {_ui.timePeriodDateStart.val("")}
if ($info.timeperiodend) {var endTime = new Date($info.timeperiodend);endTime.setDate(endTime.getDate() - 1);_ui.timePeriodDateEnd.val(endTime.getFullYear() + "-" + (endTime.getMonth() + 1) + "-" + endTime.getDate())} else {_ui.timePeriodDateEnd.val("")}
_ui.timePeriodCustomeDate.removeClass("hidden")} else {_ui.timePeriodCustomeDate.addClass("hidden")}} else {_ui.timePeriod.val("all")}
if ($info.columns) {var columnsList = $info.columns.split(",");var values = [];for (var i in columnsList) {values.push(columnsList[i].trim())}
_ui.columns_workspace.prop("checked", values.indexOf(COLUMNS_WORKSPACE) > -1);_ui.columns_connectorid.prop("checked", values.indexOf(COLUMNS_CONNECTOR_ID) > -1);_ui.columns_connectortype.prop("checked", values.indexOf(COLUMNS_CONNECTOR_TYPE) > -1);hasISASenderCol = values.indexOf(COLUMNS_SENDER_ID) > -1;_ui.columns_senderisaids.prop("checked", hasISASenderCol);hasISAReceiverCol = values.indexOf(COLUMNS_RECEIVER_ID) > -1;_ui.columns_receiverisaids.prop("checked", hasISAReceiverCol);hasTransactionSetCol = values.indexOf(COLUMNS_TRANSACTION_SET) > -1;_ui.columns_transactionset.prop("checked", hasTransactionSetCol);_ui.columns_transactionsall.prop("checked", values.indexOf(COLUMNS_TRANSACTION_ALL) > -1);_ui.columns_transactionssent.prop("checked", values.indexOf(COLUMNS_TRANSACTION_SENT) > -1);_ui.columns_transactionsreceived.prop("checked", values.indexOf(COLUMNS_TRANSACTION_RECEIVED) > -1);_ui.columns_processingtime.prop("checked", values.indexOf(COLUMNS_PROCESSING_TIME) > -1);_ui.columns_filesize.prop("checked", values.indexOf(COLUMNS_FILE_SIZE) > -1);_ui.columns_successful.prop("checked", values.indexOf(COLUMNS_TRANSACTION_SUCCESS) > -1);_ui.columns_error.prop("checked", values.indexOf(COLUMNS_TRANSACTION_ERROR) > -1);_ui.columns_warning.prop("checked", values.indexOf(COLUMNS_TRANSACTION_WARNING) > -1)} else {_ui.columns_workspace.prop("checked", false);_ui.columns_connectorid.prop("checked", false);_ui.columns_connectortype.prop("checked", false);_ui.columns_transactionsall.prop("checked", false);_ui.columns_transactionssent.prop("checked", false);_ui.columns_transactionsreceived.prop("checked", false);_ui.columns_processingtime.prop("checked", false);_ui.columns_filesize.prop("checked", false);_ui.columns_successful.prop("checked", false);_ui.columns_error.prop("checked", false);_ui.columns_warning.prop("checked", false)}
if ($info.grouprows) {var groupRowsList = $info.grouprows.split(",");var values = [];for (var i in groupRowsList) {values.push(groupRowsList[i].trim())}
_ui.grouprows_year.prop("checked", values.indexOf(GROUP_COLUMNS_YEAR) > -1);_ui.grouprows_quarter.prop("checked", values.indexOf(GROUP_COLUMNS_QUARTER) > -1);_ui.grouprows_month.prop("checked", values.indexOf(GROUP_COLUMNS_MONTH) > -1);_ui.grouprows_week.prop("checked", values.indexOf(GROUP_COLUMNS_WEEK) > -1);_ui.grouprows_workspace.prop("checked", values.indexOf(GROUP_COLUMNS_WORKSPACE) > -1);_ui.grouprows_connectortype.prop("checked", values.indexOf(GROUP_COLUMNS_CONNECTOR_TYPE) > -1);_ui.grouprows_transactionsets.prop("checked", values.indexOf(GROUP_COLUMNS_TRANSACTION_SET) > -1);if (hasISASenderCol && hasISAReceiverCol) {if (values.indexOf(GROUP_COLUMNS_SENDER_ID) > -1 || values.indexOf(GROUP_COLUMNS_RECEIVER_ID) > -1) {_ui.grouprows_isaids.prop("checked", true);_ui.grouprows_senderisaids_radio.prop("checked", values.indexOf(GROUP_COLUMNS_SENDER_ID) > -1);_ui.grouprows_receiverisaids_radio.prop("checked", values.indexOf(GROUP_COLUMNS_RECEIVER_ID) > -1)}
if (hasTransactionSetCol) {transactionSetStart = true;var indexOfTransactionSet = values.indexOf(GROUP_COLUMNS_TRANSACTION_SET);var indexOfISASender = values.indexOf(GROUP_COLUMNS_SENDER_ID);var indexOfISAReceiver = values.indexOf(GROUP_COLUMNS_RECEIVER_ID);if ((indexOfTransactionSet > -1 && indexOfISASender > -1 && indexOfTransactionSet > indexOfISASender) ||
(indexOfTransactionSet > -1 && indexOfISAReceiver > -1 && indexOfTransactionSet > indexOfISAReceiver)) {transactionSetStart = false}}} else if (hasISASenderCol || hasISAReceiverCol) {_ui.grouprows_isaids.prop("checked", false);_ui.grouprows_senderisaids_radio.prop("checked", true);_ui.grouprows_receiverisaids_radio.prop("checked", false);_ui.grouprows_isasender.prop("checked", values.indexOf(GROUP_COLUMNS_SENDER_ID) > -1);_ui.grouprows_isareceiver.prop("checked", values.indexOf(GROUP_COLUMNS_RECEIVER_ID) > -1)} else {_ui.grouprows_isaids.prop("checked", false);_ui.grouprows_isasender.prop("checked", false);_ui.grouprows_isareceiver.prop("checked", false);_ui.grouprows_senderisaids_radio.prop("checked", true);_ui.grouprows_receiverisaids_radio.prop("checked", false)}} else {_ui.grouprows_year.prop("checked", false);_ui.grouprows_quarter.prop("checked", false);_ui.grouprows_month.prop("checked", false);_ui.grouprows_week.prop("checked", false);_ui.grouprows_workspace.prop("checked", false);_ui.grouprows_connectortype.prop("checked", false);_ui.grouprows_isaids.prop("checked", false);_ui.grouprows_isasender.prop("checked", false);_ui.grouprows_isareceiver.prop("checked", false);_ui.grouprows_senderisaids_radio.prop("checked", true);_ui.grouprows_receiverisaids_radio.prop("checked", false)}
if (isEDIType) {updateGroupByDimension()}
if ($info.filters) {var filterMap = rsb.getMapFromString($info.filters);if (isEDIType) {if (filterMap.SenderISAId) {_ui.isaSenderFilter.loadData(filterMap.SenderISAId)} else {_ui.isaSenderFilter.clear()}
if (filterMap.ReceiverISAId) {_ui.isaReceiverFilter.loadData(filterMap.ReceiverISAId)} else {_ui.isaReceiverFilter.clear()}
if (filterMap.TransactionSet) {_ui.transactionSetFilter.loadData(filterMap.TransactionSet)} else {_ui.transactionSetFilter.clear()}} else {if (filterMap.ConnectorType) {_ui.connectorTypeFilter.loadData(filterMap.ConnectorType)} else {_ui.connectorTypeFilter.clear()}
if (filterMap.ConnectorId) {if (filterMap.ConnectorId.indexOf(":*") > -1) {var parts = filterMap.ConnectorId.split(",");var workspaces = [];for (var i in parts) {if (parts[i].indexOf(":*") > -1) {workspaces.push(parts[i].substring(0, parts[i].indexOf(":*")))}}
_ui.workspaceFilter.loadData(workspaces.join(","))} else {_ui.connectorIDFilter.loadData(filterMap.ConnectorId);var connectors = filterMap.ConnectorId.split(",");var workspaces = [];for (var i in connectors) {var parts = connectors[i].split(":");if (parts.length == 2 && !workspaces.includes(parts[0].trim())) {workspaces.push(parts[0].trim())}}
_ui.workspaceFilter.loadData(workspaces.join(","))}} else {_ui.connectorIDFilter.clear();_ui.workspaceFilter.clear()}
if (filterMap.Status) {_ui.statusFilter.loadData(filterMap.Status)} else {_ui.statusFilter.clear()}}}
if ($info.summary) {var dataSummaryList = $info.summary.split(",");var values = [];for (var i in dataSummaryList) {values.push(dataSummaryList[i].trim())}
_ui.datasummary_total.prop("checked", values.indexOf(SUMMARY_TOTAL) > -1);_ui.datasummary_average.prop("checked", values.indexOf(SUMMARY_AVERAGE) > -1);_ui.datasummary_minimum.prop("checked", values.indexOf(SUMMARY_MINIMUM) > -1);_ui.datasummary_maximum.prop("checked", values.indexOf(SUMMARY_MAXIMUM) > -1)} else {_ui.datasummary_total.prop("checked", false);_ui.datasummary_average.prop("checked", false);_ui.datasummary_minimum.prop("checked", false);_ui.datasummary_maximum.prop("checked", false)}
if ($info.schedule) {var crons = $info.schedule.split(" ");var allowed = true;if (crons.length != 5 && crons.length != 6) {allowed = false}
if (isNaN(crons[0]) || isNaN(crons[1])) {allowed = false}
if (crons[2] != "*") {if (isNaN(crons[2]) || crons[4] != "*") {allowed = false}}
if (crons[3] != "*") {allowed = false}
if (crons[4] != "*") {if (crons[4].indexOf(",") > -1) {var parts = crons[4].split(",");if (parts.length > 1) {for (var i in parts) {if (isNaN(parts[i])) {allowed = false}}} else {if (isNaN(parts[0])) {allowed = false}}} else if (crons[4].indexOf("#") > -1) {var parts = crons[4].split("#");if (parts.length != 2) {allowed = false} else {if (isNaN(parts[0])) {allowed = false}
if (isNaN(parts[1])) {allowed = false}}} else if (crons[4].length > 0) {if (isNaN(crons[4])) {allowed = false}}}
if (!allowed) {rsb.showResult($("#report_header_result_container"), 'It could not parse the schedule.', "error");_ui.frequency.val("None")} else {if (crons.length > 5) {if (crons[5][1].toLowerCase() == "m") {_ui.frequency.val("Monthly");_ui.monthly_interval.val(crons[5][0]);if (crons[2] != "*") {_ui.monthly_calendarday_radio.prop("checked", true);_ui.monthly_dayofweek_radio.prop("checked", false);_ui.monthly_calendarday_radio.change();_ui.monthly_calendarday_day.val(crons[2]);setTime(crons[0], crons[1], _ui.monthly_calendarday_time)} else {var parts = crons[4].split("#");_ui.monthly_calendarday_radio.prop("checked", false);_ui.monthly_dayofweek_radio.prop("checked", true);_ui.monthly_calendarday_radio.change();_ui.monthly_dayofweek_weekindex.val(parts[1]);_ui.monthly_dayofweek_week.val(parts[0]);setTime(crons[0], crons[1], _ui.monthly_dayofweek_time)}} else if (crons[5][1].toLowerCase() == "w") {_ui.frequency.val("Weekly");_ui.weekly_interval.val(crons[5][0]);var parts = crons[4].split(",");_ui.weekly_sun.prop("checked", parts.indexOf("0") > -1);_ui.weekly_mon.prop("checked", parts.indexOf("1") > -1);_ui.weekly_tue.prop("checked", parts.indexOf("2") > -1);_ui.weekly_wed.prop("checked", parts.indexOf("3") > -1);_ui.weekly_thur.prop("checked", parts.indexOf("4") > -1);_ui.weekly_fri.prop("checked", parts.indexOf("5") > -1);_ui.weekly_sat.prop("checked", parts.indexOf("6") > -1);setTime(crons[0], crons[1], _ui.weekly_time)}} else if (crons[2] == "*") {if (crons[4] == "*") {_ui.frequency.val("Daily");_ui.daily_include_weekends.prop("checked", true);setTime(crons[0], crons[1], _ui.daily_time)} else if (crons[4] == "1,2,3,4,5") {_ui.frequency.val("Daily");_ui.daily_include_weekends.prop("checked", false);setTime(crons[0], crons[1], _ui.daily_time)} else {var parts = crons[4].split("#");if (parts.length > 1) {_ui.frequency.val("Monthly");_ui.monthly_interval.val("1");_ui.monthly_calendarday_radio.prop("checked", false);_ui.monthly_dayofweek_radio.prop("checked", true);_ui.monthly_calendarday_radio.change();_ui.monthly_dayofweek_weekindex.val(parts[1]);_ui.monthly_dayofweek_week.val(parts[0]);setTime(crons[0], crons[1], _ui.monthly_dayofweek_time)} else {_ui.frequency.val("Weekly");_ui.weekly_interval.val(1);parts = crons[4].split(",");_ui.weekly_sun.prop("checked", parts.indexOf("0") > -1);_ui.weekly_mon.prop("checked", parts.indexOf("1") > -1);_ui.weekly_tue.prop("checked", parts.indexOf("2") > -1);_ui.weekly_wed.prop("checked", parts.indexOf("3") > -1);_ui.weekly_thur.prop("checked", parts.indexOf("4") > -1);_ui.weekly_fri.prop("checked", parts.indexOf("5") > -1);_ui.weekly_sat.prop("checked", parts.indexOf("6") > -1);setTime(crons[0], crons[1], _ui.weekly_time)}}} else {_ui.frequency.val("Monthly");_ui.monthly_interval.val("1");_ui.monthly_calendarday_radio.prop("checked", true);_ui.monthly_dayofweek_radio.prop("checked", false);_ui.monthly_calendarday_radio.change();_ui.monthly_calendarday_day.val(crons[2]);setTime(crons[0], crons[1], _ui.monthly_calendarday_time)}}
if ($info.emailreport) {var isEmailReport = $info.emailreport.toLowerCase() == "true";_ui.emailreport_checkbox.prop("checked", isEmailReport);if (isEmailReport) {_ui.email_report.removeClass("hidden")} else {_ui.email_report.addClass("hidden")}}} else {_ui.frequency.val("None")}
_ui.frequency.change();if ($info.startdate) {var startDate = new Date($info.startdate);_ui.frequency_startDate.val(startDate.getFullYear() + "-" + (startDate.getMonth() + 1) + "-" + startDate.getDate())} else {var startDate = new Date();_ui.frequency_startDate.val(startDate.getFullYear() + "-" + (startDate.getMonth() + 1) + "-" + startDate.getDate())}
_ui.frequency_startDate.change();if ($info.enddate) {var endDate = new Date($info.enddate);endDate.setHours(0);endDate.setSeconds(-1);_ui.frequency_endDate.val(endDate.getFullYear() + "-" + (endDate.getMonth() + 1) + "-" + endDate.getDate())} else {_ui.frequency_endDate.val("")}
if ($info.format) {if ($info.format.toLowerCase() == "csv") {_ui.format_csv.prop("checked", true);_ui.format_pdf.prop("checked", false)} else {_ui.format_csv.prop("checked", false);_ui.format_pdf.prop("checked", true)}}
if ($info.emailsubject) {_ui.subject.val($info.emailsubject)} else {_ui.subject.val("CData Arc Report " + $info.name)}
if ($info.emailrecipients) {_ui.recipients.load($info.emailrecipients)} else {_ui.recipients.load()}}
var showReport = function($name, $isTempReport) {$.ajax({dataType: "json",url: "src/checkRunningReport.rsb?@json&Name=" + encodeURIComponent($name) + "&" + rsb.securityRand(),type: "GET",success: function(data, textStatus, jqXHR) {var result = data["items"];var errMsg = rsb.getResultErrorMessage(result);if (errMsg) {rsb.showResult(rsb.reports.headerResultContainer, errMsg, "error");rsb.reports.reportProcess.hide()} else {if (result.length > 0 && rsb.getValueAsBool(result[0]["isrunning"], false)) {if (readReportStartTime && new Date().getTime() - readReportStartTime.getTime() >= 5000) {rsb.reports.reportProcess.loadingTempReport = isUnsaved();rsb.reports.reportProcess.loadingReportName = $name;rsb.reports.reportProcess.showNotifyBar(rsb.getValueAsBool(result[0]["notifyingreport"], false));readReportStartTime = null}
setTimeout(function() {showReport($name, $isTempReport)}, 1000)} else {if (isUnsaved()) {readReport($name, $isTempReport)} else {var currentInfo = getCurrentInfo();readReport(currentInfo.name, false)}}}}})}
var readReport = function($name, $isTempReport) {$.ajax({dataType: "json",url: "src/readReport.rsb?@json&Name=" + encodeURIComponent($name) + "&IsTempReport=" + encodeURIComponent($isTempReport) + "&" + rsb.securityRand(),type: "GET",success: function(data, textStatus, jqXHR) {var result = data["items"];var errMsg = rsb.getResultErrorMessage(result);if (errMsg) {rsb.showResult(rsb.reports.headerResultContainer, 'Last run report failed:'+ " " + errMsg, "error")} else {var options = {};options["columns"] = [];var hasConnectorType = false;var hasTransactionSet = false;var hasReceiverId = false;var groupRows = ($isTempReport ? getGroupRows() : originalInfo["grouprows"]).toLocaleLowerCase().split(",");var columns = ($isTempReport ? getColumns() : originalInfo["columns"]).toLocaleLowerCase().split(",");columnOrderList.forEach(function($name, $index) {if ((result.length > 0 && result[0][$name]) || columns.indexOf($name) > -1) {var columnOptions = {};columnOptions["title"] = columnNameMap[$name];columnOptions["data"] = $name;if ($name == GROUP_COLUMNS_YEAR.toLocaleLowerCase()
|| $name == GROUP_COLUMNS_QUARTER.toLocaleLowerCase()
|| $name == GROUP_COLUMNS_MONTH.toLocaleLowerCase()
|| $name == GROUP_COLUMNS_WEEK.toLocaleLowerCase()) {columnOptions["type"] = 2} else if ($name == COLUMNS_WORKSPACE.toLocaleLowerCase()) {if (groupRows.indexOf(COLUMNS_WORKSPACE.toLocaleLowerCase()) > -1) {columnOptions["type"] = 2} else {columnOptions["type"] = 1}} else if ($name == COLUMNS_CONNECTOR_ID.toLocaleLowerCase()) {columnOptions["type"] = 1} else if ($name == COLUMNS_SENDER_ID.toLocaleLowerCase()) {if (groupRows.indexOf(COLUMNS_SENDER_ID.toLocaleLowerCase()) > -1) {columnOptions["type"] = 2} else {columnOptions["type"] = 1}} else if ($name == COLUMNS_RECEIVER_ID.toLocaleLowerCase()) {hasReceiverId = true;if (groupRows.indexOf(COLUMNS_RECEIVER_ID.toLocaleLowerCase()) > -1) {columnOptions["type"] = 2} else {columnOptions["type"] = 1}} else if ($name == COLUMNS_TRANSACTION_SET.toLocaleLowerCase()) {hasTransactionSet = true;if (groupRows.indexOf(COLUMNS_TRANSACTION_SET.toLocaleLowerCase()) > -1) {columnOptions["type"] = 2} else {columnOptions["type"] = 1}} else if ($name == COLUMNS_CONNECTOR_TYPE.toLocaleLowerCase()) {hasConnectorType = true;if (groupRows.indexOf(COLUMNS_CONNECTOR_TYPE.toLocaleLowerCase()) > -1) {columnOptions["type"] = 2} else {columnOptions["type"] = 1}} else {columnOptions["type"] = 0;columnOptions["sort"] = 0}
if ($name == COLUMNS_FILE_SIZE.toLocaleLowerCase()) {columnOptions["formatter"] = "filesize"} else if ($name == COLUMNS_PROCESSING_TIME.toLocaleLowerCase()) {columnOptions["formatter"] = "timespan"}
options["columns"].push(columnOptions)}});if (hasConnectorType && groupRows.indexOf(COLUMNS_CONNECTOR_TYPE.toLocaleLowerCase()) > -1) {var connectorTypeIndex;options["columns"].forEach(function($elem, $index) {if ($elem["data"] == COLUMNS_CONNECTOR_TYPE.toLocaleLowerCase()) {connectorTypeIndex = $index}});var connectorTypeOptions = options["columns"][connectorTypeIndex];options["columns"].splice(connectorTypeIndex, 1);var insertIndex = 0;for (var i in options["columns"]) {if (options["columns"][i]["type"] != 2) {insertIndex = i;break}}
options["columns"].splice(insertIndex, 0, connectorTypeOptions)}
if (hasReceiverId && groupRows.indexOf(COLUMNS_RECEIVER_ID.toLocaleLowerCase()) > -1) {var receiverIdIndex;options["columns"].forEach(function($elem, $index) {if ($elem["data"] == COLUMNS_RECEIVER_ID.toLocaleLowerCase()) {receiverIdIndex = $index}});var receiverIdOptions = options["columns"][receiverIdIndex];options["columns"].splice(receiverIdIndex, 1);var insertIndex = 0;for (var i in options["columns"]) {if (options["columns"][i]["type"] != 2) {insertIndex = i;break}}
options["columns"].splice(insertIndex, 0, receiverIdOptions)}
if (hasTransactionSet) {var transactionSetGroupIndex = groupRows.indexOf(COLUMNS_TRANSACTION_SET.toLocaleLowerCase());if (transactionSetGroupIndex > -1) {var senderIdGroupIndex = groupRows.indexOf(COLUMNS_SENDER_ID.toLocaleLowerCase());var receiverIdGroupIndex = groupRows.indexOf(COLUMNS_RECEIVER_ID.toLocaleLowerCase());var isaIdGroupStartIndex = -1;var isaIdGroupEndIndex = -1;if (senderIdGroupIndex > -1) {isaIdGroupStartIndex = senderIdGroupIndex;isaIdGroupEndIndex = senderIdGroupIndex}
if (receiverIdGroupIndex > -1) {if (receiverIdGroupIndex < isaIdGroupStartIndex || isaIdGroupStartIndex < 0) {isaIdGroupStartIndex = receiverIdGroupIndex}
if (receiverIdGroupIndex > isaIdGroupEndIndex || isaIdGroupEndIndex < 0) {isaIdGroupEndIndex = receiverIdGroupIndex}}
var transactionSetIndex;options["columns"].forEach(function($elem, $index) {if ($elem["data"] == COLUMNS_TRANSACTION_SET.toLocaleLowerCase()) {transactionSetIndex = $index}});var transactionSetOptions = options["columns"][transactionSetIndex];var newIndex = transactionSetIndex;options["columns"].splice(transactionSetIndex, 1);if (isaIdGroupStartIndex < 0) {for (var i in options["columns"]) {if (options["columns"][i]["type"] != 2) {newIndex = i;break}}} else if (transactionSetGroupIndex < isaIdGroupStartIndex) {for (var i in options["columns"]) {if (options["columns"][i]["data"] == COLUMNS_SENDER_ID.toLocaleLowerCase() || options["columns"][i]["data"] == COLUMNS_RECEIVER_ID.toLocaleLowerCase()) {newIndex = parseInt(i);break}
if (options["columns"][i]["type"] != 2) {break}}} else if (transactionSetGroupIndex > isaIdGroupEndIndex) {for (var i in options["columns"]) {if (options["columns"][i]["data"] == COLUMNS_SENDER_ID.toLocaleLowerCase() || options["columns"][i]["data"] == COLUMNS_RECEIVER_ID.toLocaleLowerCase()) {newIndex = parseInt(i) + 1}
if (options["columns"][i]["type"] != 2) {break}}}
options["columns"].splice(newIndex, 0, transactionSetOptions)}}
for (var i in result) {result[i].connectortype = rsb.reports.connectorTypeDisplayNamesMap[result[i].connectortype]}
options["data"] = result;var summary = getDataSummary().split(",");options["summary"] = [];for (var i in summary) {var name = summary[i].trim();if (name == SUMMARY_TOTAL) {options["summary"]["total"] = true} else if (name == SUMMARY_AVERAGE) {options["summary"]["avg"] = true} else if (name == SUMMARY_MINIMUM) {options["summary"]["min"] = true} else if (name == SUMMARY_MAXIMUM) {options["summary"]["max"] = true}}
rsb.otable.render(rsb.reports.otable, options);if (result.length > 0) {rsb.reports.headerExportCsv.closest("li").prop("disabled", false);rsb.reports.headerExportCsv.attr("download", "report.txt");rsb.reports.headerExportCsv.attr("href", "src/downloadReport.rst?Name=" + encodeURIComponent($name) + "&IsTempReport=" + encodeURIComponent($isTempReport))} else {rsb.reports.headerExportCsv.closest("li").prop("disabled", true);rsb.reports.headerExportCsv.attr("download", null);rsb.reports.headerExportCsv.attr("href", null)}}}}).always(function() {rsb.reports.reportProcess.hide()})}
var onReset = function() {if (isUnsaved()) {currentInfo = getCurrentInfo();loadInfo(originalInfo);_ui.resetContentReset.addClass("hidden");_ui.resetContentUndoReset.removeClass("hidden");_ui.scheduleContentReset.addClass("hidden");_ui.scheduleResetContentUndoReset.removeClass("hidden")} else if (currentInfo) {loadInfo(currentInfo);_ui.resetContentReset.removeClass("hidden");_ui.resetContentUndoReset.addClass("hidden");_ui.scheduleContentReset.removeClass("hidden");_ui.scheduleResetContentUndoReset.addClass("hidden")}}
var saveChanges = function() {if (rsb.reports.headerSave) {rsb.reports.headerSave.mousedown()}}
var onRunReport = function() {var postData = {"@json": true, "_randomtoken": rsb.securityRand()};var isTempReport = isUnsaved();if (isTempReport) {$.extend(postData, getCurrentInfo());postData["IsTempReport"] = true} else {postData["name"] = _ui.reportName.val()}
_ui.runReportBtn.button("loading");$.ajax({dataType: "json",url: "src/admin/runReport.rsb",type: "POST",data: postData,success: function(data, textStatus, jqXHR) {var result = data["items"];var errMsg = rsb.getResultErrorMessage(result);if (errMsg) {rsb.showResult(rsb.reports.headerResultContainer, errMsg, "error")} else {if (isTempReport) {tempReportName = result[0]["name"]}
rsb.reports.reportProcess.show();rsb.reports.reportProcess.loadingReportName = result[0]["name"];rsb.reports.reportProcess.loadingTempReport = isTempReport;readReportStartTime = new Date();showReport(result[0]["name"], isTempReport)}}}).always(function() {_ui.runReportBtn.button("reset")})}
var getCurrentInfo = function() {var timePeriodEnd = "";if (_ui.timePeriodDateEnd.val()) {var endDate = new Date(_ui.timePeriodDateEnd.val());endDate.setDate(endDate.getDate() + 1);timePeriodEnd = endDate.getFullYear() + "-" + (endDate.getMonth() + 1) + "-" + endDate.getDate()}
var scheduleEnd = "";if (_ui.frequency_endDate.val()) {var endDate = new Date(_ui.frequency_endDate.val());endDate.setDate(endDate.getDate() + 1);scheduleEnd = endDate.getFullYear() + "-" + (endDate.getMonth() + 1) + "-" + endDate.getDate()}
var schedule = getSchedule();var timePeriod = _ui.timePeriod.val();var info = {"name" : _ui.reportName.val(),"type" : isEDIType ? "EDI" : "Connector","timeperiod" : timePeriod,"timeperiodstart" : timePeriod.toLowerCase() != "custom" ? "" : _ui.timePeriodDateStart.val(),"timeperiodend" : timePeriod.toLowerCase() != "custom" ? "" : timePeriodEnd,"columns" : getColumns(),"grouprows" : getGroupRows(),"filters" : getFilters(),"summary" : getDataSummary(),"schedule" : schedule,"startdate" : schedule == "" ? "" : _ui.frequency_startDate.val(),"enddate" : schedule == "" ? "" : scheduleEnd,"format" : schedule == "" ? "csv" : (_ui.format_csv.prop("checked") ? "csv" : "pdf"),"emailreport" : schedule == "" ? "false" : (_ui.emailreport_checkbox.prop("checked") ? "true" : "false"),"emailsubject" : schedule == "" ? "" : _ui.subject.val(),"emailrecipients" : schedule == "" ? "" : _ui.recipients.getValue()}
return info}
var isUnsaved = function() {var currentInfo = getCurrentInfo();if (originalInfo.length != currentInfo.length) {return true}
for (var name in originalInfo) {if (originalInfo[name] != currentInfo[name]) {return true}}
return false}
this.getSchedule = function() {getSchedule();return scheduleContent}
this.getNextRunTime = function() {return nextRunTime}
this.setNextRunTime = function($time) {nextRunTime = null;if ($time) {nextRunTime = new Date($time)}}
this.setName = function($name) {_ui.reportName.val($name)}
this.unsaved = function() {return isUnsaved()}
this.setSaved = function() {originalInfo = getCurrentInfo();tempReportName = null;rsb.reports.headerExportCsv.attr("download", "report.csv");rsb.reports.headerExportCsv.attr("href", "src/downloadReport.rst?Name=" + encodeURIComponent(originalInfo.name));if (rsb.reports.reportProcess.isShowing()) {rsb.reports.reportProcess.loadingTempReport = false;rsb.reports.reportProcess.refreshNofityBar()}}
this.getCurrentReport = function() {var report = getCurrentInfo();report["TempReportName"] = tempReportName;return report}
this.getOriginalReport = function() {return originalInfo}
this.getTempReportName = function() {return tempReportName}
this.init = function($original) {isEDIType = $original.type.toLowerCase() == "edi";if ($original.nextruntime) {nextRunTime = new Date($original.nextruntime)}
_ui.nav.find(".report-nav-tabs a").click(function($e) {rsb.stopPropagation($e);var selector = $(this).attr("data-bs-target");_ui.nav.find(".report-nav-tabs li a").removeClass("active");_ui.nav.find(".tab-pane").removeClass("active in");$(this).closest("li a").addClass("active");_ui.nav.find(".tab-pane" + selector).addClass("active in")});if (!rsb.reports.readonly) {_ui.timePeriod.change(function(){if ($(this).val().toLowerCase() == 'custom') {_ui.timePeriodCustomeDate.removeClass('hidden')} else {_ui.timePeriodCustomeDate.addClass('hidden')}});_ui.timePeriodDateStart.datepicker(DATE_FORMAT);_ui.timePeriodDateEnd.datepicker(DATE_FORMAT);_ui.timePeriodDateStartIcon.on("click", function(){$(this).closest("div").find("input").focus()});_ui.timePeriodDateEndIcon.on("click", function(){$(this).closest("div").find("input").focus()});_ui.resetBtn.on("click", onReset);_ui.runReportBtn.on("click", onRunReport);_ui.build.find("input, select").change(function() {_ui.resetContentReset.removeClass("hidden");_ui.resetContentUndoReset.addClass("hidden")});_ui.emailreport_checkbox.click(function() {if ($(this).prop("checked")) {_ui.email_report.removeClass("hidden")} else {_ui.email_report.addClass("hidden")}});_ui.monthly_calendarday_radio.change(function() {if ($(this).prop("checked")) {_ui.monthly_calendarday.removeClass("hidden");_ui.monthly_dayofweek.addClass("hidden")} else {_ui.monthly_calendarday.addClass("hidden");_ui.monthly_dayofweek.removeClass("hidden")}});_ui.monthly_dayofweek_radio.change(function() {if ($(this).prop("checked")) {_ui.monthly_calendarday.addClass("hidden");_ui.monthly_dayofweek.removeClass("hidden")} else {_ui.monthly_calendarday.removeClass("hidden");_ui.monthly_dayofweek.addClass("hidden")}});_ui.monthly_calendarday_time.timepicker(TIME_FORMAT);_ui.monthly_dayofweek_time.timepicker(TIME_FORMAT);_ui.weekly_time.timepicker(TIME_FORMAT);_ui.daily_time.timepicker(TIME_FORMAT);_ui.frequency_startDate.datepicker(DATE_FORMAT);_ui.frequency_endDate.datepicker(DATE_FORMAT);_ui.frequency_startDate.next("span").on("click", function(){$(this).closest("div").find("input").focus()});_ui.frequency_endDate.next("span").on("click", function(){$(this).closest("div").find("input").focus()});_ui.frequency_endDate_clear.on("click", function() {_ui.frequency_endDate.val("")});_ui.recipients.init();_ui.scheduleResetBtn.on("click", onReset);_ui.applyBtn.on("click", saveChanges);_ui.schedule.find("input, select").change(function() {_ui.scheduleContentReset.removeClass("hidden");_ui.scheduleResetContentUndoReset.addClass("hidden")});_ui.timeZoneLabel.text(rsb.evalTemplate('Based on $name$', {"name" : rsb.connect.getTimeZoneDisplayName(window.arc.hooks.timeZoneId)}))} else {_ui.frequency_endDate_clear.addClass("hidden")}
_ui.frequency.change(function() {var value = $(this).val();if (value == "None") {_ui.frequency_monthly.addClass("hidden");_ui.frequency_weekly.addClass("hidden");_ui.frequency_daily.addClass("hidden");_ui.run_dates.addClass("hidden");_ui.email_report.addClass("hidden");_ui.emailreport_checkbox.closest("div").addClass("hidden");if (_ui.configalert) {_ui.configalert.addClass("hidden")}
return} else {_ui.emailreport_checkbox.closest("div").removeClass("hidden");if (_ui.configalert && !rsb.reports.readonly) {_ui.configalert.removeClass("hidden")}}
if (value == "Monthly") {_ui.frequency_monthly.removeClass("hidden");_ui.frequency_weekly.addClass("hidden");_ui.frequency_daily.addClass("hidden")} else if (value == "Weekly") {_ui.frequency_monthly.addClass("hidden");_ui.frequency_weekly.removeClass("hidden");_ui.frequency_daily.addClass("hidden")} else if (value == "Daily") {_ui.frequency_monthly.addClass("hidden");_ui.frequency_weekly.addClass("hidden");_ui.frequency_daily.removeClass("hidden")}
_ui.run_dates.removeClass("hidden");if (_ui.emailreport_checkbox.prop("checked")) {_ui.email_report.removeClass("hidden")} else {_ui.email_report.addClass("hidden")}});if (isEDIType) {initGroupByDimension();_ui.isaSenderFilter.init();_ui.isaReceiverFilter.init();_ui.transactionSetFilter.init()} else {_ui.workspaceFilter.init();_ui.connectorIDFilter.init();_ui.connectorTypeFilter.init();_ui.statusFilter.init()}
loadInfo($original);if (!transactionSetStart) {_ui.grouprows_showAfterISA.click()}
if (rsb.reports.readonly) {_ui.nav.find("input, select").prop("disabled", true);_ui.resetBtn.prop("disabled", true);_ui.scheduleResetBtn.prop("disabled", true);_ui.runReportBtn.prop("disabled", true);_ui.applyBtn.prop("disabled", true);_ui.workspaceFilter.getClearSpan().addClass("hidden");_ui.connectorIDFilter.getClearSpan().addClass("hidden");_ui.connectorTypeFilter.getClearSpan().addClass("hidden");_ui.statusFilter.getClearSpan().addClass("hidden");_ui.isaSenderFilter.getClearSpan().addClass("hidden");_ui.isaReceiverFilter.getClearSpan().addClass("hidden");_ui.transactionSetFilter.getClearSpan().addClass("hidden")}
originalInfo = getCurrentInfo();readReportStartTime = new Date();showReport(originalInfo["name"], false);_ui.resetContentReset.removeClass("hidden");_ui.resetContentUndoReset.addClass("hidden");_ui.scheduleContentReset.removeClass("hidden");_ui.scheduleResetContentUndoReset.addClass("hidden");isReady = true;while (readyCallback.length > 0) {const callback = readyCallback.pop();callback()}}
this.ready = (callback) => {if (isReady) {callback()} else {readyCallback.push(callback)}}};rsb.reports.nav = new rsb.reports.sidebar.nav();